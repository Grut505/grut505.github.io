var Jp=Object.defineProperty;var Zp=(e,t,r)=>t in e?Jp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Fu=(e,t,r)=>Zp(e,typeof t!="symbol"?t+"":t,r);function qp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const a=Object.getOwnPropertyDescriptor(n,l);a&&Object.defineProperty(e,l,a.get?a:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function xo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kf={exports:{}},ql={},Cf={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),e0=Symbol.for("react.portal"),t0=Symbol.for("react.fragment"),r0=Symbol.for("react.strict_mode"),n0=Symbol.for("react.profiler"),s0=Symbol.for("react.provider"),l0=Symbol.for("react.context"),a0=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),o0=Symbol.for("react.memo"),c0=Symbol.for("react.lazy"),Du=Symbol.iterator;function u0(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var _f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ef=Object.assign,Pf={};function Bn(e,t,r){this.props=e,this.context=t,this.refs=Pf,this.updater=r||_f}Bn.prototype.isReactComponent={};Bn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lf(){}Lf.prototype=Bn.prototype;function vo(e,t,r){this.props=e,this.context=t,this.refs=Pf,this.updater=r||_f}var yo=vo.prototype=new Lf;yo.constructor=vo;Ef(yo,Bn.prototype);yo.isPureReactComponent=!0;var Ru=Array.isArray,Ff=Object.prototype.hasOwnProperty,wo={current:null},Df={key:!0,ref:!0,__self:!0,__source:!0};function Rf(e,t,r){var n,l={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Ff.call(t,n)&&!Df.hasOwnProperty(n)&&(l[n]=t[n]);var o=arguments.length-2;if(o===1)l.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];l.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)l[n]===void 0&&(l[n]=o[n]);return{$$typeof:As,type:e,key:a,ref:i,props:l,_owner:wo.current}}function d0(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jo(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function f0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Tu=/\/+/g;function Ea(e,t){return typeof e=="object"&&e!==null&&e.key!=null?f0(""+e.key):t.toString(36)}function pl(e,t,r,n,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case As:case e0:i=!0}}if(i)return i=e,l=l(i),e=n===""?"."+Ea(i,0):n,Ru(l)?(r="",e!=null&&(r=e.replace(Tu,"$&/")+"/"),pl(l,t,r,"",function(u){return u})):l!=null&&(jo(l)&&(l=d0(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Tu,"$&/")+"/")+e)),t.push(l)),1;if(i=0,n=n===""?".":n+":",Ru(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Ea(a,o);i+=pl(a,t,r,c,l)}else if(c=u0(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Ea(a,o++),i+=pl(a,t,r,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Js(e,t,r){if(e==null)return e;var n=[],l=0;return pl(e,n,"","",function(a){return t.call(r,a,l++)}),n}function m0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},gl={transition:null},h0={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:gl,ReactCurrentOwner:wo};function Tf(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Js,forEach:function(e,t,r){Js(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Js(e,function(){t++}),t},toArray:function(e){return Js(e,function(t){return t})||[]},only:function(e){if(!jo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Bn;ue.Fragment=t0;ue.Profiler=n0;ue.PureComponent=vo;ue.StrictMode=r0;ue.Suspense=i0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h0;ue.act=Tf;ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ef({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=wo.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Ff.call(t,c)&&!Df.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:As,type:e.type,key:l,ref:a,props:n,_owner:i}};ue.createContext=function(e){return e={$$typeof:l0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:s0,_context:e},e.Consumer=e};ue.createElement=Rf;ue.createFactory=function(e){var t=Rf.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:a0,render:e}};ue.isValidElement=jo;ue.lazy=function(e){return{$$typeof:c0,_payload:{_status:-1,_result:e},_init:m0}};ue.memo=function(e,t){return{$$typeof:o0,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=gl.transition;gl.transition={};try{e()}finally{gl.transition=t}};ue.unstable_act=Tf;ue.useCallback=function(e,t){return ft.current.useCallback(e,t)};ue.useContext=function(e){return ft.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};ue.useEffect=function(e,t){return ft.current.useEffect(e,t)};ue.useId=function(){return ft.current.useId()};ue.useImperativeHandle=function(e,t,r){return ft.current.useImperativeHandle(e,t,r)};ue.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return ft.current.useMemo(e,t)};ue.useReducer=function(e,t,r){return ft.current.useReducer(e,t,r)};ue.useRef=function(e){return ft.current.useRef(e)};ue.useState=function(e){return ft.current.useState(e)};ue.useSyncExternalStore=function(e,t,r){return ft.current.useSyncExternalStore(e,t,r)};ue.useTransition=function(){return ft.current.useTransition()};ue.version="18.3.1";Cf.exports=ue;var d=Cf.exports;const bo=xo(d),p0=qp({__proto__:null,default:bo},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0=d,x0=Symbol.for("react.element"),v0=Symbol.for("react.fragment"),y0=Object.prototype.hasOwnProperty,w0=g0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j0={key:!0,ref:!0,__self:!0,__source:!0};function If(e,t,r){var n,l={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)y0.call(t,n)&&!j0.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)l[n]===void 0&&(l[n]=t[n]);return{$$typeof:x0,type:e,key:a,ref:i,props:l,_owner:w0.current}}ql.Fragment=v0;ql.jsx=If;ql.jsxs=If;kf.exports=ql;var s=kf.exports,fi={},Mf={exports:{}},Rt={},Af={exports:{}},zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,I){var A=F.length;F.push(I);e:for(;0<A;){var B=A-1>>>1,q=F[B];if(0<l(q,I))F[B]=I,F[A]=q,A=B;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var I=F[0],A=F.pop();if(A!==I){F[0]=A;e:for(var B=0,q=F.length,ge=q>>>1;B<ge;){var Y=2*(B+1)-1,ie=F[Y],se=Y+1,we=F[se];if(0>l(ie,A))se<q&&0>l(we,ie)?(F[B]=we,F[se]=A,B=se):(F[B]=ie,F[Y]=A,B=Y);else if(se<q&&0>l(we,A))F[B]=we,F[se]=A,B=se;else break e}}return I}function l(F,I){var A=F.sortIndex-I.sortIndex;return A!==0?A:F.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],m=1,f=null,x=3,g=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(F){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=F)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function j(F){if(b=!1,v(F),!w)if(r(c)!==null)w=!0,H(E);else{var I=r(u);I!==null&&ne(j,I.startTime-F)}}function E(F,I){w=!1,b&&(b=!1,p(N),N=-1),g=!0;var A=x;try{for(v(I),f=r(c);f!==null&&(!(f.expirationTime>I)||F&&!Q());){var B=f.callback;if(typeof B=="function"){f.callback=null,x=f.priorityLevel;var q=B(f.expirationTime<=I);I=e.unstable_now(),typeof q=="function"?f.callback=q:f===r(c)&&n(c),v(I)}else n(c);f=r(c)}if(f!==null)var ge=!0;else{var Y=r(u);Y!==null&&ne(j,Y.startTime-I),ge=!1}return ge}finally{f=null,x=A,g=!1}}var P=!1,L=null,N=-1,z=5,T=-1;function Q(){return!(e.unstable_now()-T<z)}function U(){if(L!==null){var F=e.unstable_now();T=F;var I=!0;try{I=L(!0,F)}finally{I?O():(P=!1,L=null)}}else P=!1}var O;if(typeof h=="function")O=function(){h(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=U,O=function(){J.postMessage(null)}}else O=function(){S(U,0)};function H(F){L=F,P||(P=!0,O())}function ne(F,I){N=S(function(){F(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,H(E))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(F){switch(x){case 1:case 2:case 3:var I=3;break;default:I=x}var A=x;x=I;try{return F()}finally{x=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,I){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var A=x;x=F;try{return I()}finally{x=A}},e.unstable_scheduleCallback=function(F,I,A){var B=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,F){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=A+q,F={id:m++,callback:I,priorityLevel:F,startTime:A,expirationTime:q,sortIndex:-1},A>B?(F.sortIndex=A,t(u,F),r(c)===null&&F===r(u)&&(b?(p(N),N=-1):b=!0,ne(j,A-B))):(F.sortIndex=q,t(c,F),w||g||(w=!0,H(E))),F},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(F){var I=x;return function(){var A=x;x=I;try{return F.apply(this,arguments)}finally{x=A}}}})(zf);Af.exports=zf;var b0=Af.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0=d,Dt=b0;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Of=new Set,xs={};function un(e,t){Tn(e,t),Tn(e+"Capture",t)}function Tn(e,t){for(xs[e]=t,e=0;e<t.length;e++)Of.add(t[e])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mi=Object.prototype.hasOwnProperty,S0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iu={},Mu={};function k0(e){return mi.call(Mu,e)?!0:mi.call(Iu,e)?!1:S0.test(e)?Mu[e]=!0:(Iu[e]=!0,!1)}function C0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _0(e,t,r,n){if(t===null||typeof t>"u"||C0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,r,n,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var No=/[\-:]([a-z])/g;function So(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(No,So);rt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(No,So);rt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(No,So);rt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ko(e,t,r,n){var l=rt.hasOwnProperty(t)?rt[t]:null;(l!==null?l.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_0(t,r,l,n)&&(r=null),n||l===null?k0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,n=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var wr=N0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),gn=Symbol.for("react.portal"),xn=Symbol.for("react.fragment"),Co=Symbol.for("react.strict_mode"),hi=Symbol.for("react.profiler"),$f=Symbol.for("react.provider"),Uf=Symbol.for("react.context"),_o=Symbol.for("react.forward_ref"),pi=Symbol.for("react.suspense"),gi=Symbol.for("react.suspense_list"),Eo=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),Au=Symbol.iterator;function Yn(e){return e===null||typeof e!="object"?null:(e=Au&&e[Au]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Pa;function ss(e){if(Pa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pa=t&&t[1]||""}return`
`+Pa+e}var La=!1;function Fa(e,t){if(!e||La)return"";La=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var l=u.stack.split(`
`),a=n.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{La=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ss(e):""}function E0(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Fa(e.type,!1),e;case 11:return e=Fa(e.type.render,!1),e;case 1:return e=Fa(e.type,!0),e;default:return""}}function xi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xn:return"Fragment";case gn:return"Portal";case hi:return"Profiler";case Co:return"StrictMode";case pi:return"Suspense";case gi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uf:return(e.displayName||"Context")+".Consumer";case $f:return(e._context.displayName||"Context")+".Provider";case _o:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eo:return t=e.displayName||null,t!==null?t:xi(e.type)||"Memo";case Nr:t=e._payload,e=e._init;try{return xi(e(t))}catch{}}return null}function P0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xi(t);case 8:return t===Co?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function L0(e){var t=Wf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qs(e){e._valueTracker||(e._valueTracker=L0(e))}function Vf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Wf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function El(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vi(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hf(e,t){t=t.checked,t!=null&&ko(e,"checked",t,!1)}function yi(e,t){Hf(e,t);var r=zr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wi(e,t.type,r):t.hasOwnProperty("defaultValue")&&wi(e,t.type,zr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ou(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wi(e,t,r){(t!=="number"||El(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ls=Array.isArray;function En(e,t,r,n){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zr(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ji(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $u(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(ls(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zr(r)}}function Gf(e,t){var r=zr(t.value),n=zr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Uu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var el,Xf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(el=el||document.createElement("div"),el.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=el.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F0=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){F0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function Qf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function Kf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,l=Qf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,l):e[r]=l}}var D0=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(e,t){if(t){if(D0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Si(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ki=null;function Po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ci=null,Pn=null,Ln=null;function Bu(e){if(e=$s(e)){if(typeof Ci!="function")throw Error(R(280));var t=e.stateNode;t&&(t=sa(t),Ci(e.stateNode,e.type,t))}}function Jf(e){Pn?Ln?Ln.push(e):Ln=[e]:Pn=e}function Zf(){if(Pn){var e=Pn,t=Ln;if(Ln=Pn=null,Bu(e),t)for(e=0;e<t.length;e++)Bu(t[e])}}function qf(e,t){return e(t)}function em(){}var Da=!1;function tm(e,t,r){if(Da)return e(t,r);Da=!0;try{return qf(e,t,r)}finally{Da=!1,(Pn!==null||Ln!==null)&&(em(),Zf())}}function ys(e,t){var r=e.stateNode;if(r===null)return null;var n=sa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var _i=!1;if(gr)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{_i=!1}function R0(e,t,r,n,l,a,i,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(m){this.onError(m)}}var cs=!1,Pl=null,Ll=!1,Ei=null,T0={onError:function(e){cs=!0,Pl=e}};function I0(e,t,r,n,l,a,i,o,c){cs=!1,Pl=null,R0.apply(T0,arguments)}function M0(e,t,r,n,l,a,i,o,c){if(I0.apply(this,arguments),cs){if(cs){var u=Pl;cs=!1,Pl=null}else throw Error(R(198));Ll||(Ll=!0,Ei=u)}}function dn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function rm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wu(e){if(dn(e)!==e)throw Error(R(188))}function A0(e){var t=e.alternate;if(!t){if(t=dn(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(n=l.return,n!==null){r=n;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return Wu(l),e;if(a===n)return Wu(l),t;a=a.sibling}throw Error(R(188))}if(r.return!==n.return)r=l,n=a;else{for(var i=!1,o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function nm(e){return e=A0(e),e!==null?sm(e):null}function sm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sm(e);if(t!==null)return t;e=e.sibling}return null}var lm=Dt.unstable_scheduleCallback,Vu=Dt.unstable_cancelCallback,z0=Dt.unstable_shouldYield,O0=Dt.unstable_requestPaint,ze=Dt.unstable_now,$0=Dt.unstable_getCurrentPriorityLevel,Lo=Dt.unstable_ImmediatePriority,am=Dt.unstable_UserBlockingPriority,Fl=Dt.unstable_NormalPriority,U0=Dt.unstable_LowPriority,im=Dt.unstable_IdlePriority,ea=null,lr=null;function B0(e){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(ea,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:H0,W0=Math.log,V0=Math.LN2;function H0(e){return e>>>=0,e===0?32:31-(W0(e)/V0|0)|0}var tl=64,rl=4194304;function as(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,l=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~l;o!==0?n=as(o):(a&=i,a!==0&&(n=as(a)))}else i=r&~l,i!==0?n=as(i):a!==0&&(n=as(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&l)&&(l=n&-n,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jt(t),l=1<<r,n|=e[r],t&=~l;return n}function G0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Jt(a),o=1<<i,c=l[i];c===-1?(!(o&r)||o&n)&&(l[i]=G0(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Pi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function om(){var e=tl;return tl<<=1,!(tl&4194240)&&(tl=64),e}function Ra(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=r}function X0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Jt(r),a=1<<l;t[l]=0,n[l]=-1,e[l]=-1,r&=~a}}function Fo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Jt(r),l=1<<n;l&t|e[n]&t&&(e[n]|=t),r&=~l}}var xe=0;function cm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var um,Do,dm,fm,mm,Li=!1,nl=[],Lr=null,Fr=null,Dr=null,ws=new Map,js=new Map,kr=[],Q0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hu(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(t.pointerId)}}function Qn(e,t,r,n,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[l]},t!==null&&(t=$s(t),t!==null&&Do(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function K0(e,t,r,n,l){switch(t){case"focusin":return Lr=Qn(Lr,e,t,r,n,l),!0;case"dragenter":return Fr=Qn(Fr,e,t,r,n,l),!0;case"mouseover":return Dr=Qn(Dr,e,t,r,n,l),!0;case"pointerover":var a=l.pointerId;return ws.set(a,Qn(ws.get(a)||null,e,t,r,n,l)),!0;case"gotpointercapture":return a=l.pointerId,js.set(a,Qn(js.get(a)||null,e,t,r,n,l)),!0}return!1}function hm(e){var t=Jr(e.target);if(t!==null){var r=dn(t);if(r!==null){if(t=r.tag,t===13){if(t=rm(r),t!==null){e.blockedOn=t,mm(e.priority,function(){dm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ki=n,r.target.dispatchEvent(n),ki=null}else return t=$s(r),t!==null&&Do(t),e.blockedOn=r,!1;t.shift()}return!0}function Gu(e,t,r){xl(e)&&r.delete(t)}function J0(){Li=!1,Lr!==null&&xl(Lr)&&(Lr=null),Fr!==null&&xl(Fr)&&(Fr=null),Dr!==null&&xl(Dr)&&(Dr=null),ws.forEach(Gu),js.forEach(Gu)}function Kn(e,t){e.blockedOn===t&&(e.blockedOn=null,Li||(Li=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,J0)))}function bs(e){function t(l){return Kn(l,e)}if(0<nl.length){Kn(nl[0],e);for(var r=1;r<nl.length;r++){var n=nl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lr!==null&&Kn(Lr,e),Fr!==null&&Kn(Fr,e),Dr!==null&&Kn(Dr,e),ws.forEach(t),js.forEach(t),r=0;r<kr.length;r++)n=kr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<kr.length&&(r=kr[0],r.blockedOn===null);)hm(r),r.blockedOn===null&&kr.shift()}var Fn=wr.ReactCurrentBatchConfig,Rl=!0;function Z0(e,t,r,n){var l=xe,a=Fn.transition;Fn.transition=null;try{xe=1,Ro(e,t,r,n)}finally{xe=l,Fn.transition=a}}function q0(e,t,r,n){var l=xe,a=Fn.transition;Fn.transition=null;try{xe=4,Ro(e,t,r,n)}finally{xe=l,Fn.transition=a}}function Ro(e,t,r,n){if(Rl){var l=Fi(e,t,r,n);if(l===null)Wa(e,t,n,Tl,r),Hu(e,n);else if(K0(l,e,t,r,n))n.stopPropagation();else if(Hu(e,n),t&4&&-1<Q0.indexOf(e)){for(;l!==null;){var a=$s(l);if(a!==null&&um(a),a=Fi(e,t,r,n),a===null&&Wa(e,t,n,Tl,r),a===l)break;l=a}l!==null&&n.stopPropagation()}else Wa(e,t,n,null,r)}}var Tl=null;function Fi(e,t,r,n){if(Tl=null,e=Po(n),e=Jr(e),e!==null)if(t=dn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=rm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tl=e,null}function pm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($0()){case Lo:return 1;case am:return 4;case Fl:case U0:return 16;case im:return 536870912;default:return 16}default:return 16}}var _r=null,To=null,vl=null;function gm(){if(vl)return vl;var e,t=To,r=t.length,n,l="value"in _r?_r.value:_r.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===l[a-n];n++);return vl=l.slice(e,1<n?1-n:void 0)}function yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function Yu(){return!1}function Tt(e){function t(r,n,l,a,i){this._reactName=r,this._targetInst=l,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?sl:Yu,this.isPropagationStopped=Yu,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=Tt(Wn),Os=De({},Wn,{view:0,detail:0}),eg=Tt(Os),Ta,Ia,Jn,ta=De({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jn&&(Jn&&e.type==="mousemove"?(Ta=e.screenX-Jn.screenX,Ia=e.screenY-Jn.screenY):Ia=Ta=0,Jn=e),Ta)},movementY:function(e){return"movementY"in e?e.movementY:Ia}}),Xu=Tt(ta),tg=De({},ta,{dataTransfer:0}),rg=Tt(tg),ng=De({},Os,{relatedTarget:0}),Ma=Tt(ng),sg=De({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),lg=Tt(sg),ag=De({},Wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ig=Tt(ag),og=De({},Wn,{data:0}),Qu=Tt(og),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ug={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dg[e])?!!t[e]:!1}function Mo(){return fg}var mg=De({},Os,{key:function(e){if(e.key){var t=cg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ug[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(e){return e.type==="keypress"?yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hg=Tt(mg),pg=De({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ku=Tt(pg),gg=De({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),xg=Tt(gg),vg=De({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),yg=Tt(vg),wg=De({},ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jg=Tt(wg),bg=[9,13,27,32],Ao=gr&&"CompositionEvent"in window,us=null;gr&&"documentMode"in document&&(us=document.documentMode);var Ng=gr&&"TextEvent"in window&&!us,xm=gr&&(!Ao||us&&8<us&&11>=us),Ju=" ",Zu=!1;function vm(e,t){switch(e){case"keyup":return bg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ym(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vn=!1;function Sg(e,t){switch(e){case"compositionend":return ym(t);case"keypress":return t.which!==32?null:(Zu=!0,Ju);case"textInput":return e=t.data,e===Ju&&Zu?null:e;default:return null}}function kg(e,t){if(vn)return e==="compositionend"||!Ao&&vm(e,t)?(e=gm(),vl=To=_r=null,vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xm&&t.locale!=="ko"?null:t.data;default:return null}}var Cg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cg[e.type]:t==="textarea"}function wm(e,t,r,n){Jf(n),t=Il(t,"onChange"),0<t.length&&(r=new Io("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ds=null,Ns=null;function _g(e){Fm(e,0)}function ra(e){var t=jn(e);if(Vf(t))return e}function Eg(e,t){if(e==="change")return t}var jm=!1;if(gr){var Aa;if(gr){var za="oninput"in document;if(!za){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),za=typeof ed.oninput=="function"}Aa=za}else Aa=!1;jm=Aa&&(!document.documentMode||9<document.documentMode)}function td(){ds&&(ds.detachEvent("onpropertychange",bm),Ns=ds=null)}function bm(e){if(e.propertyName==="value"&&ra(Ns)){var t=[];wm(t,Ns,e,Po(e)),tm(_g,t)}}function Pg(e,t,r){e==="focusin"?(td(),ds=t,Ns=r,ds.attachEvent("onpropertychange",bm)):e==="focusout"&&td()}function Lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ra(Ns)}function Fg(e,t){if(e==="click")return ra(t)}function Dg(e,t){if(e==="input"||e==="change")return ra(t)}function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:Rg;function Ss(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var l=r[n];if(!mi.call(t,l)||!er(e[l],t[l]))return!1}return!0}function rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,t){var r=rd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rd(r)}}function Nm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sm(){for(var e=window,t=El();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=El(e.document)}return t}function zo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tg(e){var t=Sm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Nm(r.ownerDocument.documentElement,r)){if(n!==null&&zo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,a=Math.min(n.start,l);n=n.end===void 0?a:Math.min(n.end,l),!e.extend&&a>n&&(l=n,n=a,a=l),l=nd(r,a);var i=nd(r,n);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ig=gr&&"documentMode"in document&&11>=document.documentMode,yn=null,Di=null,fs=null,Ri=!1;function sd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ri||yn==null||yn!==El(n)||(n=yn,"selectionStart"in n&&zo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fs&&Ss(fs,n)||(fs=n,n=Il(Di,"onSelect"),0<n.length&&(t=new Io("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function ll(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},Oa={},km={};gr&&(km=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);function na(e){if(Oa[e])return Oa[e];if(!wn[e])return e;var t=wn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in km)return Oa[e]=t[r];return e}var Cm=na("animationend"),_m=na("animationiteration"),Em=na("animationstart"),Pm=na("transitionend"),Lm=new Map,ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(e,t){Lm.set(e,t),un(t,[e])}for(var $a=0;$a<ld.length;$a++){var Ua=ld[$a],Mg=Ua.toLowerCase(),Ag=Ua[0].toUpperCase()+Ua.slice(1);$r(Mg,"on"+Ag)}$r(Cm,"onAnimationEnd");$r(_m,"onAnimationIteration");$r(Em,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(Pm,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));un("onBeforeInput",["compositionend","keypress","textInput","paste"]);un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function ad(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,M0(n,t,void 0,e),e.currentTarget=null}function Fm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],l=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&l.isPropagationStopped())break e;ad(l,o,u),a=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&l.isPropagationStopped())break e;ad(l,o,u),a=c}}}if(Ll)throw e=Ei,Ll=!1,Ei=null,e}function ke(e,t){var r=t[zi];r===void 0&&(r=t[zi]=new Set);var n=e+"__bubble";r.has(n)||(Dm(t,e,2,!1),r.add(n))}function Ba(e,t,r){var n=0;t&&(n|=4),Dm(r,e,n,t)}var al="_reactListening"+Math.random().toString(36).slice(2);function ks(e){if(!e[al]){e[al]=!0,Of.forEach(function(r){r!=="selectionchange"&&(zg.has(r)||Ba(r,!1,e),Ba(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[al]||(t[al]=!0,Ba("selectionchange",!1,t))}}function Dm(e,t,r,n){switch(pm(t)){case 1:var l=Z0;break;case 4:l=q0;break;default:l=Ro}r=l.bind(null,t,r,e),l=void 0,!_i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Wa(e,t,r,n,l){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;i=i.return}for(;o!==null;){if(i=Jr(o),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}o=o.parentNode}}n=n.return}tm(function(){var u=a,m=Po(r),f=[];e:{var x=Lm.get(e);if(x!==void 0){var g=Io,w=e;switch(e){case"keypress":if(yl(r)===0)break e;case"keydown":case"keyup":g=hg;break;case"focusin":w="focus",g=Ma;break;case"focusout":w="blur",g=Ma;break;case"beforeblur":case"afterblur":g=Ma;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xg;break;case Cm:case _m:case Em:g=lg;break;case Pm:g=yg;break;case"scroll":g=eg;break;case"wheel":g=jg;break;case"copy":case"cut":case"paste":g=ig;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ku}var b=(t&4)!==0,S=!b&&e==="scroll",p=b?x!==null?x+"Capture":null:x;b=[];for(var h=u,v;h!==null;){v=h;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,p!==null&&(j=ys(h,p),j!=null&&b.push(Cs(h,j,v)))),S)break;h=h.return}0<b.length&&(x=new g(x,w,null,r,m),f.push({event:x,listeners:b}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",x&&r!==ki&&(w=r.relatedTarget||r.fromElement)&&(Jr(w)||w[xr]))break e;if((g||x)&&(x=m.window===m?m:(x=m.ownerDocument)?x.defaultView||x.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=u,w=w?Jr(w):null,w!==null&&(S=dn(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(b=Xu,j="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(b=Ku,j="onPointerLeave",p="onPointerEnter",h="pointer"),S=g==null?x:jn(g),v=w==null?x:jn(w),x=new b(j,h+"leave",g,r,m),x.target=S,x.relatedTarget=v,j=null,Jr(m)===u&&(b=new b(p,h+"enter",w,r,m),b.target=v,b.relatedTarget=S,j=b),S=j,g&&w)t:{for(b=g,p=w,h=0,v=b;v;v=pn(v))h++;for(v=0,j=p;j;j=pn(j))v++;for(;0<h-v;)b=pn(b),h--;for(;0<v-h;)p=pn(p),v--;for(;h--;){if(b===p||p!==null&&b===p.alternate)break t;b=pn(b),p=pn(p)}b=null}else b=null;g!==null&&id(f,x,g,b,!1),w!==null&&S!==null&&id(f,S,w,b,!0)}}e:{if(x=u?jn(u):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var E=Eg;else if(qu(x))if(jm)E=Dg;else{E=Lg;var P=Pg}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(E=Fg);if(E&&(E=E(e,u))){wm(f,E,r,m);break e}P&&P(e,x,u),e==="focusout"&&(P=x._wrapperState)&&P.controlled&&x.type==="number"&&wi(x,"number",x.value)}switch(P=u?jn(u):window,e){case"focusin":(qu(P)||P.contentEditable==="true")&&(yn=P,Di=u,fs=null);break;case"focusout":fs=Di=yn=null;break;case"mousedown":Ri=!0;break;case"contextmenu":case"mouseup":case"dragend":Ri=!1,sd(f,r,m);break;case"selectionchange":if(Ig)break;case"keydown":case"keyup":sd(f,r,m)}var L;if(Ao)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else vn?vm(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(xm&&r.locale!=="ko"&&(vn||N!=="onCompositionStart"?N==="onCompositionEnd"&&vn&&(L=gm()):(_r=m,To="value"in _r?_r.value:_r.textContent,vn=!0)),P=Il(u,N),0<P.length&&(N=new Qu(N,e,null,r,m),f.push({event:N,listeners:P}),L?N.data=L:(L=ym(r),L!==null&&(N.data=L)))),(L=Ng?Sg(e,r):kg(e,r))&&(u=Il(u,"onBeforeInput"),0<u.length&&(m=new Qu("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:u}),m.data=L))}Fm(f,t)})}function Cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Il(e,t){for(var r=t+"Capture",n=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=ys(e,r),a!=null&&n.unshift(Cs(e,a,l)),a=ys(e,t),a!=null&&n.push(Cs(e,a,l))),e=e.return}return n}function pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function id(e,t,r,n,l){for(var a=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,l?(c=ys(r,a),c!=null&&i.unshift(Cs(r,c,o))):l||(c=ys(r,a),c!=null&&i.push(Cs(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Og=/\r\n?/g,$g=/\u0000|\uFFFD/g;function od(e){return(typeof e=="string"?e:""+e).replace(Og,`
`).replace($g,"")}function il(e,t,r){if(t=od(t),od(e)!==t&&r)throw Error(R(425))}function Ml(){}var Ti=null,Ii=null;function Mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ai=typeof setTimeout=="function"?setTimeout:void 0,Ug=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Bg=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(e){return cd.resolve(null).then(e).catch(Wg)}:Ai;function Wg(e){setTimeout(function(){throw e})}function Va(e,t){var r=t,n=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(n===0){e.removeChild(l),bs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=l}while(r);bs(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ud(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),sr="__reactFiber$"+Vn,_s="__reactProps$"+Vn,xr="__reactContainer$"+Vn,zi="__reactEvents$"+Vn,Vg="__reactListeners$"+Vn,Hg="__reactHandles$"+Vn;function Jr(e){var t=e[sr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xr]||r[sr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ud(e);e!==null;){if(r=e[sr])return r;e=ud(e)}return t}e=r,r=e.parentNode}return null}function $s(e){return e=e[sr]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function sa(e){return e[_s]||null}var Oi=[],bn=-1;function Ur(e){return{current:e}}function Ce(e){0>bn||(e.current=Oi[bn],Oi[bn]=null,bn--)}function Se(e,t){bn++,Oi[bn]=e.current,e.current=t}var Or={},at=Ur(Or),jt=Ur(!1),sn=Or;function In(e,t){var r=e.type.contextTypes;if(!r)return Or;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function bt(e){return e=e.childContextTypes,e!=null}function Al(){Ce(jt),Ce(at)}function dd(e,t,r){if(at.current!==Or)throw Error(R(168));Se(at,t),Se(jt,r)}function Rm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var l in n)if(!(l in t))throw Error(R(108,P0(e)||"Unknown",l));return De({},r,n)}function zl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,sn=at.current,Se(at,e),Se(jt,jt.current),!0}function fd(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=Rm(e,t,sn),n.__reactInternalMemoizedMergedChildContext=e,Ce(jt),Ce(at),Se(at,e)):Ce(jt),Se(jt,r)}var fr=null,la=!1,Ha=!1;function Tm(e){fr===null?fr=[e]:fr.push(e)}function Gg(e){la=!0,Tm(e)}function Br(){if(!Ha&&fr!==null){Ha=!0;var e=0,t=xe;try{var r=fr;for(xe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}fr=null,la=!1}catch(l){throw fr!==null&&(fr=fr.slice(e+1)),lm(Lo,Br),l}finally{xe=t,Ha=!1}}return null}var Nn=[],Sn=0,Ol=null,$l=0,At=[],zt=0,ln=null,mr=1,hr="";function Qr(e,t){Nn[Sn++]=$l,Nn[Sn++]=Ol,Ol=e,$l=t}function Im(e,t,r){At[zt++]=mr,At[zt++]=hr,At[zt++]=ln,ln=e;var n=mr;e=hr;var l=32-Jt(n)-1;n&=~(1<<l),r+=1;var a=32-Jt(t)+l;if(30<a){var i=l-l%5;a=(n&(1<<i)-1).toString(32),n>>=i,l-=i,mr=1<<32-Jt(t)+l|r<<l|n,hr=a+e}else mr=1<<a|r<<l|n,hr=e}function Oo(e){e.return!==null&&(Qr(e,1),Im(e,1,0))}function $o(e){for(;e===Ol;)Ol=Nn[--Sn],Nn[Sn]=null,$l=Nn[--Sn],Nn[Sn]=null;for(;e===ln;)ln=At[--zt],At[zt]=null,hr=At[--zt],At[zt]=null,mr=At[--zt],At[zt]=null}var Lt=null,Pt=null,Pe=!1,Xt=null;function Mm(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function md(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Pt=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ln!==null?{id:mr,overflow:hr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Lt=e,Pt=null,!0):!1;default:return!1}}function $i(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ui(e){if(Pe){var t=Pt;if(t){var r=t;if(!md(e,t)){if($i(e))throw Error(R(418));t=Rr(r.nextSibling);var n=Lt;t&&md(e,t)?Mm(n,r):(e.flags=e.flags&-4097|2,Pe=!1,Lt=e)}}else{if($i(e))throw Error(R(418));e.flags=e.flags&-4097|2,Pe=!1,Lt=e}}}function hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function ol(e){if(e!==Lt)return!1;if(!Pe)return hd(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mi(e.type,e.memoizedProps)),t&&(t=Pt)){if($i(e))throw Am(),Error(R(418));for(;t;)Mm(e,t),t=Rr(t.nextSibling)}if(hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pt=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=Lt?Rr(e.stateNode.nextSibling):null;return!0}function Am(){for(var e=Pt;e;)e=Rr(e.nextSibling)}function Mn(){Pt=Lt=null,Pe=!1}function Uo(e){Xt===null?Xt=[e]:Xt.push(e)}var Yg=wr.ReactCurrentBatchConfig;function Zn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var l=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function cl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pd(e){var t=e._init;return t(e._payload)}function zm(e){function t(p,h){if(e){var v=p.deletions;v===null?(p.deletions=[h],p.flags|=16):v.push(h)}}function r(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function n(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function l(p,h){return p=Ar(p,h),p.index=0,p.sibling=null,p}function a(p,h,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<h?(p.flags|=2,h):v):(p.flags|=2,h)):(p.flags|=1048576,h)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,h,v,j){return h===null||h.tag!==6?(h=Za(v,p.mode,j),h.return=p,h):(h=l(h,v),h.return=p,h)}function c(p,h,v,j){var E=v.type;return E===xn?m(p,h,v.props.children,j,v.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nr&&pd(E)===h.type)?(j=l(h,v.props),j.ref=Zn(p,h,v),j.return=p,j):(j=Cl(v.type,v.key,v.props,null,p.mode,j),j.ref=Zn(p,h,v),j.return=p,j)}function u(p,h,v,j){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=qa(v,p.mode,j),h.return=p,h):(h=l(h,v.children||[]),h.return=p,h)}function m(p,h,v,j,E){return h===null||h.tag!==7?(h=tn(v,p.mode,j,E),h.return=p,h):(h=l(h,v),h.return=p,h)}function f(p,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Za(""+h,p.mode,v),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Zs:return v=Cl(h.type,h.key,h.props,null,p.mode,v),v.ref=Zn(p,null,h),v.return=p,v;case gn:return h=qa(h,p.mode,v),h.return=p,h;case Nr:var j=h._init;return f(p,j(h._payload),v)}if(ls(h)||Yn(h))return h=tn(h,p.mode,v,null),h.return=p,h;cl(p,h)}return null}function x(p,h,v,j){var E=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:o(p,h,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zs:return v.key===E?c(p,h,v,j):null;case gn:return v.key===E?u(p,h,v,j):null;case Nr:return E=v._init,x(p,h,E(v._payload),j)}if(ls(v)||Yn(v))return E!==null?null:m(p,h,v,j,null);cl(p,v)}return null}function g(p,h,v,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(v)||null,o(h,p,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Zs:return p=p.get(j.key===null?v:j.key)||null,c(h,p,j,E);case gn:return p=p.get(j.key===null?v:j.key)||null,u(h,p,j,E);case Nr:var P=j._init;return g(p,h,v,P(j._payload),E)}if(ls(j)||Yn(j))return p=p.get(v)||null,m(h,p,j,E,null);cl(h,j)}return null}function w(p,h,v,j){for(var E=null,P=null,L=h,N=h=0,z=null;L!==null&&N<v.length;N++){L.index>N?(z=L,L=null):z=L.sibling;var T=x(p,L,v[N],j);if(T===null){L===null&&(L=z);break}e&&L&&T.alternate===null&&t(p,L),h=a(T,h,N),P===null?E=T:P.sibling=T,P=T,L=z}if(N===v.length)return r(p,L),Pe&&Qr(p,N),E;if(L===null){for(;N<v.length;N++)L=f(p,v[N],j),L!==null&&(h=a(L,h,N),P===null?E=L:P.sibling=L,P=L);return Pe&&Qr(p,N),E}for(L=n(p,L);N<v.length;N++)z=g(L,p,N,v[N],j),z!==null&&(e&&z.alternate!==null&&L.delete(z.key===null?N:z.key),h=a(z,h,N),P===null?E=z:P.sibling=z,P=z);return e&&L.forEach(function(Q){return t(p,Q)}),Pe&&Qr(p,N),E}function b(p,h,v,j){var E=Yn(v);if(typeof E!="function")throw Error(R(150));if(v=E.call(v),v==null)throw Error(R(151));for(var P=E=null,L=h,N=h=0,z=null,T=v.next();L!==null&&!T.done;N++,T=v.next()){L.index>N?(z=L,L=null):z=L.sibling;var Q=x(p,L,T.value,j);if(Q===null){L===null&&(L=z);break}e&&L&&Q.alternate===null&&t(p,L),h=a(Q,h,N),P===null?E=Q:P.sibling=Q,P=Q,L=z}if(T.done)return r(p,L),Pe&&Qr(p,N),E;if(L===null){for(;!T.done;N++,T=v.next())T=f(p,T.value,j),T!==null&&(h=a(T,h,N),P===null?E=T:P.sibling=T,P=T);return Pe&&Qr(p,N),E}for(L=n(p,L);!T.done;N++,T=v.next())T=g(L,p,N,T.value,j),T!==null&&(e&&T.alternate!==null&&L.delete(T.key===null?N:T.key),h=a(T,h,N),P===null?E=T:P.sibling=T,P=T);return e&&L.forEach(function(U){return t(p,U)}),Pe&&Qr(p,N),E}function S(p,h,v,j){if(typeof v=="object"&&v!==null&&v.type===xn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zs:e:{for(var E=v.key,P=h;P!==null;){if(P.key===E){if(E=v.type,E===xn){if(P.tag===7){r(p,P.sibling),h=l(P,v.props.children),h.return=p,p=h;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nr&&pd(E)===P.type){r(p,P.sibling),h=l(P,v.props),h.ref=Zn(p,P,v),h.return=p,p=h;break e}r(p,P);break}else t(p,P);P=P.sibling}v.type===xn?(h=tn(v.props.children,p.mode,j,v.key),h.return=p,p=h):(j=Cl(v.type,v.key,v.props,null,p.mode,j),j.ref=Zn(p,h,v),j.return=p,p=j)}return i(p);case gn:e:{for(P=v.key;h!==null;){if(h.key===P)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){r(p,h.sibling),h=l(h,v.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else t(p,h);h=h.sibling}h=qa(v,p.mode,j),h.return=p,p=h}return i(p);case Nr:return P=v._init,S(p,h,P(v._payload),j)}if(ls(v))return w(p,h,v,j);if(Yn(v))return b(p,h,v,j);cl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(r(p,h.sibling),h=l(h,v),h.return=p,p=h):(r(p,h),h=Za(v,p.mode,j),h.return=p,p=h),i(p)):r(p,h)}return S}var An=zm(!0),Om=zm(!1),Ul=Ur(null),Bl=null,kn=null,Bo=null;function Wo(){Bo=kn=Bl=null}function Vo(e){var t=Ul.current;Ce(Ul),e._currentValue=t}function Bi(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dn(e,t){Bl=e,Bo=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(Bo!==e)if(e={context:e,memoizedValue:t,next:null},kn===null){if(Bl===null)throw Error(R(308));kn=e,Bl.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var Zr=null;function Ho(e){Zr===null?Zr=[e]:Zr.push(e)}function $m(e,t,r,n){var l=t.interleaved;return l===null?(r.next=r,Ho(t)):(r.next=l.next,l.next=r),t.interleaved=r,vr(e,n)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sr=!1;function Go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Um(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,me&2){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,vr(e,r)}return l=n.interleaved,l===null?(t.next=t,Ho(n)):(t.next=l.next,l.next=t),n.interleaved=t,vr(e,r)}function wl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fo(e,r)}}function gd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=t:a=a.next=t}else l=a=t;r={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wl(e,t,r,n){var l=e.updateQueue;Sr=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var m=e.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==i&&(o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=c))}if(a!==null){var f=l.baseState;i=0,m=u=c=null,o=a;do{var x=o.lane,g=o.eventTime;if((n&x)===x){m!==null&&(m=m.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,b=o;switch(x=t,g=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){f=w.call(g,f,x);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,x=typeof w=="function"?w.call(g,f,x):w,x==null)break e;f=De({},f,x);break e;case 2:Sr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,x=l.effects,x===null?l.effects=[o]:x.push(o))}else g={eventTime:g,lane:x,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(u=m=g,c=f):m=m.next=g,i|=x;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;x=o,o=x.next,x.next=null,l.lastBaseUpdate=x,l.shared.pending=null}}while(!0);if(m===null&&(c=f),l.baseState=c,l.firstBaseUpdate=u,l.lastBaseUpdate=m,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);on|=i,e.lanes=i,e.memoizedState=f}}function xd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],l=n.callback;if(l!==null){if(n.callback=null,n=r,typeof l!="function")throw Error(R(191,l));l.call(n)}}}var Us={},ar=Ur(Us),Es=Ur(Us),Ps=Ur(Us);function qr(e){if(e===Us)throw Error(R(174));return e}function Yo(e,t){switch(Se(Ps,t),Se(Es,e),Se(ar,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bi(t,e)}Ce(ar),Se(ar,t)}function zn(){Ce(ar),Ce(Es),Ce(Ps)}function Bm(e){qr(Ps.current);var t=qr(ar.current),r=bi(t,e.type);t!==r&&(Se(Es,e),Se(ar,r))}function Xo(e){Es.current===e&&(Ce(ar),Ce(Es))}var Le=Ur(0);function Vl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ga=[];function Qo(){for(var e=0;e<Ga.length;e++)Ga[e]._workInProgressVersionPrimary=null;Ga.length=0}var jl=wr.ReactCurrentDispatcher,Ya=wr.ReactCurrentBatchConfig,an=0,Fe=null,Xe=null,Je=null,Hl=!1,ms=!1,Ls=0,Xg=0;function nt(){throw Error(R(321))}function Ko(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!er(e[r],t[r]))return!1;return!0}function Jo(e,t,r,n,l,a){if(an=a,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jl.current=e===null||e.memoizedState===null?Zg:qg,e=r(n,l),ms){a=0;do{if(ms=!1,Ls=0,25<=a)throw Error(R(301));a+=1,Je=Xe=null,t.updateQueue=null,jl.current=ex,e=r(n,l)}while(ms)}if(jl.current=Gl,t=Xe!==null&&Xe.next!==null,an=0,Je=Xe=Fe=null,Hl=!1,t)throw Error(R(300));return e}function Zo(){var e=Ls!==0;return Ls=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Fe.memoizedState=Je=e:Je=Je.next=e,Je}function Wt(){if(Xe===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Je===null?Fe.memoizedState:Je.next;if(t!==null)Je=t,Xe=e;else{if(e===null)throw Error(R(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Je===null?Fe.memoizedState=Je=e:Je=Je.next=e}return Je}function Fs(e,t){return typeof t=="function"?t(e):t}function Xa(e){var t=Wt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=Xe,l=n.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}n.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,n=n.baseState;var o=i=null,c=null,u=a;do{var m=u.lane;if((an&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,i=n):c=c.next=f,Fe.lanes|=m,on|=m}u=u.next}while(u!==null&&u!==a);c===null?i=n:c.next=o,er(n,t.memoizedState)||(wt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){l=e;do a=l.lane,Fe.lanes|=a,on|=a,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qa(e){var t=Wt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,l=r.pending,a=t.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);er(a,t.memoizedState)||(wt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Wm(){}function Vm(e,t){var r=Fe,n=Wt(),l=t(),a=!er(n.memoizedState,l);if(a&&(n.memoizedState=l,wt=!0),n=n.queue,qo(Ym.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,Ds(9,Gm.bind(null,r,n,l,t),void 0,null),Ze===null)throw Error(R(349));an&30||Hm(r,t,l)}return l}function Hm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Gm(e,t,r,n){t.value=r,t.getSnapshot=n,Xm(t)&&Qm(e)}function Ym(e,t,r){return r(function(){Xm(t)&&Qm(e)})}function Xm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!er(e,r)}catch{return!0}}function Qm(e){var t=vr(e,1);t!==null&&Zt(t,e,1,-1)}function vd(e){var t=rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},t.queue=e,e=e.dispatch=Jg.bind(null,Fe,e),[t.memoizedState,e]}function Ds(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Km(){return Wt().memoizedState}function bl(e,t,r,n){var l=rr();Fe.flags|=e,l.memoizedState=Ds(1|t,r,void 0,n===void 0?null:n)}function aa(e,t,r,n){var l=Wt();n=n===void 0?null:n;var a=void 0;if(Xe!==null){var i=Xe.memoizedState;if(a=i.destroy,n!==null&&Ko(n,i.deps)){l.memoizedState=Ds(t,r,a,n);return}}Fe.flags|=e,l.memoizedState=Ds(1|t,r,a,n)}function yd(e,t){return bl(8390656,8,e,t)}function qo(e,t){return aa(2048,8,e,t)}function Jm(e,t){return aa(4,2,e,t)}function Zm(e,t){return aa(4,4,e,t)}function qm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eh(e,t,r){return r=r!=null?r.concat([e]):null,aa(4,4,qm.bind(null,t,e),r)}function ec(){}function th(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ko(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function rh(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ko(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function nh(e,t,r){return an&21?(er(r,t)||(r=om(),Fe.lanes|=r,on|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=r)}function Qg(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var n=Ya.transition;Ya.transition={};try{e(!1),t()}finally{xe=r,Ya.transition=n}}function sh(){return Wt().memoizedState}function Kg(e,t,r){var n=Mr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},lh(e))ah(t,r);else if(r=$m(e,t,r,n),r!==null){var l=dt();Zt(r,e,n,l),ih(r,t,n)}}function Jg(e,t,r){var n=Mr(e),l={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(lh(e))ah(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,r);if(l.hasEagerState=!0,l.eagerState=o,er(o,i)){var c=t.interleaved;c===null?(l.next=l,Ho(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}r=$m(e,t,l,n),r!==null&&(l=dt(),Zt(r,e,n,l),ih(r,t,n))}}function lh(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function ah(e,t){ms=Hl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ih(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fo(e,r)}}var Gl={readContext:Bt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Zg={readContext:Bt,useCallback:function(e,t){return rr().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:yd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bl(4194308,4,qm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){return bl(4,2,e,t)},useMemo:function(e,t){var r=rr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=rr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Kg.bind(null,Fe,e),[n.memoizedState,e]},useRef:function(e){var t=rr();return e={current:e},t.memoizedState=e},useState:vd,useDebugValue:ec,useDeferredValue:function(e){return rr().memoizedState=e},useTransition:function(){var e=vd(!1),t=e[0];return e=Qg.bind(null,e[1]),rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Fe,l=rr();if(Pe){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),Ze===null)throw Error(R(349));an&30||Hm(n,t,r)}l.memoizedState=r;var a={value:r,getSnapshot:t};return l.queue=a,yd(Ym.bind(null,n,a,e),[e]),n.flags|=2048,Ds(9,Gm.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=rr(),t=Ze.identifierPrefix;if(Pe){var r=hr,n=mr;r=(n&~(1<<32-Jt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ls++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Xg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qg={readContext:Bt,useCallback:th,useContext:Bt,useEffect:qo,useImperativeHandle:eh,useInsertionEffect:Jm,useLayoutEffect:Zm,useMemo:rh,useReducer:Xa,useRef:Km,useState:function(){return Xa(Fs)},useDebugValue:ec,useDeferredValue:function(e){var t=Wt();return nh(t,Xe.memoizedState,e)},useTransition:function(){var e=Xa(Fs)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Wm,useSyncExternalStore:Vm,useId:sh,unstable_isNewReconciler:!1},ex={readContext:Bt,useCallback:th,useContext:Bt,useEffect:qo,useImperativeHandle:eh,useInsertionEffect:Jm,useLayoutEffect:Zm,useMemo:rh,useReducer:Qa,useRef:Km,useState:function(){return Qa(Fs)},useDebugValue:ec,useDeferredValue:function(e){var t=Wt();return Xe===null?t.memoizedState=e:nh(t,Xe.memoizedState,e)},useTransition:function(){var e=Qa(Fs)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Wm,useSyncExternalStore:Vm,useId:sh,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wi(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ia={isMounted:function(e){return(e=e._reactInternals)?dn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=dt(),l=Mr(e),a=pr(n,l);a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Zt(t,e,l,n),wl(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=dt(),l=Mr(e),a=pr(n,l);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Zt(t,e,l,n),wl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=dt(),n=Mr(e),l=pr(r,n);l.tag=2,t!=null&&(l.callback=t),t=Tr(e,l,n),t!==null&&(Zt(t,e,n,r),wl(t,e,n))}};function wd(e,t,r,n,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!Ss(r,n)||!Ss(l,a):!0}function oh(e,t,r){var n=!1,l=Or,a=t.contextType;return typeof a=="object"&&a!==null?a=Bt(a):(l=bt(t)?sn:at.current,n=t.contextTypes,a=(n=n!=null)?In(e,l):Or),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function jd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function Vi(e,t,r,n){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Go(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Bt(a):(a=bt(t)?sn:at.current,l.context=In(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Wi(e,t,a,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ia.enqueueReplaceState(l,l.state,null),Wl(e,r,l,n),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function On(e,t){try{var r="",n=t;do r+=E0(n),n=n.return;while(n);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Ka(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Hi(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var tx=typeof WeakMap=="function"?WeakMap:Map;function ch(e,t,r){r=pr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xl||(Xl=!0,to=n),Hi(e,t)},r}function uh(e,t,r){r=pr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var l=t.value;r.payload=function(){return n(l)},r.callback=function(){Hi(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Hi(e,t),typeof n!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function bd(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new tx;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(r)||(l.add(r),e=px.bind(null,e,t,r),t.then(e,e))}function Nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sd(e,t,r,n,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pr(-1,1),t.tag=2,Tr(r,t,1))),r.lanes|=1),e)}var rx=wr.ReactCurrentOwner,wt=!1;function ct(e,t,r,n){t.child=e===null?Om(t,null,r,n):An(t,e.child,r,n)}function kd(e,t,r,n,l){r=r.render;var a=t.ref;return Dn(t,l),n=Jo(e,t,r,n,a,l),r=Zo(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yr(e,t,l)):(Pe&&r&&Oo(t),t.flags|=1,ct(e,t,n,l),t.child)}function Cd(e,t,r,n,l){if(e===null){var a=r.type;return typeof a=="function"&&!oc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,dh(e,t,a,n,l)):(e=Cl(r.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ss,r(i,n)&&e.ref===t.ref)return yr(e,t,l)}return t.flags|=1,e=Ar(a,n),e.ref=t.ref,e.return=t,t.child=e}function dh(e,t,r,n,l){if(e!==null){var a=e.memoizedProps;if(Ss(a,n)&&e.ref===t.ref)if(wt=!1,t.pendingProps=n=a,(e.lanes&l)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,yr(e,t,l)}return Gi(e,t,r,n,l)}function fh(e,t,r){var n=t.pendingProps,l=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(_n,Ct),Ct|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(_n,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Se(_n,Ct),Ct|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Se(_n,Ct),Ct|=n;return ct(e,t,l,r),t.child}function mh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Gi(e,t,r,n,l){var a=bt(r)?sn:at.current;return a=In(t,a),Dn(t,l),r=Jo(e,t,r,n,a,l),n=Zo(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yr(e,t,l)):(Pe&&n&&Oo(t),t.flags|=1,ct(e,t,r,l),t.child)}function _d(e,t,r,n,l){if(bt(r)){var a=!0;zl(t)}else a=!1;if(Dn(t,l),t.stateNode===null)Nl(e,t),oh(t,r,n),Vi(t,r,n,l),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Bt(u):(u=bt(r)?sn:at.current,u=In(t,u));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==u)&&jd(t,i,n,u),Sr=!1;var x=t.memoizedState;i.state=x,Wl(t,n,i,l),c=t.memoizedState,o!==n||x!==c||jt.current||Sr?(typeof m=="function"&&(Wi(t,r,m,n),c=t.memoizedState),(o=Sr||wd(t,r,o,n,x,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Um(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Gt(t.type,o),i.props=u,f=t.pendingProps,x=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=bt(r)?sn:at.current,c=In(t,c));var g=r.getDerivedStateFromProps;(m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||x!==c)&&jd(t,i,n,c),Sr=!1,x=t.memoizedState,i.state=x,Wl(t,n,i,l);var w=t.memoizedState;o!==f||x!==w||jt.current||Sr?(typeof g=="function"&&(Wi(t,r,g,n),w=t.memoizedState),(u=Sr||wd(t,r,u,n,x,w,c)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),i.props=n,i.state=w,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),n=!1)}return Yi(e,t,r,n,a,l)}function Yi(e,t,r,n,l,a){mh(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return l&&fd(t,r,!1),yr(e,t,a);n=t.stateNode,rx.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=An(t,e.child,null,a),t.child=An(t,null,o,a)):ct(e,t,o,a),t.memoizedState=n.state,l&&fd(t,r,!0),t.child}function hh(e){var t=e.stateNode;t.pendingContext?dd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dd(e,t.context,!1),Yo(e,t.containerInfo)}function Ed(e,t,r,n,l){return Mn(),Uo(l),t.flags|=256,ct(e,t,r,n),t.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function Qi(e){return{baseLanes:e,cachePool:null,transitions:null}}function ph(e,t,r){var n=t.pendingProps,l=Le.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Se(Le,l&1),e===null)return Ui(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=ua(i,n,0,null),e=tn(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Qi(r),t.memoizedState=Xi,e):tc(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return nx(e,t,i,n,o,l,r);if(a){a=n.fallback,i=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==l?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ar(l,c),n.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=Ar(o,a):(a=tn(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?Qi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Xi,n}return a=e.child,e=a.sibling,n=Ar(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function tc(e,t){return t=ua({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ul(e,t,r,n){return n!==null&&Uo(n),An(t,e.child,null,r),e=tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nx(e,t,r,n,l,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Ka(Error(R(422))),ul(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,l=t.mode,n=ua({mode:"visible",children:n.children},l,0,null),a=tn(a,l,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&An(t,e.child,null,i),t.child.memoizedState=Qi(i),t.memoizedState=Xi,a);if(!(t.mode&1))return ul(e,t,i,null);if(l.data==="$!"){if(n=l.nextSibling&&l.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(R(419)),n=Ka(a,n,void 0),ul(e,t,i,n)}if(o=(i&e.childLanes)!==0,wt||o){if(n=Ze,n!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(n.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,vr(e,l),Zt(n,e,l,-1))}return ic(),n=Ka(Error(R(421))),ul(e,t,i,n)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=gx.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Pt=Rr(l.nextSibling),Lt=t,Pe=!0,Xt=null,e!==null&&(At[zt++]=mr,At[zt++]=hr,At[zt++]=ln,mr=e.id,hr=e.overflow,ln=t),t=tc(t,n.children),t.flags|=4096,t)}function Pd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Bi(e.return,t,r)}function Ja(e,t,r,n,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=l)}function gh(e,t,r){var n=t.pendingProps,l=n.revealOrder,a=n.tail;if(ct(e,t,n.children,r),n=Le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pd(e,r,t);else if(e.tag===19)Pd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Se(Le,n),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Vl(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ja(t,!1,l,r,a);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Vl(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Ja(t,!0,r,null,a);break;case"together":Ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),on|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=Ar(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ar(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sx(e,t,r){switch(t.tag){case 3:hh(t),Mn();break;case 5:Bm(t);break;case 1:bt(t.type)&&zl(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,l=t.memoizedProps.value;Se(Ul,n._currentValue),n._currentValue=l;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Se(Le,Le.current&1),t.flags|=128,null):r&t.child.childLanes?ph(e,t,r):(Se(Le,Le.current&1),e=yr(e,t,r),e!==null?e.sibling:null);Se(Le,Le.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return gh(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Se(Le,Le.current),n)break;return null;case 22:case 23:return t.lanes=0,fh(e,t,r)}return yr(e,t,r)}var xh,Ki,vh,yh;xh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ki=function(){};vh=function(e,t,r,n){var l=e.memoizedProps;if(l!==n){e=t.stateNode,qr(ar.current);var a=null;switch(r){case"input":l=vi(e,l),n=vi(e,n),a=[];break;case"select":l=De({},l,{value:void 0}),n=De({},n,{value:void 0}),a=[];break;case"textarea":l=ji(e,l),n=ji(e,n),a=[];break;default:typeof l.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ml)}Ni(r,n);var i;r=null;for(u in l)if(!n.hasOwnProperty(u)&&l.hasOwnProperty(u)&&l[u]!=null)if(u==="style"){var o=l[u];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xs.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=l!=null?l[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ke("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};yh=function(e,t,r,n){r!==n&&(t.flags|=4)};function qn(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags&14680064,n|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function lx(e,t,r){var n=t.pendingProps;switch($o(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return bt(t.type)&&Al(),st(t),null;case 3:return n=t.stateNode,zn(),Ce(jt),Ce(at),Qo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ol(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(so(Xt),Xt=null))),Ki(e,t),st(t),null;case 5:Xo(t);var l=qr(Ps.current);if(r=t.type,e!==null&&t.stateNode!=null)vh(e,t,r,n,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return st(t),null}if(e=qr(ar.current),ol(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[sr]=t,n[_s]=a,e=(t.mode&1)!==0,r){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(l=0;l<is.length;l++)ke(is[l],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":zu(n,a),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ke("invalid",n);break;case"textarea":$u(n,a),ke("invalid",n)}Ni(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&il(n.textContent,o,e),l=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&il(n.textContent,o,e),l=["children",""+o]):xs.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ke("scroll",n)}switch(r){case"input":qs(n),Ou(n,a,!0);break;case"textarea":qs(n),Uu(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ml)}n=l,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[sr]=t,e[_s]=n,xh(e,t,!1,!1),t.stateNode=e;e:{switch(i=Si(r,n),r){case"dialog":ke("cancel",e),ke("close",e),l=n;break;case"iframe":case"object":case"embed":ke("load",e),l=n;break;case"video":case"audio":for(l=0;l<is.length;l++)ke(is[l],e);l=n;break;case"source":ke("error",e),l=n;break;case"img":case"image":case"link":ke("error",e),ke("load",e),l=n;break;case"details":ke("toggle",e),l=n;break;case"input":zu(e,n),l=vi(e,n),ke("invalid",e);break;case"option":l=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},l=De({},n,{value:void 0}),ke("invalid",e);break;case"textarea":$u(e,n),l=ji(e,n),ke("invalid",e);break;default:l=n}Ni(r,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Kf(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xf(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vs(e,c):typeof c=="number"&&vs(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(xs.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ke("scroll",e):c!=null&&ko(e,a,c,i))}switch(r){case"input":qs(e),Ou(e,n,!1);break;case"textarea":qs(e),Uu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?En(e,!!n.multiple,a,!1):n.defaultValue!=null&&En(e,!!n.multiple,n.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ml)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)yh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=qr(Ps.current),qr(ar.current),ol(t)){if(n=t.stateNode,r=t.memoizedProps,n[sr]=t,(a=n.nodeValue!==r)&&(e=Lt,e!==null))switch(e.tag){case 3:il(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&il(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sr]=t,t.stateNode=n}return st(t),null;case 13:if(Ce(Le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&Pt!==null&&t.mode&1&&!(t.flags&128))Am(),Mn(),t.flags|=98560,a=!1;else if(a=ol(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(R(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(R(317));a[sr]=t}else Mn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),a=!1}else Xt!==null&&(so(Xt),Xt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Qe===0&&(Qe=3):ic())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return zn(),Ki(e,t),e===null&&ks(t.stateNode.containerInfo),st(t),null;case 10:return Vo(t.type._context),st(t),null;case 17:return bt(t.type)&&Al(),st(t),null;case 19:if(Ce(Le),a=t.memoizedState,a===null)return st(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)qn(a,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Vl(e),i!==null){for(t.flags|=128,qn(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Se(Le,Le.current&1|2),t.child}e=e.sibling}a.tail!==null&&ze()>$n&&(t.flags|=128,n=!0,qn(a,!1),t.lanes=4194304)}else{if(!n)if(e=Vl(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Pe)return st(t),null}else 2*ze()-a.renderingStartTime>$n&&r!==1073741824&&(t.flags|=128,n=!0,qn(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ze(),t.sibling=null,r=Le.current,Se(Le,n?r&1|2:r&1),t):(st(t),null);case 22:case 23:return ac(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ct&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function ax(e,t){switch($o(t),t.tag){case 1:return bt(t.type)&&Al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(),Ce(jt),Ce(at),Qo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(Ce(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Le),null;case 4:return zn(),null;case 10:return Vo(t.type._context),null;case 22:case 23:return ac(),null;case 24:return null;default:return null}}var dl=!1,lt=!1,ix=typeof WeakSet=="function"?WeakSet:Set,X=null;function Cn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ie(e,t,n)}else r.current=null}function Ji(e,t,r){try{r()}catch(n){Ie(e,t,n)}}var Ld=!1;function ox(e,t){if(Ti=Rl,e=Sm(),zo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var l=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,u=0,m=0,f=e,x=null;t:for(;;){for(var g;f!==r||l!==0&&f.nodeType!==3||(o=i+l),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(g=f.firstChild)!==null;)x=f,f=g;for(;;){if(f===e)break t;if(x===r&&++u===l&&(o=i),x===a&&++m===n&&(c=i),(g=f.nextSibling)!==null)break;f=x,x=f.parentNode}f=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ii={focusedElem:e,selectionRange:r},Rl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,S=w.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:Gt(t.type,b),S);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(j){Ie(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return w=Ld,Ld=!1,w}function hs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Ji(t,r,a)}l=l.next}while(l!==n)}}function oa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Zi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wh(e){var t=e.alternate;t!==null&&(e.alternate=null,wh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sr],delete t[_s],delete t[zi],delete t[Vg],delete t[Hg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jh(e){return e.tag===5||e.tag===3||e.tag===4}function Fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ml));else if(n!==4&&(e=e.child,e!==null))for(qi(e,t,r),e=e.sibling;e!==null;)qi(e,t,r),e=e.sibling}function eo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(eo(e,t,r),e=e.sibling;e!==null;)eo(e,t,r),e=e.sibling}var et=null,Yt=!1;function br(e,t,r){for(r=r.child;r!==null;)bh(e,t,r),r=r.sibling}function bh(e,t,r){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(ea,r)}catch{}switch(r.tag){case 5:lt||Cn(r,t);case 6:var n=et,l=Yt;et=null,br(e,t,r),et=n,Yt=l,et!==null&&(Yt?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(Yt?(e=et,r=r.stateNode,e.nodeType===8?Va(e.parentNode,r):e.nodeType===1&&Va(e,r),bs(e)):Va(et,r.stateNode));break;case 4:n=et,l=Yt,et=r.stateNode.containerInfo,Yt=!0,br(e,t,r),et=n,Yt=l;break;case 0:case 11:case 14:case 15:if(!lt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){l=n=n.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Ji(r,t,i),l=l.next}while(l!==n)}br(e,t,r);break;case 1:if(!lt&&(Cn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ie(r,t,o)}br(e,t,r);break;case 21:br(e,t,r);break;case 22:r.mode&1?(lt=(n=lt)||r.memoizedState!==null,br(e,t,r),lt=n):br(e,t,r);break;default:br(e,t,r)}}function Dd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ix),t.forEach(function(n){var l=xx.bind(null,e,n);r.has(n)||(r.add(n),n.then(l,l))})}}function Ht(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var l=r[n];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:et=o.stateNode,Yt=!1;break e;case 3:et=o.stateNode.containerInfo,Yt=!0;break e;case 4:et=o.stateNode.containerInfo,Yt=!0;break e}o=o.return}if(et===null)throw Error(R(160));bh(a,i,l),et=null,Yt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(u){Ie(l,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nh(t,e),t=t.sibling}function Nh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(t,e),tr(e),n&4){try{hs(3,e,e.return),oa(3,e)}catch(b){Ie(e,e.return,b)}try{hs(5,e,e.return)}catch(b){Ie(e,e.return,b)}}break;case 1:Ht(t,e),tr(e),n&512&&r!==null&&Cn(r,r.return);break;case 5:if(Ht(t,e),tr(e),n&512&&r!==null&&Cn(r,r.return),e.flags&32){var l=e.stateNode;try{vs(l,"")}catch(b){Ie(e,e.return,b)}}if(n&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Hf(l,a),Si(o,i);var u=Si(o,a);for(i=0;i<c.length;i+=2){var m=c[i],f=c[i+1];m==="style"?Kf(l,f):m==="dangerouslySetInnerHTML"?Xf(l,f):m==="children"?vs(l,f):ko(l,m,f,u)}switch(o){case"input":yi(l,a);break;case"textarea":Gf(l,a);break;case"select":var x=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?En(l,!!a.multiple,g,!1):x!==!!a.multiple&&(a.defaultValue!=null?En(l,!!a.multiple,a.defaultValue,!0):En(l,!!a.multiple,a.multiple?[]:"",!1))}l[_s]=a}catch(b){Ie(e,e.return,b)}}break;case 6:if(Ht(t,e),tr(e),n&4){if(e.stateNode===null)throw Error(R(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(b){Ie(e,e.return,b)}}break;case 3:if(Ht(t,e),tr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(b){Ie(e,e.return,b)}break;case 4:Ht(t,e),tr(e);break;case 13:Ht(t,e),tr(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(sc=ze())),n&4&&Dd(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(lt=(u=lt)||m,Ht(t,e),lt=u):Ht(t,e),tr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(X=e,m=e.child;m!==null;){for(f=X=m;X!==null;){switch(x=X,g=x.child,x.tag){case 0:case 11:case 14:case 15:hs(4,x,x.return);break;case 1:Cn(x,x.return);var w=x.stateNode;if(typeof w.componentWillUnmount=="function"){n=x,r=x.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(b){Ie(n,r,b)}}break;case 5:Cn(x,x.return);break;case 22:if(x.memoizedState!==null){Td(f);continue}}g!==null?(g.return=x,X=g):Td(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{l=f.stateNode,u?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Qf("display",i))}catch(b){Ie(e,e.return,b)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){Ie(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ht(t,e),tr(e),n&4&&Dd(e);break;case 21:break;default:Ht(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(jh(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var l=n.stateNode;n.flags&32&&(vs(l,""),n.flags&=-33);var a=Fd(e);eo(e,a,l);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Fd(e);qi(e,o,i);break;default:throw Error(R(161))}}catch(c){Ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cx(e,t,r){X=e,Sh(e)}function Sh(e,t,r){for(var n=(e.mode&1)!==0;X!==null;){var l=X,a=l.child;if(l.tag===22&&n){var i=l.memoizedState!==null||dl;if(!i){var o=l.alternate,c=o!==null&&o.memoizedState!==null||lt;o=dl;var u=lt;if(dl=i,(lt=c)&&!u)for(X=l;X!==null;)i=X,c=i.child,i.tag===22&&i.memoizedState!==null?Id(l):c!==null?(c.return=i,X=c):Id(l);for(;a!==null;)X=a,Sh(a),a=a.sibling;X=l,dl=o,lt=u}Rd(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,X=a):Rd(e)}}function Rd(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||oa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!lt)if(r===null)n.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Gt(t.type,r.memoizedProps);n.componentDidUpdate(l,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&xd(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xd(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&bs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}lt||t.flags&512&&Zi(t)}catch(x){Ie(t,t.return,x)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function Td(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function Id(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oa(4,t)}catch(c){Ie(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var l=t.return;try{n.componentDidMount()}catch(c){Ie(t,l,c)}}var a=t.return;try{Zi(t)}catch(c){Ie(t,a,c)}break;case 5:var i=t.return;try{Zi(t)}catch(c){Ie(t,i,c)}}}catch(c){Ie(t,t.return,c)}if(t===e){X=null;break}var o=t.sibling;if(o!==null){o.return=t.return,X=o;break}X=t.return}}var ux=Math.ceil,Yl=wr.ReactCurrentDispatcher,rc=wr.ReactCurrentOwner,Ut=wr.ReactCurrentBatchConfig,me=0,Ze=null,Ue=null,tt=0,Ct=0,_n=Ur(0),Qe=0,Rs=null,on=0,ca=0,nc=0,ps=null,yt=null,sc=0,$n=1/0,dr=null,Xl=!1,to=null,Ir=null,fl=!1,Er=null,Ql=0,gs=0,ro=null,Sl=-1,kl=0;function dt(){return me&6?ze():Sl!==-1?Sl:Sl=ze()}function Mr(e){return e.mode&1?me&2&&tt!==0?tt&-tt:Yg.transition!==null?(kl===0&&(kl=om()),kl):(e=xe,e!==0||(e=window.event,e=e===void 0?16:pm(e.type)),e):1}function Zt(e,t,r,n){if(50<gs)throw gs=0,ro=null,Error(R(185));zs(e,r,n),(!(me&2)||e!==Ze)&&(e===Ze&&(!(me&2)&&(ca|=r),Qe===4&&Cr(e,tt)),Nt(e,n),r===1&&me===0&&!(t.mode&1)&&($n=ze()+500,la&&Br()))}function Nt(e,t){var r=e.callbackNode;Y0(e,t);var n=Dl(e,e===Ze?tt:0);if(n===0)r!==null&&Vu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Vu(r),t===1)e.tag===0?Gg(Md.bind(null,e)):Tm(Md.bind(null,e)),Bg(function(){!(me&6)&&Br()}),r=null;else{switch(cm(n)){case 1:r=Lo;break;case 4:r=am;break;case 16:r=Fl;break;case 536870912:r=im;break;default:r=Fl}r=Dh(r,kh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kh(e,t){if(Sl=-1,kl=0,me&6)throw Error(R(327));var r=e.callbackNode;if(Rn()&&e.callbackNode!==r)return null;var n=Dl(e,e===Ze?tt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Kl(e,n);else{t=n;var l=me;me|=2;var a=_h();(Ze!==e||tt!==t)&&(dr=null,$n=ze()+500,en(e,t));do try{mx();break}catch(o){Ch(e,o)}while(!0);Wo(),Yl.current=a,me=l,Ue!==null?t=0:(Ze=null,tt=0,t=Qe)}if(t!==0){if(t===2&&(l=Pi(e),l!==0&&(n=l,t=no(e,l))),t===1)throw r=Rs,en(e,0),Cr(e,n),Nt(e,ze()),r;if(t===6)Cr(e,n);else{if(l=e.current.alternate,!(n&30)&&!dx(l)&&(t=Kl(e,n),t===2&&(a=Pi(e),a!==0&&(n=a,t=no(e,a))),t===1))throw r=Rs,en(e,0),Cr(e,n),Nt(e,ze()),r;switch(e.finishedWork=l,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:Kr(e,yt,dr);break;case 3:if(Cr(e,n),(n&130023424)===n&&(t=sc+500-ze(),10<t)){if(Dl(e,0)!==0)break;if(l=e.suspendedLanes,(l&n)!==n){dt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ai(Kr.bind(null,e,yt,dr),t);break}Kr(e,yt,dr);break;case 4:if(Cr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,l=-1;0<n;){var i=31-Jt(n);a=1<<i,i=t[i],i>l&&(l=i),n&=~a}if(n=l,n=ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ux(n/1960))-n,10<n){e.timeoutHandle=Ai(Kr.bind(null,e,yt,dr),n);break}Kr(e,yt,dr);break;case 5:Kr(e,yt,dr);break;default:throw Error(R(329))}}}return Nt(e,ze()),e.callbackNode===r?kh.bind(null,e):null}function no(e,t){var r=ps;return e.current.memoizedState.isDehydrated&&(en(e,t).flags|=256),e=Kl(e,t),e!==2&&(t=yt,yt=r,t!==null&&so(t)),e}function so(e){yt===null?yt=e:yt.push.apply(yt,e)}function dx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var l=r[n],a=l.getSnapshot;l=l.value;try{if(!er(a(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~nc,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jt(t),n=1<<r;e[r]=-1,t&=~n}}function Md(e){if(me&6)throw Error(R(327));Rn();var t=Dl(e,0);if(!(t&1))return Nt(e,ze()),null;var r=Kl(e,t);if(e.tag!==0&&r===2){var n=Pi(e);n!==0&&(t=n,r=no(e,n))}if(r===1)throw r=Rs,en(e,0),Cr(e,t),Nt(e,ze()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kr(e,yt,dr),Nt(e,ze()),null}function lc(e,t){var r=me;me|=1;try{return e(t)}finally{me=r,me===0&&($n=ze()+500,la&&Br())}}function cn(e){Er!==null&&Er.tag===0&&!(me&6)&&Rn();var t=me;me|=1;var r=Ut.transition,n=xe;try{if(Ut.transition=null,xe=1,e)return e()}finally{xe=n,Ut.transition=r,me=t,!(me&6)&&Br()}}function ac(){Ct=_n.current,Ce(_n)}function en(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ug(r)),Ue!==null)for(r=Ue.return;r!==null;){var n=r;switch($o(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Al();break;case 3:zn(),Ce(jt),Ce(at),Qo();break;case 5:Xo(n);break;case 4:zn();break;case 13:Ce(Le);break;case 19:Ce(Le);break;case 10:Vo(n.type._context);break;case 22:case 23:ac()}r=r.return}if(Ze=e,Ue=e=Ar(e.current,null),tt=Ct=t,Qe=0,Rs=null,nc=ca=on=0,yt=ps=null,Zr!==null){for(t=0;t<Zr.length;t++)if(r=Zr[t],n=r.interleaved,n!==null){r.interleaved=null;var l=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,n.next=i}r.pending=n}Zr=null}return e}function Ch(e,t){do{var r=Ue;try{if(Wo(),jl.current=Gl,Hl){for(var n=Fe.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}Hl=!1}if(an=0,Je=Xe=Fe=null,ms=!1,Ls=0,rc.current=null,r===null||r.return===null){Qe=1,Rs=t,Ue=null;break}e:{var a=e,i=r.return,o=r,c=t;if(t=tt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=o,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var g=Nd(i);if(g!==null){g.flags&=-257,Sd(g,i,o,a,t),g.mode&1&&bd(a,u,t),t=g,c=u;var w=t.updateQueue;if(w===null){var b=new Set;b.add(c),t.updateQueue=b}else w.add(c);break e}else{if(!(t&1)){bd(a,u,t),ic();break e}c=Error(R(426))}}else if(Pe&&o.mode&1){var S=Nd(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Sd(S,i,o,a,t),Uo(On(c,o));break e}}a=c=On(c,o),Qe!==4&&(Qe=2),ps===null?ps=[a]:ps.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=ch(a,c,t);gd(a,p);break e;case 1:o=c;var h=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ir===null||!Ir.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=uh(a,o,t);gd(a,j);break e}}a=a.return}while(a!==null)}Ph(r)}catch(E){t=E,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function _h(){var e=Yl.current;return Yl.current=Gl,e===null?Gl:e}function ic(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||!(on&268435455)&&!(ca&268435455)||Cr(Ze,tt)}function Kl(e,t){var r=me;me|=2;var n=_h();(Ze!==e||tt!==t)&&(dr=null,en(e,t));do try{fx();break}catch(l){Ch(e,l)}while(!0);if(Wo(),me=r,Yl.current=n,Ue!==null)throw Error(R(261));return Ze=null,tt=0,Qe}function fx(){for(;Ue!==null;)Eh(Ue)}function mx(){for(;Ue!==null&&!z0();)Eh(Ue)}function Eh(e){var t=Fh(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Ph(e):Ue=t,rc.current=null}function Ph(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ax(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(r=lx(r,t,Ct),r!==null){Ue=r;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function Kr(e,t,r){var n=xe,l=Ut.transition;try{Ut.transition=null,xe=1,hx(e,t,r,n)}finally{Ut.transition=l,xe=n}return null}function hx(e,t,r,n){do Rn();while(Er!==null);if(me&6)throw Error(R(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(X0(e,a),e===Ze&&(Ue=Ze=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fl||(fl=!0,Dh(Fl,function(){return Rn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ut.transition,Ut.transition=null;var i=xe;xe=1;var o=me;me|=4,rc.current=null,ox(e,r),Nh(r,e),Tg(Ii),Rl=!!Ti,Ii=Ti=null,e.current=r,cx(r),O0(),me=o,xe=i,Ut.transition=a}else e.current=r;if(fl&&(fl=!1,Er=e,Ql=l),a=e.pendingLanes,a===0&&(Ir=null),B0(r.stateNode),Nt(e,ze()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],n(l.value,{componentStack:l.stack,digest:l.digest});if(Xl)throw Xl=!1,e=to,to=null,e;return Ql&1&&e.tag!==0&&Rn(),a=e.pendingLanes,a&1?e===ro?gs++:(gs=0,ro=e):gs=0,Br(),null}function Rn(){if(Er!==null){var e=cm(Ql),t=Ut.transition,r=xe;try{if(Ut.transition=null,xe=16>e?16:e,Er===null)var n=!1;else{if(e=Er,Er=null,Ql=0,me&6)throw Error(R(331));var l=me;for(me|=4,X=e.current;X!==null;){var a=X,i=a.child;if(X.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(X=u;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:hs(8,m,a)}var f=m.child;if(f!==null)f.return=m,X=f;else for(;X!==null;){m=X;var x=m.sibling,g=m.return;if(wh(m),m===u){X=null;break}if(x!==null){x.return=g,X=x;break}X=g}}}var w=a.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}X=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,X=i;else e:for(;X!==null;){if(a=X,a.flags&2048)switch(a.tag){case 0:case 11:case 15:hs(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,X=p;break e}X=a.return}}var h=e.current;for(X=h;X!==null;){i=X;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,X=v;else e:for(i=h;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:oa(9,o)}}catch(E){Ie(o,o.return,E)}if(o===i){X=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,X=j;break e}X=o.return}}if(me=l,Br(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(ea,e)}catch{}n=!0}return n}finally{xe=r,Ut.transition=t}}return!1}function Ad(e,t,r){t=On(r,t),t=ch(e,t,1),e=Tr(e,t,1),t=dt(),e!==null&&(zs(e,1,t),Nt(e,t))}function Ie(e,t,r){if(e.tag===3)Ad(e,e,r);else for(;t!==null;){if(t.tag===3){Ad(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ir===null||!Ir.has(n))){e=On(r,e),e=uh(t,e,1),t=Tr(t,e,1),e=dt(),t!==null&&(zs(t,1,e),Nt(t,e));break}}t=t.return}}function px(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&r,Ze===e&&(tt&r)===r&&(Qe===4||Qe===3&&(tt&130023424)===tt&&500>ze()-sc?en(e,0):nc|=r),Nt(e,t)}function Lh(e,t){t===0&&(e.mode&1?(t=rl,rl<<=1,!(rl&130023424)&&(rl=4194304)):t=1);var r=dt();e=vr(e,t),e!==null&&(zs(e,t,r),Nt(e,r))}function gx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Lh(e,r)}function xx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),Lh(e,r)}var Fh;Fh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wt=!1,sx(e,t,r);wt=!!(e.flags&131072)}else wt=!1,Pe&&t.flags&1048576&&Im(t,$l,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Nl(e,t),e=t.pendingProps;var l=In(t,at.current);Dn(t,r),l=Jo(null,t,n,e,l,r);var a=Zo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(n)?(a=!0,zl(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Go(t),l.updater=ia,t.stateNode=l,l._reactInternals=t,Vi(t,n,e,r),t=Yi(null,t,n,!0,a,r)):(t.tag=0,Pe&&a&&Oo(t),ct(null,t,l,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Nl(e,t),e=t.pendingProps,l=n._init,n=l(n._payload),t.type=n,l=t.tag=yx(n),e=Gt(n,e),l){case 0:t=Gi(null,t,n,e,r);break e;case 1:t=_d(null,t,n,e,r);break e;case 11:t=kd(null,t,n,e,r);break e;case 14:t=Cd(null,t,n,Gt(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Gt(n,l),Gi(e,t,n,l,r);case 1:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Gt(n,l),_d(e,t,n,l,r);case 3:e:{if(hh(t),e===null)throw Error(R(387));n=t.pendingProps,a=t.memoizedState,l=a.element,Um(e,t),Wl(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=On(Error(R(423)),t),t=Ed(e,t,n,r,l);break e}else if(n!==l){l=On(Error(R(424)),t),t=Ed(e,t,n,r,l);break e}else for(Pt=Rr(t.stateNode.containerInfo.firstChild),Lt=t,Pe=!0,Xt=null,r=Om(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mn(),n===l){t=yr(e,t,r);break e}ct(e,t,n,r)}t=t.child}return t;case 5:return Bm(t),e===null&&Ui(t),n=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,Mi(n,l)?i=null:a!==null&&Mi(n,a)&&(t.flags|=32),mh(e,t),ct(e,t,i,r),t.child;case 6:return e===null&&Ui(t),null;case 13:return ph(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=An(t,null,n,r):ct(e,t,n,r),t.child;case 11:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Gt(n,l),kd(e,t,n,l,r);case 7:return ct(e,t,t.pendingProps,r),t.child;case 8:return ct(e,t,t.pendingProps.children,r),t.child;case 12:return ct(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,Se(Ul,n._currentValue),n._currentValue=i,a!==null)if(er(a.value,i)){if(a.children===l.children&&!jt.current){t=yr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=pr(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Bi(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(R(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Bi(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}ct(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,n=t.pendingProps.children,Dn(t,r),l=Bt(l),n=n(l),t.flags|=1,ct(e,t,n,r),t.child;case 14:return n=t.type,l=Gt(n,t.pendingProps),l=Gt(n.type,l),Cd(e,t,n,l,r);case 15:return dh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Gt(n,l),Nl(e,t),t.tag=1,bt(n)?(e=!0,zl(t)):e=!1,Dn(t,r),oh(t,n,l),Vi(t,n,l,r),Yi(null,t,n,!0,e,r);case 19:return gh(e,t,r);case 22:return fh(e,t,r)}throw Error(R(156,t.tag))};function Dh(e,t){return lm(e,t)}function vx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,n){return new vx(e,t,r,n)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yx(e){if(typeof e=="function")return oc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_o)return 11;if(e===Eo)return 14}return 2}function Ar(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cl(e,t,r,n,l,a){var i=2;if(n=e,typeof e=="function")oc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case xn:return tn(r.children,l,a,t);case Co:i=8,l|=8;break;case hi:return e=Ot(12,r,t,l|2),e.elementType=hi,e.lanes=a,e;case pi:return e=Ot(13,r,t,l),e.elementType=pi,e.lanes=a,e;case gi:return e=Ot(19,r,t,l),e.elementType=gi,e.lanes=a,e;case Bf:return ua(r,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $f:i=10;break e;case Uf:i=9;break e;case _o:i=11;break e;case Eo:i=14;break e;case Nr:i=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Ot(i,r,t,l),t.elementType=e,t.type=n,t.lanes=a,t}function tn(e,t,r,n){return e=Ot(7,e,n,t),e.lanes=r,e}function ua(e,t,r,n){return e=Ot(22,e,n,t),e.elementType=Bf,e.lanes=r,e.stateNode={isHidden:!1},e}function Za(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function qa(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wx(e,t,r,n,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function cc(e,t,r,n,l,a,i,o,c){return e=new wx(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ot(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Go(a),e}function jx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Rh(e){if(!e)return Or;e=e._reactInternals;e:{if(dn(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(bt(r))return Rm(e,r,t)}return t}function Th(e,t,r,n,l,a,i,o,c){return e=cc(r,n,!0,e,l,a,i,o,c),e.context=Rh(null),r=e.current,n=dt(),l=Mr(r),a=pr(n,l),a.callback=t??null,Tr(r,a,l),e.current.lanes=l,zs(e,l,n),Nt(e,n),e}function da(e,t,r,n){var l=t.current,a=dt(),i=Mr(l);return r=Rh(r),t.context===null?t.context=r:t.pendingContext=r,t=pr(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Tr(l,t,i),e!==null&&(Zt(e,l,i,a),wl(e,l,i)),i}function Jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function uc(e,t){zd(e,t),(e=e.alternate)&&zd(e,t)}function bx(){return null}var Ih=typeof reportError=="function"?reportError:function(e){console.error(e)};function dc(e){this._internalRoot=e}fa.prototype.render=dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));da(e,t,null,null)};fa.prototype.unmount=dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cn(function(){da(null,e,null,null)}),t[xr]=null}};function fa(e){this._internalRoot=e}fa.prototype.unstable_scheduleHydration=function(e){if(e){var t=fm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<kr.length&&t!==0&&t<kr[r].priority;r++);kr.splice(r,0,e),r===0&&hm(e)}};function fc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ma(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Od(){}function Nx(e,t,r,n,l){if(l){if(typeof n=="function"){var a=n;n=function(){var u=Jl(i);a.call(u)}}var i=Th(t,n,e,0,null,!1,!1,"",Od);return e._reactRootContainer=i,e[xr]=i.current,ks(e.nodeType===8?e.parentNode:e),cn(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof n=="function"){var o=n;n=function(){var u=Jl(c);o.call(u)}}var c=cc(e,0,!1,null,null,!1,!1,"",Od);return e._reactRootContainer=c,e[xr]=c.current,ks(e.nodeType===8?e.parentNode:e),cn(function(){da(t,c,r,n)}),c}function ha(e,t,r,n,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var c=Jl(i);o.call(c)}}da(t,i,e,l)}else i=Nx(r,t,e,l,n);return Jl(i)}um=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=as(t.pendingLanes);r!==0&&(Fo(t,r|1),Nt(t,ze()),!(me&6)&&($n=ze()+500,Br()))}break;case 13:cn(function(){var n=vr(e,1);if(n!==null){var l=dt();Zt(n,e,1,l)}}),uc(e,1)}};Do=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=dt();Zt(t,e,134217728,r)}uc(e,134217728)}};dm=function(e){if(e.tag===13){var t=Mr(e),r=vr(e,t);if(r!==null){var n=dt();Zt(r,e,t,n)}uc(e,t)}};fm=function(){return xe};mm=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}};Ci=function(e,t,r){switch(t){case"input":if(yi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var l=sa(n);if(!l)throw Error(R(90));Vf(n),yi(n,l)}}}break;case"textarea":Gf(e,r);break;case"select":t=r.value,t!=null&&En(e,!!r.multiple,t,!1)}};qf=lc;em=cn;var Sx={usingClientEntryPoint:!1,Events:[$s,jn,sa,Jf,Zf,lc]},es={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kx={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nm(e),e===null?null:e.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{ea=ml.inject(kx),lr=ml}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fc(t))throw Error(R(200));return jx(e,t,null,r)};Rt.createRoot=function(e,t){if(!fc(e))throw Error(R(299));var r=!1,n="",l=Ih;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=cc(e,1,!1,null,null,r,!1,n,l),e[xr]=t.current,ks(e.nodeType===8?e.parentNode:e),new dc(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=nm(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return cn(e)};Rt.hydrate=function(e,t,r){if(!ma(t))throw Error(R(200));return ha(null,e,t,!0,r)};Rt.hydrateRoot=function(e,t,r){if(!fc(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,l=!1,a="",i=Ih;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Th(t,null,e,1,r??null,l,!1,a,i),e[xr]=t.current,ks(e),n)for(e=0;e<n.length;e++)r=n[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new fa(t)};Rt.render=function(e,t,r){if(!ma(t))throw Error(R(200));return ha(null,e,t,!1,r)};Rt.unmountComponentAtNode=function(e){if(!ma(e))throw Error(R(40));return e._reactRootContainer?(cn(function(){ha(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1};Rt.unstable_batchedUpdates=lc;Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ma(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ha(e,t,r,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Mh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mh)}catch(e){console.error(e)}}Mh(),Mf.exports=Rt;var mc=Mf.exports,$d=mc;fi.createRoot=$d.createRoot,fi.hydrateRoot=$d.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ts.apply(this,arguments)}var Pr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pr||(Pr={}));const Ud="popstate";function Cx(e){e===void 0&&(e={});function t(n,l){let{pathname:a,search:i,hash:o}=n.location;return lo("",{pathname:a,search:i,hash:o},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:Ah(l)}return Ex(t,r,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _x(){return Math.random().toString(36).substr(2,8)}function Bd(e,t){return{usr:e.state,key:e.key,idx:t}}function lo(e,t,r,n){return r===void 0&&(r=null),Ts({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hn(t):t,{state:r,key:t&&t.key||n||_x()})}function Ah(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ex(e,t,r,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:a=!1}=n,i=l.history,o=Pr.Pop,c=null,u=m();u==null&&(u=0,i.replaceState(Ts({},i.state,{idx:u}),""));function m(){return(i.state||{idx:null}).idx}function f(){o=Pr.Pop;let S=m(),p=S==null?null:S-u;u=S,c&&c({action:o,location:b.location,delta:p})}function x(S,p){o=Pr.Push;let h=lo(b.location,S,p);u=m()+1;let v=Bd(h,u),j=b.createHref(h);try{i.pushState(v,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;l.location.assign(j)}a&&c&&c({action:o,location:b.location,delta:1})}function g(S,p){o=Pr.Replace;let h=lo(b.location,S,p);u=m();let v=Bd(h,u),j=b.createHref(h);i.replaceState(v,"",j),a&&c&&c({action:o,location:b.location,delta:0})}function w(S){let p=l.location.origin!=="null"?l.location.origin:l.location.href,h=typeof S=="string"?S:Ah(S);return h=h.replace(/ $/,"%20"),Be(p,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,p)}let b={get action(){return o},get location(){return e(l,i)},listen(S){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(Ud,f),c=S,()=>{l.removeEventListener(Ud,f),c=null}},createHref(S){return t(l,S)},createURL:w,encodeLocation(S){let p=w(S);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:x,replace:g,go(S){return i.go(S)}};return b}var Wd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wd||(Wd={}));function Px(e,t,r){return r===void 0&&(r="/"),Lx(e,t,r)}function Lx(e,t,r,n){let l=typeof t=="string"?Hn(t):t,a=$h(l.pathname||"/",r);if(a==null)return null;let i=zh(e);Fx(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=Wx(a);o=$x(i[c],u)}return o}function zh(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let l=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=rn([n,c.relativePath]),m=r.concat(c);a.children&&a.children.length>0&&(Be(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zh(a.children,t,m,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:zx(u,a.index),routesMeta:m})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))l(a,i);else for(let c of Oh(a.path))l(a,i,c)}),t}function Oh(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,l=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return l?[a,""]:[a];let i=Oh(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),l&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Fx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ox(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Dx=/^:[\w-]+$/,Rx=3,Tx=2,Ix=1,Mx=10,Ax=-2,Vd=e=>e==="*";function zx(e,t){let r=e.split("/"),n=r.length;return r.some(Vd)&&(n+=Ax),t&&(n+=Tx),r.filter(l=>!Vd(l)).reduce((l,a)=>l+(Dx.test(a)?Rx:a===""?Ix:Mx),n)}function Ox(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function $x(e,t,r){let{routesMeta:n}=e,l={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,m=a==="/"?t:t.slice(a.length)||"/",f=Ux({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),x=c.route;if(!f)return null;Object.assign(l,f.params),i.push({params:l,pathname:rn([a,f.pathname]),pathnameBase:Xx(rn([a,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(a=rn([a,f.pathnameBase]))}return i}function Ux(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Bx(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let a=l[0],i=a.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:n.reduce((u,m,f)=>{let{paramName:x,isOptional:g}=m;if(x==="*"){let b=o[f]||"";i=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const w=o[f];return g&&!w?u[x]=void 0:u[x]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function Bx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function Wx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $h(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hx=e=>Vx.test(e);function Gx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:l=""}=typeof e=="string"?Hn(e):e,a;if(r)if(Hx(r))a=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),hc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?a=Hd(r.substring(1),"/"):a=Hd(r,t)}else a=t;return{pathname:a,search:Qx(n),hash:Kx(l)}}function Hd(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function ei(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Uh(e,t){let r=Yx(e);return t?r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Bh(e,t,r,n){n===void 0&&(n=!1);let l;typeof e=="string"?l=Hn(e):(l=Ts({},e),Be(!l.pathname||!l.pathname.includes("?"),ei("?","pathname","search",l)),Be(!l.pathname||!l.pathname.includes("#"),ei("#","pathname","hash",l)),Be(!l.search||!l.search.includes("#"),ei("#","search","hash",l)));let a=e===""||l.pathname==="",i=a?"/":l.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),f-=1;l.pathname=x.join("/")}o=f>=0?t[f]:"/"}let c=Gx(l,o),u=i&&i!=="/"&&i.endsWith("/"),m=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const rn=e=>e.join("/").replace(/\/\/+/g,"/"),Xx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Kx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Wh=["post","put","patch","delete"];new Set(Wh);const Zx=["get",...Wh];new Set(Zx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Is.apply(this,arguments)}const pc=d.createContext(null),qx=d.createContext(null),Bs=d.createContext(null),pa=d.createContext(null),Wr=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Vh=d.createContext(null);function Ws(){return d.useContext(pa)!=null}function fn(){return Ws()||Be(!1),d.useContext(pa).location}function Hh(e){d.useContext(Bs).static||d.useLayoutEffect(e)}function It(){let{isDataRoute:e}=d.useContext(Wr);return e?mv():ev()}function ev(){Ws()||Be(!1);let e=d.useContext(pc),{basename:t,future:r,navigator:n}=d.useContext(Bs),{matches:l}=d.useContext(Wr),{pathname:a}=fn(),i=JSON.stringify(Uh(l,r.v7_relativeSplatPath)),o=d.useRef(!1);return Hh(()=>{o.current=!0}),d.useCallback(function(u,m){if(m===void 0&&(m={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Bh(u,JSON.parse(i),a,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:rn([t,f.pathname])),(m.replace?n.replace:n.push)(f,m.state,m)},[t,n,i,a,e])}function tv(){let{matches:e}=d.useContext(Wr),t=e[e.length-1];return t?t.params:{}}function rv(e,t){return nv(e,t)}function nv(e,t,r,n){Ws()||Be(!1);let{navigator:l}=d.useContext(Bs),{matches:a}=d.useContext(Wr),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=fn(),m;if(t){var f;let S=typeof t=="string"?Hn(t):t;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||Be(!1),m=S}else m=u;let x=m.pathname||"/",g=x;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Px(e,{pathname:g}),b=ov(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:rn([c,l.encodeLocation?l.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:rn([c,l.encodeLocation?l.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,r,n);return t&&b?d.createElement(pa.Provider,{value:{location:Is({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Pr.Pop}},b):b}function sv(){let e=fv(),t=Jx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),r?d.createElement("pre",{style:l},r):null,null)}const lv=d.createElement(sv,null);class av extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?d.createElement(Wr.Provider,{value:this.props.routeContext},d.createElement(Vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iv(e){let{routeContext:t,match:r,children:n}=e,l=d.useContext(pc);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(Wr.Provider,{value:t},n)}function ov(e,t,r,n){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(l=r)==null?void 0:l.errors;if(o!=null){let m=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);m>=0||Be(!1),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=m),f.route.id){let{loaderData:x,errors:g}=r,w=f.route.loader&&x[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((m,f,x)=>{let g,w=!1,b=null,S=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||lv,c&&(u<0&&x===0?(hv("route-fallback"),w=!0,S=null):u===x&&(w=!0,S=f.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,x+1)),h=()=>{let v;return g?v=b:w?v=S:f.route.Component?v=d.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=m,d.createElement(iv,{match:f,routeContext:{outlet:m,matches:p,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?d.createElement(av,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:h(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):h()},null)}var Gh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Gh||{}),Yh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Yh||{});function cv(e){let t=d.useContext(pc);return t||Be(!1),t}function uv(e){let t=d.useContext(qx);return t||Be(!1),t}function dv(e){let t=d.useContext(Wr);return t||Be(!1),t}function Xh(e){let t=dv(),r=t.matches[t.matches.length-1];return r.route.id||Be(!1),r.route.id}function fv(){var e;let t=d.useContext(Vh),r=uv(),n=Xh();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function mv(){let{router:e}=cv(Gh.UseNavigateStable),t=Xh(Yh.UseNavigateStable),r=d.useRef(!1);return Hh(()=>{r.current=!0}),d.useCallback(function(l,a){a===void 0&&(a={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Is({fromRouteId:t},a)))},[e,t])}const Gd={};function hv(e,t,r){Gd[e]||(Gd[e]=!0)}function pv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qh(e){let{to:t,replace:r,state:n,relative:l}=e;Ws()||Be(!1);let{future:a,static:i}=d.useContext(Bs),{matches:o}=d.useContext(Wr),{pathname:c}=fn(),u=It(),m=Bh(t,Uh(o,a.v7_relativeSplatPath),c,l==="path"),f=JSON.stringify(m);return d.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:l}),[u,f,l,r,n]),null}function Mt(e){Be(!1)}function gv(e){let{basename:t="/",children:r=null,location:n,navigationType:l=Pr.Pop,navigator:a,static:i=!1,future:o}=e;Ws()&&Be(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:a,static:i,future:Is({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=Hn(n));let{pathname:m="/",search:f="",hash:x="",state:g=null,key:w="default"}=n,b=d.useMemo(()=>{let S=$h(m,c);return S==null?null:{location:{pathname:S,search:f,hash:x,state:g,key:w},navigationType:l}},[c,m,f,x,g,w,l]);return b==null?null:d.createElement(Bs.Provider,{value:u},d.createElement(pa.Provider,{children:r,value:b}))}function xv(e){let{children:t,location:r}=e;return rv(ao(t),r)}new Promise(()=>{});function ao(e,t){t===void 0&&(t=[]);let r=[];return d.Children.forEach(e,(n,l)=>{if(!d.isValidElement(n))return;let a=[...t,l];if(n.type===d.Fragment){r.push.apply(r,ao(n.props.children,a));return}n.type!==Mt&&Be(!1),!n.props.index||!n.props.children||Be(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=ao(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const vv="6";try{window.__reactRouterVersion=vv}catch{}const yv="startTransition",Yd=p0[yv];function wv(e){let{basename:t,children:r,future:n,window:l}=e,a=d.useRef();a.current==null&&(a.current=Cx({window:l,v5Compat:!0}));let i=a.current,[o,c]=d.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},m=d.useCallback(f=>{u&&Yd?Yd(()=>c(f)):c(f)},[c,u]);return d.useLayoutEffect(()=>i.listen(m),[i,m]),d.useEffect(()=>pv(n),[n]),d.createElement(gv,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var Xd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xd||(Xd={}));var Qd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qd||(Qd={}));const jv="modulepreload",bv=function(e){return"/"+e},Kd={},Kh=function(t,r,n){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(r.map(c=>{if(c=bv(c),c in Kd)return;Kd[c]=!0;const u=c.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":jv,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((x,g)=>{f.addEventListener("load",x),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return l.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Jh=d.createContext(void 0);function Nv({children:e}){const[t,r]=d.useState(null),[n,l]=d.useState(!0),a=It();d.useEffect(()=>{const c=localStorage.getItem("user");if(c)try{r(JSON.parse(c))}catch{localStorage.removeItem("user")}l(!1)},[]);const i=(c,u)=>{localStorage.setItem("user",JSON.stringify(u)),r(u),a("/")},o=()=>{localStorage.removeItem("user"),r(null),a("/auth")};return s.jsx(Jh.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:n,login:i,logout:o},children:e})}function jr(){const e=d.useContext(Jh);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Sv="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec";class kv{getUserEmail(){const t=localStorage.getItem("user");if(!t)return null;try{return JSON.parse(t).email||null}catch{return null}}async request(t,r={}){var i,o,c,u,m;const n=this.getUserEmail(),l={...r.headers||{}},a=n?`&auth=${encodeURIComponent("Email "+n)}`:"";try{const x=await(await fetch(`${Sv}?path=${t}${a}`,{...r,headers:l})).json();if(!x.ok){if(((i=x.error)==null?void 0:i.code)==="INVALID_TOKEN"||((o=x.error)==null?void 0:o.code)==="AUTH_REQUIRED"||((c=x.error)==null?void 0:c.code)==="FORBIDDEN"){localStorage.removeItem("user");const g=((u=x.error)==null?void 0:u.message)||"Your account is not authorized to access this application.";throw localStorage.setItem("auth_error",g),window.location.href="/auth",new Error(g)}throw new Error(((m=x.error)==null?void 0:m.message)||"An error occurred")}return x.data}catch(f){throw f instanceof Error?f:new Error("Network error")}}async get(t,r,n={}){const l=r?Object.fromEntries(Object.entries(r).filter(([i,o])=>o!==void 0)):void 0,a=l?"&"+new URLSearchParams(l).toString():"";return this.request(`${t}${a}`,{method:"POST",...n})}async post(t,r,n={}){return this.request(t,{method:"POST",body:JSON.stringify(r),...n})}async put(t,r){return this.request(t,{method:"PUT",body:JSON.stringify(r)})}}const ce=new kv,Jd={async get(){return ce.get("profile/get")},async save(e){return ce.post("profile/save",e)}};function Cv(e){return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{const a=n.result.split(",")[1];t(a)},n.onerror=r})}const Zh=d.createContext(void 0);let ts=null,ti=null;function _v({children:e}){const{isAuthenticated:t,isLoading:r}=jr(),[n,l]=d.useState(null),[a,i]=d.useState(!1),[o,c]=d.useState(null),u=async()=>{if(t){i(!0);try{const f=await Jd.get();if(l({pseudo:f.pseudo,famileo_email:f.famileo_email,famileo_name:f.famileo_name,famileo_password_set:f.famileo_password_set,avatar_url:f.avatar_url}),f.avatar_base64&&f.avatar_url!==ti)try{const x=`data:image/jpeg;base64,${f.avatar_base64}`;ts&&URL.revokeObjectURL(ts),ts=x,ti=f.avatar_url,c(x)}catch(x){console.error("Failed to convert avatar to data URL:",x),c(null)}else f.avatar_url===ti&&ts?c(ts):f.avatar_base64||c(null)}catch(f){console.error("Failed to load profile:",f)}finally{i(!1)}}};d.useEffect(()=>{!r&&t&&u()},[t,r]);const m=async(f,x,g,w,b)=>{try{const S={pseudo:f,famileo_email:x,famileo_name:g};if(w&&w.trim()&&(S.famileo_password=w.trim()),b){const h=await Cv(b);S.avatar=h}const p=await Jd.save(S);l({pseudo:p.pseudo,famileo_email:p.famileo_email,famileo_password_set:p.famileo_password_set,avatar_url:p.avatar_url}),await u()}catch(S){throw console.error("Failed to save profile:",S),S}};return s.jsx(Zh.Provider,{value:{profile:n,isLoading:a,saveProfile:m,reloadProfile:u,avatarBlobUrl:o},children:e})}function gc(){const e=d.useContext(Zh);if(!e)throw new Error("useProfile must be used within ProfileProvider");return e}function Et({size:e="md",className:t=""}){const n={sm:{width:16,height:16,border:2},md:{width:32,height:32,border:3},lg:{width:48,height:48,border:4}}[e];return s.jsx("div",{className:`rounded-full animate-spin ${t}`,style:{width:n.width,height:n.height,borderWidth:n.border,borderStyle:"solid",borderColor:"#2563eb",borderTopColor:"transparent"}})}function Vs({message:e="Loading..."}){return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx(Et,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:e})]})}function ur({children:e}){const{isAuthenticated:t,isLoading:r}=jr();return r?s.jsx(Vs,{message:"Checking authentication..."}):t?s.jsx(s.Fragment,{children:e}):s.jsx(Qh,{to:"/auth",replace:!0})}function ye({variant:e="primary",fullWidth:t=!1,className:r="",children:n,...l}){const a="px-6 py-3 rounded-lg font-medium transition-colors touch-manipulation flex items-center justify-center",i={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 disabled:bg-gray-300",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400 disabled:bg-gray-100",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800 disabled:bg-gray-300"},o=t?"w-full":"";return s.jsx("button",{className:`${a} ${i[e]} ${o} ${r}`,...l,children:n})}const Ms={MAX_TEXT_LENGTH:300,MAX_PHOTOS_IN_ASSEMBLY:10,IMAGE_MAX_SIZE_MB:2,TIMEZONE:"Europe/Paris",PDF_POLL_INTERVAL_MS:3e3,INFINITE_SCROLL_THRESHOLD:.8,TARGET_IMAGE_WIDTH_PX:2480,ARTICLES_PER_PAGE:10},qh=["January","February","March","April","May","June","July","August","September","October","November","December"];function ep(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function Ev(){const{login:e}=jr(),t=It(),[r,n]=d.useState(!1),[l,a]=d.useState(null),[i]=d.useState(ep()),[o,c]=d.useState(!1);d.useEffect(()=>{var w;const m=localStorage.getItem("user");if(!m)return;let f="";try{f=((w=JSON.parse(m))==null?void 0:w.email)||""}catch{localStorage.removeItem("user");return}if(!f)return;n(!0);const x="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",g=`&auth=${encodeURIComponent("Email "+f)}`;fetch(`${x}?path=auth/check${g}`,{method:"POST"}).then(b=>b.json()).then(b=>{if(b!=null&&b.ok){t("/");return}localStorage.removeItem("user")}).catch(()=>{localStorage.removeItem("user")}).finally(()=>{n(!1)})},[t]),d.useEffect(()=>{const m=localStorage.getItem("auth_error");m&&(a(m),localStorage.removeItem("auth_error"))},[]),d.useEffect(()=>{const m=document.createElement("script");return m.src="https://accounts.google.com/gsi/client",m.async=!0,m.defer=!0,document.body.appendChild(m),()=>{document.body.removeChild(m)}},[]);const u=()=>{var f,x,g;n(!0),a(null);const m=(g=(x=(f=window.google)==null?void 0:f.accounts)==null?void 0:x.oauth2)==null?void 0:g.initTokenClient({client_id:"175845978100-rqclosiat622f3b7ijpg17t2fnrnb522.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",callback:w=>{w.access_token?fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${w.access_token}`}}).then(b=>b.json()).then(b=>{const S=b.email,p=b.name,h="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",v=`&auth=${encodeURIComponent("Email "+S)}`;fetch(`${h}?path=auth/check${v}`,{method:"POST"}).then(j=>j.json()).then(j=>{var E;if(!(j!=null&&j.ok)){a(((E=j==null?void 0:j.error)==null?void 0:E.message)||"Your account is not authorized to access this application.");return}e(w.access_token,{email:S,name:p})}).catch(()=>{a("Failed to verify authorization")}).finally(()=>{n(!1)})}).catch(()=>{a("Failed to get user information"),n(!1),i&&c(!0)}):(a("Failed to authenticate with Google"),n(!1),i&&c(!0))},error_callback:()=>{a("Google Sign-In failed"),n(!1),i&&c(!0)}});m==null||m.requestAccessToken()};return r?s.jsx(Vs,{message:"Signing in..."}):i&&o?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),s.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),s.jsx("div",{className:"mb-6 w-full max-w-md",children:s.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Safari login required"}),s.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"Google sign-in doesn't work in app mode. Please login from Safari:"}),s.jsxs("ol",{className:"text-blue-800 text-sm space-y-2 mb-4 list-decimal list-inside",children:[s.jsx("li",{children:"Open Safari on your iPhone"}),s.jsxs("li",{children:["Go to ",s.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:"grut505.github.io"})]}),s.jsx("li",{children:"Sign in with your Google account"}),s.jsx("li",{children:"Add the app to your home screen again"})]}),s.jsx("p",{className:"text-blue-700 text-xs italic",children:"Important: you must re-add the app to your home screen after signing in from Safari."})]})}),s.jsx(ye,{onClick:()=>{window.location.href="https://grut505.github.io/auth"},className:"w-full max-w-sm",children:"Open in Safari"}),s.jsx("button",{onClick:()=>c(!1),className:"mt-4 text-sm text-gray-600 underline",children:"Try sign-in again"})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),s.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),l&&s.jsx("div",{className:"mb-6 w-full max-w-sm",children:s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("div",{className:"text-red-600 text-center text-sm",children:l})})}),s.jsx(ye,{onClick:u,className:"w-full max-w-sm",children:l?"Try another account":"Sign in with Google"})]})}const Pv={},Zd=e=>{let t;const r=new Set,n=(m,f)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const g=t;t=f??(typeof x!="object"||x===null)?x:Object.assign({},t,x),r.forEach(w=>w(t,g))}},l=()=>t,c={setState:n,getState:l,getInitialState:()=>u,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{(Pv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,l,c);return c},Lv=e=>e?Zd(e):Zd;var tp={exports:{}},rp={},np={exports:{}},sp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=d;function Fv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dv=typeof Object.is=="function"?Object.is:Fv,Rv=Un.useState,Tv=Un.useEffect,Iv=Un.useLayoutEffect,Mv=Un.useDebugValue;function Av(e,t){var r=t(),n=Rv({inst:{value:r,getSnapshot:t}}),l=n[0].inst,a=n[1];return Iv(function(){l.value=r,l.getSnapshot=t,ri(l)&&a({inst:l})},[e,r,t]),Tv(function(){return ri(l)&&a({inst:l}),e(function(){ri(l)&&a({inst:l})})},[e]),Mv(r),r}function ri(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Dv(e,r)}catch{return!0}}function zv(e,t){return t()}var Ov=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zv:Av;sp.useSyncExternalStore=Un.useSyncExternalStore!==void 0?Un.useSyncExternalStore:Ov;np.exports=sp;var $v=np.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=d,Uv=$v;function Bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wv=typeof Object.is=="function"?Object.is:Bv,Vv=Uv.useSyncExternalStore,Hv=ga.useRef,Gv=ga.useEffect,Yv=ga.useMemo,Xv=ga.useDebugValue;rp.useSyncExternalStoreWithSelector=function(e,t,r,n,l){var a=Hv(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=Yv(function(){function c(g){if(!u){if(u=!0,m=g,g=n(g),l!==void 0&&i.hasValue){var w=i.value;if(l(w,g))return f=w}return f=g}if(w=f,Wv(m,g))return w;var b=n(g);return l!==void 0&&l(w,b)?(m=g,w):(m=g,f=b)}var u=!1,m,f,x=r===void 0?null:r;return[function(){return c(t())},x===null?void 0:function(){return c(x())}]},[t,r,n,l]);var o=Vv(e,a[0],a[1]);return Gv(function(){i.hasValue=!0,i.value=o},[o]),Xv(o),o};tp.exports=rp;var Qv=tp.exports;const Kv=xo(Qv),lp={},{useDebugValue:Jv}=bo,{useSyncExternalStoreWithSelector:Zv}=Kv;let qd=!1;const qv=e=>e;function ey(e,t=qv,r){(lp?"production":void 0)!=="production"&&r&&!qd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qd=!0);const n=Zv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Jv(n),n}const ef=e=>{(lp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Lv(e):e,r=(n,l)=>ey(t,n,l);return Object.assign(r,t),r},xc=e=>e?ef(e):ef,tf={year:"",month:"",from:"",to:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"},nr=xc(e=>({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:tf,setArticles:(t,r=null)=>{const n=new Set,l=t.filter(a=>n.has(a.id)?!1:(n.add(a.id),!0));return e({articles:l,cursor:r,hasMore:r!==null})},addArticles:(t,r)=>e(n=>{const l=new Set(n.articles.map(i=>i.id)),a=t.filter(i=>!l.has(i.id));return{articles:[...n.articles,...a],cursor:r,hasMore:r!==null}}),updateArticle:t=>e(r=>({articles:r.articles.map(n=>n.id===t.id?t:n)})),deleteArticle:t=>e(r=>({articles:r.articles.filter(n=>n.id!==t)})),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setFilters:t=>e({filters:t}),reset:()=>e({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:tf})})),$t={list:e=>ce.get("articles/list",e),authors:e=>ce.get("articles/authors",e),get:e=>ce.get("articles/get",{id:e}),create:e=>ce.post("articles/create",e),update:e=>ce.post("articles/update",e),delete:e=>ce.get("articles/delete",{id:e}),permanentDelete:e=>ce.get("articles/permanent-delete",{id:e}),backfillFamileoFingerprints:()=>ce.get("articles/backfill-famileo-fingerprints")};function ap({onClick:e,icon:t,className:r="",pwaOffsetClassName:n=""}){var a;const l=typeof window<"u"&&((a=window.matchMedia)==null?void 0:a.call(window,"(display-mode: standalone)").matches)||typeof window<"u"&&window.navigator.standalone===!0;return s.jsx("button",{onClick:e,className:`w-16 h-16 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 active:bg-blue-800 flex items-center justify-center text-3xl touch-manipulation ${r} ${l?n:""}`,"aria-label":"Create new article",children:t||"+"})}function ip({message:e,onRetry:t,retryLabel:r="Retry"}){return s.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("div",{className:"text-red-600 text-center mb-4",children:e}),t&&s.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:r})]})}function ir(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function io(){return new Date().getFullYear()}function oo(e){return new Date(e).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function rs(e){const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}const rf=new Map;function ty(e){if(!e)return null;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/thumbnail\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function Hs(e,t){const[r,n]=d.useState(""),[l,a]=d.useState(!0),[i,o]=d.useState(!1);return d.useEffect(()=>{if(!e){n(""),a(!1),o(!1);return}if(e.startsWith("data:")||e.startsWith("blob:")){n(e),a(!1),o(!1);return}const c=t||ty(e);if(!c){o(!0),a(!1);return}const u=rf.get(c);if(u){n(u),a(!1),o(!1);return}a(!0),o(!1),(async()=>{try{const f=await ce.get("image/fetch",{fileId:c});if(!f.base64){o(!0),a(!1);return}const x=`data:image/jpeg;base64,${f.base64}`;rf.set(c,x),n(x),a(!1)}catch{o(!0),a(!1)}})()},[e,t]),{src:r,isLoading:l,error:i}}function Ft({isOpen:e,title:t,message:r,confirmLabel:n="Confirm",cancelLabel:l="Cancel",onConfirm:a,onCancel:i,variant:o="primary",isLoading:c=!1,progress:u=null}){return e?mc.createPortal(s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:m=>m.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:m=>{m.stopPropagation(),i()}}),s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",onClick:m=>m.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:t}),s.jsx("p",{className:"text-gray-600 mb-4",children:r}),u&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Deleting..."}),s.jsxs("span",{children:[u.current," / ",u.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-red-600 h-2.5 rounded-full transition-all duration-200",style:{width:`${u.current/u.total*100}%`}})})]}),!u&&s.jsx("div",{className:"mb-2"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ye,{variant:"secondary",fullWidth:!0,onClick:m=>{m.stopPropagation(),i()},disabled:c,children:l}),s.jsx(ye,{variant:o,fullWidth:!0,onClick:m=>{m.stopPropagation(),a()},disabled:c,children:c?"Deleting...":n})]})]})]}),document.body):null}function xa({isOpen:e,onClose:t,title:r,children:n,align:l="bottom"}){if(d.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const a=l==="center"?"items-center":"items-end sm:items-center",i=l==="center"?"rounded-2xl":"rounded-t-2xl sm:rounded-2xl";return mc.createPortal(s.jsxs("div",{className:`fixed inset-0 z-[1000] flex ${a} justify-center`,children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsxs("div",{className:`relative bg-white ${i} w-full sm:max-w-lg max-h-[85vh] sm:max-h-[90vh] flex flex-col shadow-xl`,children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 touch-manipulation p-2",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:n})]})]}),document.body)}const _t={status:e=>ce.get("famileo/status",e),posts:(e,t)=>ce.get("famileo/posts",e,t),image:e=>ce.get("famileo/image",{url:encodeURIComponent(e)}),triggerRefresh:()=>ce.get("famileo/trigger-refresh"),families:()=>ce.get("famileo/families"),importedIds:()=>ce.get("famileo/imported-ids"),importedFingerprints:()=>ce.get("famileo/imported-fingerprints"),createPost:e=>ce.post("famileo/create-post",e),presignImage:e=>ce.post("famileo/presigned-image",e||{}),uploadImage:e=>ce.post("famileo/upload-image",e)},vc={list:()=>ce.get("users/list")};function nf(e){if(!e)return null;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/thumbnail\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function va({isOpen:e,onClose:t,authorLabel:r,authorEmail:n,dateLabel:l,excerpt:a,text:i,publishedAt:o,familyId:c,imageUrl:u,imageFileId:m}){const[f,x]=d.useState(!1),[g,w]=d.useState(null),[b,S]=d.useState(null),[p,h]=d.useState(!1),[v,j]=d.useState(null),[E,P]=d.useState(""),[L,N]=d.useState(""),[z,T]=d.useState(!1),[Q,U]=d.useState(null),[O,Z]=d.useState([]),[J,H]=d.useState(!1),[ne,F]=d.useState(c?[c]:[]),[I,A]=d.useState({}),[B,q]=d.useState(c?"custom":"all"),[ge,Y]=d.useState(0),[ie,se]=d.useState({}),[we,Re]=d.useState([]),[Te,be]=d.useState(!1),Ne=i||"",We=o||new Date().toISOString(),Ve=n||"",Oe=O.reduce((V,W)=>(V[W.famileo_id]=W.name,V),{}),He=V=>{if(!V)return"";const W=new Date(V);if(isNaN(W.getTime()))return V;const K=qe=>String(qe).padStart(2,"0"),ee=W.getFullYear(),re=K(W.getMonth()+1),de=K(W.getDate()),je=K(W.getHours()),Ee=K(W.getMinutes());return`${ee}-${re}-${de}T${je}:${Ee}`},_e=He(We),$=I.all,oe=B==="all"?!!($&&$.text.trim()&&$.text.length<=300&&O.length>0):ne.length>0&&ne.every(V=>{var K;const W=((K=I[V])==null?void 0:K.text)||"";return W.trim()&&W.length<=300}),ae=O.filter(V=>!ne.includes(String(V.famileo_id)));d.useEffect(()=>{e&&(w(null),S(null),x(!1),j(null),P(""),N(""),h(!1),U(null),F(c?[c]:[]),q(c?"custom":"all"),Y(0),A({}),se({}))},[e,c]),d.useEffect(()=>{e&&(H(!0),_t.families().then(V=>{Z(V.families||[]),A(W=>W.all?W:{...W,all:{text:Ne,date:_e,fullPage:!1,author:Ve}})}).catch(()=>{Z([])}).finally(()=>{H(!1)}))},[e]),d.useEffect(()=>{e&&(be(!0),vc.list().then(V=>{const W=(V.users||[]).filter(K=>String(K.status||"").toUpperCase()==="ACTIVE");Re(W)}).catch(()=>{Re([])}).finally(()=>{be(!1)}))},[e]),d.useEffect(()=>{if(!e)return;const V=m||nf(u||"");V&&(h(!0),j(null),ce.get("image/fetch",{fileId:V}).then(W=>{if(!W.base64)throw new Error("Image not found.");N(W.base64),P(`data:image/jpeg;base64,${W.base64}`)}).catch(W=>{j(W instanceof Error?W.message:"Failed to load image.")}).finally(()=>{h(!1)}))},[e,u,m]);const he=async()=>{if(B==="all"&&O.length===0){w("No families available.");return}if(B==="custom"&&ne.length===0){w("Please select a family.");return}x(!0),w(null),S(null);try{const V=m||nf(u||"");let W=L;V&&!W&&(U("Loading image"),W=(await ce.get("image/fetch",{fileId:V})).base64);const K=B==="all"?O.map(ee=>ee.famileo_id):ne;for(let ee=0;ee<K.length;ee++){const re=K[ee],de=O.find($e=>$e.famileo_id===re),je=B==="all"?I.all:I[re],Ee=je?je.text:i||"";if(!Ee||!Ee.trim())throw new Error("Text is empty.");if(Ee.length>300)throw new Error("Text exceeds 300 characters.");const qe=je?je.date:o,Ke=qe?new Date(qe):new Date,St=isNaN(Ke.getTime())?new Date().toISOString():Ke.toISOString(),ht=je?je.author:Ve;U(`Uploading image  ${de?de.name:"Unknown family"}`);let it="";if(W){const $e=await _t.presignImage({author_email:ht||void 0}),pt=JSON.parse($e.raw);it=(await _t.uploadImage({presign:pt,image_base64:W,mime_type:"image/jpeg",filename:"Untitled.jpg",author_email:ht||void 0})).key||""}U(`Creating post  ${de?de.name:"Unknown family"}`),await _t.createPost({text:Ee,published_at:St,family_id:re,image_key:it||void 0,is_full_page:je?je.fullPage:z,author_email:ht||void 0})}S(`Post created for ${K.length} ${K.length>1?"families":"family"}.`)}catch(V){w(V instanceof Error?V.message:"Error while posting to Famileo.")}finally{x(!1),U(null)}};return s.jsx(xa,{isOpen:e,onClose:t,title:"Famileo Poster",align:"center",children:s.jsxs("div",{className:"px-4 py-4 space-y-4 text-sm text-gray-700",children:[(r||l||a||E||p)&&s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[r&&s.jsx("div",{className:"text-xs text-gray-500",children:"Author"}),r&&s.jsx("div",{className:"text-sm font-medium text-gray-900",children:r}),l&&s.jsx("div",{className:"text-xs text-gray-500",children:"Date"}),l&&s.jsx("div",{className:"text-sm text-gray-800",children:l}),a&&s.jsx("div",{className:"text-xs text-gray-500",children:"Excerpt"}),a&&s.jsx("div",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:a})]}),s.jsxs("div",{className:"w-20 flex-shrink-0",children:[p&&s.jsx("div",{className:"text-xs text-gray-500",children:"Image"}),v&&s.jsx("div",{className:"text-xs text-red-600",children:v}),!p&&!v&&E&&s.jsx("img",{src:E,alt:"",className:"w-20 h-20 object-cover rounded-md border border-gray-100"}),!p&&!v&&!E&&s.jsx("div",{className:"text-xs text-gray-500",children:"No image"})]})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Families"}),s.jsxs("select",{value:B==="all"?"all":"",onChange:V=>{var ee;const W=V.target.value,K=((ee=V.target.selectedOptions[0])==null?void 0:ee.text)||"";if(W==="all"){q("all"),F([]),Y(0);return}W&&(q("custom"),F(re=>re.includes(W)?re:[...re,W]),se(re=>({...re,[W]:K})),A(re=>re[W]?re:{...re,[W]:{text:Ne,date:_e,fullPage:!1,author:Ve}}),Y(re=>re===0?0:re))},disabled:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white disabled:bg-gray-100",children:[s.jsx("option",{value:"",children:"Select a family"}),ne.length===0&&(J?s.jsx("option",{value:"all",children:"Loading families..."}):s.jsx("option",{value:"all",children:"All families"})),ae.map(V=>s.jsx("option",{value:String(V.famileo_id),children:V.name},String(V.famileo_id)))]})]}),B==="custom"&&ne.length===0&&s.jsx("div",{className:"text-xs text-amber-600",children:"At least one family must be selected."}),B==="custom"&&ne.length>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{type:"button",onClick:()=>Y(V=>Math.max(V-1,0)),disabled:ge===0,className:"px-3 py-2 text-lg text-gray-600 disabled:opacity-40",children:""}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Oe[ne[ge]]||ie[ne[ge]]||"Unknown family"}),s.jsx("button",{type:"button",onClick:()=>Y(V=>Math.min(V+1,ne.length-1)),disabled:ge===ne.length-1,className:"px-3 py-2 text-lg text-gray-600 disabled:opacity-40",children:""})]}),(()=>{const V=B==="custom"?ne[ge]:"all";if(!V)return null;const W=I[V]||{text:Ne,date:_e,fullPage:!1,author:Ve};return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 space-y-3",children:[B==="custom"&&s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("button",{type:"button",onClick:()=>{F(K=>{const ee=K.filter(re=>re!==V);return ee.length===0?(q("all"),Y(0)):Y(re=>Math.max(Math.min(re,ee.length-1),0)),ee}),se(K=>{const ee={...K};return delete ee[V],ee})},className:"text-xs text-gray-500 hover:text-red-600",children:"Remove"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Author (Rememly)"}),s.jsxs("select",{value:W.author||"",onChange:K=>{const ee=K.target.value;A(re=>({...re,[V]:{...re[V]||{text:Ne,date:_e,fullPage:!1,author:""},author:ee}}))},disabled:Te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white disabled:bg-gray-100",children:[Te?s.jsx("option",{value:"",children:"Loading authors..."}):s.jsx("option",{value:"",children:"Select an author"}),we.map(K=>s.jsx("option",{value:K.email,children:K.pseudo||K.email},K.email))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Text (max 300)"}),s.jsx("textarea",{value:W.text,onChange:K=>{const ee=K.target.value.slice(0,300);A(re=>({...re,[V]:{...re[V]||{text:"",date:_e,fullPage:!1,author:""},text:ee}}))},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white"}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[W.text.length,"/300"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),s.jsx("input",{type:"datetime-local",value:He(W.date||""),onChange:K=>{const ee=K.target.value;A(re=>({...re,[V]:{...re[V]||{text:Ne,date:_e,fullPage:!1,author:""},date:ee}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:W.fullPage||!1,onChange:K=>{const ee=K.target.checked;A(re=>({...re,[V]:{...re[V]||{text:Ne,date:_e,fullPage:!1,author:""},fullPage:ee}}))},className:"w-4 h-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Full-page image"]})]})})()]}),s.jsx("div",{className:"flex items-center justify-center gap-3",children:s.jsx("button",{onClick:he,disabled:f||!oe,className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-purple-600 text-white text-sm font-medium hover:bg-purple-700 disabled:opacity-60",children:f?"Sending...":`Send to ${B==="all"?O.length:ne.length} ${B==="all"?O.length>1?"families":"family":ne.length>1?"families":"family"}`})}),Q&&s.jsx("div",{className:"text-sm text-gray-600",children:Q}),b&&s.jsx("div",{className:"text-sm text-green-700 bg-green-50 border border-green-200 rounded-lg px-3 py-2",children:b}),g&&s.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:g})]})})}async function ry(e,t=Ms.TARGET_IMAGE_WIDTH_PX){return new Promise((r,n)=>{const l=new FileReader;l.onload=a=>{var o;const i=new Image;i.onload=()=>{const c=document.createElement("canvas");let u=i.width,m=i.height;u>t&&(m=m*t/u,u=t),c.width=u,c.height=m,c.getContext("2d").drawImage(i,0,0,u,m);const x=c.toDataURL("image/jpeg",.85);r(x.split(",")[1])},i.onerror=n,i.src=(o=a.target)==null?void 0:o.result},l.onerror=n,l.readAsDataURL(e)})}function ny(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{const l=n.result.split(",")[1];t(l)},n.onerror=r,n.readAsDataURL(e)})}async function uw(e,t=.9){return new Promise(r=>{e.toBlob(async n=>{if(n){const l=await ny(n);r(l)}},"image/jpeg",t)})}class sy{async processImage(t){const r=await ry(t);return{fileName:t.name,mimeType:"image/jpeg",base64:r}}async processMultipleImages(t){return Promise.all(t.map(r=>this.processImage(r)))}}const sf=new sy;class ly{async createArticle(t,r,n,l,a,i,o,c){const u=await sf.processImage(n),m={auteur:t,texte:r,image:u,date:l,famileo_post_id:a,assembly_state:i||null,full_page:o||!1,status:c};return $t.create(m)}async updateArticle(t,r,n,l,a,i,o){const c={id:t,texte:r,date:l,assembly_state:a,full_page:i,status:o};return n&&(c.image=await sf.processImage(n)),$t.update(c)}async deleteArticle(t){await $t.delete(t)}async restoreArticle(t){return $t.update({id:t,status:"ACTIVE"})}}const qt=new ly;function ay(e){if(!e)return"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w200`}return e}function iy(e,t){if(t){const n=t.startsWith("blob:")||t.startsWith("data:")?t:ay(t);return s.jsx("img",{src:n,alt:e,className:"w-10 h-10 rounded-full object-cover border-2 border-primary-200 flex-shrink-0"})}const r=e.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2);return s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-primary-700",children:r})})}function oy({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=It(),{user:c}=jr(),{profile:u,avatarBlobUrl:m}=gc(),{src:f,isLoading:x,error:g}=Hs(e.image_url,e.image_file_id),[w,b]=d.useState(!1),[S,p]=d.useState(!1),[h,v]=d.useState(!1),[j,E]=d.useState(!1),[P,L]=d.useState(!1),N=e.status==="DELETED",z=e.status==="DRAFT",T=B=>{B.stopPropagation(),o(`/editor/${e.id}`)},Q=()=>{l&&(i==null||i(e.id,!a))},U=B=>{B.stopPropagation(),b(!0)},O=async()=>{p(!0);try{await qt.deleteArticle(e.id),b(!1),r==null||r(e.id)}catch(B){console.error("Failed to delete article:",B)}finally{p(!1)}},Z=B=>{B.stopPropagation(),v(!0)},J=B=>{B.stopPropagation(),L(!0)},H=async()=>{E(!0);try{await qt.restoreArticle(e.id),v(!1),n==null||n(e.id)}catch(B){console.error("Failed to restore article:",B)}finally{E(!1)}},ne=e.author_pseudo||"Unknown",I=(c==null?void 0:c.email)===e.auteur&&m||void 0,A=B=>{B.stopPropagation(),i==null||i(e.id,B.target.checked)};return s.jsxs("div",{className:"px-4 mb-4",children:[s.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden border hover:shadow-lg transition-shadow max-w-2xl mx-auto relative z-0 ${N?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:Q,children:[s.jsxs("div",{className:"flex min-h-[24px]",children:[!e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-green-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Local"}),e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-purple-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Famileo"}),t&&s.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Duplicate"}),z&&s.jsx("div",{className:"flex-1 bg-amber-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Draft"}),N&&s.jsx("div",{className:"flex-1 bg-red-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Deleted"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l&&s.jsx("input",{type:"checkbox",checked:a,onChange:A,onClick:B=>B.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),iy(ne,I),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:ne}),s.jsx("span",{className:"text-sm text-gray-500",children:ir(e.date)})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:J,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:T,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),N?s.jsx("button",{onClick:Z,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:U,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{onClick:Q,className:"w-full cursor-pointer bg-gray-50 relative min-h-[160px] sm:min-h-[200px]",children:[x&&!g&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),g?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("p",{className:"text-sm",children:"Failed to load image"}),s.jsxs("p",{className:"text-xs mt-1",children:["FileId: ",e.image_file_id]})]}):f&&s.jsx("img",{src:f,alt:"",className:"w-full h-auto object-contain",loading:"lazy"})]}),e.texte&&s.jsx("div",{className:"p-4 transition-colors",children:s.jsx("p",{className:"whitespace-pre-wrap text-gray-900",children:e.texte})})]}),s.jsx(Ft,{isOpen:w,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:O,onCancel:()=>b(!1),variant:"danger",isLoading:S}),s.jsx(Ft,{isOpen:h,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:H,onCancel:()=>v(!1),isLoading:j}),s.jsx(va,{isOpen:P,onClose:()=>L(!1),authorLabel:ne,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function cy({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=It(),{src:c,isLoading:u,error:m}=Hs(e.image_url,e.image_file_id),[f,x]=d.useState(!1),[g,w]=d.useState(!1),[b,S]=d.useState(!1),[p,h]=d.useState(!1),[v,j]=d.useState(!1),E=e.status==="DELETED",P=e.status==="DRAFT",L=e.author_pseudo||"Unknown",N=()=>{l&&(i==null||i(e.id,!a))},z=H=>{H.stopPropagation(),i==null||i(e.id,H.target.checked)},T=H=>{H.stopPropagation(),o(`/editor/${e.id}`)},Q=H=>{H.stopPropagation(),x(!0)},U=async()=>{w(!0);try{await qt.deleteArticle(e.id),x(!1),r==null||r(e.id)}catch(H){console.error("Failed to delete article:",H)}finally{w(!1)}},O=H=>{H.stopPropagation(),S(!0)},Z=H=>{H.stopPropagation(),j(!0)},J=async()=>{h(!0);try{await qt.restoreArticle(e.id),S(!1),n==null||n(e.id)}catch(H){console.error("Failed to restore article:",H)}finally{h(!1)}};return s.jsxs("div",{className:"px-4 mb-3",children:[s.jsxs("div",{className:`bg-white rounded-lg border shadow-sm px-3 py-2 flex items-center gap-3 max-w-2xl mx-auto ${E?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:N,children:[l&&s.jsx("input",{type:"checkbox",checked:a,onChange:z,onClick:H=>H.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsxs("div",{className:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center flex-shrink-0",children:[u&&!m&&s.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),m?s.jsx("span",{className:"text-xs text-gray-400",children:"No image"}):c&&s.jsx("img",{src:c,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:L}),!e.famileo_post_id&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Local"}),e.famileo_post_id&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:"Famileo"}),t&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"Duplicate"}),P&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:"Draft"}),E&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Deleted"})]}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.texte&&s.jsx("div",{className:"text-sm text-gray-700 mt-1 truncate",children:e.texte})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:Z,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:T,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),E?s.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:Q,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsx(Ft,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:U,onCancel:()=>x(!1),variant:"danger",isLoading:g}),s.jsx(Ft,{isOpen:b,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:J,onCancel:()=>S(!1),isLoading:p}),s.jsx(va,{isOpen:v,onClose:()=>j(!1),authorLabel:L,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function uy({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=It(),{src:c,isLoading:u,error:m}=Hs(e.image_url,e.image_file_id),[f,x]=d.useState(!1),[g,w]=d.useState(!1),[b,S]=d.useState(!1),[p,h]=d.useState(!1),[v,j]=d.useState(!1),E=e.status==="DELETED",P=e.status==="DRAFT",L=e.author_pseudo||"Unknown",N=()=>{l&&(i==null||i(e.id,!a))},z=H=>{H.stopPropagation(),i==null||i(e.id,H.target.checked)},T=H=>{H.stopPropagation(),o(`/editor/${e.id}`)},Q=H=>{H.stopPropagation(),x(!0)},U=async()=>{w(!0);try{await qt.deleteArticle(e.id),x(!1),r==null||r(e.id)}catch(H){console.error("Failed to delete article:",H)}finally{w(!1)}},O=H=>{H.stopPropagation(),S(!0)},Z=H=>{H.stopPropagation(),j(!0)},J=async()=>{h(!0);try{await qt.restoreArticle(e.id),S(!1),n==null||n(e.id)}catch(H){console.error("Failed to restore article:",H)}finally{h(!1)}};return s.jsxs("div",{className:`bg-white rounded-lg shadow-sm overflow-hidden border transition-shadow hover:shadow-md relative ${E?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:N,children:[s.jsxs("div",{className:"flex min-h-[18px]",children:[!e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-green-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Local"}),e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-purple-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Famileo"}),t&&s.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Duplicate"}),P&&s.jsx("div",{className:"flex-1 bg-amber-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Draft"}),E&&s.jsx("div",{className:"flex-1 bg-red-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Deleted"})]}),s.jsx("div",{className:"absolute top-8 left-2 z-10",children:l&&s.jsx("input",{type:"checkbox",checked:a,onChange:z,onClick:H=>H.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),s.jsxs("div",{className:"absolute top-8 right-2 z-10 flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:Z,className:"p-1.5 bg-white/90 text-gray-600 hover:text-purple-600 hover:bg-white rounded-md transition-colors","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:T,className:"p-1.5 bg-white/90 text-gray-600 hover:text-primary-600 hover:bg-white rounded-md transition-colors","aria-label":"Edit article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),E?s.jsx("button",{onClick:O,className:"p-1.5 bg-white/90 text-gray-600 hover:text-green-600 hover:bg-white rounded-md transition-colors","aria-label":"Restore article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:Q,className:"p-1.5 bg-white/90 text-gray-600 hover:text-red-600 hover:bg-white rounded-md transition-colors","aria-label":"Delete article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsxs("div",{className:"w-full bg-gray-50 relative overflow-hidden",style:{aspectRatio:"4 / 3"},children:[u&&!m&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-6 h-6 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),m?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 text-xs",children:"No image"}):c&&s.jsx("img",{src:c,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:L}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.texte&&s.jsx("div",{className:"text-xs text-gray-700 mt-2 max-h-12 overflow-hidden",children:e.texte})]}),s.jsx(Ft,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:U,onCancel:()=>x(!1),variant:"danger",isLoading:g}),s.jsx(Ft,{isOpen:b,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:J,onCancel:()=>S(!1),isLoading:p}),s.jsx(va,{isOpen:v,onClose:()=>j(!1),authorLabel:L,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function dy(){return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No articles yet"}),s.jsx("p",{className:"text-gray-600",children:"Tap the + button to create your first photo article"})]})}function fy({monthYear:e,count:t,showPlus:r}){return s.jsx("div",{className:"bg-gray-100 px-4 pt-3 pb-2 sticky top-[108px] z-10",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-700 uppercase",children:e}),s.jsxs("span",{className:"ml-2 text-xs font-medium text-gray-600 bg-white/80 border border-gray-200 rounded-full px-2 py-0.5",children:[t,r?"+":""]})]})})}const ni={developerName:"Grut - & Claude & ChatGPT",lastPublished:"10/02/2026",repoUrl:"https://github.com/Grut505/Rememly"},Qt=xc(e=>({toast:null,hasUnsavedChanges:!1,pendingNavigationPath:null,showToast:(t,r)=>{e({toast:{message:t,type:r}}),setTimeout(()=>e({toast:null}),3e3)},hideToast:()=>e({toast:null}),setUnsavedChanges:t=>e({hasUnsavedChanges:t}),setPendingNavigationPath:t=>e({pendingNavigationPath:t})}));function mn({onMenuClick:e}){const t=It(),r=fn(),n=Qt(m=>m.hasUnsavedChanges),l=Qt(m=>m.setPendingNavigationPath),[a,i]=d.useState(!1),o="1.2.0",c="242",u=r.pathname.startsWith("/settings");return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"bg-primary-600 text-white fixed left-0 right-0 z-30 shadow-md app-safe-top app-safe-top-height",children:s.jsxs("div",{className:"max-w-content mx-auto w-full h-14 flex items-center px-4 relative",children:[s.jsx("h1",{className:"absolute left-1/2 -translate-x-1/2 text-xl font-bold leading-none text-center pointer-events-none",children:"Rememly"}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 hover:bg-primary-700 rounded-lg transition-colors touch-manipulation flex items-center justify-center","aria-label":"About",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M12 18h.01"}),s.jsx("path",{d:"M9.09 9a3 3 0 015.82 1c0 2-3 2-3 4"}),s.jsx("circle",{cx:"12",cy:"12",r:"10"})]})}),s.jsx("button",{onClick:()=>{if(!u){if(n){l("/settings");return}t("/settings")}},className:`p-2 rounded-lg transition-colors touch-manipulation flex items-center justify-center ${u?"bg-primary-700":"hover:bg-primary-700"}`,"aria-label":"Settings",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),s.jsx("div",{className:"app-safe-top-height flex-shrink-0"}),s.jsx(xa,{isOpen:a,onClose:()=>i(!1),title:"About",align:"center",children:s.jsxs("div",{className:"px-4 py-4 space-y-4 text-sm text-gray-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:"Rememly"}),s.jsx("div",{className:"text-gray-600",children:"Personal memory book generator"})]}),s.jsxs("dl",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Developer"}),s.jsx("dd",{className:"text-right text-gray-900",children:ni.developerName})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Versions"}),s.jsxs("dd",{className:"text-right text-gray-900",children:["v",o," / backend @",c]})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Last publish"}),s.jsx("dd",{className:"text-right text-gray-900",children:ni.lastPublished})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Project"}),s.jsx("dd",{className:"text-right",children:s.jsx("a",{href:ni.repoUrl,target:"_blank",rel:"noreferrer",className:"text-primary-600 hover:text-primary-700 underline",children:"GitHub (README)"})})]})]})]})})]})}const Kt=d.forwardRef(({label:e,error:t,className:r="",...n},l)=>s.jsxs("div",{className:"w-full",children:[e&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),s.jsx("input",{ref:l,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-red-500":"border-gray-300"} ${r}`,...n}),t&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]}));Kt.displayName="Input";const ve={year:"",month:"",dateFrom:"",dateTo:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"};function my({initialFilters:e,onApply:t,onClose:r}){const n=ep(),[l,a]=d.useState((e==null?void 0:e.year)??ve.year),[i,o]=d.useState((e==null?void 0:e.month)??ve.month),[c,u]=d.useState((e==null?void 0:e.dateFrom)??ve.dateFrom),[m,f]=d.useState((e==null?void 0:e.dateTo)??ve.dateTo),[x,g]=d.useState((e==null?void 0:e.author)??ve.author),[w,b]=d.useState((e==null?void 0:e.search)??ve.search),[S,p]=d.useState((e==null?void 0:e.duplicatesOnly)??ve.duplicatesOnly),[h,v]=d.useState((e==null?void 0:e.statusFilter)??ve.statusFilter),[j,E]=d.useState((e==null?void 0:e.sourceFilter)??ve.sourceFilter),[P,L]=d.useState([]),[N,z]=d.useState(!1);d.useEffect(()=>{e&&(a(e.year??ve.year),o(e.month??ve.month),u(e.dateFrom??ve.dateFrom),f(e.dateTo??ve.dateTo),g(e.author??ve.author),b(e.search??ve.search),p(e.duplicatesOnly??ve.duplicatesOnly),v(e.statusFilter??ve.statusFilter),E(e.sourceFilter??ve.sourceFilter))},[e]),d.useEffect(()=>{let U=!0;return(async()=>{z(!0);try{const Z=await $t.authors({status_filter:h,source_filter:j});U&&L(Z.authors||[])}catch{U&&L([])}finally{U&&z(!1)}})(),()=>{U=!1}},[h,j]);const T=()=>{t({year:l,month:i,dateFrom:c,dateTo:m,author:x,search:w,duplicatesOnly:S,statusFilter:h,sourceFilter:j}),r()},Q=()=>{a(ve.year),o(ve.month),u(ve.dateFrom),f(ve.dateTo),g(ve.author),b(ve.search),p(ve.duplicatesOnly),v(ve.statusFilter),E(ve.sourceFilter),t(ve),r()};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto overscroll-contain",children:[s.jsx(Kt,{type:"text",label:"Search",value:w,onChange:U=>b(U.target.value),placeholder:"Search in loaded articles..."}),s.jsxs("div",{className:`grid gap-2 ${n?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),s.jsxs("select",{value:l,onChange:U=>{a(U.target.value),U.target.value||o("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All years"}),[...Array(10)].map((U,O)=>{const Z=io()-O;return s.jsx("option",{value:Z,children:Z},Z)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),s.jsxs("select",{value:i,onChange:U=>o(U.target.value),disabled:!l,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l?"":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",children:"All months"}),qh.map((U,O)=>s.jsx("option",{value:(O+1).toString().padStart(2,"0"),children:U},O))]}),!l&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a year first"})]})]}),s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx(Kt,{type:"date",label:"From",value:c,onChange:U=>{const O=U.target.value;u(O),m&&O&&m<O&&f(O)},max:m||void 0,className:"min-w-0"})}),s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx(Kt,{type:"date",label:"To",value:m,onChange:U=>{const O=U.target.value;f(O),c&&O&&O<c&&u(O)},min:c||void 0,className:"min-w-0"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),s.jsx("select",{value:x,onChange:U=>g(U.target.value),disabled:N,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${N?"bg-gray-100 text-gray-400 cursor-not-allowed":""}`,children:N?s.jsx("option",{value:"",children:"Loading authors..."}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"All authors"}),P.map(U=>s.jsx("option",{value:U.email,children:U.pseudo||U.email.split("@")[0]},U.email))]})})]}),s.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:S,onChange:U=>p(U.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"Show duplicates (Famileo)"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>v("active"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${h==="active"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Active"}),s.jsx("button",{type:"button",onClick:()=>v("draft"),className:`flex-1 px-3 py-2 text-sm font-medium border-l border-gray-300 transition-colors ${h==="draft"?"bg-amber-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Draft"}),s.jsx("button",{type:"button",onClick:()=>v("all"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${h==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>v("deleted"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${h==="deleted"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Deleted"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>E("all"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${j==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>E("famileo"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${j==="famileo"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Famileo"}),s.jsx("button",{type:"button",onClick:()=>E("local"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${j==="local"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Local"})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white sticky bottom-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ye,{variant:"secondary",onClick:Q,fullWidth:!0,children:"Reset"}),s.jsx(ye,{onClick:T,fullWidth:!0,children:"Apply Filters"})]})})]})})}function op({checked:e,onChange:t,label:r,disabled:n=!1}){return s.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${n?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ${e?"bg-primary-600":"bg-gray-300"}`,onClick:()=>!n&&t(!e),children:s.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ${e?"translate-x-5":"translate-x-0"}`})}),r&&s.jsx("span",{className:"text-sm text-gray-700 select-none",children:r})]})}function hy(){const e=It(),{logout:t}=jr(),[r,n]=d.useState(!1),[l,a]=d.useState(!1),[i,o]=d.useState(new Set),[c,u]=d.useState(!1),[m,f]=d.useState(!1),[x,g]=d.useState(!1),[w,b]=d.useState(null),[S,p]=d.useState(()=>{const D=localStorage.getItem("articles_view_mode");return D==="list"||D==="mosaic-2"||D==="mosaic-3"||D==="mosaic-4"?D:D==="mosaic"?"mosaic-2":"cards"}),h=S==="mosaic-2"||S==="mosaic-3"||S==="mosaic-4",{articles:v,isLoading:j,error:E,cursor:P,hasMore:L,filters:N,setArticles:z,addArticles:T,setLoading:Q,setError:U,setFilters:O}=nr(),Z=d.useRef(),J=d.useRef(!1),H=d.useRef(null),[ne,F]=d.useState(!1),[I,A]=d.useState(!1),[B,q]=d.useState(0),[ge,Y]=d.useState(!1),ie=d.useRef(null),se=70,we=14,Re=120;d.useEffect(()=>{J.current=j},[j]),d.useEffect(()=>{H.current=P},[P]),d.useEffect(()=>{localStorage.setItem("articles_view_mode",S)},[S]);const Te=async()=>{Q(!0),U(null),console.log("Loading articles with filters:",N);try{const D=await $t.list({year:N.year||void 0,month:N.month,from:N.from,to:N.to,author:N.author,duplicates_only:N.duplicatesOnly?"true":void 0,limit:String(Ms.ARTICLES_PER_PAGE),status_filter:N.statusFilter||"active",source_filter:N.sourceFilter||"all"});console.log("Received articles:",D.items.length,"cursor:",D.next_cursor),z(D.items,D.next_cursor)}catch(D){U(D instanceof Error?D.message:"Failed to load articles")}finally{Q(!1)}},be=d.useCallback(async()=>{j||(A(!0),await Te(),A(!1))},[j,Te]),Ne=d.useCallback(async()=>{const D=H.current;if(!(!D||J.current)){J.current=!0,F(!0),console.log("loadMore called with cursor:",D);try{const G=await $t.list({year:N.year||void 0,month:N.month,from:N.from,to:N.to,author:N.author,cursor:D,duplicates_only:N.duplicatesOnly?"true":void 0,limit:String(Ms.ARTICLES_PER_PAGE),status_filter:N.statusFilter||"active",source_filter:N.sourceFilter||"all"});console.log("Loaded more articles:",G.items.length,"next cursor:",G.next_cursor),H.current=G.next_cursor,T(G.items,G.next_cursor)}catch(G){U(G instanceof Error?G.message:"Failed to load more")}finally{J.current=!1,F(!1)}}},[N.year,N.month,N.from,N.to,N.statusFilter,N.sourceFilter,T,U]),We=d.useCallback(D=>{Z.current&&Z.current.disconnect(),D&&(Z.current=new IntersectionObserver(G=>{G[0].isIntersecting&&!J.current&&H.current&&(console.log("Sentinel visible, loading more..."),Ne())},{threshold:1,rootMargin:"0px"}),Z.current.observe(D))},[Ne]),Ve=D=>{console.log("Applying filters:",D),z([]),O({year:D.year,month:D.month,from:D.dateFrom,to:D.dateTo,author:D.author,search:D.search,duplicatesOnly:D.duplicatesOnly,statusFilter:D.statusFilter,sourceFilter:D.sourceFilter})},Oe=D=>{if(N.statusFilter==="active"||N.statusFilter==="draft"||!N.statusFilter)nr.getState().deleteArticle(D);else{const G=v.find(C=>C.id===D);G&&nr.getState().updateArticle({...G,status:"DELETED"})}},He=D=>{if(N.statusFilter==="deleted"||N.statusFilter==="draft")nr.getState().deleteArticle(D);else{const G=v.find(C=>C.id===D);G&&nr.getState().updateArticle({...G,status:"ACTIVE"})}},_e=(N.search||"").trim().toLowerCase(),$=d.useMemo(()=>{let D=v;return _e&&(D=D.filter(G=>{const C=(G.texte||"").toLowerCase(),y=(G.author_pseudo||"").toLowerCase(),_=(G.auteur||"").toLowerCase();return C.includes(_e)||y.includes(_e)||_.includes(_e)})),N.duplicatesOnly&&(D=D.filter(G=>!!G.is_duplicate)),D},[v,_e,N.duplicatesOnly]),oe=(D,G)=>{o(C=>{const y=new Set(C);return G?y.add(D):y.delete(D),y})},ae=()=>{i.size===$.length?o(new Set):o(new Set($.map(D=>D.id)))},he=()=>{a(!1),o(new Set)},V=D=>{a(D),D||o(new Set)},W=D=>{var C;(((C=document.scrollingElement)==null?void 0:C.scrollTop)??window.scrollY)<=0&&!I&&!j&&(ie.current=D.touches[0].clientY,Y(!1))},K=D=>{var M;if(I||j)return;if((((M=document.scrollingElement)==null?void 0:M.scrollTop)??window.scrollY)>0){q(0),Y(!1),ie.current=null;return}ie.current===null&&(ie.current=D.touches[0].clientY);const C=D.touches[0].clientY-ie.current;if(C<=we){q(0),Y(!1);return}const y=C-we,_=Re*y/(y+Re);q(Math.min(we+_,Re)),Y(!0)},ee=()=>{B>=se&&!I&&!j&&be(),q(0),Y(!1),ie.current=null},re=async()=>{u(!0);const D=Array.from(i);b({current:0,total:D.length});try{for(let G=0;G<D.length;G++)await qt.deleteArticle(D[G]),b({current:G+1,total:D.length});N.statusFilter==="active"||N.statusFilter==="draft"||!N.statusFilter?i.forEach(G=>nr.getState().deleteArticle(G)):i.forEach(G=>{const C=v.find(y=>y.id===G);C&&nr.getState().updateArticle({...C,status:"DELETED"})}),he()}catch(G){console.error("Bulk delete failed:",G)}finally{u(!1),b(null),f(!1)}},de=async()=>{u(!0);const D=Array.from(i);b({current:0,total:D.length});try{for(let G=0;G<D.length;G++)await $t.permanentDelete(D[G]),b({current:G+1,total:D.length});i.forEach(G=>nr.getState().deleteArticle(G)),he()}catch(G){console.error("Bulk permanent delete failed:",G)}finally{u(!1),b(null),g(!1)}},je=N.statusFilter==="deleted",Ee=$.reduce((D,G)=>{const C=rs(G.date);return D[C]=(D[C]||0)+1,D},{}),qe=$.reduce((D,G)=>{const C=rs(G.date),y=oo(G.date),_=D[D.length-1];return!_||_.key!==C?D.push({key:C,label:y,items:[G]}):_.items.push(G),D},[]),Ke=S==="mosaic-2"?2:S==="mosaic-3"?3:4,St=D=>{let G=0;for(let y=0;y<D.length;y++)G=(G*31+D.charCodeAt(y))%360;const C=G;return{border:`hsl(${C}, 35%, 70%)`,bg:`hsl(${C}, 45%, 92%)`,text:`hsl(${C}, 35%, 35%)`}},ht=$.length,it=L?`${ht}+`:`${ht}`,$e=$.length>0?rs($[$.length-1].date):null,pt=N.year||N.month||N.from||N.to||N.author||N.search||N.duplicatesOnly||N.statusFilter&&N.statusFilter!=="active"||N.sourceFilter&&N.sourceFilter!=="all",Vt={year:N.year||"",month:N.month||"",dateFrom:N.from||"",dateTo:N.to||"",author:N.author||"",search:N.search||"",duplicatesOnly:N.duplicatesOnly||!1,statusFilter:N.statusFilter||"active",sourceFilter:N.sourceFilter||"all"};d.useEffect(()=>{console.log("Filters changed, reloading articles:",N),Te()},[N.year,N.month,N.from,N.to,N.author,N.search,N.duplicatesOnly,N.statusFilter,N.sourceFilter]);const Me=j;return s.jsxs("div",{className:"min-h-screen flex flex-col",onTouchStart:W,onTouchMove:K,onTouchEnd:ee,children:[s.jsx(mn,{}),s.jsxs("div",{className:"bg-white border-b border-gray-300 px-4 py-3 flex items-center justify-between fixed app-safe-top-14 left-0 right-0 z-[25] max-w-content mx-auto",children:[s.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:l?`${i.size} selected`:N.year||"All years"}),!l&&s.jsx("span",{className:"text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-full px-2 py-0.5",children:it})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[l?s.jsx("button",{onClick:ae,className:`touch-manipulation text-sm font-medium ${Me?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:Me,children:i.size===$.length?"Deselect all":"Select all"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("select",{value:S,onChange:D=>p(D.target.value),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"View mode",children:[s.jsx("option",{value:"cards",children:"Cards"}),s.jsx("option",{value:"list",children:"List"}),s.jsx("option",{value:"mosaic-2",children:"Mosaic 2 items"}),s.jsx("option",{value:"mosaic-3",children:"Mosaic 3 items"}),s.jsx("option",{value:"mosaic-4",children:"Mosaic 4 items"})]})}),s.jsxs("button",{onClick:be,className:`touch-manipulation text-sm font-medium flex items-center gap-2 hidden sm:flex ${Me?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:Me,children:[s.jsx("svg",{className:`w-4 h-4 ${I?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),s.jsxs("button",{onClick:()=>n(!0),className:`touch-manipulation flex items-center gap-2 ${Me?"text-gray-400 cursor-not-allowed":pt?"text-white bg-primary-600 hover:bg-primary-700 px-3 py-1.5 rounded-lg font-medium":"text-primary-600 hover:text-primary-700"}`,disabled:Me,"aria-label":"Filter",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),pt&&s.jsx("span",{className:"ml-1 bg-white text-primary-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]})]}),$.length>0&&s.jsx(op,{checked:l,onChange:V,disabled:Me})]})]}),s.jsx("div",{className:"h-14"}),s.jsxs("div",{className:"flex-1 pb-20 relative",children:[(B>0||I)&&s.jsx("div",{className:"absolute left-0 right-0 flex items-center justify-center pointer-events-none",style:{top:0,transform:`translateY(${Math.min(B,80)}px)`,transition:ge?"none":"transform 260ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 200ms ease",opacity:Math.min(1,B/40),zIndex:5},children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-full shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("svg",{className:"absolute inset-0 w-6 h-6 text-gray-200",viewBox:"0 0 36 36",children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3"})}),s.jsx("svg",{className:`absolute inset-0 w-6 h-6 ${I?"animate-spin text-primary-600":"text-primary-600"}`,viewBox:"0 0 36 36",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",strokeDasharray:`${Math.min(100,B/se*100)}, 100`,transition:"stroke-dasharray 120ms ease"},children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})}),s.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-transform ${B>=se?"rotate-180":""}`,children:[s.jsx("svg",{className:`w-3.5 h-3.5 ${I?"hidden":"block"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 5v14m0 0l-5-5m5 5l5-5"})}),s.jsx("svg",{className:`w-3.5 h-3.5 ${I?"block":"hidden"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),s.jsx("span",{className:"text-xs text-gray-600",children:I?"Refreshing...":B>=se?"Release to refresh":"Pull to refresh"})]})}),j&&$.length===0?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Et,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading articles..."})]})}):E&&$.length===0?s.jsx("div",{className:"flex items-center justify-center p-6",children:s.jsx(ip,{message:E,onRetry:Te})}):$.length===0?s.jsx(dy,{}):s.jsxs(s.Fragment,{children:[!h&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"-mt-[15px]",children:$.map((D,G)=>{const C=rs(D.date),y=G>0?rs($[G-1].date):null,_=C!==y;return s.jsxs(d.Fragment,{children:[_&&s.jsx(fy,{monthYear:oo(D.date),count:Ee[C]||0,showPlus:L&&$e===C}),s.jsx("div",{className:`relative z-0 ${_?"pt-8":""}`,children:S==="cards"?s.jsx(oy,{article:D,isDuplicate:!!D.is_duplicate,onDeleted:Oe,onRestored:He,selectionMode:l,selected:i.has(D.id),onSelectionChange:oe}):s.jsx(cy,{article:D,isDuplicate:!!D.is_duplicate,onDeleted:Oe,onRestored:He,selectionMode:l,selected:i.has(D.id),onSelectionChange:oe})})]},D.id)})})}),h&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"-mt-[25px]",children:qe.map((D,G)=>{const C=St(D.key);return s.jsxs("div",{className:`px-4 mb-8 ${G===0?"mt-8":""}`,children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:C.border}}),s.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-full",style:{backgroundColor:C.bg,color:C.text},children:D.label}),s.jsx("div",{className:"text-xs text-gray-500",children:Ee[D.key]||D.items.length}),s.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:C.border}})]})}),s.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Ke}, minmax(0, 1fr))`},children:D.items.map(y=>s.jsx(uy,{article:y,isDuplicate:!!y.is_duplicate,onDeleted:Oe,onRestored:He,selectionMode:l,selected:i.has(y.id),onSelectionChange:oe},y.id))}),s.jsx("div",{className:"border-b border-gray-200 mt-6"})]},D.key)})})}),L&&!ne&&s.jsx("div",{ref:We,className:"h-4"})]})]}),ne&&s.jsx("div",{className:"fixed bottom-24 left-0 right-0 flex justify-center z-50",children:s.jsx("div",{className:"bg-gray-100 shadow-lg rounded-full p-3 border border-gray-200",children:s.jsx(Et,{})})}),l&&i.size>0&&s.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:s.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[i.size," article",i.size>1?"s":""," selected"]}),s.jsx("div",{className:"flex gap-2",children:je?s.jsx("button",{onClick:()=>g(!0),disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:c?"Deleting...":"Delete permanently"}):s.jsx("button",{onClick:()=>f(!0),disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:c?"Deleting...":"Delete"})})]})}),!l&&s.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-50",children:s.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:s.jsx(ap,{onClick:()=>e("/editor"),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),s.jsx(Ft,{isOpen:m,title:"Delete articles?",message:`${i.size} article${i.size>1?"s":""} will be marked as deleted. You can find them later by enabling the 'Show deleted' filter.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:re,onCancel:()=>f(!1),variant:"danger",isLoading:c,progress:w}),s.jsx(Ft,{isOpen:x,title:"Permanently delete articles?",message:` WARNING: ${i.size} article${i.size>1?"s":""} will be permanently removed from the database. This action cannot be undone!`,confirmLabel:"Delete permanently",cancelLabel:"Cancel",onConfirm:de,onCancel:()=>g(!1),variant:"danger",isLoading:c,progress:w}),s.jsx(xa,{isOpen:r,onClose:()=>n(!1),title:"Filters",children:s.jsx(my,{initialFilters:Vt,onApply:Ve,onClose:()=>n(!1)})})]})}const co=(e,t)=>t.some(r=>e instanceof r);let lf,af;function py(){return lf||(lf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gy(){return af||(af=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uo=new WeakMap,si=new WeakMap,ya=new WeakMap;function xy(e){const t=new Promise((r,n)=>{const l=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{r(nn(e.result)),l()},i=()=>{n(e.error),l()};e.addEventListener("success",a),e.addEventListener("error",i)});return ya.set(t,e),t}function vy(e){if(uo.has(e))return;const t=new Promise((r,n)=>{const l=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{r(),l()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});uo.set(e,t)}let fo={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return uo.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return nn(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cp(e){fo=e(fo)}function yy(e){return gy().includes(e)?function(...t){return e.apply(mo(this),t),nn(this.request)}:function(...t){return nn(e.apply(mo(this),t))}}function wy(e){return typeof e=="function"?yy(e):(e instanceof IDBTransaction&&vy(e),co(e,py())?new Proxy(e,fo):e)}function nn(e){if(e instanceof IDBRequest)return xy(e);if(si.has(e))return si.get(e);const t=wy(e);return t!==e&&(si.set(e,t),ya.set(t,e)),t}const mo=e=>ya.get(e);function jy(e,t,{blocked:r,upgrade:n,blocking:l,terminated:a}={}){const i=indexedDB.open(e,t),o=nn(i);return n&&i.addEventListener("upgradeneeded",c=>{n(nn(i.result),c.oldVersion,c.newVersion,nn(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),l&&c.addEventListener("versionchange",u=>l(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const by=["get","getKey","getAll","getAllKeys","count"],Ny=["put","add","delete","clear"],li=new Map;function of(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(li.get(t))return li.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,l=Ny.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(l||by.includes(r)))return;const a=async function(i,...o){const c=this.transaction(i,l?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),l&&c.done]))[0]};return li.set(t,a),a}cp(e=>({...e,get:(t,r,n)=>of(t,r)||e.get(t,r,n),has:(t,r)=>!!of(t,r)||e.has(t,r)}));const Sy=["continue","continuePrimaryKey","advance"],cf={},ho=new WeakMap,up=new WeakMap,ky={get(e,t){if(!Sy.includes(t))return e[t];let r=cf[t];return r||(r=cf[t]=function(...n){ho.set(this,up.get(this)[t](...n))}),r}};async function*Cy(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,ky);for(up.set(r,t),ya.set(r,mo(t));t;)yield r,t=await(ho.get(r)||t.continue()),ho.delete(r)}function uf(e,t){return t===Symbol.asyncIterator&&co(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&co(e,[IDBIndex,IDBObjectStore])}cp(e=>({...e,get(t,r,n){return uf(t,r)?Cy:e.get(t,r,n)},has(t,r){return uf(t,r)||e.has(t,r)}}));class _y{constructor(){Fu(this,"dbPromise");this.dbPromise=jy("rememly-db",1,{upgrade(t){t.objectStoreNames.contains("drafts")||t.createObjectStore("drafts",{keyPath:"id"}),t.objectStoreNames.contains("assemblyStates")||t.createObjectStore("assemblyStates",{keyPath:"articleId"})}})}async saveDraft(t){await(await this.dbPromise).put("drafts",{...t,timestamp:Date.now()})}async getDraft(t){return(await this.dbPromise).get("drafts",t)}async deleteDraft(t){await(await this.dbPromise).delete("drafts",t)}async saveAssemblyState(t,r){await(await this.dbPromise).put("assemblyStates",{articleId:t,state:r,timestamp:Date.now()})}async getAssemblyState(t){const n=await(await this.dbPromise).get("assemblyStates",t);return n==null?void 0:n.state}async deleteAssemblyState(t){await(await this.dbPromise).delete("assemblyStates",t)}}const Ey=new _y;function Py(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async function Ly(e){return new Promise(t=>{const r=new FileReader;r.onload=n=>{var l,a;try{const i=new DataView((l=n.target)==null?void 0:l.result);if(i.getUint16(0,!1)!==65496){t(null);return}let o=2;const c=i.byteLength;for(;o<c;){if(i.getUint8(o)!==255){t(null);return}if(i.getUint8(o+1)===225){const m=i.getUint16(o+2,!1),f=new DataView((a=n.target)==null?void 0:a.result,o+4,m-2);if(String.fromCharCode(f.getUint8(0),f.getUint8(1),f.getUint8(2),f.getUint8(3))!=="Exif"){t(null);return}const g=6,w=f.getUint16(g,!1)===18761,b=f.getUint32(g+4,w),S=f.getUint16(g+b,w);for(let p=0;p<S;p++){const h=g+b+2+p*12,v=f.getUint16(h,w);if(v===34665){const j=f.getUint32(h+8,w),E=f.getUint16(g+j,w);for(let P=0;P<E;P++){const L=g+j+2+P*12,N=f.getUint16(L,w);if(N===36867||N===36868){const z=f.getUint32(L+8,w);let T="";for(let O=0;O<19;O++)T+=String.fromCharCode(f.getUint8(g+z+O));const Q=T.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),U=new Date(Q);if(!isNaN(U.getTime())){t(U);return}}}}if(v===306){const j=f.getUint32(h+8,w);let E="";for(let N=0;N<19;N++)E+=String.fromCharCode(f.getUint8(g+j+N));const P=E.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),L=new Date(P);if(!isNaN(L.getTime())){t(L);return}}}t(null);return}o+=2+i.getUint16(o+2,!1)}t(null)}catch{t(null)}},r.onerror=()=>t(null),r.readAsArrayBuffer(e)})}function Fy(e){if(!e)return console.warn("Empty image URL provided to PhotoPicker"),"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([^\/]+)/,/drive\.google\.com\/uc\?.*[&?]id=([^&]+)/,/drive\.google\.com\/open\?.*[&?]id=([^&]+)/,/lh3\.googleusercontent\.com\/d\/([^?&]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w2000`}return e}function Dy({onPhotoSelected:e,currentImage:t,onPhotoAssembly:r}){const n=d.useRef(null),l=d.useRef(null),a=d.useRef(null),[i,o]=d.useState(!1),[c,u]=d.useState(!1),[m,f]=d.useState(null),[x,g]=d.useState(""),w=Py();d.useEffect(()=>()=>{m&&m.getTracks().forEach(j=>j.stop())},[m]),d.useEffect(()=>{if(!i)return;const j=P=>{P.key==="Escape"&&o(!1)},E=P=>{const L=P.target;L!=null&&L.closest("[data-photo-menu]")||L!=null&&L.closest("[data-photo-menu-trigger]")||o(!1)};return window.addEventListener("keydown",j),window.addEventListener("click",E),()=>{window.removeEventListener("keydown",j),window.removeEventListener("click",E)}},[i]);const b=async j=>{var P;const E=(P=j.target.files)==null?void 0:P[0];if(E){const L=await Ly(E);e(E,L||void 0)}j.target.value=""},S=()=>{var j;(j=n.current)==null||j.click()},p=d.useCallback(async()=>{var j;if(g(""),!((j=navigator.mediaDevices)!=null&&j.getUserMedia)||!window.isSecureContext){g("Webcam not available. Choose from files.");return}try{const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});f(E),u(!0),setTimeout(()=>{l.current&&(l.current.srcObject=E)},100)}catch(E){console.error("Error accessing webcam:",E),g("Webcam not available. Choose from files.")}},[]),h=d.useCallback(()=>{if(l.current&&a.current){const j=l.current,E=a.current;E.width=j.videoWidth,E.height=j.videoHeight;const P=E.getContext("2d");P&&(P.drawImage(j,0,0),E.toBlob(async L=>{if(L){const N=new File([L],`webcam-${Date.now()}.jpg`,{type:"image/jpeg"});e(N,new Date),v()}},"image/jpeg",.9))}},[e]),v=d.useCallback(()=>{m&&(m.getTracks().forEach(j=>j.stop()),f(null)),u(!1)},[m]);return c?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[s.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto max-h-[50vh] object-contain"}),s.jsx("canvas",{ref:a,className:"hidden"})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx(ye,{onClick:h,fullWidth:!0,children:"Capture"}),s.jsx(ye,{variant:"secondary",onClick:v,fullWidth:!0,children:"Cancel"})]})]}):s.jsxs("div",{className:"w-full",children:[s.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:b,className:"hidden"}),t?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:Fy(t),alt:"Selected",className:"w-full h-auto rounded-lg max-h-[40vh] object-contain"}),s.jsxs("div",{className:"mt-4 flex flex-row gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ye,{onClick:()=>{w?S():o(j=>!j)},fullWidth:!0,"data-photo-menu-trigger":!0,children:"Select Photo"}),!w&&i&&s.jsxs("div",{"data-photo-menu":!0,className:"absolute left-0 right-0 mt-2 z-20 rounded-xl border border-gray-200 bg-white shadow-lg p-2",children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),S()},children:"Choose from files"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),p()},children:"Use webcam"}),x&&s.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:x})]})]}),r&&s.jsx(ye,{variant:"secondary",onClick:r,fullWidth:!0,children:"Assembly"})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add a photo"}),s.jsxs("div",{className:"flex flex-row gap-2 justify-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ye,{onClick:()=>{w?S():o(j=>!j)},"data-photo-menu-trigger":!0,children:"Select Photo"}),!w&&i&&s.jsxs("div",{"data-photo-menu":!0,className:"absolute left-0 right-0 mt-2 z-20 rounded-xl border border-gray-200 bg-white shadow-lg p-2",children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),S()},children:"Choose from files"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),p()},children:"Use webcam"}),x&&s.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:x})]})]}),r&&s.jsx(ye,{variant:"secondary",onClick:r,children:"Assembly"})]})]})]})}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ry=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},dp=Iy,Ty=[];function Iy(e,t){var r=0,n;if(!t)return Ty;if(e.FLAG==="long"){for(n=new Array(Math.ceil(t.length/2));r<t.length;)n[r/2]=t.slice(r,r+2),r+=2;return n}return t.split(e.FLAG==="num"?",":"")}var My=dp,Ay=$y,zy=[].push,hl="etaoinshrdlcumwfgypbvkjxqz".split(""),ns=/\s+/,Oy=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function $y(e){var t=Object.create(null),r=Object.create(null),n=Object.create(null),l=[],a={in:[],out:[]},i=[],o=e.toString("utf8"),c=[],u=0,m=o.indexOf(`
`),f,x,g,w,b,S,p,h,v,j,E,P,L;for(n.KEY=[];m>-1;)N(o.slice(u,m)),u=m+1,m=o.indexOf(`
`,u);for(N(o.slice(u)),m=-1;++m<c.length;)if(x=c[m],f=x.split(ns),g=f[0],g==="REP"){for(w=m+parseInt(f[1],10);++m<=w;)f=c[m].split(ns),l.push([f[1],f[2]]);m--}else if(g==="ICONV"||g==="OCONV"){for(w=m+parseInt(f[1],10),h=a[g==="ICONV"?"in":"out"];++m<=w;)f=c[m].split(ns),h.push([new RegExp(f[1],"g"),f[2]]);m--}else if(g==="COMPOUNDRULE"){for(w=m+parseInt(f[1],10);++m<=w;)for(j=c[m].split(ns)[1],v=-1,i.push(j);++v<j.length;)r[j.charAt(v)]=[];m--}else if(g==="PFX"||g==="SFX"){for(w=m+parseInt(f[3],10),j={type:g,combineable:f[2]==="Y",entries:[]},t[f[1]]=j;++m<=w;){f=c[m].split(ns),b=f[2],S=f[3].split("/"),p=f[4],h={add:"",remove:"",match:"",continuation:My(n,S[1])},S&&S[0]!=="0"&&(h.add=S[0]);try{b!=="0"&&(h.remove=g==="SFX"?df(b):b),p&&p!=="."&&(h.match=g==="SFX"?df(p):Uy(p))}catch{h=null}h&&j.entries.push(h)}m--}else if(g==="TRY"){for(p=f[1],P=-1,E=[];++P<p.length;)L=p.charAt(P),L.toLowerCase()===L&&E.push(L);for(P=-1;++P<hl.length;)p.indexOf(hl[P])<0&&E.push(hl[P]);n[g]=E}else g==="KEY"?zy.apply(n[g],f[1].split("|")):g==="COMPOUNDMIN"?n[g]=Number(f[1]):g==="ONLYINCOMPOUND"?(n[g]=f[1],r[f[1]]=[]):n[g]=f[1];return isNaN(n.COMPOUNDMIN)&&(n.COMPOUNDMIN=3),n.KEY.length||(n.KEY=Oy),n.TRY||(n.TRY=hl.concat()),n.KEEPCASE||(n.KEEPCASE=!1),{compoundRuleCodes:r,replacementTable:l,conversion:a,compoundRules:i,rules:t,flags:n};function N(z){z=z.trim(),z&&z.charCodeAt(0)!==35&&c.push(z)}}function df(e){return new RegExp(e+"$")}function Uy(e){return new RegExp("^"+e)}var fp=By;function By(e,t){for(var r=-1;++r<t.length;)e=e.replace(t[r][0],t[r][1]);return e}var wa=Wy;function Wy(e,t,r){return r&&t in e&&r.indexOf(e[t])>-1}var Vy=wa,Hy=Gy;function Gy(e,t){var r=-1;if(e.data[t])return!Vy(e.flags,"ONLYINCOMPOUND",e.data[t]);if(t.length>=e.flags.COMPOUNDMIN){for(;++r<e.compoundRules.length;)if(e.compoundRules[r].test(t))return!0}return!1}var Yy=fp,ai=Hy,po=wa,yc=Xy;function Xy(e,t,r){var n=t.trim(),l;if(!n)return null;if(n=Yy(n,e.conversion.in),ai(e,n))return!r&&po(e.flags,"FORBIDDENWORD",e.data[n])?null:n;if(n.toUpperCase()===n){if(l=n.charAt(0)+n.slice(1).toLowerCase(),ff(e.flags,e.data[l],r))return null;if(ai(e,l))return l}if(l=n.toLowerCase(),l!==n){if(ff(e.flags,e.data[l],r))return null;if(ai(e,l))return l}return null}function ff(e,t,r){return po(e,"KEEPCASE",t)||r||po(e,"FORBIDDENWORD",t)}var Qy=yc,Ky=Jy;function Jy(e){return!!Qy(this,e)}var Zy=qy;function qy(e){var t=mf(e.charAt(0)),r=e.slice(1);return!r||(r=mf(r),t===r)?t:t==="u"&&r==="l"?"s":null}function mf(e){return e===e.toLowerCase()?"l":e===e.toUpperCase()?"u":null}var _l=Zy,hf=fp,e1=wa,t1=yc,r1=s1,n1=[].push;function s1(e){var t=this,r={},n=[],l={},a,i,o=[],c,u,m,f,x,g,w,b,S,p,h,v,j,E,P,L,N,z,T,Q,U,O,Z;if(e=hf(e.trim(),t.conversion.in),!e||t.correct(e))return[];for(Z=_l(e),u=-1;++u<t.replacementTable.length;)for(i=t.replacementTable[u],m=e.indexOf(i[0]);m>-1;)o.push(e.replace(i[0],i[1])),m=e.indexOf(i[0],m+1);for(u=-1;++u<e.length;)for(b=e.charAt(u),p=e.slice(0,u),h=e.slice(u+1),j=b.toLowerCase(),v=j!==b,r={},m=-1;++m<t.flags.KEY.length;)if(S=t.flags.KEY[m],f=S.indexOf(j),!(f<0)){for(g=-1;++g<S.length;)if(g!==f){if(w=S.charAt(g),r[w])continue;r[w]=!0,v&&(w=w.toUpperCase()),o.push(p+w+h)}}for(u=-1,N=e.charAt(0),c=[""],z=1,T=0;++u<e.length;){for(b=N,N=e.charAt(u+1),p=e.slice(0,u),i=b===N?"":b+b,m=-1,x=c.length;++m<x;)m<=z&&c.push(c[m]+i),c[m]+=b;++T<3&&(z=c.length)}for(n1.apply(o,c),c=[e],i=e.toLowerCase(),(e===i||Z===null)&&c.push(e.charAt(0).toUpperCase()+i.slice(1)),i=e.toUpperCase(),e!==i&&c.push(i),a={state:{},weighted:l,suggestions:n},E=pf(t,a,c,o),P=0,z=Math.min(E.length,Math.pow(Math.max(15-e.length,3),3)),Q=Math.max(Math.pow(10-e.length,3),1);!n.length&&P<z;)L=P+Q,pf(t,a,E.slice(P,L)),P=L;for(n.sort(J),c=[],U=[],u=-1;++u<n.length;)O=hf(n[u],t.conversion.out),i=O.toLowerCase(),U.indexOf(i)<0&&(c.push(O),U.push(i));return c;function J(I,A){return H(I,A)||ne(I,A)||F(I,A)}function H(I,A){return l[I]===l[A]?0:l[I]>l[A]?-1:1}function ne(I,A){var B=_l(I),q=_l(A);return B===q?0:B===Z?-1:q===Z?1:void 0}function F(I,A){return I.localeCompare(A)}}function pf(e,t,r,n){var l=e.flags.TRY,a=e.data,i=e.flags,o=[],c=-1,u,m,f,x,g,w,b,S,p,h,v,j,E;if(n)for(;++c<n.length;)P(n[c],!0);for(c=-1;++c<r.length;)for(u=r[c],m="",f="",x=u.charAt(0),g=u,w=u.slice(1),b=x.toLowerCase()!==x,S=_l(u),p=-1;++p<=u.length;)for(m+=f,h=g,g=w,w=g.slice(1),f=x,x=u.charAt(p+1),v=b,x&&(b=x.toLowerCase()!==x),g&&v!==b&&(P(m+L(g)),P(m+L(x)+L(f)+w)),P(m+g),g&&P(m+x+f+w),E=-1;++E<l.length;)j=l[E],v&&j!==j.toUpperCase()?(S!=="s"&&(P(m+j+h),P(m+j+g)),j=j.toUpperCase(),P(m+j+h),P(m+j+g)):(P(m+j+h),P(m+j+g));return o;function P(N,z){var T=t.state[N],Q;T!==!!T&&(o.push(N),Q=t1(e,N),T=Q&&!e1(i,"NOSUGGEST",a[Q]),t.state[N]=T,T&&(t.weighted[N]=z?10:0,t.suggestions.push(N))),T&&t.weighted[N]++}function L(N){var z=N.charAt(0);return(z.toLowerCase()===z?z.toUpperCase():z.toLowerCase())+N.slice(1)}}var l1=yc,gf=wa,a1=i1;function i1(e){var t=this,r=l1(t,e,!0);return{correct:t.correct(e),forbidden:!!(r&&gf(t.flags,"FORBIDDENWORD",t.data[r])),warn:!!(r&&gf(t.flags,"WARN",t.data[r]))}}var o1=mp;function mp(e,t,r,n){for(var l=-1,a,i,o,c,u;++l<t.entries.length;)if(a=t.entries[l],c=a.continuation,u=-1,(!a.match||a.match.test(e))&&(i=a.remove?e.replace(a.remove,""):e,i=t.type==="SFX"?i+a.add:a.add+i,n.push(i),c&&c.length))for(;++u<c.length;)o=r[c[u]],o&&mp(i,o,r,n);return n}var xf=o1,hp=d1,c1=[].push,go=[];function u1(e,t,r){var n=e[t];t in e?n===go?e[t]=r.concat():c1.apply(n,r):e[t]=r.concat()}function d1(e,t,r,n){var l=-1,a,i,o,c,u,m,f;for((!("NEEDAFFIX"in n.flags)||r.indexOf(n.flags.NEEDAFFIX)<0)&&u1(e,t,r);++l<r.length;)if(a=n.rules[r[l]],r[l]in n.compoundRuleCodes&&n.compoundRuleCodes[r[l]].push(t),a){for(m=xf(t,a,n.rules,[]),i=-1;++i<m.length;)if(m[i]in e||(e[m[i]]=go),a.combineable){for(o=l;++o<r.length;)if(u=n.rules[r[o]],u&&u.combineable&&a.type!==u.type)for(f=xf(m[i],u,n.rules,[]),c=-1;++c<f.length;)f[c]in e||(e[f[c]]=go)}}}var f1=hp,m1=p1,h1=[];function p1(e,t){var r=this;return f1(r.data,e,r.data[t]||h1,r),r}var g1=x1;function x1(e){var t=this;return delete t.data[e],t}var v1=y1;function y1(){return this.flags.WORDCHARS||null}var w1=dp,j1=hp,b1=N1,vf=/\s/g;function N1(e,t,r){for(var n=e.toString("utf8"),l=n.indexOf(`
`)+1,a=n.indexOf(`
`,l);a>-1;)n.charCodeAt(l)!==9&&yf(n.slice(l,a),t,r),l=a+1,a=n.indexOf(`
`,l);yf(n.slice(l),t,r)}function yf(e,t,r){for(var n=e.indexOf("/"),l=e.indexOf("#"),a="",i,o;n>-1&&e.charCodeAt(n-1)===92;)e=e.slice(0,n-1)+e.slice(n),n=e.indexOf("/",n);l>-1?n>-1&&n<l?(i=e.slice(0,n),vf.lastIndex=n+1,o=vf.exec(e),a=e.slice(n+1,o?o.index:void 0)):i=e.slice(0,l):n>-1?(i=e.slice(0,n),a=e.slice(n+1)):i=e,i=i.trim(),i&&j1(r,i,w1(t.flags,a.trim()),t)}var S1=b1,k1=C1;function C1(e){var t=this,r=-1,n,l,a,i;for(S1(e,t,t.data);++r<t.compoundRules.length;){for(n=t.compoundRules[r],l="",i=-1;++i<n.length;)a=n.charAt(i),l+=t.compoundRuleCodes[a].length?"(?:"+t.compoundRuleCodes[a].join("|")+")":a;t.compoundRules[r]=new RegExp(l,"i")}return t}var _1=E1;function E1(e){var t=this,r=e.toString("utf8").split(`
`),n=-1,l,a,i,o;for(t.flags.FORBIDDENWORD===void 0&&(t.flags.FORBIDDENWORD=!1),o=t.flags.FORBIDDENWORD;++n<r.length;)l=r[n].trim(),l&&(l=l.split("/"),i=l[0],a=i.charAt(0)==="*",a&&(i=i.slice(1)),t.add(i,l[1]),a&&t.data[i].push(o));return t}var wf=Ry,P1=Ay,L1=Zl,Vr=Zl.prototype;Vr.correct=Ky;Vr.suggest=r1;Vr.spell=a1;Vr.add=m1;Vr.remove=g1;Vr.wordCharacters=v1;Vr.dictionary=k1;Vr.personal=_1;function Zl(e,t){var r=-1,n;if(!(this instanceof Zl))return new Zl(e,t);if(typeof e=="string"||wf(e)?(typeof t=="string"||wf(t))&&(n=[{dic:t}]):e&&("length"in e?(n=e,e=e[0]&&e[0].aff):(e.dic&&(n=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");if(e=P1(e),this.data=Object.create(null),this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,n)for(;++r<n.length;)n[r].dic&&this.dictionary(n[r].dic)}const F1=xo(L1);let ii=null;async function jf(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load dictionary: ${e}`);return t.text()}async function D1(){return ii||(ii=(async()=>{const[e,t]=await Promise.all([jf("/dictionaries/fr_FR.aff"),jf("/dictionaries/fr_FR.dic")]);return F1(e,t)})()),ii}function R1(e){if(!e)return[];const t=e.match(/[A-Za-z---'-]+/g);return t?t.filter(r=>r.length>1):[]}function T1(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I1({value:e,onChange:t}){const r=d.useRef(null),[n,l]=d.useState(!1),[a,i]=d.useState([]),[o,c]=d.useState(null),u=g=>{const w=g.target.value;w.length<=Ms.MAX_TEXT_LENGTH&&t(w)};d.useEffect(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${r.current.scrollHeight}px`)},[e]);const m=Ms.MAX_TEXT_LENGTH-e.length,f=async()=>{l(!0),c(null);try{const g=await D1(),w=R1(e),b=new Map;w.forEach(p=>{if(g.correct(p))return;const h=b.get(p);if(h){h.count+=1;return}const v=g.suggest(p).slice(0,5);b.set(p,{count:1,suggestions:v})});const S=Array.from(b.entries()).map(([p,h])=>({word:p,count:h.count,suggestions:h.suggestions}));i(S),S.length===0&&c("No spelling errors found.")}catch{i([]),c("Spellcheck unavailable. Add fr_FR.aff and fr_FR.dic to /public/dictionaries.")}finally{l(!1)}},x=async(g,w)=>{const b=new RegExp(`\\b${T1(g)}\\b`),S=e.replace(b,w);S!==e&&t(S),await f()};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Text (optional)"}),s.jsxs("button",{type:"button",onClick:f,disabled:n,className:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700 disabled:opacity-60",children:[n&&s.jsx("span",{className:"w-3 h-3 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),"Check spelling"]})]}),s.jsx("textarea",{ref:r,value:e,onChange:u,placeholder:"Add a description...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6}),s.jsxs("div",{className:"mt-1 text-sm text-gray-500 text-right",children:[m," characters remaining"]}),o&&s.jsx("div",{className:"mt-2 text-xs text-gray-500",children:o}),a.length>0&&s.jsx("div",{className:"mt-3 space-y-2",children:a.map(g=>s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-800",children:g.word}),s.jsxs("span",{className:"text-xs text-gray-500",children:["x",g.count]})]}),g.suggestions.length>0?s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:g.suggestions.map(w=>s.jsx("button",{type:"button",onClick:()=>x(g.word,w),className:"px-2 py-1 text-xs rounded-full border border-gray-200 text-gray-700 hover:border-primary-400 hover:text-primary-700",children:w},w))}):s.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"No suggestions."})]},g.word))})]})}function M1({value:e,onChange:t}){const r=a=>{const i=new Date(a),o=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),u=String(i.getDate()).padStart(2,"0"),m=String(i.getHours()).padStart(2,"0"),f=String(i.getMinutes()).padStart(2,"0");return`${o}-${c}-${u}T${m}:${f}`},n=a=>new Date(a).toISOString(),l=a=>{t(n(a.target.value))};return s.jsxs("div",{className:"space-y-2 overflow-hidden",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date and time"}),s.jsx("input",{type:"datetime-local",value:r(e),onChange:l,className:"w-full min-w-0 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent box-border text-base",style:{maxWidth:"100%"}})]})}function bf(){const{id:e}=tv(),t=It(),r=fn(),{user:n}=jr(),{articles:l,updateArticle:a,deleteArticle:i}=nr(),{showToast:o}=Qt(),[c,u]=d.useState(""),[m,f]=d.useState(new Date().toISOString()),[x,g]=d.useState(null),[w,b]=d.useState(""),[S,p]=d.useState(""),[h,v]=d.useState(""),[j,E]=d.useState(!1),[P,L]=d.useState(!1),[N,z]=d.useState(!1),[T,Q]=d.useState(!1),[U,O]=d.useState("DRAFT"),Z=d.useRef(null),J=!!e,H=U==="DELETED",ne=U==="DRAFT",{src:F}=Hs(S,h);d.useEffect(()=>{const Y=r.state;if(Y!=null&&Y.famileoImport){const{text:ie,date:se,imageBase64:we,imageMimeType:Re}=Y.famileoImport;u(ie);const Te=new Date(se.replace(" ","T"));if(isNaN(Te.getTime())||f(Te.toISOString()),we){const be=`data:${Re};base64,${we}`;b(be),fetch(be).then(Ne=>Ne.blob()).then(Ne=>{const We=new File([Ne],"famileo-import.jpg",{type:Re});g(We)})}window.history.replaceState({},document.title)}},[r.state]),d.useEffect(()=>{J&&I()},[e]),d.useEffect(()=>{J&&!x&&F&&b(F)},[J,x,F]),d.useEffect(()=>{const Y=document.body.style.overflow,ie=document.body.style.height;return document.body.style.overflow="hidden",document.body.style.height="100%",()=>{document.body.style.overflow=Y,document.body.style.height=ie}},[]),d.useEffect(()=>{j||requestAnimationFrame(()=>{var Y;(Y=Z.current)==null||Y.scrollTo({top:0,left:0,behavior:"auto"}),requestAnimationFrame(()=>{var ie;(ie=Z.current)==null||ie.scrollTo({top:0,left:0,behavior:"auto"})})})},[e,j,r.key]);const I=async()=>{if(e){E(!0);try{const Y=l.find(se=>se.id===e);if(Y){u(Y.texte||""),f(Y.date),p(Y.image_url||""),v(Y.image_file_id||""),O(Y.status||"ACTIVE");return}const ie=await $t.get(e);u(ie.texte),f(ie.date),p(ie.image_url||""),v(ie.image_file_id||""),O(ie.status||"ACTIVE")}catch{o("Failed to load article","error"),t("/")}finally{E(!1)}}},A=(Y,ie)=>{g(Y);const se=URL.createObjectURL(Y);b(se),ie&&!J&&f(ie.toISOString())},B=async()=>{if(!x&&!J){o("Please select a photo","error");return}if(n){L(!0);try{if(J&&e){const Y=H?"ACTIVE":U,ie=await qt.updateArticle(e,c,x||void 0,m,void 0,void 0,Y);a(ie),o(H?"Article restored":"Article updated","success")}else x&&(await qt.createArticle(n.email,c,x,m,void 0,void 0,void 0,U),o("Article created","success"));await Ey.deleteDraft(e||"new"),t("/")}catch(Y){o(Y instanceof Error?Y.message:"Failed to save article","error")}finally{L(!1)}}},q=()=>{w&&w.startsWith("blob:")&&URL.revokeObjectURL(w),t("/")},ge=async()=>{if(e){L(!0);try{console.log("Deleting article:",e);const Y=await qt.deleteArticle(e);console.log("Delete result:",Y),i(e),o("Article deleted","success"),t("/")}catch(Y){console.error("Delete error:",Y),o(Y instanceof Error?Y.message:"Failed to delete article","error")}finally{L(!1),z(!1)}}};return j?s.jsx(Vs,{message:"Loading article..."}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),P&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg px-6 py-5 flex items-center gap-3",children:[s.jsx(Et,{}),s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Saving..."})]})}),s.jsxs("div",{className:"flex-1 flex flex-col max-w-content mx-auto w-full bg-white",children:[s.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-center flex-shrink-0 relative",children:[s.jsx("h1",{className:"text-lg font-semibold",children:J?"Edit Article":"New Article"}),s.jsxs("button",{type:"button",onClick:()=>Q(!0),className:"absolute right-4 top-1/2 -translate-y-1/2 inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors","aria-label":"Poster vers Famileo",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]}),"Famileo"]})]}),s.jsxs("div",{ref:Z,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-6 pb-28 overscroll-contain",children:[s.jsx(M1,{value:m,onChange:f}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Status"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>O("ACTIVE"),className:`px-3 py-2 text-sm font-medium transition-colors ${U==="ACTIVE"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Published"}),s.jsx("button",{type:"button",onClick:()=>O("DRAFT"),className:`px-3 py-2 text-sm font-medium border-l border-gray-300 transition-colors ${U==="DRAFT"?"bg-amber-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Draft"})]})]}),s.jsx(Dy,{onPhotoSelected:A,currentImage:w,onPhotoAssembly:()=>t("/photo-assembly",{state:{editMode:J,articleId:e,texte:c,dateModification:m}})}),s.jsx(I1,{value:c,onChange:u})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 p-3",children:s.jsxs("div",{className:"max-w-content mx-auto w-full flex gap-2",children:[J&&!H&&s.jsx(ye,{variant:"danger",onClick:()=>z(!0),disabled:P,className:"flex-1 px-3 py-2 text-sm",children:"Delete Article"}),s.jsx(ye,{onClick:B,disabled:P||!x&&!J,className:"flex-1 px-3 py-2 text-sm",children:P?"Saving...":H?"Save & restore":J?ne?"Save Draft":"Update":ne?"Save Draft":"Publish"}),s.jsx(ye,{variant:"secondary",onClick:q,disabled:P,className:"flex-1 px-3 py-2 text-sm",children:"Cancel"})]})}),s.jsx(Ft,{isOpen:N,title:"Delete Article",message:"Are you sure you want to delete this article? This action cannot be undone.",confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",isLoading:P,onConfirm:ge,onCancel:()=>z(!1)}),s.jsx(va,{isOpen:T,onClose:()=>Q(!1),authorLabel:(n==null?void 0:n.email)||"Unknown",authorEmail:(n==null?void 0:n.email)||"",dateLabel:ir(m),excerpt:c,text:c,publishedAt:m,imageUrl:S,imageFileId:h})]})]})}function A1(){const e=It(),t=nr(g=>g.setFilters),[r,n]=d.useState(!0),[l,a]=d.useState(null),[i,o]=d.useState([]),[c,u]=d.useState(io());d.useEffect(()=>{m()},[]);const m=async()=>{n(!0),a(null);try{const g=await $t.list({limit:"1000",status_filter:"all"}),w=new Map;g.items.forEach(S=>{const p=new Date(S.date),h=p.getFullYear(),v=p.getMonth(),j=S.status==="DELETED"?"deleted":S.status==="DRAFT"?"draft":"active",E=!!S.famileo_post_id;w.has(h)||w.set(h,{total:0,active:0,activeFamileo:0,draft:0,deleted:0,monthMap:new Map});const P=w.get(h);P.total+=1,P[j]+=1,j==="active"&&E&&(P.activeFamileo+=1),P.monthMap.has(v)||P.monthMap.set(v,{total:0,active:0,activeFamileo:0,draft:0,deleted:0});const L=P.monthMap.get(v);L.total+=1,L[j]+=1,j==="active"&&E&&(L.activeFamileo+=1)});const b=Array.from(w.entries()).map(([S,p])=>({year:S,total:p.total,active:p.active,activeFamileo:p.activeFamileo,draft:p.draft,deleted:p.deleted,months:Array.from(p.monthMap.entries()).map(([h,v])=>({monthIndex:h,monthName:qh[h],total:v.total,active:v.active,activeFamileo:v.activeFamileo,draft:v.draft,deleted:v.deleted})).sort((h,v)=>h.monthIndex-v.monthIndex)})).sort((S,p)=>p.year-S.year);if(o(b),b.length>0){const S=io(),p=b.some(h=>h.year===S);u(p?S:b[0].year)}}catch(g){a(g instanceof Error?g.message:"Failed to load statistics")}finally{n(!1)}},f=(g,w="active")=>{t({year:String(g),month:"",from:"",to:"",statusFilter:w,sourceFilter:"all"}),e("/")},x=(g,w,b="active")=>{t({year:String(g),month:String(w+1).padStart(2,"0"),from:"",to:"",statusFilter:b,sourceFilter:"all"}),e("/")};return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:s.jsx(ip,{message:l,onRetry:m})}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),s.jsx("div",{className:"flex-1 p-4 pb-24",children:r?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Et,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading statistics..."})]})}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Year breakdown"}),s.jsxs("div",{className:"space-y-3",children:[i.map(g=>{const w=c===g.year;return s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"w-full px-4 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between text-left hover:bg-gray-50",children:[s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>u(w?null:g.year),onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&u(w?null:g.year)},className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900",children:g.year}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[g.total," total  ",g.active," active (",g.activeFamileo," famileo)  ",g.draft," draft  ",g.deleted," deleted"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>f(g.year,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),s.jsx("button",{onClick:()=>f(g.year,"draft"),className:"text-xs font-medium text-amber-600 hover:text-amber-700",children:"View draft"}),s.jsx("button",{onClick:()=>f(g.year,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"}),s.jsx("button",{onClick:()=>u(w?null:g.year),className:"text-xs font-medium text-gray-600 hover:text-gray-800",children:w?"Hide months":"Show months"})]})]}),w&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"mt-2 space-y-2",children:[g.months.map(b=>s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-2 border-b border-gray-100 last:border-b-0",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:b.monthName}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[b.total," total  ",b.active," active (",b.activeFamileo," famileo)  ",b.draft," draft  ",b.deleted," deleted"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("button",{onClick:()=>x(g.year,b.monthIndex,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),s.jsx("button",{onClick:()=>x(g.year,b.monthIndex,"draft"),className:"text-xs font-medium text-amber-600 hover:text-amber-700",children:"View draft"}),s.jsx("button",{onClick:()=>x(g.year,b.monthIndex,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"})]})]},`${g.year}-${b.monthIndex}`)),g.months.length===0&&s.jsx("div",{className:"text-sm text-gray-500",children:"No months found"})]})})]},g.year)}),i.length===0&&s.jsx("div",{className:"text-sm text-gray-500",children:"No statistics available"})]})]})})]})}function z1(e){if(!e||e.startsWith("blob:")||e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w2000`}return e}function O1(){const{user:e,logout:t}=jr(),{showToast:r,setUnsavedChanges:n}=Qt(),{profile:l,isLoading:a,saveProfile:i,avatarBlobUrl:o}=gc(),[c,u]=d.useState(""),[m,f]=d.useState(null),[x,g]=d.useState(""),[w,b]=d.useState(""),[S,p]=d.useState(""),[h,v]=d.useState(""),[j,E]=d.useState(""),[P,L]=d.useState(!1),[N,z]=d.useState(""),[T,Q]=d.useState(!1),[U,O]=d.useState(""),Z=c.trim()!==U.trim()||x.trim()!==w.trim()||S.trim()!==h.trim()||m!==null||j.trim().length>0;d.useEffect(()=>{l?(u(l.pseudo),O(l.pseudo||""),g(l.famileo_email||""),b(l.famileo_email||""),p(l.famileo_name||""),v(l.famileo_name||""),L(!!l.famileo_password_set),z(o||l.avatar_url)):e&&(u(e.name),O(e.name||""),g(""),b(""),p(""),v(""),L(!1)),f(null),E("")},[l,e,o]);const J=F=>{var B;const I=(B=F.target.files)==null?void 0:B[0];if(!I)return;f(I);const A=URL.createObjectURL(I);z(A)},H=async()=>{if(!c.trim()){r("Please enter a pseudo","error");return}Q(!0);try{const F=c.trim();await i(F,x.trim(),S.trim(),j.trim()||void 0,m||void 0),u(F),O(F),f(null),E(""),r("Profile saved","success")}catch{r("Failed to save profile","error")}finally{Q(!1)}},ne=()=>{t()};return d.useEffect(()=>{n(Z)},[Z,n]),a?s.jsx(Vs,{message:"Loading profile..."}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),s.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-md mx-auto w-full",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("div",{className:"relative",children:[N?s.jsx("img",{src:z1(N),alt:"Avatar",className:"w-32 h-32 rounded-full object-cover border-4 border-primary-200"}):s.jsx("div",{className:"w-32 h-32 rounded-full bg-primary-100 flex items-center justify-center border-4 border-primary-200",children:s.jsx("span",{className:"text-4xl font-semibold text-primary-600",children:c.charAt(0).toUpperCase()||"?"})}),s.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:J,className:"hidden"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to change avatar"})]}),s.jsx("div",{children:s.jsx(Kt,{label:"Pseudo",value:c,onChange:F=>u(F.target.value),placeholder:"Enter your pseudo"})}),s.jsx("div",{children:s.jsx(Kt,{label:"Famileo name",value:S,onChange:F=>p(F.target.value),placeholder:"Exact name used in Famileo"})}),s.jsx("div",{children:s.jsx(Kt,{label:"Famileo email",value:x,onChange:F=>g(F.target.value),placeholder:"Email used to login to Famileo",type:"email"})}),s.jsxs("div",{children:[s.jsx(Kt,{label:"Famileo password",type:"password",value:j,onChange:F=>E(F.target.value),placeholder:P?"Leave empty to keep current password":"Set Famileo password"}),P&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"A password is already saved for Famileo."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backend URL"}),s.jsx("input",{type:"text",value:"https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 text-xs"})]})]}),s.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:s.jsxs("div",{className:"max-w-md mx-auto w-full flex flex-col sm:flex-row sm:justify-center gap-2",children:[s.jsx(ye,{onClick:H,disabled:T||a||!c.trim()||!Z,className:"w-full sm:w-auto",children:T?"Saving...":"Save Profile"}),s.jsx(ye,{variant:"danger",onClick:ne,disabled:T,className:"w-full sm:w-auto",children:"Logout"})]})}),T&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(Et,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})})]})}function oi({post:e,selected:t,onSelectionChange:r,onImageLoaded:n,cachedImage:l,alreadyImported:a,variant:i="card"}){const[o,c]=d.useState(!1),[u,m]=d.useState(null),[f,x]=d.useState(!1),g=i==="mosaic",w=i==="row";d.useEffect(()=>{if(l){m(`data:${l.mimeType};base64,${l.base64}`);return}(async()=>{if(!(u||o||f)){c(!0);try{const p=await _t.image(e.image_url);m(`data:${p.mimeType};base64,${p.base64}`),n(e.id,p.base64,p.mimeType)}catch{x(!0)}finally{c(!1)}}})()},[e.id,e.image_url,l]);const b=e.author_pseudo.split(" ").map(S=>S[0]).join("").toUpperCase().substring(0,2);return w?s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:`bg-white rounded-lg border shadow-sm px-3 py-2 flex items-center gap-3 transition-colors ${t?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:S=>r(S.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsxs("div",{className:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center flex-shrink-0",children:[o&&!f&&s.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),f?s.jsx("span",{className:"text-[10px] text-gray-400",children:"No image"}):u&&s.jsx("img",{src:u,alt:"",className:"w-full h-full object-cover"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:e.author_pseudo}),a&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Imported"})]}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.text&&s.jsx("div",{className:"text-xs text-gray-700 mt-1 truncate",children:e.text})]})]})}):s.jsx("div",{className:g?"":"px-4",children:s.jsxs("div",{className:`bg-white rounded-lg ${g?"shadow-sm":"shadow-md"} overflow-hidden border-2 transition-colors ${t?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[g?s.jsx("div",{className:"p-3 pb-2",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:e.author_pseudo}),s.jsx("div",{className:"text-[11px] text-gray-500",children:ir(e.date)})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-green-100 text-green-700",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Imported"]}),s.jsx("input",{type:"checkbox",checked:t,onChange:S=>r(S.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})]})]})}):s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:S=>r(S.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-orange-700",children:b})}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:e.author_pseudo}),s.jsx("span",{className:"text-sm text-gray-500",children:ir(e.date)})]})]}),a&&s.jsx("div",{className:"flex-shrink-0 ml-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Imported"]})})]}),s.jsxs("div",{className:`w-full bg-gray-100 relative ${g?"aspect-[4/3]":"min-h-[200px]"}`,children:[o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:s.jsx("p",{className:"text-sm",children:"Failed to load image"})}),u&&s.jsx("img",{src:u,alt:"",className:`w-full ${g?"h-full object-cover":"h-auto object-contain"}`})]}),e.text&&s.jsx("div",{className:g?"px-3 pb-3":"p-4",children:s.jsx("p",{className:`text-gray-900 ${g?"text-xs max-h-12 overflow-hidden":"whitespace-pre-wrap"}`,children:e.text})}),!g&&s.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100 text-xs text-gray-500",children:[s.jsxs("span",{children:["ID: ",e.id]}),s.jsx("span",{className:"mx-2",children:"|"}),s.jsx("span",{children:e.image_orientation})]})]})})}function $1(){const e=fn();It();const{user:t}=jr(),[r,n]=d.useState(""),[l,a]=d.useState(()=>{const C=new Date,y=C.getFullYear(),_=String(C.getMonth()+1).padStart(2,"0"),M=String(C.getDate()).padStart(2,"0");return`${y}-${_}-${M}`}),[i,o]=d.useState([]),[c,u]=d.useState(!1),[m,f]=d.useState(null),x=d.useRef(null),[g,w]=d.useState(new Set),[b,S]=d.useState({}),[p,h]=d.useState(!1),[v,j]=d.useState(null),E=d.useRef(!1),[P,L]=d.useState(!1),[N,z]=d.useState(!1),[T,Q]=d.useState(null),[U,O]=d.useState(!1),[Z,J]=d.useState([]),[H,ne]=d.useState("declared"),[F,I]=d.useState([]),[A,B]=d.useState(()=>{const C=localStorage.getItem("famileo_view_mode");return C==="list"||C==="mosaic"?C:"card"}),[q,ge]=d.useState(()=>{const C=Number(localStorage.getItem("famileo_mosaic_columns")||2);return C>=2&&C<=4?C:2}),[Y,ie]=d.useState(""),[se,we]=d.useState(!0),[Re,Te]=d.useState(null),[be,Ne]=d.useState(new Set),[We,Ve]=d.useState(new Set),[Oe,He]=d.useState({}),[_e,$]=d.useState(!1),oe=d.useRef(null),[ae,he]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const[y,_,M,le]=await Promise.all([_t.families(),_t.importedIds(),_t.importedFingerprints(),vc.list()]);J(y.families),I(le.users||[]),y.families.length>0&&ie(y.families[0].famileo_id),Ne(new Set(_.ids)),Ve(new Set(M.fingerprints||[]))}catch(y){console.error("Failed to load initial data:",y)}finally{we(!1)}})()},[]),d.useEffect(()=>{const C=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=C}},[]),d.useEffect(()=>{requestAnimationFrame(()=>{var C;(C=oe.current)==null||C.scrollTo({top:0,left:0,behavior:"auto"}),requestAnimationFrame(()=>{var y;(y=oe.current)==null||y.scrollTo({top:0,left:0,behavior:"auto"})})})},[e.key]),d.useEffect(()=>{localStorage.setItem("famileo_view_mode",A)},[A]),d.useEffect(()=>{localStorage.setItem("famileo_mosaic_columns",String(q))},[q]);const V=C=>{const y=C.toLowerCase();return y.includes("session expired")||y.includes("famileo session not configured")||y.includes("invalid famileo session")},W=C=>V(C)?"Session Famileo expire. Rafrachissement en cours...":C,K=async()=>{for(let y=0;y<20;y++){try{const _=await _t.status({validate:"true",family_id:Y||void 0});if(_.valid)return Q(null),!0;Q(_.message?W(_.message):"Refreshing session...")}catch(_){const M=_ instanceof Error?_.message:"Refreshing session...";Q(W(M))}await new Promise(_=>setTimeout(_,5e3))}return!1},ee=async C=>{const y=[];let _=null,M=!0;const le=new Date(r+"T00:00:00").getTime(),pe=new Date(l+"T23:59:59").getTime();let Ge=new Date(l+"T23:59:59.999Z").toISOString();for(;M;){const ot=await _t.posts({limit:"50",timestamp:Ge,family_id:Y||void 0,author_filter:H},{signal:C});ot.counts&&(_||(_={declared:0,others:0,total:0}),_.declared+=ot.counts.declared||0,_.others+=ot.counts.others||0,_.total+=ot.counts.total||0);for(const gt of ot.posts){const Ye=new Date(gt.date).getTime();Ye>=le&&Ye<=pe&&y.push(gt)}$(!0);const Hr=await Promise.all(ot.posts.map(async gt=>{const Ye=pt(gt),kt=await Vt(Ye);return[gt.id,kt]}));He(gt=>{const Ye={...gt};return Hr.forEach(([kt,xt])=>{xt&&(Ye[kt]=xt)}),Ye}),$(!1),ot.next_timestamp&&new Date(ot.next_timestamp).getTime()>=le?Ge=ot.next_timestamp:M=!1}return _&&Te(_),y},re=async()=>{if(!r||!l){f("Please select both start and end dates");return}const C=new AbortController;x.current=C,u(!0),f(null),Q(null),o([]),w(new Set),S({}),Te(null),He({}),$(!1);try{const y=await ee(C.signal);o(y),y.length===0&&f("No posts found in this date range")}catch(y){if(y instanceof Error&&y.name==="AbortError"){u(!1);return}const _=y instanceof Error?y.message:"Failed to fetch posts";if(V(_)&&!U){O(!0),z(!0),Q("Refreshing Famileo session... This may take a few minutes.");try{if(await _t.triggerRefresh(),await K()){const le=await ee(C.signal);o(le),le.length===0&&f("No posts found in this date range"),Q(null)}else f("Le rafrachissement Famileo a expir. Ressaie dans quelques minutes.")}catch(M){const le=M instanceof Error?M.message:"Failed to refresh session";f(W(le))}finally{z(!1),O(!1)}}else f(_)}finally{u(!1)}},de=()=>{x.current&&(x.current.abort(),x.current=null),u(!1),z(!1),O(!1),Q(null)},je=(C,y)=>{w(_=>{const M=new Set(_);return y?M.add(C):M.delete(C),M})},Ee=(C,y,_)=>{S(M=>({...M,[C]:{base64:y,mimeType:_}}))},qe=()=>{const C=i.filter(_=>!ae||!be.has(String(_.id)));C.filter(_=>g.has(_.id)).length===C.length?w(_=>{const M=new Set(_);return C.forEach(le=>M.delete(le.id)),M}):w(_=>{const M=new Set(_);return C.forEach(le=>M.add(le.id)),M})},Ke=async()=>{if(!t||g.size===0)return;const C=i.filter(y=>g.has(y.id));C.sort((y,_)=>new Date(y.date).getTime()-new Date(_.date).getTime()),E.current=!1,h(!0),j({current:0,total:C.length,currentPostText:""});try{for(let y=0;y<C.length&&!E.current;y++){const _=C[y];j({current:y+1,total:C.length,currentPostText:_.text.substring(0,50)+(_.text.length>50?"...":"")});let M="",le="image/jpeg";const pe=await _t.image(_.full_image_url);M=pe.base64,le=pe.mimeType;const Ge=`data:${le};base64,${M}`,ot=await fetch(Ge).then(xt=>xt.blob()),Hr=new File([ot],"famileo-import.jpg",{type:le}),gt=new Date(_.date.replace(" ","T")),Ye=isNaN(gt.getTime())?new Date().toISOString():gt.toISOString();await qt.createArticle(_.author_email||t.email,_.text,Hr,Ye,String(_.id)),Ne(xt=>new Set([...xt,String(_.id)]));let kt=Oe[_.id];kt||(kt=await Vt(pt(_))),kt&&Ve(xt=>new Set([...xt,kt])),y<C.length-1&&await new Promise(xt=>setTimeout(xt,500))}w(new Set),E.current?Q("Bulk creation cancelled."):Q(`Successfully created ${C.length} article${C.length>1?"s":""}`)}catch(y){f(y instanceof Error?y.message:"Failed to create articles")}finally{h(!1),j(null),L(!1)}},St=()=>{E.current=!0,L(!0)},ht=async()=>{z(!0),Q(null),f(null);try{const C=await _t.triggerRefresh();Q(C.message)}catch(C){f(C instanceof Error?C.message:"Failed to trigger refresh")}finally{z(!1)}},it=g.size,$e=C=>String(C||"").toLowerCase().replace(/\s+/g," ").trim(),pt=C=>{const y=$e(C.author_email||(t==null?void 0:t.email)||""),_=C.date?String(C.date):"",M=_?new Date(_.replace(" ","T")):new Date(""),le=isNaN(M.getTime())?"":M.toISOString().slice(0,10),pe=$e(C.text||"");return`${y}|${le}|${pe}`},Vt=async C=>{var le;if(!C||!((le=window.crypto)!=null&&le.subtle))return"";const y=new TextEncoder().encode(C),_=await window.crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(_)).map(pe=>pe.toString(16).padStart(2,"0")).join("")},Me=C=>{const y=Oe[C.id];return be.has(String(C.id))||!!y&&We.has(y)},D=i.filter(C=>!ae||!Me(C)),G=D.filter(C=>g.has(C.id)).length;return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),s.jsxs("div",{ref:oe,className:`flex-1 overflow-y-auto overflow-x-hidden ${!c&&i.length===0?"overflow-hidden":""}`,children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Famileo Extractor"}),s.jsxs("button",{onClick:ht,disabled:N||p,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation disabled:opacity-50",title:"Refresh Famileo session",children:[s.jsx("svg",{className:`w-4 h-4 ${N?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:N?"Refreshing...":"Refresh Session"})]})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),s.jsx("select",{value:Y,onChange:C=>ie(C.target.value),disabled:c||p||se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white",children:se?s.jsx("option",{value:"",children:"Loading families..."}):Z.length===0?s.jsx("option",{value:"",children:"No family configured"}):Z.map(C=>s.jsx("option",{value:C.famileo_id,children:C.name},C.id))})]}),!se&&Z.length===0&&s.jsx("div",{className:"text-sm text-amber-600",children:'No family configured. Add families in the "families" sheet.'}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:r,onChange:C=>n(C.target.value),disabled:c||p,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:l,onChange:C=>a(C.target.value),disabled:c||p,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posts"}),s.jsxs("select",{value:H,onChange:C=>ne(C.target.value),disabled:c||p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white",children:[s.jsx("option",{value:"all",children:"Everyone"}),s.jsx("option",{value:"others",children:"Other users"}),s.jsx("option",{value:"declared",children:"Declared users"}),F.length>0&&s.jsx("optgroup",{label:"Declared users (specific)",children:F.map(C=>s.jsxs("option",{value:C.email,children:[C.pseudo||C.email,C.famileo_name?`  ${C.famileo_name}`:""]},C.email))})]})]}),s.jsx("button",{onClick:re,disabled:c||p||se||!r||!l||!Y&&Z.length>0,className:"w-full py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation",children:se?"Loading families...":c?"Loading...":"Get Posts"})]})}),T&&s.jsx("div",{className:"mx-4 mt-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:T}),m&&s.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:m}),c&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),s.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Loading posts..."}),s.jsx("button",{onClick:de,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"})]}),!c&&i.length>0&&s.jsxs("div",{className:"flex-1 py-4 pb-24",children:[s.jsxs("div",{className:"px-4 mb-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," post",i.length>1?"s":""," found",it>0&&s.jsxs("span",{className:"ml-2 text-primary-600 font-medium",children:["(",it," selected)"]}),_e&&s.jsx("span",{className:"ml-2 text-gray-400",children:" hashing"}),Re&&s.jsxs("span",{className:"ml-2 text-gray-400",children:[" ",Re.declared," declared / ",Re.others," others"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:A,onChange:C=>B(C.target.value),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"View mode",children:[s.jsx("option",{value:"card",children:"Card view"}),s.jsx("option",{value:"list",children:"List view"}),s.jsx("option",{value:"mosaic",children:"Mosaic view"})]}),A==="mosaic"&&s.jsxs("select",{value:q,onChange:C=>ge(Number(C.target.value)),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"Mosaic columns",children:[s.jsx("option",{value:2,children:"2 cols"}),s.jsx("option",{value:3,children:"3 cols"}),s.jsx("option",{value:4,children:"4 cols"})]}),s.jsx("button",{onClick:qe,disabled:p,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:G===D.length?"Deselect All":"Select All"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"hideImported",checked:ae,onChange:C=>he(C.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("label",{htmlFor:"hideImported",className:"text-sm text-gray-600",children:["Hide already imported posts (",i.filter(C=>Me(C)).length,")"]})]})]}),A==="mosaic"?s.jsx("div",{className:"px-4 grid gap-3",style:{gridTemplateColumns:`repeat(${q}, minmax(0, 1fr))`},children:i.filter(C=>!ae||!Me(C)).map(C=>s.jsx(oi,{post:C,selected:g.has(C.id),onSelectionChange:y=>je(C.id,y),onImageLoaded:Ee,cachedImage:b[C.id],alreadyImported:Me(C),variant:"mosaic"},C.id))}):A==="list"?s.jsx("div",{className:"space-y-3",children:i.filter(C=>!ae||!Me(C)).map(C=>s.jsx(oi,{post:C,selected:g.has(C.id),onSelectionChange:y=>je(C.id,y),onImageLoaded:Ee,cachedImage:b[C.id],alreadyImported:Me(C),variant:"row"},C.id))}):s.jsx("div",{className:"space-y-4",children:i.filter(C=>!ae||!Me(C)).map(C=>s.jsx(oi,{post:C,selected:g.has(C.id),onSelectionChange:y=>je(C.id,y),onImageLoaded:Ee,cachedImage:b[C.id],alreadyImported:Me(C),variant:"card"},C.id))})]})]}),!c&&i.length>0&&s.jsx("div",{className:`fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 ${p?"pointer-events-none":""}`,children:s.jsx("div",{className:"max-w-content mx-auto",children:s.jsxs("button",{onClick:Ke,disabled:it===0||p,className:"w-full py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})}),it>0?`Bulk Create (${it})`:"Select posts to create"]})})}),s.jsx(xa,{isOpen:!!(p&&v),onClose:St,title:"Creating Articles",align:"center",children:v&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[v.current," / ",v.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all duration-300",style:{width:`${v.current/v.total*100}%`}})})]}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.currentPostText}),s.jsx("button",{onClick:St,disabled:P,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 disabled:opacity-60 rounded-lg transition-colors",children:P?"Cancel in progress...":"Cancel"})]})})]})}const ut={create:e=>ce.post("pdf/create",e),previewCover:e=>ce.post("pdf/cover-preview",e),previewCoverContent:e=>ce.post("pdf/cover-preview-content",{file_id:e}),deleteCoverPreview:e=>ce.post("pdf/cover-preview-delete",{file_id:e}),process:e=>ce.get("pdf/process",{job_id:e}),status:e=>ce.get("pdf/status",{job_id:e}),list:e=>{const t=e?{date_from:e.date_from,date_to:e.date_to,author:e.author,include_in_progress:e.include_in_progress?"true":void 0}:void 0;return ce.get("pdf/list",t)},delete:e=>ce.post("pdf/delete",{job_id:e}),triggerMerge:e=>ce.post("pdf/merge-trigger",{job_id:e}),cancelMerge:e=>ce.post("pdf/merge-cancel",{job_id:e}),cleanupMerge:e=>ce.post("pdf/merge-cleanup",{job_id:e}),cancel:e=>ce.post("pdf/cancel",{job_id:e})},U1=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).email||"me"}catch{return"me"}},B1=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).name||null}catch{return null}},W1=e=>e==="PENDING"||e==="RUNNING"||e==="DONE"||e==="ERROR"||e==="CANCELLED"?e:"PENDING",wc=xc((e,t)=>({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null,startGeneration:async(r,n,l,a)=>{e({isGenerating:!0,jobId:null,progress:0,progressMessage:"Starting...",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:a||null});try{const i=await ut.create({from:r,to:n,options:l}),o=new Date().toISOString(),c=U1(),u=B1()||c.split("@")[0],m={job_id:i.job_id,created_at:o,created_by:c,created_by_pseudo:u,date_from:r,date_to:n,status:W1(i.status),progress:i.progress,progress_message:i.progress_message,pdf_url:i.pdf_url,pdf_file_id:i.pdf_file_id};return i.status==="DONE"&&i.pdf_url?(e({isGenerating:!1,progress:100,progressMessage:"Done!",pdfUrl:i.pdf_url,showSuccess:!0}),a&&a(),m):i.status==="ERROR"?(e({isGenerating:!1,error:"PDF generation failed",progressMessage:""}),null):(e({isGenerating:!1,jobId:i.job_id}),ut.process(i.job_id).catch(()=>{}),a&&a(),m)}catch(i){return e({isGenerating:!1,error:i instanceof Error?i.message:"Error while generating PDF",progressMessage:""}),null}},pollJobStatus:async r=>{try{const n=await ut.status(r);if(e({progress:n.progress||0,progressMessage:n.progress_message||""}),n.status==="DONE"){const l=t().onCompleteCallback;e({isGenerating:!1,pdfUrl:n.pdf_url||null,showSuccess:!0}),l&&l()}else n.status==="ERROR"?e({isGenerating:!1,error:n.error_message||"PDF generation failed"}):setTimeout(()=>t().pollJobStatus(r),1e3)}catch(n){e({isGenerating:!1,error:n instanceof Error?n.message:"Error while tracking job"})}},setLastCompletedJob:r=>{e({lastCompletedJob:r,showSuccess:!!(r!=null&&r.pdf_url),pdfUrl:(r==null?void 0:r.pdf_url)||null})},dismissSuccess:()=>{e({showSuccess:!1,pdfUrl:null,lastCompletedJob:null})},dismissError:()=>{e({error:null})},reset:()=>{e({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null})}})),te={get:e=>ce.get("config/get",{key:e}),set:(e,t)=>ce.post("config/set",{key:e,value:t})},V1=e=>{const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);return t?{y:t[1],m:t[2],d:t[3]}:{y:"",m:"",d:""}},H1=(e,t,r)=>!e||!t||!r?"":`${e}-${t}-${r}`,Nf=(e,t)=>{const r=Number(e),n=Number(t);return!Number.isFinite(r)||!Number.isFinite(n)||n<1||n>12?31:new Date(r,n,0).getDate()};function G1({isOpen:e,onClose:t,onComplete:r}){const{startGeneration:n,isGenerating:l}=wc(),[a,i]=d.useState("dates"),[o,c]=d.useState(""),[u,m]=d.useState(""),[f,x]=d.useState(!1),[g,w]=d.useState(null),[b,S]=d.useState([]),[p,h]=d.useState(0),[v,j]=d.useState("full"),[E,P]=d.useState(!0),[L,N]=d.useState(0),[z,T]=d.useState("mosaic"),[Q,U]=d.useState(!1),[O,Z]=d.useState(!1),[J,H]=d.useState(""),[ne,F]=d.useState(""),[I,A]=d.useState(""),[B,q]=d.useState(!1),[ge,Y]=d.useState("start"),[ie,se]=d.useState({y:"",m:"",d:""}),[we,Re]=d.useState(!1),Te=new Date().getFullYear(),be=Array.from({length:26},($,oe)=>String(Te-10+oe)),Ne=()=>{i("dates"),c(""),m(""),S([]),h(0),w(null),j("full"),P(!0),N(0),T("mosaic"),U(!1),Z(!1),H(""),F(""),A("")},We=()=>{Ne(),t()},Ve=async()=>{if(!o||!u){w("Please select a start and end date");return}if(u<o){w("End date cannot be earlier than start date");return}x(!0),w(null);try{const $=[];let oe=null;do{const K=await $t.list({from:o,to:u,limit:"100",cursor:oe||void 0,status_filter:"all"});$.push(...K.items),oe=K.next_cursor}while(oe);const ae=new Map;let he=0,V=0;for(const K of $){if(K.status==="DELETED")continue;V++;const ee=K.date.substring(0,7),re=oo(K.date),de=K.status==="ACTIVE",je=K.status==="DRAFT",Ee=K.is_duplicate===!0;ae.has(ee)||ae.set(ee,{label:re,activeCount:0,draftCount:0,duplicateCount:0});const qe=ae.get(ee);de&&(qe.activeCount++,he++),je&&qe.draftCount++,Ee&&qe.duplicateCount++}const W=Array.from(ae.entries()).sort((K,ee)=>K[0].localeCompare(ee[0])).map(([K,ee])=>({key:K,label:ee.label,activeCount:ee.activeCount,draftCount:ee.draftCount,duplicateCount:ee.duplicateCount}));if(S(W),h(he),N(he),V===0){w("No articles found for this period");return}he===0&&w("No active articles found for this period"),i("preview")}catch($){w($ instanceof Error?$.message:"Error while loading")}finally{x(!1)}},Oe=async()=>{const $=await n(o,u,{mosaic_layout:v,show_seasonal_fruits:E,max_mosaic_photos:L>0?L:void 0,cover_style:z,family_name:J.trim()||void 0,cover_title:ne.trim()||void 0,cover_subtitle:I.trim()||void 0,auto_merge:Q,clean_chunks:Q?O:void 0});Ne(),t(),r($)},He=$=>{const ae=V1($==="start"?o:u);if(!ae.y||!ae.m||!ae.d){const he=new Date;ae.y=String(he.getFullYear()),ae.m=String(he.getMonth()+1).padStart(2,"0"),ae.d=String(he.getDate()).padStart(2,"0")}se(ae),Y($)},_e=$=>{$&&(ge==="start"?(c($),u&&$>u&&m($)):(m($),o&&$<o&&c($)),g&&w(null))};return d.useEffect(()=>{if(!e)return;let $=!1;const oe=window.scrollY||document.documentElement.scrollTop||0,ae={overflow:document.body.style.overflow,position:document.body.style.position,top:document.body.style.top,width:document.body.style.width};document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${oe}px`,document.body.style.width="100%",(async()=>{q(!0);try{const[W,K,ee]=await Promise.all([te.get("family_name"),te.get("pdf_cover_title"),te.get("pdf_cover_subtitle")]);if($)return;const re=W.value||"";H(re),F(K.value||""),A(ee.value||"")}catch{$||(H(""),F(""),A(""))}finally{$||q(!1)}})();const V=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return Re(V),()=>{$=!0,document.body.style.overflow=ae.overflow,document.body.style.position=ae.position,document.body.style.top=ae.top,document.body.style.width=ae.width,window.scrollTo(0,oe)}},[e]),e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:We}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col mx-2 pdf-generate-modal",children:[s.jsx("style",{children:`
            .pdf-generate-modal input[type="date"] {
              width: 100% !important;
              max-width: 100% !important;
              min-width: 0 !important;
              box-sizing: border-box !important;
              display: block;
            }
          `}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[a==="dates"&&"Select date range",a==="preview"&&"Article preview",a==="options"&&"Generation options"]}),s.jsx("button",{onClick:We,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4",children:[g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),a==="dates"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start date"}),we?s.jsx("button",{type:"button",onClick:()=>He("start"),disabled:f,className:`w-full px-3 py-2 border rounded-lg text-left text-sm bg-white ${ge==="start"?"border-primary-500 ring-1 ring-primary-200":"border-gray-300"}`,children:o||"Select date"}):s.jsx("input",{type:"date",value:o,onChange:$=>{const oe=$.target.value;c(oe),u&&oe&&u<oe&&m(oe),g&&w(null)},disabled:f,max:u||void 0,className:"block w-full min-w-0 max-w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100",style:{maxWidth:"100%",width:"100%"}})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End date"}),we?s.jsx("button",{type:"button",onClick:()=>He("end"),disabled:f,className:`w-full px-3 py-2 border rounded-lg text-left text-sm bg-white ${ge==="end"?"border-primary-500 ring-1 ring-primary-200":"border-gray-300"}`,children:u||"Select date"}):s.jsx("input",{type:"date",value:u,onChange:$=>{const oe=$.target.value;m(oe),o&&oe&&oe<o&&c(oe),g&&w(null)},disabled:f,min:o||void 0,className:"block w-full min-w-0 max-w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100",style:{maxWidth:"100%",width:"100%"}})]}),we&&s.jsxs("div",{className:"mt-2 border border-gray-200 rounded-lg bg-gray-50 p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Select date (wheel)"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:(()=>{const $=Nf(ie.y,ie.m),oe=[{key:"y",values:be},{key:"m",values:Array.from({length:12},(he,V)=>String(V+1).padStart(2,"0"))},{key:"d",values:Array.from({length:$},(he,V)=>String(V+1).padStart(2,"0"))}],ae=32;return oe.map(he=>s.jsxs("div",{className:"h-40 overflow-y-auto snap-y snap-mandatory bg-white border border-gray-200 rounded-lg",onScroll:V=>{const W=V.currentTarget,K=Math.round(W.scrollTop/ae),ee=he.values[Math.max(0,Math.min(he.values.length-1,K))]||"";se(re=>{const de={...re,[he.key]:ee};if(he.key==="m"){const Ee=Nf(de.y,ee);de.d&&Number(de.d)>Ee&&(de.d=String(Ee).padStart(2,"0"))}const je=H1(de.y,de.m,de.d);return _e(je),de})},children:[s.jsx("div",{style:{height:ae}}),he.values.map(V=>{const W=ie[he.key]===V;return s.jsx("div",{className:`h-8 flex items-center justify-center snap-center text-sm ${W?"text-primary-700 font-semibold":"text-gray-600"}`,children:V},V)}),s.jsx("div",{style:{height:ae}})]},he.key))})()})]})]}),a==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-primary-50 rounded-lg p-4",children:s.jsxs("p",{className:"text-primary-800",children:[s.jsx("span",{className:"font-semibold text-primary-900",children:p})," active article",p>1?"s":""," ","across"," ",s.jsx("span",{className:"font-semibold text-primary-900",children:b.length})," mois"]})}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Monthly breakdown"})}),s.jsx("ul",{className:"divide-y divide-gray-100 max-h-[40vh] overflow-y-auto overscroll-contain",children:b.map($=>s.jsxs("li",{className:"px-3 py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-700",children:$.label}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Draft ",$.draftCount,"  Duplicate ",$.duplicateCount]})]}),s.jsxs("span",{className:"bg-primary-100 text-primary-700 px-2.5 py-0.5 rounded text-xs font-medium whitespace-nowrap",children:["Active ",$.activeCount]})]},$.key))})]})]}),a==="options"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:[s.jsx("strong",{children:p})," articles from"," ",s.jsx("strong",{children:new Date(o).toLocaleDateString("fr-FR")})," to"," ",s.jsx("strong",{children:new Date(u).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg bg-gray-50/60 p-4 space-y-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Cover"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover photos"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"range",min:1,max:p,value:L||p,onChange:$=>N(parseInt($.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-12 text-right",children:L||p})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of photos in the cover mosaic"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover style"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>T("mosaic"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${z==="mosaic"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Mosaic"}),s.jsx("button",{onClick:()=>T("masked-title"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${z==="masked-title"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Masked title"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cover text"}),B&&s.jsx("span",{className:"text-xs text-gray-400",children:"Loading defaults..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Family name (vertical)"}),s.jsx("input",{type:"text",value:J,onChange:$=>H($.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Famille Dupont"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:ne,onChange:$=>F($.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Memory Book"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Subtitle"}),s.jsx("input",{type:"text",value:I,onChange:$=>A($.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Du 01/01/2024 au 31/12/2024"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Defaults are pulled from Settings and can be overridden per PDF."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month divider style"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>j("full"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${v==="full"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Full mosaic"}),s.jsx("button",{onClick:()=>j("centered"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${v==="centered"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Centered mosaic"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:$=>P($.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Seasonal fruits & vegetables"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Decorations around month dividers"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:Q,onChange:$=>U($.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-merge via GitHub Action"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Triggers the merge workflow after chunks are generated"})]})]}),Q&&s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:$=>Z($.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delete chunks after merge"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Remove intermediate PDF parts once the merge succeeds"})]})]})]})]}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex gap-3",children:[a==="dates"&&s.jsxs(s.Fragment,{children:[s.jsx(ye,{variant:"secondary",onClick:We,fullWidth:!0,children:"Cancel"}),s.jsx(ye,{onClick:Ve,disabled:!o||!u||f,fullWidth:!0,children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Searching..."]}):"Next"})]}),a==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(ye,{variant:"secondary",onClick:()=>i("dates"),fullWidth:!0,children:"Back"}),s.jsx(ye,{onClick:()=>i("options"),disabled:p===0,fullWidth:!0,children:"Next"})]}),a==="options"&&s.jsxs(s.Fragment,{children:[s.jsx(ye,{variant:"secondary",onClick:()=>i("preview"),fullWidth:!0,children:"Back"}),s.jsxs(ye,{onClick:Oe,disabled:l,fullWidth:!0,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate PDF"]})]})]})]})]}):null}const Y1=jr;function X1(){const{user:e}=Y1(),{profile:t}=gc(),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,o]=d.useState(!1),[c,u]=d.useState(0),[m,f]=d.useState(!1),x=d.useRef(null),g=d.useRef(null),w=70,b=14,S=120,[p,h]=d.useState(null),[v,j]=d.useState(""),[E,P]=d.useState("all"),[L,N]=d.useState("created_at"),[z,T]=d.useState("desc"),[Q,U]=d.useState([]),[O,Z]=d.useState(!1),[J,H]=d.useState(new Set),[ne,F]=d.useState(null),[I,A]=d.useState(!1),[B,q]=d.useState(!1),[ge,Y]=d.useState(null),[ie,se]=d.useState(null),[we,Re]=d.useState(new Set),[Te,be]=d.useState(new Set),[Ne,We]=d.useState(!1),Ve=d.useCallback(async()=>{h(null);const y=await ut.list({include_in_progress:!0});n(y.items||[]),U(y.authors||[])},[]),Oe=d.useCallback(async()=>{a(!0);try{await Ve()}catch(y){h(y instanceof Error?y.message:"Failed to load PDF list")}finally{a(!1)}},[Ve]),He=d.useCallback(async()=>{if(!(l||i)){o(!0);try{await Ve()}catch(y){h(y instanceof Error?y.message:"Failed to refresh PDF list")}finally{o(!1)}}},[Ve,l,i]);d.useEffect(()=>{Oe()},[Oe]);const[_e,$]=d.useState(new Map),{setLastCompletedJob:oe}=wc(),ae=r.filter(y=>y.status==="PENDING"||y.status==="RUNNING"),he=r.filter(y=>y.status==="DONE"||y.status==="ERROR"||y.status==="CANCELLED");d.useEffect(()=>{if(ae.length===0)return;const y=setInterval(async()=>{const _=await Promise.all(ae.map(async M=>{try{return{...await ut.status(M.job_id),job_id:M.job_id}}catch{return null}}));n(M=>M.map(le=>{const pe=_.find(Ge=>Ge&&Ge.job_id===le.job_id);return pe?{...le,status:pe.status,progress:pe.progress,progress_message:pe.progress_message,pdf_url:pe.pdf_url,pdf_file_id:pe.pdf_file_id,error_message:pe.error_message}:le}))},2e3);return()=>clearInterval(y)},[ae.length]),d.useEffect(()=>{const y=new Map(r.map(_=>[_.job_id,_.status]));for(const[_,M]of _e){const le=y.get(_);if((M==="PENDING"||M==="RUNNING")&&le==="DONE"){const pe=r.find(Ge=>Ge.job_id===_);pe&&oe(pe)}}$(y)},[r,_e,oe]);const V=y=>{if(!y)return 0;const _=new Date(y);return isNaN(_.getTime())?0:_.getTime()},W=he.filter(y=>!v||y.created_by===v).filter(y=>E==="merged"?!!y.pdf_url:E==="pending"?y.status==="DONE"&&!y.pdf_url:!0).sort((y,_)=>{let M=0;return L==="created_at"?M=V(y.created_at)-V(_.created_at):L==="date_from"?M=V(y.date_from)-V(_.date_from):L==="created_by"&&(M=(y.created_by||"").localeCompare(_.created_by||"")),z==="desc"?-M:M}),K=y=>{try{return new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return y}},ee=(y,_)=>{try{const M=new Date(y),le=new Date(_),pe={day:"2-digit",month:"short",year:"numeric"};return`${M.toLocaleDateString("fr-FR",pe)}  ${le.toLocaleDateString("fr-FR",pe)}`}catch{return`${y}  ${_}`}},re=y=>{const _=(y.progress_message||"").toLowerCase();return y.status!=="RUNNING"?!1:y.chunks_folder_id&&!y.pdf_url?!0:_.includes("merge")},de=d.useCallback((y,_)=>{var le;return _||(y?e!=null&&e.email&&(t!=null&&t.pseudo)&&y===e.email?t.pseudo:((le=r.find(pe=>pe.created_by===y))==null?void 0:le.created_by_pseudo)||y.split("@")[0]:"Unknown")},[r,t==null?void 0:t.pseudo,e==null?void 0:e.email]),je=y=>{const _=new Set(J);_.has(y)?_.delete(y):_.add(y),H(_)},Ee=()=>{J.size===W.length?H(new Set):H(new Set(W.map(y=>y.job_id)))},qe=async()=>{if(ne){q(!0);try{await ut.delete(ne),n(y=>y.filter(_=>_.job_id!==ne)),F(null)}catch(y){h(y instanceof Error?y.message:"Failed to delete PDF")}finally{q(!1)}}},Ke=async()=>{if(J.size!==0){q(!0);try{for(const y of J)await ut.delete(y);n(y=>y.filter(_=>!J.has(_.job_id))),H(new Set),Z(!1),A(!1)}catch(y){h(y instanceof Error?y.message:"Failed to delete PDFs")}finally{q(!1)}}},St=y=>{We(!1),y&&(n(_=>{const M=_.findIndex(pe=>pe.job_id===y.job_id);if(M===-1)return[y,..._];const le=[..._];return le[M]={...le[M],...y},le}),U(_=>y.created_by&&!_.includes(y.created_by)?[..._,y.created_by]:_))},ht=async y=>{se(y);try{await ut.cancel(y),n(_=>_.filter(M=>M.job_id!==y))}catch(_){h(_ instanceof Error?_.message:"Failed to cancel PDF generation")}finally{se(null)}},it=y=>{if(!y)return"The PDF will be permanently deleted from Google Drive.";const _=r.find(M=>M.job_id===y);return _?_.chunks_folder_id?"The merged PDF, the chunks folder, and all temporary files will be permanently deleted from Google Drive.":"The merged PDF will be permanently deleted from Google Drive.":"The PDF will be permanently deleted from Google Drive."},$e=async y=>{se(y);try{await ut.cancelMerge(y),n(_=>_.map(M=>M.job_id!==y?M:{...M,status:"ERROR",progress:0,progress_message:"Merge failed",error_message:"Merge failed"}))}catch(_){h(_ instanceof Error?_.message:"Failed to cancel merge")}finally{se(null)}},pt=async y=>{Re(_=>new Set(_).add(y));try{await ut.triggerMerge(y),n(_=>_.map(M=>M.job_id!==y?M:{...M,status:"RUNNING",progress:10,progress_message:"Merge queued",error_message:void 0}))}catch(_){h(_ instanceof Error?_.message:"Failed to trigger merge")}finally{Re(_=>{const M=new Set(_);return M.delete(y),M})}},Vt=async y=>{be(_=>new Set(_).add(y));try{await ut.cleanupMerge(y),n(_=>_.map(M=>M.job_id!==y?M:{...M,chunks_folder_id:void 0,chunks_folder_url:void 0,progress_message:"Chunks cleaned"}))}catch(_){h(_ instanceof Error?_.message:"Failed to clean chunks")}finally{be(_=>{const M=new Set(_);return M.delete(y),M})}},Me=async()=>{ge&&(await Vt(ge),Y(null))},D=y=>{var M;(((M=g.current)==null?void 0:M.scrollTop)??0)<=0&&!i&&!l&&(x.current=y.touches[0].clientY,f(!1))},G=y=>{var Ge;if(i||l)return;if((((Ge=g.current)==null?void 0:Ge.scrollTop)??0)>0){u(0),f(!1),x.current=null;return}x.current===null&&(x.current=y.touches[0].clientY);const M=y.touches[0].clientY-x.current;if(M<=b){u(0),f(!1);return}const le=M-b,pe=S*le/(le+S);u(Math.min(b+pe,S)),f(!0)},C=()=>{c>=w&&!i&&!l&&He(),u(0),f(!1),x.current=null};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),s.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky app-safe-top-14 z-20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:O?`${J.size} selected`:"Generated PDFs"}),!O&&s.jsx("span",{className:"text-xs font-semibold text-gray-600 bg-gray-100 border border-gray-200 rounded-full px-2.5 py-1",children:W.length}),s.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[O&&s.jsx("button",{onClick:Ee,className:"text-primary-600 hover:text-primary-700 touch-manipulation text-sm font-medium",children:J.size===W.length?"Deselect all":"Select all"}),!O&&s.jsxs("button",{onClick:He,className:`touch-manipulation text-sm font-medium flex items-center gap-2 hidden sm:flex ${l||i?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:l||i,children:[s.jsx("svg",{className:`w-4 h-4 ${i?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),W.length>0&&s.jsx(op,{checked:O,onChange:y=>{Z(y),y||H(new Set)},label:"Select"})]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-3 h-11 overflow-x-auto",children:O?s.jsx("span",{className:"text-sm text-gray-500",children:"Select PDFs to delete"}):s.jsxs(s.Fragment,{children:[Q.length>1&&s.jsxs("select",{value:v,onChange:y=>j(y.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[s.jsx("option",{value:"",children:"Author"}),Q.map(y=>s.jsx("option",{value:y,children:de(y)},y))]}),s.jsxs("select",{value:E,onChange:y=>P(y.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[s.jsx("option",{value:"all",children:"All PDFs"}),s.jsx("option",{value:"merged",children:"Merged"}),s.jsx("option",{value:"pending",children:"Merge pending"})]}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden text-xs",children:[s.jsxs("button",{onClick:()=>{L==="created_at"?T(z==="desc"?"asc":"desc"):(N("created_at"),T("desc"))},className:`px-3 py-2.5 font-medium transition-colors flex items-center gap-1 ${L==="created_at"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Created",L==="created_at"&&s.jsx("span",{className:"text-[10px]",children:z==="desc"?"":""})]}),s.jsxs("button",{onClick:()=>{L==="date_from"?T(z==="desc"?"asc":"desc"):(N("date_from"),T("desc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${L==="date_from"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Period",L==="date_from"&&s.jsx("span",{className:"text-[10px]",children:z==="desc"?"":""})]}),s.jsxs("button",{onClick:()=>{L==="created_by"?T(z==="desc"?"asc":"desc"):(N("created_by"),T("asc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${L==="created_by"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Author",L==="created_by"&&s.jsx("span",{className:"text-[10px]",children:z==="desc"?"":""})]})]})]})})]}),p&&s.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[p,s.jsx("button",{onClick:()=>h(null),className:"ml-2 text-red-500 hover:text-red-700",children:""})]}),s.jsx("div",{ref:g,className:"flex-1 overflow-y-auto overscroll-contain",onTouchStart:D,onTouchMove:G,onTouchEnd:C,children:s.jsxs("div",{className:"relative p-4 pb-24",children:[(c>0||i)&&s.jsx("div",{className:"absolute left-0 right-0 flex items-center justify-center pointer-events-none",style:{top:0,transform:`translateY(${Math.min(c,80)}px)`,transition:m?"none":"transform 260ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 200ms ease",opacity:Math.min(1,c/40),zIndex:5},children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-full shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("svg",{className:"absolute inset-0 w-6 h-6 text-gray-200",viewBox:"0 0 36 36",children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3"})}),s.jsx("svg",{className:`absolute inset-0 w-6 h-6 ${i?"animate-spin text-primary-600":"text-primary-600"}`,viewBox:"0 0 36 36",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",strokeDasharray:`${Math.min(100,c/w*100)}, 100`,transition:"stroke-dasharray 120ms ease"},children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})}),s.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-transform ${c>=w?"rotate-180":""}`,children:[s.jsx("svg",{className:`w-3.5 h-3.5 ${i?"hidden":"block"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 5v14m0 0l-5-5m5 5l5-5"})}),s.jsx("svg",{className:`w-3.5 h-3.5 ${i?"block":"hidden"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),s.jsx("span",{className:"text-xs text-gray-600",children:i?"Refreshing...":c>=w?"Release to refresh":"Pull to refresh"})]})}),l?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Et,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading PDFs..."})]})}):ae.length===0&&W.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No PDFs generated"})]}):s.jsxs(s.Fragment,{children:[ae.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generating"}),s.jsx("div",{className:"space-y-3",children:ae.map(y=>s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:s.jsxs("svg",{className:"w-5 h-5 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900",children:ee(y.date_from,y.date_to)}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-blue-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:`${y.progress||0}%`}})}),s.jsxs("span",{className:"text-xs text-blue-600 font-medium w-8",children:[y.progress||0,"%"]})]}),s.jsx("p",{className:"text-xs text-blue-500 mt-0.5",children:y.progress_message||"Pending..."}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",de(y.created_by,y.created_by_pseudo)]}),y.chunks_folder_url&&s.jsx("a",{href:y.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:_=>_.stopPropagation(),children:"PDF parts folder"})]}),s.jsx("button",{onClick:()=>re(y)?$e(y.job_id):ht(y.job_id),disabled:ie===y.job_id,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:re(y)?"Cancel merge":"Cancel",children:ie===y.job_id?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})},y.job_id))})]}),W.length>0&&s.jsxs("div",{children:[ae.length>0&&s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generated"}),s.jsx("div",{className:"space-y-3",children:W.map(y=>s.jsx("div",{onClick:()=>O&&je(y.job_id),className:`bg-white rounded-lg shadow-sm border transition-colors ${O?J.has(y.job_id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300":"border-gray-200"} p-4 ${O?"cursor-pointer":""}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[O&&s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${J.has(y.job_id)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:J.has(y.job_id)&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-gray-900",children:ee(y.date_from,y.date_to)}),y.pdf_url&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded",children:"Merged"}),!y.pdf_url&&y.status==="DONE"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-50 text-yellow-700 rounded",children:"Merge pending"}),y.status==="ERROR"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:"Error"}),y.status==="CANCELLED"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded",children:"Cancelled"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Created on ",K(y.created_at)]}),y.status==="ERROR"&&s.jsx("p",{className:"text-xs text-red-500 mt-0.5 truncate",title:y.error_message||"Merge failed",children:y.error_message||"Merge failed"}),y.status==="DONE"&&!y.pdf_url&&y.progress_message&&s.jsx("p",{className:"text-xs text-amber-600 mt-0.5 truncate",title:y.progress_message,children:y.progress_message}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",de(y.created_by,y.created_by_pseudo)]}),y.chunks_folder_url&&s.jsx("a",{href:y.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:_=>_.stopPropagation(),children:"PDF parts folder"})]}),!O&&s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[y.pdf_url&&s.jsx("a",{href:y.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Voir le PDF",onClick:_=>_.stopPropagation(),children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),y.pdf_url&&y.chunks_folder_id&&s.jsx("button",{onClick:_=>{_.stopPropagation(),Y(y.job_id)},className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors disabled:opacity-50",title:"Clean chunks",disabled:Te.has(y.job_id),children:Te.has(y.job_id)?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M3 6h18M8 6V4h8v2M6 6l1 14h10l1-14M10 10v6M14 10v6"})})}),!y.pdf_url&&(y.status==="DONE"||y.status==="ERROR")&&y.chunks_folder_id&&s.jsx("button",{onClick:_=>{_.stopPropagation(),pt(y.job_id)},className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50",title:"Trigger merge",disabled:we.has(y.job_id),children:we.has(y.job_id)?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{onClick:_=>{_.stopPropagation(),F(y.job_id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},y.job_id))})]})]})]})}),O&&J.size>0&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:s.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[J.size," PDF",J.size>1?"s":""," selected"]}),s.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Delete"})]})}),!O&&s.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-30",children:s.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:s.jsx(ap,{onClick:()=>We(!0),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),s.jsx(G1,{isOpen:Ne,onClose:()=>We(!1),onComplete:St}),s.jsx(Ft,{isOpen:!!ne,title:"Delete PDF?",message:it(ne),confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:qe,onCancel:()=>F(null),variant:"danger",isLoading:B}),s.jsx(Ft,{isOpen:I,title:`Delete ${J.size} PDF${J.size>1?"s":""}?`,message:"Selected PDFs will be permanently deleted from Google Drive.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:Ke,onCancel:()=>A(!1),variant:"danger",isLoading:B}),s.jsx(Ft,{isOpen:!!ge,title:"Clean chunks?",message:"This will delete the chunks folder and move the merged PDF to Rememly/pdf.",confirmLabel:"Clean",cancelLabel:"Cancel",onConfirm:Me,onCancel:()=>Y(null),variant:"danger",isLoading:Te.has(ge||"")})]})}const ci={getPdfRange:()=>ce.get("logs/pdf/range"),clearPdfRange:(e,t)=>ce.post("logs/pdf/clear",{from:e,to:t}),cleanupPdfProperties:()=>ce.post("pdf/cleanup-properties")},ui=[{value:"garamond",label:"Garamond"},{value:"palatino",label:"Palatino"},{value:"baskerville",label:"Baskerville"},{value:"didot",label:"Didot"},{value:"caslon",label:"Caslon"},{value:"georgia",label:"Georgia"},{value:"optima",label:"Optima"}],di=[{value:400,label:"Regular (400)"},{value:500,label:"Medium (500)"},{value:600,label:"Semibold (600)"},{value:700,label:"Bold (700)"},{value:800,label:"Extra Bold (800)"}];function Q1(){const{showToast:e,setUnsavedChanges:t}=Qt(),[r,n]=d.useState(""),[l,a]=d.useState(""),[i,o]=d.useState(""),[c,u]=d.useState(""),[m,f]=d.useState(""),[x,g]=d.useState(""),[w,b]=d.useState(0),[S,p]=d.useState(0),[h,v]=d.useState(5),[j,E]=d.useState(5),[P,L]=d.useState("garamond"),[N,z]=d.useState("garamond"),[T,Q]=d.useState(700),[U,O]=d.useState(700),[Z,J]=d.useState(1),[H,ne]=d.useState(1),[F,I]=d.useState(1),[A,B]=d.useState(1),[q,ge]=d.useState(8.5),[Y,ie]=d.useState(8.5),[se,we]=d.useState(3.5),[Re,Te]=d.useState(3.5),[be,Ne]=d.useState(.99),[We,Ve]=d.useState(.99),[Oe,He]=d.useState("palatino"),[_e,$]=d.useState("palatino"),[oe,ae]=d.useState(700),[he,V]=d.useState(700),[W,K]=d.useState(0),[ee,re]=d.useState(0),[de,je]=d.useState(1),[Ee,qe]=d.useState(1),[Ke,St]=d.useState(1),[ht,it]=d.useState(1),[$e,pt]=d.useState(8.5),[Vt,Me]=d.useState(8.5),[D,G]=d.useState(.85),[C,y]=d.useState(.85),[_,M]=d.useState("palatino"),[le,pe]=d.useState("palatino"),[Ge,ot]=d.useState(700),[Hr,gt]=d.useState(700),[Ye,kt]=d.useState(0),[xt,bc]=d.useState(0),[or,Gs]=d.useState(1),[ja,Nc]=d.useState(1),[cr,Ys]=d.useState(1),[ba,Sc]=d.useState(1),[kc,pp]=d.useState(!0),[Na,Cc]=d.useState(!1),[gp,_c]=d.useState(!0),[Xs,xp]=d.useState(null),[Qs,vp]=d.useState(null),[Gr,Sa]=d.useState(null),[Yr,ka]=d.useState(null),[Ec,Pc]=d.useState(!1),[yp,Ks]=d.useState(0),[Xr,Lc]=d.useState(null),[wp,Fc]=d.useState(null),[Dc,Rc]=d.useState(!1),[Tc,Ic]=d.useState(!1),[jp,Mc]=d.useState(!1),[Ac,zc]=d.useState(!1),[Oc,bp]=d.useState([]),Ca=r.trim()!==l.trim()||i.trim()!==c.trim()||m.trim()!==x.trim()||w!==S||h!==j||P!==N||T!==U||se!==Re||Z!==H||F!==A||q!==Y||be!==We||Oe!==_e||oe!==he||W!==ee||de!==Ee||Ke!==ht||$e!==Vt||D!==C||_!==le||Ge!==Hr||Ye!==xt||or!==ja||cr!==ba;d.useEffect(()=>{Np(),$c(),Uc(),Sp()},[]);const Np=async()=>{try{const[k,fe,Ae,vt,Gn,_a,hn,Tp,Ip,Mp,Ap,zp,Op,$p,Up,Bp,Wp,Vp,Hp,Gp,Yp,Xp,Qp,Kp]=await Promise.all([te.get("family_name"),te.get("pdf_cover_title"),te.get("pdf_cover_subtitle"),te.get("pdf_cover_vertical_letter_spacing"),te.get("pdf_cover_family_x_cm"),te.get("pdf_cover_family_font_family"),te.get("pdf_cover_family_font_weight"),te.get("pdf_cover_family_h_cm"),te.get("pdf_cover_family_scale_x"),te.get("pdf_cover_family_scale_y"),te.get("pdf_cover_title_font_family"),te.get("pdf_cover_title_font_weight"),te.get("pdf_cover_title_letter_spacing_em"),te.get("pdf_cover_title_scale_x"),te.get("pdf_cover_title_scale_y"),te.get("pdf_cover_subtitle_font_family"),te.get("pdf_cover_subtitle_font_weight"),te.get("pdf_cover_subtitle_letter_spacing_em"),te.get("pdf_cover_subtitle_scale_x"),te.get("pdf_cover_subtitle_scale_y"),te.get("pdf_cover_title_x_cm"),te.get("pdf_cover_title_h_cm"),te.get("pdf_cover_subtitle_x_cm"),te.get("pdf_cover_subtitle_h_cm")]),Wc=k.value||"",Vc=fe.value||"",Hc=Ae.value||"",Gc=vt.value||"0",Yc=Gn.value||"",Xc=_a.value||"garamond",Qc=hn.value||"700",Kc=Tp.value||"3.5",Jc=Ip.value||"1",Zc=Mp.value||"1",qc=Ap.value||"palatino",eu=zp.value||"700",tu=Op.value||"0",ru=$p.value||"1",nu=Up.value||"1",su=Bp.value||"palatino",lu=Wp.value||"700",au=Vp.value||"0",iu=Hp.value||"1",ou=Gp.value||"1",cu=Yp.value||"",uu=Xp.value||"",du=Qp.value||"",fu=Kp.value||"";n(Wc),a(Wc),o(Vc),u(Vc),f(Hc),g(Hc);const mu=Number.isFinite(parseFloat(Gc))?parseFloat(Gc):0;b(mu),p(mu);const hu=Number.isFinite(parseFloat(Yc))?parseFloat(Yc):5;v(hu),E(hu),L(Xc),z(Xc);const pu=Number.isFinite(parseFloat(Qc))?parseFloat(Qc):700;Q(pu),O(pu);const gu=Number.isFinite(parseFloat(Kc))?parseFloat(Kc):3.5;we(gu),Te(gu);const xu=Number.isFinite(parseFloat(Jc))?parseFloat(Jc):1;J(xu),ne(xu);const vu=Number.isFinite(parseFloat(Zc))?parseFloat(Zc):1;I(vu),B(vu),He(qc),$(qc);const yu=Number.isFinite(parseFloat(eu))?parseFloat(eu):700;ae(yu),V(yu);const wu=Number.isFinite(parseFloat(tu))?parseFloat(tu):0;K(wu),re(wu);const ju=Number.isFinite(parseFloat(ru))?parseFloat(ru):1;je(ju),qe(ju);const bu=Number.isFinite(parseFloat(nu))?parseFloat(nu):1;St(bu),it(bu),M(su),pe(su);const Nu=Number.isFinite(parseFloat(lu))?parseFloat(lu):700;ot(Nu),gt(Nu);const Su=Number.isFinite(parseFloat(au))?parseFloat(au):0;kt(Su),bc(Su);const ku=Number.isFinite(parseFloat(iu))?parseFloat(iu):1;Gs(ku),Nc(ku);const Cu=Number.isFinite(parseFloat(ou))?parseFloat(ou):1;Ys(Cu),Sc(Cu);const _u=Number.isFinite(parseFloat(cu))?parseFloat(cu):8.5;ge(_u),ie(_u);const Eu=Number.isFinite(parseFloat(uu))?parseFloat(uu):.99;Ne(Eu),Ve(Eu);const Pu=Number.isFinite(parseFloat(du))?parseFloat(du):8.5;pt(Pu),Me(Pu);const Lu=Number.isFinite(parseFloat(fu))?parseFloat(fu):.85;G(Lu),y(Lu)}catch{e("Error while loading","error")}finally{pp(!1)}};d.useEffect(()=>()=>{Xr&&Xr.startsWith("blob:")&&URL.revokeObjectURL(Xr)},[Xr]);const Sp=async()=>{try{const k=localStorage.getItem("cover_preview_file_id");if(!k)return;await ut.deleteCoverPreview(k)}catch{}finally{localStorage.removeItem("cover_preview_file_id")}},kp=async()=>{Cc(!0);try{const k=r.trim(),fe=i.trim(),Ae=m.trim();await Promise.all([te.set("family_name",k),te.set("pdf_cover_title",fe),te.set("pdf_cover_subtitle",Ae),te.set("pdf_cover_vertical_letter_spacing",String(w)),te.set("pdf_cover_family_x_cm",String(h)),te.set("pdf_cover_family_font_family",P),te.set("pdf_cover_family_font_weight",String(T)),te.set("pdf_cover_family_h_cm",String(se)),te.set("pdf_cover_family_scale_x",String(Z)),te.set("pdf_cover_family_scale_y",String(F)),te.set("pdf_cover_title_font_family",Oe),te.set("pdf_cover_title_font_weight",String(oe)),te.set("pdf_cover_title_letter_spacing_em",String(W)),te.set("pdf_cover_title_scale_x",String(de)),te.set("pdf_cover_title_scale_y",String(Ke)),te.set("pdf_cover_title_x_cm",String(q)),te.set("pdf_cover_title_h_cm",String(be)),te.set("pdf_cover_subtitle_font_family",_),te.set("pdf_cover_subtitle_font_weight",String(Ge)),te.set("pdf_cover_subtitle_letter_spacing_em",String(Ye)),te.set("pdf_cover_subtitle_scale_x",String(or)),te.set("pdf_cover_subtitle_scale_y",String(cr)),te.set("pdf_cover_subtitle_x_cm",String($e)),te.set("pdf_cover_subtitle_h_cm",String(D))]),n(k),a(k),o(fe),u(fe),f(Ae),g(Ae),p(w),E(h),z(P),O(T),Te(se),ne(Z),B(F),ie(q),Ve(be),$(Oe),V(oe),re(W),qe(de),it(Ke),Me($e),y(D),pe(_),gt(Ge),bc(Ye),Nc(or),Sc(cr),e("Configuration saved","success")}catch{e("Error while saving","error")}finally{Cc(!1)}},Cp=async()=>{Rc(!0);try{const k=await ut.previewCover({from:new Date().toISOString().slice(0,10),to:new Date().toISOString().slice(0,10),options:{cover_style:"masked-title",max_mosaic_photos:0,preview_solid:!0,family_name:r.trim(),cover_title:i.trim(),cover_subtitle:m.trim(),cover_vertical_letter_spacing_em:w,cover_family_x_cm:h,cover_family_font_family:P,cover_family_font_weight:T,cover_family_letter_spacing_em:w,cover_family_h_cm:se,cover_family_scale_x:Z,cover_family_scale_y:F,cover_title_font_family:Oe,cover_title_font_weight:oe,cover_title_letter_spacing_em:W,cover_title_scale_x:de,cover_title_scale_y:Ke,cover_title_x_cm:q,cover_title_h_cm:be,cover_subtitle_font_family:_,cover_subtitle_font_weight:Ge,cover_subtitle_letter_spacing_em:Ye,cover_subtitle_scale_x:or,cover_subtitle_scale_y:cr,cover_subtitle_x_cm:$e,cover_subtitle_h_cm:D}});Fc(k.file_id),localStorage.setItem("cover_preview_file_id",k.file_id);const fe=await ut.previewCoverContent(k.file_id),Ae=atob(fe.base64),vt=new Uint8Array(Ae.length);for(let hn=0;hn<Ae.length;hn++)vt[hn]=Ae.charCodeAt(hn);const Gn=new Blob([vt.buffer],{type:fe.mime_type||"application/pdf"}),_a=URL.createObjectURL(Gn);Lc(_a)}catch{e("Preview failed","error")}finally{Rc(!1)}},_p=async()=>{const k=wp,fe=Xr;if(Lc(null),Fc(null),fe&&fe.startsWith("blob:")&&URL.revokeObjectURL(fe),k)try{await ut.deleteCoverPreview(k)}catch{}localStorage.removeItem("cover_preview_file_id")},$c=async()=>{_c(!0);try{const k=await ci.getPdfRange(),fe=k.min?new Date(k.min).getTime():null,Ae=k.max?new Date(k.max).getTime():null;xp(fe),vp(Ae),Sa(fe),ka(Ae)}catch{e("Failed to load logs range","error")}finally{_c(!1)}},Ep=async()=>{if(Gr===null||Yr===null)return;Pc(!0),Ks(0);const k=Date.now(),fe=setInterval(()=>{const Ae=Date.now()-k,vt=Math.min(90,Math.floor(Ae/3e3*90));Ks(vt)},150);try{const Ae=new Date(Gr).toISOString(),vt=new Date(Yr).toISOString(),Gn=await ci.clearPdfRange(Ae,vt);Ks(100),e(`Logs deleted: ${Gn.deleted}`,"success"),await $c()}catch{e("Failed to clear logs","error")}finally{clearInterval(fe),setTimeout(()=>{Pc(!1),Ks(0)},300)}},Pp=async()=>{Ic(!0);try{const k=await ci.cleanupPdfProperties();e(`Properties cleaned: ${k.deleted}, queue removed: ${k.queueRemoved}`,"success")}catch{e("Failed to cleanup properties","error")}finally{Ic(!1)}},Lp=async()=>{Mc(!0);try{const k=await $t.backfillFamileoFingerprints();e(`Backfill done: ${k.updated}/${k.total}`,"success")}catch{e("Failed to backfill fingerprints","error")}finally{Mc(!1)}},Uc=async()=>{zc(!0);try{const k=await vc.list();bp(k.users||[])}catch{e("Failed to load users","error")}finally{zc(!1)}},Bc=k=>k===null?"--":new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});d.useEffect(()=>{t(Ca)},[Ca,t]);const Fp=k=>{if(!k)return"--";const fe=new Date(k);return Number.isNaN(fe.getTime())?"--":fe.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},Dp=k=>{if(!k)return"";if(k.includes("drive.google.com/thumbnail"))return k;const fe=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const Ae of fe){const vt=k.match(Ae);if(vt&&vt[1])return`https://drive.google.com/thumbnail?id=${vt[1]}&sz=w200`}return k},Rp=({user:k})=>{const{src:fe,isLoading:Ae,error:vt}=Hs(k.avatar_url,k.avatar_file_id);return Ae?s.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-100 border border-gray-200 animate-pulse"}):vt||!fe?s.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-[10px] text-gray-500",children:"--"}):s.jsx("img",{src:fe||Dp(k.avatar_url),alt:k.pseudo||k.email,className:"w-7 h-7 rounded-full object-cover border border-gray-200"})};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(mn,{}),s.jsx("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-content mx-auto w-full",children:kc?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Et,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Declared users"}),s.jsx("button",{onClick:Uc,disabled:Ac,className:"text-xs text-primary-600 hover:text-primary-700",children:"Refresh"})]}),Ac?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(Et,{size:"md"})}):Oc.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No users found."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-xs",children:[s.jsx("thead",{className:"text-gray-500",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"py-2 pr-3",children:"Avatar"}),s.jsx("th",{className:"py-2 pr-3",children:"Email"}),s.jsx("th",{className:"py-2 pr-3",children:"Pseudo"}),s.jsx("th",{className:"py-2 pr-3",children:"Famileo"}),s.jsx("th",{className:"py-2 pr-3",children:"Created"}),s.jsx("th",{className:"py-2 pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"text-gray-700",children:Oc.map(k=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"py-2 pr-3",children:s.jsx(Rp,{user:k})}),s.jsx("td",{className:"py-2 pr-3",children:k.email}),s.jsx("td",{className:"py-2 pr-3",children:k.pseudo||"--"}),s.jsx("td",{className:"py-2 pr-3",children:k.famileo_name||"--"}),s.jsx("td",{className:"py-2 pr-3",children:Fp(k.date_created)}),s.jsx("td",{className:"py-2 pr-3",children:k.status||"--"})]},k.email))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF cover page"}),s.jsxs("div",{className:"mt-3 space-y-4",children:[s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Family name settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Kt,{label:"Family name",value:r,onChange:k=>n(k.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., Dupont family"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>n(l),disabled:r.trim()===l.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",se.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>we(Re),disabled:se===Re,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:1.5,max:5,step:.05,value:se,onChange:k=>we(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:1.5,max:5,step:.05,value:Number.isFinite(se)?se:3.5,onChange:k=>we(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",Z.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>J(H),disabled:Z===H,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:Z,onChange:k=>J(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(Z)?Z:1,onChange:k=>J(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",F.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>I(A),disabled:F===A,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:F,onChange:k=>I(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(F)?F:1,onChange:k=>I(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Family name horizontal position (",h.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>v(j),disabled:h===j,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:h,onChange:k=>v(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite(h)?h:0,onChange:k=>v(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (relative to title) (",w.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>b(S),disabled:w===S,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:w,onChange:k=>b(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(w)?w:0,onChange:k=>b(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>L(N),disabled:P===N,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:P,onChange:k=>L(k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ui.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>Q(U),disabled:T===U,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:T,onChange:k=>Q(Number(k.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:di.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]})]})]}),s.jsx("div",{children:s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Title settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Kt,{label:"Cover title",value:i,onChange:k=>o(k.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., Memory Book"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>o(c),disabled:i.trim()===c.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Horizontal position (",q.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>ge(Y),disabled:q===Y,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:q,onChange:k=>ge(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite(q)?q:0,onChange:k=>ge(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",be.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>Ne(We),disabled:be===We,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.5,max:2,step:.01,value:be,onChange:k=>Ne(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.5,max:2,step:.01,value:Number.isFinite(be)?be:.99,onChange:k=>Ne(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",de.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>je(Ee),disabled:de===Ee,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:de,onChange:k=>je(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(de)?de:1,onChange:k=>je(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",Ke.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>St(ht),disabled:Ke===ht,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:Ke,onChange:k=>St(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(Ke)?Ke:1,onChange:k=>St(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (",W.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>K(ee),disabled:W===ee,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:W,onChange:k=>K(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(W)?W:0,onChange:k=>K(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>He(_e),disabled:Oe===_e,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:Oe,onChange:k=>He(k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ui.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>ae(he),disabled:oe===he,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:oe,onChange:k=>ae(Number(k.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:di.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]})]})]})}),s.jsx("div",{children:s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Subtitle settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Kt,{label:"Cover subtitle",value:m,onChange:k=>f(k.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., 2024  2025"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>f(x),disabled:m.trim()===x.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Horizontal position (",$e.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>pt(Vt),disabled:$e===Vt,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:$e,onChange:k=>pt(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite($e)?$e:0,onChange:k=>pt(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",D.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>G(C),disabled:D===C,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.4,max:1.6,step:.01,value:D,onChange:k=>G(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.4,max:1.6,step:.01,value:Number.isFinite(D)?D:.85,onChange:k=>G(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",or.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>Gs(ja),disabled:or===ja,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:or,onChange:k=>Gs(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(or)?or:1,onChange:k=>Gs(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",cr.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>Ys(ba),disabled:cr===ba,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:cr,onChange:k=>Ys(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(cr)?cr:1,onChange:k=>Ys(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (",Ye.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>kt(xt),disabled:Ye===xt,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:Ye,onChange:k=>kt(Number(k.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(Ye)?Ye:0,onChange:k=>kt(Number(k.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>M(le),disabled:_===le,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:_,onChange:k=>M(k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ui.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>ot(Hr),disabled:Ge===Hr,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:Ge,onChange:k=>ot(Number(k.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:di.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]})]})]})})]}),s.jsx("div",{className:"mt-4",children:Xr?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("a",{href:Xr,target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-primary-200 bg-primary-50 text-primary-700 text-sm font-medium hover:bg-primary-100 transition-colors",children:["Open preview PDF",s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M14 3h7v7m0-7L10 14m-4 7h7a2 2 0 002-2v-7"})})]}),s.jsx("button",{onClick:_p,className:"w-full text-xs text-gray-500 hover:text-gray-700",children:"Close preview"})]}):s.jsx(ye,{variant:"secondary",onClick:Cp,disabled:Dc,fullWidth:!0,children:Dc?"Generating preview...":"Preview PDF"})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF logs"}),gp?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(Et,{size:"md"})}):Xs===null||Qs===null?s.jsx("p",{className:"text-sm text-gray-500",children:"No logs available."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[Bc(Gr),"  ",Bc(Yr)]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"From"}),s.jsx("input",{type:"range",min:Xs,max:Qs,value:Gr??Xs,onChange:k=>{const fe=Number(k.target.value);Sa(fe),Yr!==null&&fe>Yr&&ka(fe)},className:"w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"To"}),s.jsx("input",{type:"range",min:Xs,max:Qs,value:Yr??Qs,onChange:k=>{const fe=Number(k.target.value);ka(fe),Gr!==null&&fe<Gr&&Sa(fe)},className:"w-full"})]})]}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(ye,{variant:"secondary",onClick:Ep,disabled:Ec||Gr===null||Yr===null,className:"w-full sm:w-auto",children:"Clear logs"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Maintenance"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Remove orphan PDF properties when jobs were deleted manually."}),s.jsxs("div",{className:"flex flex-col items-start gap-4",children:[s.jsx(ye,{variant:"secondary",onClick:Pp,disabled:Tc,className:"w-full sm:w-auto",children:"Clean PDF properties"}),s.jsxs("div",{className:"flex flex-col items-start gap-2 w-full",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Rebuilds Famileo fingerprints for existing articles to improve duplicate detection."}),s.jsx(ye,{variant:"secondary",onClick:Lp,disabled:jp,className:"w-full sm:w-auto",children:"Backfill Famileo fingerprints"})]})]})]})]})}),s.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:s.jsx("div",{className:"max-w-md mx-auto w-full flex justify-center",children:s.jsx(ye,{onClick:kp,disabled:Na||kc||!Ca,className:"w-full sm:w-auto",children:Na?"Saving...":"Save"})})}),Na&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(Et,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})}),Ec&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 w-72",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(Et,{size:"md"})}),s.jsx("p",{className:"mt-3 text-sm text-gray-700 text-center",children:"Clearing logs..."}),s.jsx("div",{className:"mt-3 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary-600 transition-all",style:{width:`${yp}%`}})})]})}),Tc&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(Et,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Cleaning properties..."})]})})]})}function K1(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:l,onRegisteredSW:a,onRegisterError:i}=e;let o,c,u;const m=async(x=!0)=>{await c,await(u==null?void 0:u())};async function f(){if("serviceWorker"in navigator){if(o=await Kh(async()=>{const{Workbox:x}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:x}},[]).then(({Workbox:x})=>new x("/sw.js",{scope:"/",type:"classic"})).catch(x=>{i==null||i(x)}),!o)return;u=async()=>{await(o==null?void 0:o.messageSkipWaiting())};{let x=!1;const g=()=>{x=!0,o==null||o.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),r==null||r()};o.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"?w.isExternal?g():!x&&(n==null||n()):w.isExternal?window.location.reload():!x&&(n==null||n()):w.isUpdate||n==null||n()}),o.addEventListener("waiting",g),o.addEventListener("externalwaiting",g)}o.register({immediate:t}).then(x=>{a?a("/sw.js",x):l==null||l(x)}).catch(x=>{i==null||i(x)})}}return c=f(),m}function J1(e={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:n,onRegistered:l,onRegisteredSW:a,onRegisterError:i}=e,[o,c]=d.useState(!1),[u,m]=d.useState(!1),[f]=d.useState(()=>K1({immediate:t,onOfflineReady(){m(!0),n==null||n()},onNeedRefresh(){c(!0),r==null||r()},onRegistered:l,onRegisteredSW:a,onRegisterError:i}));return{needRefresh:[o,c],offlineReady:[u,m],updateServiceWorker:f}}function Z1(){const{needRefresh:[e],updateServiceWorker:t}=J1({onRegistered(r){console.log("SW Registered:",r),r&&setInterval(()=>{r.update()},3e4)},onRegisterError(r){console.log("SW registration error",r)}});return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:s.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900",children:"New version available"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"A newer version of Rememly is ready. Update now to get the latest fixes."})]}),s.jsx("div",{className:"mt-5 flex justify-center",children:s.jsx("button",{onClick:()=>t(!0),className:"rounded-md bg-primary-600 px-5 py-2 text-sm font-semibold text-white",children:"Update"})})]})}):null}function q1(){const{error:e,pdfUrl:t,showSuccess:r,lastCompletedJob:n,dismissSuccess:l,dismissError:a}=wc();if(!r&&!e)return null;const i=(o,c)=>{try{const u=new Date(o),m=new Date(c),f={day:"2-digit",month:"short",year:"numeric"};return`${u.toLocaleDateString("fr-FR",f)} - ${m.toLocaleDateString("fr-FR",f)}`}catch{return`${o} - ${c}`}};return s.jsxs("div",{className:"fixed bottom-20 left-4 right-4 z-50 max-w-md mx-auto",children:[r&&t&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 animate-slide-up",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"PDF generated successfully!"}),n&&s.jsx("p",{className:"text-xs text-green-600 mt-0.5",children:i(n.date_from,n.date_to)}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View"]}),s.jsx("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 hover:bg-green-100 rounded-lg transition-colors",children:"Close"})]})]}),s.jsx("button",{onClick:l,className:"text-green-400 hover:text-green-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})}),e&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 animate-slide-up",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Generation error"}),s.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:e})]}),s.jsx("button",{onClick:a,className:"text-red-400 hover:text-red-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})})]})}function ew(){const e=It(),t=Qt(o=>o.hasUnsavedChanges),r=Qt(o=>o.setUnsavedChanges),n=Qt(o=>o.pendingNavigationPath),l=Qt(o=>o.setPendingNavigationPath),[a,i]=d.useState(!1);return d.useEffect(()=>{n&&(t?i(!0):(e(n),l(null)))},[n,t,e,l]),d.useEffect(()=>{const o=c=>{t&&(c.preventDefault(),c.returnValue="")};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[t]),s.jsx(Ft,{isOpen:a,title:"Discard changes?",message:"You have unsaved changes. Are you sure you want to leave?",confirmLabel:"Discard",cancelLabel:"Stay",onConfirm:()=>{i(!1);const o=n;r(!1),l(null),o&&e(o)},onCancel:()=>{i(!1),l(null)},variant:"danger"})}const tw=[{label:"Articles",path:"/",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M5 6h14M5 12h14M5 18h10"})})},{label:"Stats",path:"/stats",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{label:"Famileo",path:"/famileo",icon:s.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("circle",{cx:"12",cy:"5.5",r:"2.7"}),s.jsx("rect",{x:"10.5",y:"8.5",width:"3",height:"7.5",rx:"1.5"}),s.jsx("rect",{x:"2.5",y:"10",width:"6",height:"9.5",rx:"2"}),s.jsx("rect",{x:"15.5",y:"4",width:"6",height:"15.5",rx:"2"}),s.jsx("circle",{cx:"5.5",cy:"14.5",r:"0.9"}),s.jsx("circle",{cx:"18.5",cy:"12",r:"0.9"}),s.jsx("path",{d:"M12 15.5v4.5m0 0l-2-2m2 2l2-2",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})},{label:"PDF",path:"/pdf-export",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{label:"Profile",path:"/profile",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],rw=["/auth","/editor","/photo-assembly"];function nw(){const e=It(),t=fn(),r=Qt(i=>i.hasUnsavedChanges),n=Qt(i=>i.setPendingNavigationPath),[l,a]=d.useState(!1);return d.useEffect(()=>{const i=window.matchMedia("(display-mode: standalone)"),o=()=>{const c=window.navigator;a(i.matches||c.standalone===!0)};return o(),i.addEventListener?(i.addEventListener("change",o),()=>i.removeEventListener("change",o)):(i.addListener(o),()=>i.removeListener(o))},[]),rw.some(i=>t.pathname.startsWith(i))?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:l?"h-20":"h-16","aria-hidden":"true"}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-primary-600 shadow-[0_10px_30px_rgba(0,0,0,0.12)]",children:s.jsx("div",{className:"max-w-content mx-auto w-full",children:s.jsx("div",{className:`flex items-center justify-between px-2 ${l?"pt-0.5 pb-6":"py-1"}`,children:tw.map(i=>{const o=t.pathname===i.path,c=()=>{if(t.pathname!==i.path){if(r){n(i.path);return}e(i.path)}};return s.jsx("button",{onClick:c,className:`flex flex-col items-center justify-center px-3 py-1 rounded-xl transition-all ${o?"text-white":"text-primary-100 hover:text-white"}`,"aria-label":i.label,children:s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all ${o?"bg-white shadow-sm":"bg-transparent"}`,children:s.jsx("span",{className:`${o?"text-primary-700":"text-primary-100"}`,children:i.icon})})},i.path)})})})})]})}const sw=d.lazy(()=>Kh(()=>import("./PhotoAssemblyScreen-Dkd_5gxS.js"),[]).then(e=>({default:e.PhotoAssemblyScreen})));function lw(){const[e,t]=d.useState(!1);return d.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(orientation: landscape)"),n=()=>{const l=r.matches,a=window.innerWidth<=1024;t(l&&a)};return n(),r.addEventListener?r.addEventListener("change",n):r.addListener(n),window.addEventListener("resize",n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n),window.removeEventListener("resize",n)}},[]),d.useEffect(()=>{var m,f,x;if(typeof window>"u")return;const r=window.navigator,n=((m=window.matchMedia)==null?void 0:m.call(window,"(display-mode: standalone)").matches)||r.standalone===!0,l=/iPad|iPhone|iPod/.test(window.navigator.userAgent);if(!n||!l)return;const a=document.createElement("div");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="0",a.style.height="env(safe-area-inset-top)",a.style.pointerEvents="none",a.style.visibility="hidden",document.body.appendChild(a);const i=70,o=g=>Math.min(Math.max(g,0),i),c=()=>{var S;let w=o(Math.round(a.getBoundingClientRect().height));if(!w){const p=o(Math.round(((S=window.visualViewport)==null?void 0:S.offsetTop)||0));p>0&&(w=p)}const b=w;document.documentElement.style.setProperty("--safe-area-top",`${b}px`)},u=()=>{requestAnimationFrame(c),setTimeout(c,300),setTimeout(c,1e3)};return u(),window.addEventListener("orientationchange",u),window.addEventListener("resize",u),(f=window.visualViewport)==null||f.addEventListener("resize",u),(x=window.visualViewport)==null||x.addEventListener("scroll",u),()=>{var g,w;window.removeEventListener("orientationchange",u),window.removeEventListener("resize",u),(g=window.visualViewport)==null||g.removeEventListener("resize",u),(w=window.visualViewport)==null||w.removeEventListener("scroll",u),a.remove()}},[]),s.jsx(Nv,{children:s.jsxs(_v,{children:[s.jsx(Z1,{}),s.jsx(q1,{}),s.jsx(ew,{}),e?s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center text-center px-6",children:s.jsxs("div",{className:"max-w-md",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"Not compatible with landscape mode"}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Please rotate your device to portrait."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-white",children:s.jsx("div",{className:"max-w-content mx-auto w-full",children:s.jsxs(xv,{children:[s.jsx(Mt,{path:"/auth",element:s.jsx(Ev,{})}),s.jsx(Mt,{path:"/",element:s.jsx(ur,{children:s.jsx(hy,{})})}),s.jsx(Mt,{path:"/editor",element:s.jsx(ur,{children:s.jsx(bf,{})})}),s.jsx(Mt,{path:"/editor/:id",element:s.jsx(ur,{children:s.jsx(bf,{})})}),s.jsx(Mt,{path:"/stats",element:s.jsx(ur,{children:s.jsx(A1,{})})}),s.jsx(Mt,{path:"/photo-assembly",element:s.jsx(ur,{children:s.jsx(d.Suspense,{fallback:s.jsx(Vs,{message:"Loading photo assembly..."}),children:s.jsx(sw,{})})})}),s.jsx(Mt,{path:"/profile",element:s.jsx(ur,{children:s.jsx(O1,{})})}),s.jsx(Mt,{path:"/famileo",element:s.jsx(ur,{children:s.jsx($1,{})})}),s.jsx(Mt,{path:"/pdf-export",element:s.jsx(ur,{children:s.jsx(X1,{})})}),s.jsx(Mt,{path:"/settings",element:s.jsx(ur,{children:s.jsx(Q1,{})})}),s.jsx(Mt,{path:"*",element:s.jsx(Qh,{to:"/",replace:!0})})]})})}),s.jsx(nw,{})]})]})})}const jc=document.getElementById("root");if(!jc)throw new Error("Root element not found");const Sf=()=>{fi.createRoot(jc).render(s.jsx(bo.StrictMode,{children:s.jsx(wv,{children:s.jsx(lw,{})})}))},aw=e=>{jc.innerHTML=`
    <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui, -apple-system, sans-serif;color:#111;">
      <div>${e}</div>
    </div>
  `},iw=()=>{const e=localStorage.getItem("user");if(!e)return null;try{const t=JSON.parse(e);return typeof t.email=="string"?t.email:null}catch{return null}},ow=async()=>{var a,i;if(window.location.pathname==="/auth"){Sf();return}const e=iw();if(!e){window.location.replace("/auth");return}aw("Checking authentication...");const t="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",r=`&auth=${encodeURIComponent("Email "+e)}`,l=await(await fetch(`${t}?path=auth/check${r}`,{method:"POST"})).json();if(!(l!=null&&l.ok)){localStorage.removeItem("user");const o=((a=l==null?void 0:l.error)==null?void 0:a.message)||"Your account is not authorized to access this application.";localStorage.setItem("auth_error",o),window.location.replace("/auth");return}localStorage.setItem("user",JSON.stringify((i=l.data)==null?void 0:i.user)),Sf()};ow().catch(()=>{localStorage.removeItem("user"),localStorage.setItem("auth_error","Authentication check failed."),window.location.replace("/auth")});export{mn as A,Ms as C,xa as M,Ft as a,It as b,uw as c,fn as d,jr as e,nr as f,qt as g,s as j,d as r,Qt as u};
