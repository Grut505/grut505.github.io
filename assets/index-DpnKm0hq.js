var kp=Object.defineProperty;var Cp=(e,t,r)=>t in e?kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var yu=(e,t,r)=>Cp(e,typeof t!="symbol"?t+"":t,r);function _p(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const a=Object.getOwnPropertyDescriptor(n,l);a&&Object.defineProperty(e,l,a.get?a:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rf={exports:{}},Xl={},nf={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),Ep=Symbol.for("react.portal"),Pp=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),Dp=Symbol.for("react.provider"),Rp=Symbol.for("react.context"),Tp=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Mp=Symbol.for("react.memo"),Ap=Symbol.for("react.lazy"),wu=Symbol.iterator;function zp(e){return e===null||typeof e!="object"?null:(e=wu&&e[wu]||e["@@iterator"],typeof e=="function"?e:null)}var sf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,af={};function $n(e,t,r){this.props=e,this.context=t,this.refs=af,this.updater=r||sf}$n.prototype.isReactComponent={};$n.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function of(){}of.prototype=$n.prototype;function ao(e,t,r){this.props=e,this.context=t,this.refs=af,this.updater=r||sf}var io=ao.prototype=new of;io.constructor=ao;lf(io,$n.prototype);io.isPureReactComponent=!0;var ju=Array.isArray,cf=Object.prototype.hasOwnProperty,oo={current:null},uf={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,r){var n,l={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)cf.call(t,n)&&!uf.hasOwnProperty(n)&&(l[n]=t[n]);var o=arguments.length-2;if(o===1)l.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];l.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)l[n]===void 0&&(l[n]=o[n]);return{$$typeof:Is,type:e,key:a,ref:i,props:l,_owner:oo.current}}function Op(e,t){return{$$typeof:Is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function co(e){return typeof e=="object"&&e!==null&&e.$$typeof===Is}function Up(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bu=/\/+/g;function ba(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Up(""+e.key):t.toString(36)}function fl(e,t,r,n,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Is:case Ep:i=!0}}if(i)return i=e,l=l(i),e=n===""?"."+ba(i,0):n,ju(l)?(r="",e!=null&&(r=e.replace(bu,"$&/")+"/"),fl(l,t,r,"",function(d){return d})):l!=null&&(co(l)&&(l=Op(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(bu,"$&/")+"/")+e)),t.push(l)),1;if(i=0,n=n===""?".":n+":",ju(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+ba(a,o);i+=fl(a,t,r,c,l)}else if(c=zp(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+ba(a,o++),i+=fl(a,t,r,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Qs(e,t,r){if(e==null)return e;var n=[],l=0;return fl(e,n,"","",function(a){return t.call(r,a,l++)}),n}function $p(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},ml={transition:null},Bp={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:ml,ReactCurrentOwner:oo};function ff(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Qs,forEach:function(e,t,r){Qs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qs(e,function(){t++}),t},toArray:function(e){return Qs(e,function(t){return t})||[]},only:function(e){if(!co(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=$n;ce.Fragment=Pp;ce.Profiler=Fp;ce.PureComponent=ao;ce.StrictMode=Lp;ce.Suspense=Ip;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bp;ce.act=ff;ce.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=lf({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=oo.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)cf.call(t,c)&&!uf.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Is,type:e.type,key:l,ref:a,props:n,_owner:i}};ce.createContext=function(e){return e={$$typeof:Rp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dp,_context:e},e.Consumer=e};ce.createElement=df;ce.createFactory=function(e){var t=df.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:Tp,render:e}};ce.isValidElement=co;ce.lazy=function(e){return{$$typeof:Ap,_payload:{_status:-1,_result:e},_init:$p}};ce.memo=function(e,t){return{$$typeof:Mp,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=ml.transition;ml.transition={};try{e()}finally{ml.transition=t}};ce.unstable_act=ff;ce.useCallback=function(e,t){return ut.current.useCallback(e,t)};ce.useContext=function(e){return ut.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};ce.useEffect=function(e,t){return ut.current.useEffect(e,t)};ce.useId=function(){return ut.current.useId()};ce.useImperativeHandle=function(e,t,r){return ut.current.useImperativeHandle(e,t,r)};ce.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return ut.current.useMemo(e,t)};ce.useReducer=function(e,t,r){return ut.current.useReducer(e,t,r)};ce.useRef=function(e){return ut.current.useRef(e)};ce.useState=function(e){return ut.current.useState(e)};ce.useSyncExternalStore=function(e,t,r){return ut.current.useSyncExternalStore(e,t,r)};ce.useTransition=function(){return ut.current.useTransition()};ce.version="18.3.1";nf.exports=ce;var u=nf.exports;const uo=tf(u),Wp=_p({__proto__:null,default:uo},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=u,Hp=Symbol.for("react.element"),Gp=Symbol.for("react.fragment"),Yp=Object.prototype.hasOwnProperty,Xp=Vp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qp={key:!0,ref:!0,__self:!0,__source:!0};function mf(e,t,r){var n,l={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Yp.call(t,n)&&!Qp.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)l[n]===void 0&&(l[n]=t[n]);return{$$typeof:Hp,type:e,key:a,ref:i,props:l,_owner:Xp.current}}Xl.Fragment=Gp;Xl.jsx=mf;Xl.jsxs=mf;rf.exports=Xl;var s=rf.exports,si={},hf={exports:{}},Dt={},pf={exports:{}},gf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,A){var U=F.length;F.push(A);e:for(;0<U;){var B=U-1>>>1,ee=F[B];if(0<l(ee,A))F[B]=A,F[U]=ee,U=B;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var A=F[0],U=F.pop();if(U!==A){F[0]=U;e:for(var B=0,ee=F.length,pe=ee>>>1;B<pe;){var H=2*(B+1)-1,ae=F[H],ne=H+1,ye=F[ne];if(0>l(ae,U))ne<ee&&0>l(ye,ae)?(F[B]=ye,F[ne]=U,B=ne):(F[B]=ae,F[H]=U,B=H);else if(ne<ee&&0>l(ye,U))F[B]=ye,F[ne]=U,B=ne;else break e}}return A}function l(F,A){var U=F.sortIndex-A.sortIndex;return U!==0?U:F.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],h=1,f=null,g=3,y=!1,w=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(F){for(var A=r(d);A!==null;){if(A.callback===null)n(d);else if(A.startTime<=F)n(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(d)}}function j(F){if(b=!1,v(F),!w)if(r(c)!==null)w=!0,W(E);else{var A=r(d);A!==null&&se(j,A.startTime-F)}}function E(F,A){w=!1,b&&(b=!1,p(k),k=-1),y=!0;var U=g;try{for(v(A),f=r(c);f!==null&&(!(f.expirationTime>A)||F&&!K());){var B=f.callback;if(typeof B=="function"){f.callback=null,g=f.priorityLevel;var ee=B(f.expirationTime<=A);A=e.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(c)&&n(c),v(A)}else n(c);f=r(c)}if(f!==null)var pe=!0;else{var H=r(d);H!==null&&se(j,H.startTime-A),pe=!1}return pe}finally{f=null,g=U,y=!1}}var L=!1,P=null,k=-1,X=5,M=-1;function K(){return!(e.unstable_now()-M<X)}function $(){if(P!==null){var F=e.unstable_now();M=F;var A=!0;try{A=P(!0,F)}finally{A?O():(L=!1,P=null)}}else L=!1}var O;if(typeof m=="function")O=function(){m($)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,J=te.port2;te.port1.onmessage=$,O=function(){J.postMessage(null)}}else O=function(){_($,0)};function W(F){P=F,L||(L=!0,O())}function se(F,A){k=_(function(){F(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,W(E))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var U=g;g=A;try{return F()}finally{g=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,A){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=g;g=F;try{return A()}finally{g=U}},e.unstable_scheduleCallback=function(F,A,U){var B=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=U+ee,F={id:h++,callback:A,priorityLevel:F,startTime:U,expirationTime:ee,sortIndex:-1},U>B?(F.sortIndex=U,t(d,F),r(c)===null&&F===r(d)&&(b?(p(k),k=-1):b=!0,se(j,U-B))):(F.sortIndex=ee,t(c,F),w||y||(w=!0,W(E))),F},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(F){var A=g;return function(){var U=g;g=A;try{return F.apply(this,arguments)}finally{g=U}}}})(gf);pf.exports=gf;var Kp=pf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=u,Ft=Kp;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xf=new Set,ps={};function cn(e,t){Rn(e,t),Rn(e+"Capture",t)}function Rn(e,t){for(ps[e]=t,e=0;e<t.length;e++)xf.add(t[e])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),li=Object.prototype.hasOwnProperty,Zp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nu={},Su={};function qp(e){return li.call(Su,e)?!0:li.call(Nu,e)?!1:Zp.test(e)?Su[e]=!0:(Nu[e]=!0,!1)}function e0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t0(e,t,r,n){if(t===null||typeof t>"u"||e0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,r,n,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tt[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tt[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tt[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tt[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tt[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tt[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tt[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tt[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tt[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fo=/[\-:]([a-z])/g;function mo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fo,mo);tt[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fo,mo);tt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fo,mo);tt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tt[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});tt.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tt[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ho(e,t,r,n){var l=tt.hasOwnProperty(t)?tt[t]:null;(l!==null?l.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t0(t,r,l,n)&&(r=null),n||l===null?qp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,n=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var wr=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),pn=Symbol.for("react.portal"),gn=Symbol.for("react.fragment"),po=Symbol.for("react.strict_mode"),ai=Symbol.for("react.profiler"),vf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),go=Symbol.for("react.forward_ref"),ii=Symbol.for("react.suspense"),oi=Symbol.for("react.suspense_list"),xo=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),wf=Symbol.for("react.offscreen"),ku=Symbol.iterator;function Gn(e){return e===null||typeof e!="object"?null:(e=ku&&e[ku]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Na;function rs(e){if(Na===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Na=t&&t[1]||""}return`
`+Na+e}var Sa=!1;function ka(e,t){if(!e||Sa)return"";Sa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=n.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Sa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rs(e):""}function r0(e){switch(e.tag){case 5:return rs(e.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 2:case 15:return e=ka(e.type,!1),e;case 11:return e=ka(e.type.render,!1),e;case 1:return e=ka(e.type,!0),e;default:return""}}function ci(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gn:return"Fragment";case pn:return"Portal";case ai:return"Profiler";case po:return"StrictMode";case ii:return"Suspense";case oi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yf:return(e.displayName||"Context")+".Consumer";case vf:return(e._context.displayName||"Context")+".Provider";case go:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xo:return t=e.displayName||null,t!==null?t:ci(e.type)||"Memo";case Nr:t=e._payload,e=e._init;try{return ci(e(t))}catch{}}return null}function n0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ci(t);case 8:return t===po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s0(e){var t=jf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Js(e){e._valueTracker||(e._valueTracker=s0(e))}function bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ui(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Cu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nf(e,t){t=t.checked,t!=null&&ho(e,"checked",t,!1)}function di(e,t){Nf(e,t);var r=zr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fi(e,t.type,r):t.hasOwnProperty("defaultValue")&&fi(e,t.type,zr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _u(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function fi(e,t,r){(t!=="number"||Sl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ns=Array.isArray;function _n(e,t,r,n){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zr(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function mi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(ns(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zr(r)}}function Sf(e,t){var r=zr(t.value),n=zr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zs,Cf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l0=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(e){l0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),as[t]=as[e]})});function _f(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||as.hasOwnProperty(e)&&as[e]?(""+t).trim():t+"px"}function Ef(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,l=_f(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,l):e[r]=l}}var a0=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pi(e,t){if(t){if(a0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function gi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,En=null,Pn=null;function Lu(e){if(e=zs(e)){if(typeof vi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=ql(t),vi(e.stateNode,e.type,t))}}function Pf(e){En?Pn?Pn.push(e):Pn=[e]:En=e}function Lf(){if(En){var e=En,t=Pn;if(Pn=En=null,Lu(e),t)for(e=0;e<t.length;e++)Lu(t[e])}}function Ff(e,t){return e(t)}function Df(){}var Ca=!1;function Rf(e,t,r){if(Ca)return e(t,r);Ca=!0;try{return Ff(e,t,r)}finally{Ca=!1,(En!==null||Pn!==null)&&(Df(),Lf())}}function xs(e,t){var r=e.stateNode;if(r===null)return null;var n=ql(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var yi=!1;if(gr)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){yi=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{yi=!1}function i0(e,t,r,n,l,a,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var is=!1,kl=null,Cl=!1,wi=null,o0={onError:function(e){is=!0,kl=e}};function c0(e,t,r,n,l,a,i,o,c){is=!1,kl=null,i0.apply(o0,arguments)}function u0(e,t,r,n,l,a,i,o,c){if(c0.apply(this,arguments),is){if(is){var d=kl;is=!1,kl=null}else throw Error(R(198));Cl||(Cl=!0,wi=d)}}function un(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Tf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fu(e){if(un(e)!==e)throw Error(R(188))}function d0(e){var t=e.alternate;if(!t){if(t=un(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(n=l.return,n!==null){r=n;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return Fu(l),e;if(a===n)return Fu(l),t;a=a.sibling}throw Error(R(188))}if(r.return!==n.return)r=l,n=a;else{for(var i=!1,o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function If(e){return e=d0(e),e!==null?Mf(e):null}function Mf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mf(e);if(t!==null)return t;e=e.sibling}return null}var Af=Ft.unstable_scheduleCallback,Du=Ft.unstable_cancelCallback,f0=Ft.unstable_shouldYield,m0=Ft.unstable_requestPaint,Me=Ft.unstable_now,h0=Ft.unstable_getCurrentPriorityLevel,yo=Ft.unstable_ImmediatePriority,zf=Ft.unstable_UserBlockingPriority,_l=Ft.unstable_NormalPriority,p0=Ft.unstable_LowPriority,Of=Ft.unstable_IdlePriority,Ql=null,lr=null;function g0(e){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Ql,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:y0,x0=Math.log,v0=Math.LN2;function y0(e){return e>>>=0,e===0?32:31-(x0(e)/v0|0)|0}var qs=64,el=4194304;function ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function El(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,l=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~l;o!==0?n=ss(o):(a&=i,a!==0&&(n=ss(a)))}else i=r&~l,i!==0?n=ss(i):a!==0&&(n=ss(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&l)&&(l=n&-n,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kt(t),l=1<<r,n|=e[r],t&=~l;return n}function w0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Kt(a),o=1<<i,c=l[i];c===-1?(!(o&r)||o&n)&&(l[i]=w0(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function ji(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uf(){var e=qs;return qs<<=1,!(qs&4194240)&&(qs=64),e}function _a(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ms(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function b0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Kt(r),a=1<<l;t[l]=0,n[l]=-1,e[l]=-1,r&=~a}}function wo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kt(r),l=1<<n;l&t|e[n]&t&&(e[n]|=t),r&=~l}}var ge=0;function $f(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bf,jo,Wf,Vf,Hf,bi=!1,tl=[],Lr=null,Fr=null,Dr=null,vs=new Map,ys=new Map,kr=[],N0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ru(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(t.pointerId)}}function Xn(e,t,r,n,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[l]},t!==null&&(t=zs(t),t!==null&&jo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function S0(e,t,r,n,l){switch(t){case"focusin":return Lr=Xn(Lr,e,t,r,n,l),!0;case"dragenter":return Fr=Xn(Fr,e,t,r,n,l),!0;case"mouseover":return Dr=Xn(Dr,e,t,r,n,l),!0;case"pointerover":var a=l.pointerId;return vs.set(a,Xn(vs.get(a)||null,e,t,r,n,l)),!0;case"gotpointercapture":return a=l.pointerId,ys.set(a,Xn(ys.get(a)||null,e,t,r,n,l)),!0}return!1}function Gf(e){var t=Kr(e.target);if(t!==null){var r=un(t);if(r!==null){if(t=r.tag,t===13){if(t=Tf(r),t!==null){e.blockedOn=t,Hf(e.priority,function(){Wf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ni(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xi=n,r.target.dispatchEvent(n),xi=null}else return t=zs(r),t!==null&&jo(t),e.blockedOn=r,!1;t.shift()}return!0}function Tu(e,t,r){hl(e)&&r.delete(t)}function k0(){bi=!1,Lr!==null&&hl(Lr)&&(Lr=null),Fr!==null&&hl(Fr)&&(Fr=null),Dr!==null&&hl(Dr)&&(Dr=null),vs.forEach(Tu),ys.forEach(Tu)}function Qn(e,t){e.blockedOn===t&&(e.blockedOn=null,bi||(bi=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,k0)))}function ws(e){function t(l){return Qn(l,e)}if(0<tl.length){Qn(tl[0],e);for(var r=1;r<tl.length;r++){var n=tl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lr!==null&&Qn(Lr,e),Fr!==null&&Qn(Fr,e),Dr!==null&&Qn(Dr,e),vs.forEach(t),ys.forEach(t),r=0;r<kr.length;r++)n=kr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<kr.length&&(r=kr[0],r.blockedOn===null);)Gf(r),r.blockedOn===null&&kr.shift()}var Ln=wr.ReactCurrentBatchConfig,Pl=!0;function C0(e,t,r,n){var l=ge,a=Ln.transition;Ln.transition=null;try{ge=1,bo(e,t,r,n)}finally{ge=l,Ln.transition=a}}function _0(e,t,r,n){var l=ge,a=Ln.transition;Ln.transition=null;try{ge=4,bo(e,t,r,n)}finally{ge=l,Ln.transition=a}}function bo(e,t,r,n){if(Pl){var l=Ni(e,t,r,n);if(l===null)Aa(e,t,n,Ll,r),Ru(e,n);else if(S0(l,e,t,r,n))n.stopPropagation();else if(Ru(e,n),t&4&&-1<N0.indexOf(e)){for(;l!==null;){var a=zs(l);if(a!==null&&Bf(a),a=Ni(e,t,r,n),a===null&&Aa(e,t,n,Ll,r),a===l)break;l=a}l!==null&&n.stopPropagation()}else Aa(e,t,n,null,r)}}var Ll=null;function Ni(e,t,r,n){if(Ll=null,e=vo(n),e=Kr(e),e!==null)if(t=un(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Tf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ll=e,null}function Yf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h0()){case yo:return 1;case zf:return 4;case _l:case p0:return 16;case Of:return 536870912;default:return 16}default:return 16}}var _r=null,No=null,pl=null;function Xf(){if(pl)return pl;var e,t=No,r=t.length,n,l="value"in _r?_r.value:_r.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===l[a-n];n++);return pl=l.slice(e,1<n?1-n:void 0)}function gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rl(){return!0}function Iu(){return!1}function Rt(e){function t(r,n,l,a,i){this._reactName=r,this._targetInst=l,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?rl:Iu,this.isPropagationStopped=Iu,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),t}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=Rt(Bn),As=Le({},Bn,{view:0,detail:0}),E0=Rt(As),Ea,Pa,Kn,Kl=Le({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ko,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kn&&(Kn&&e.type==="mousemove"?(Ea=e.screenX-Kn.screenX,Pa=e.screenY-Kn.screenY):Pa=Ea=0,Kn=e),Ea)},movementY:function(e){return"movementY"in e?e.movementY:Pa}}),Mu=Rt(Kl),P0=Le({},Kl,{dataTransfer:0}),L0=Rt(P0),F0=Le({},As,{relatedTarget:0}),La=Rt(F0),D0=Le({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Rt(D0),T0=Le({},Bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I0=Rt(T0),M0=Le({},Bn,{data:0}),Au=Rt(M0),A0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=O0[e])?!!t[e]:!1}function ko(){return U0}var $0=Le({},As,{key:function(e){if(e.key){var t=A0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ko,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),B0=Rt($0),W0=Le({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=Rt(W0),V0=Le({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ko}),H0=Rt(V0),G0=Le({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y0=Rt(G0),X0=Le({},Kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0=Rt(X0),K0=[9,13,27,32],Co=gr&&"CompositionEvent"in window,os=null;gr&&"documentMode"in document&&(os=document.documentMode);var J0=gr&&"TextEvent"in window&&!os,Qf=gr&&(!Co||os&&8<os&&11>=os),Ou=" ",Uu=!1;function Kf(e,t){switch(e){case"keyup":return K0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xn=!1;function Z0(e,t){switch(e){case"compositionend":return Jf(t);case"keypress":return t.which!==32?null:(Uu=!0,Ou);case"textInput":return e=t.data,e===Ou&&Uu?null:e;default:return null}}function q0(e,t){if(xn)return e==="compositionend"||!Co&&Kf(e,t)?(e=Xf(),pl=No=_r=null,xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qf&&t.locale!=="ko"?null:t.data;default:return null}}var eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eg[e.type]:t==="textarea"}function Zf(e,t,r,n){Pf(n),t=Fl(t,"onChange"),0<t.length&&(r=new So("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var cs=null,js=null;function tg(e){cm(e,0)}function Jl(e){var t=wn(e);if(bf(t))return e}function rg(e,t){if(e==="change")return t}var qf=!1;if(gr){var Fa;if(gr){var Da="oninput"in document;if(!Da){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),Da=typeof Bu.oninput=="function"}Fa=Da}else Fa=!1;qf=Fa&&(!document.documentMode||9<document.documentMode)}function Wu(){cs&&(cs.detachEvent("onpropertychange",em),js=cs=null)}function em(e){if(e.propertyName==="value"&&Jl(js)){var t=[];Zf(t,js,e,vo(e)),Rf(tg,t)}}function ng(e,t,r){e==="focusin"?(Wu(),cs=t,js=r,cs.attachEvent("onpropertychange",em)):e==="focusout"&&Wu()}function sg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jl(js)}function lg(e,t){if(e==="click")return Jl(t)}function ag(e,t){if(e==="input"||e==="change")return Jl(t)}function ig(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:ig;function bs(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var l=r[n];if(!li.call(t,l)||!qt(e[l],t[l]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hu(e,t){var r=Vu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vu(r)}}function tm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rm(){for(var e=window,t=Sl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Sl(e.document)}return t}function _o(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function og(e){var t=rm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tm(r.ownerDocument.documentElement,r)){if(n!==null&&_o(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,a=Math.min(n.start,l);n=n.end===void 0?a:Math.min(n.end,l),!e.extend&&a>n&&(l=n,n=a,a=l),l=Hu(r,a);var i=Hu(r,n);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cg=gr&&"documentMode"in document&&11>=document.documentMode,vn=null,Si=null,us=null,ki=!1;function Gu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ki||vn==null||vn!==Sl(n)||(n=vn,"selectionStart"in n&&_o(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),us&&bs(us,n)||(us=n,n=Fl(Si,"onSelect"),0<n.length&&(t=new So("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vn)))}function nl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yn={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},Ra={},nm={};gr&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function Zl(e){if(Ra[e])return Ra[e];if(!yn[e])return e;var t=yn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nm)return Ra[e]=t[r];return e}var sm=Zl("animationend"),lm=Zl("animationiteration"),am=Zl("animationstart"),im=Zl("transitionend"),om=new Map,Yu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(e,t){om.set(e,t),cn(t,[e])}for(var Ta=0;Ta<Yu.length;Ta++){var Ia=Yu[Ta],ug=Ia.toLowerCase(),dg=Ia[0].toUpperCase()+Ia.slice(1);Ur(ug,"on"+dg)}Ur(sm,"onAnimationEnd");Ur(lm,"onAnimationIteration");Ur(am,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(im,"onTransitionEnd");Rn("onMouseEnter",["mouseout","mouseover"]);Rn("onMouseLeave",["mouseout","mouseover"]);Rn("onPointerEnter",["pointerout","pointerover"]);Rn("onPointerLeave",["pointerout","pointerover"]);cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function Xu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,u0(n,t,void 0,e),e.currentTarget=null}function cm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],l=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&l.isPropagationStopped())break e;Xu(l,o,d),a=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&l.isPropagationStopped())break e;Xu(l,o,d),a=c}}}if(Cl)throw e=wi,Cl=!1,wi=null,e}function Se(e,t){var r=t[Li];r===void 0&&(r=t[Li]=new Set);var n=e+"__bubble";r.has(n)||(um(t,e,2,!1),r.add(n))}function Ma(e,t,r){var n=0;t&&(n|=4),um(r,e,n,t)}var sl="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[sl]){e[sl]=!0,xf.forEach(function(r){r!=="selectionchange"&&(fg.has(r)||Ma(r,!1,e),Ma(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sl]||(t[sl]=!0,Ma("selectionchange",!1,t))}}function um(e,t,r,n){switch(Yf(t)){case 1:var l=C0;break;case 4:l=_0;break;default:l=bo}r=l.bind(null,t,r,e),l=void 0,!yi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Aa(e,t,r,n,l){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;i=i.return}for(;o!==null;){if(i=Kr(o),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}o=o.parentNode}}n=n.return}Rf(function(){var d=a,h=vo(r),f=[];e:{var g=om.get(e);if(g!==void 0){var y=So,w=e;switch(e){case"keypress":if(gl(r)===0)break e;case"keydown":case"keyup":y=B0;break;case"focusin":w="focus",y=La;break;case"focusout":w="blur",y=La;break;case"beforeblur":case"afterblur":y=La;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=L0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=H0;break;case sm:case lm:case am:y=R0;break;case im:y=Y0;break;case"scroll":y=E0;break;case"wheel":y=Q0;break;case"copy":case"cut":case"paste":y=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=zu}var b=(t&4)!==0,_=!b&&e==="scroll",p=b?g!==null?g+"Capture":null:g;b=[];for(var m=d,v;m!==null;){v=m;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,p!==null&&(j=xs(m,p),j!=null&&b.push(Ss(m,j,v)))),_)break;m=m.return}0<b.length&&(g=new y(g,w,null,r,h),f.push({event:g,listeners:b}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&r!==xi&&(w=r.relatedTarget||r.fromElement)&&(Kr(w)||w[xr]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=r.relatedTarget||r.toElement,y=d,w=w?Kr(w):null,w!==null&&(_=un(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=d),y!==w)){if(b=Mu,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=zu,j="onPointerLeave",p="onPointerEnter",m="pointer"),_=y==null?g:wn(y),v=w==null?g:wn(w),g=new b(j,m+"leave",y,r,h),g.target=_,g.relatedTarget=v,j=null,Kr(h)===d&&(b=new b(p,m+"enter",w,r,h),b.target=v,b.relatedTarget=_,j=b),_=j,y&&w)t:{for(b=y,p=w,m=0,v=b;v;v=hn(v))m++;for(v=0,j=p;j;j=hn(j))v++;for(;0<m-v;)b=hn(b),m--;for(;0<v-m;)p=hn(p),v--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=hn(b),p=hn(p)}b=null}else b=null;y!==null&&Qu(f,g,y,b,!1),w!==null&&_!==null&&Qu(f,_,w,b,!0)}}e:{if(g=d?wn(d):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var E=rg;else if($u(g))if(qf)E=ag;else{E=sg;var L=ng}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(E=lg);if(E&&(E=E(e,d))){Zf(f,E,r,h);break e}L&&L(e,g,d),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&fi(g,"number",g.value)}switch(L=d?wn(d):window,e){case"focusin":($u(L)||L.contentEditable==="true")&&(vn=L,Si=d,us=null);break;case"focusout":us=Si=vn=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Gu(f,r,h);break;case"selectionchange":if(cg)break;case"keydown":case"keyup":Gu(f,r,h)}var P;if(Co)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else xn?Kf(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Qf&&r.locale!=="ko"&&(xn||k!=="onCompositionStart"?k==="onCompositionEnd"&&xn&&(P=Xf()):(_r=h,No="value"in _r?_r.value:_r.textContent,xn=!0)),L=Fl(d,k),0<L.length&&(k=new Au(k,e,null,r,h),f.push({event:k,listeners:L}),P?k.data=P:(P=Jf(r),P!==null&&(k.data=P)))),(P=J0?Z0(e,r):q0(e,r))&&(d=Fl(d,"onBeforeInput"),0<d.length&&(h=new Au("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=P))}cm(f,t)})}function Ss(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fl(e,t){for(var r=t+"Capture",n=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=xs(e,r),a!=null&&n.unshift(Ss(e,a,l)),a=xs(e,t),a!=null&&n.push(Ss(e,a,l))),e=e.return}return n}function hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qu(e,t,r,n,l){for(var a=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,l?(c=xs(r,a),c!=null&&i.unshift(Ss(r,c,o))):l||(c=xs(r,a),c!=null&&i.push(Ss(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var mg=/\r\n?/g,hg=/\u0000|\uFFFD/g;function Ku(e){return(typeof e=="string"?e:""+e).replace(mg,`
`).replace(hg,"")}function ll(e,t,r){if(t=Ku(t),Ku(e)!==t&&r)throw Error(R(425))}function Dl(){}var Ci=null,_i=null;function Ei(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pi=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,Ju=typeof Promise=="function"?Promise:void 0,gg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ju<"u"?function(e){return Ju.resolve(null).then(e).catch(xg)}:Pi;function xg(e){setTimeout(function(){throw e})}function za(e,t){var r=t,n=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(n===0){e.removeChild(l),ws(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=l}while(r);ws(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Wn=Math.random().toString(36).slice(2),sr="__reactFiber$"+Wn,ks="__reactProps$"+Wn,xr="__reactContainer$"+Wn,Li="__reactEvents$"+Wn,vg="__reactListeners$"+Wn,yg="__reactHandles$"+Wn;function Kr(e){var t=e[sr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xr]||r[sr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Zu(e);e!==null;){if(r=e[sr])return r;e=Zu(e)}return t}e=r,r=e.parentNode}return null}function zs(e){return e=e[sr]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function ql(e){return e[ks]||null}var Fi=[],jn=-1;function $r(e){return{current:e}}function ke(e){0>jn||(e.current=Fi[jn],Fi[jn]=null,jn--)}function be(e,t){jn++,Fi[jn]=e.current,e.current=t}var Or={},lt=$r(Or),jt=$r(!1),nn=Or;function Tn(e,t){var r=e.type.contextTypes;if(!r)return Or;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function bt(e){return e=e.childContextTypes,e!=null}function Rl(){ke(jt),ke(lt)}function qu(e,t,r){if(lt.current!==Or)throw Error(R(168));be(lt,t),be(jt,r)}function dm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var l in n)if(!(l in t))throw Error(R(108,n0(e)||"Unknown",l));return Le({},r,n)}function Tl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,nn=lt.current,be(lt,e),be(jt,jt.current),!0}function ed(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=dm(e,t,nn),n.__reactInternalMemoizedMergedChildContext=e,ke(jt),ke(lt),be(lt,e)):ke(jt),be(jt,r)}var fr=null,ea=!1,Oa=!1;function fm(e){fr===null?fr=[e]:fr.push(e)}function wg(e){ea=!0,fm(e)}function Br(){if(!Oa&&fr!==null){Oa=!0;var e=0,t=ge;try{var r=fr;for(ge=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}fr=null,ea=!1}catch(l){throw fr!==null&&(fr=fr.slice(e+1)),Af(yo,Br),l}finally{ge=t,Oa=!1}}return null}var bn=[],Nn=0,Il=null,Ml=0,At=[],zt=0,sn=null,mr=1,hr="";function Xr(e,t){bn[Nn++]=Ml,bn[Nn++]=Il,Il=e,Ml=t}function mm(e,t,r){At[zt++]=mr,At[zt++]=hr,At[zt++]=sn,sn=e;var n=mr;e=hr;var l=32-Kt(n)-1;n&=~(1<<l),r+=1;var a=32-Kt(t)+l;if(30<a){var i=l-l%5;a=(n&(1<<i)-1).toString(32),n>>=i,l-=i,mr=1<<32-Kt(t)+l|r<<l|n,hr=a+e}else mr=1<<a|r<<l|n,hr=e}function Eo(e){e.return!==null&&(Xr(e,1),mm(e,1,0))}function Po(e){for(;e===Il;)Il=bn[--Nn],bn[Nn]=null,Ml=bn[--Nn],bn[Nn]=null;for(;e===sn;)sn=At[--zt],At[zt]=null,hr=At[--zt],At[zt]=null,mr=At[--zt],At[zt]=null}var Pt=null,Et=null,_e=!1,Yt=null;function hm(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function td(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,Et=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sn!==null?{id:mr,overflow:hr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pt=e,Et=null,!0):!1;default:return!1}}function Di(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ri(e){if(_e){var t=Et;if(t){var r=t;if(!td(e,t)){if(Di(e))throw Error(R(418));t=Rr(r.nextSibling);var n=Pt;t&&td(e,t)?hm(n,r):(e.flags=e.flags&-4097|2,_e=!1,Pt=e)}}else{if(Di(e))throw Error(R(418));e.flags=e.flags&-4097|2,_e=!1,Pt=e}}}function rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function al(e){if(e!==Pt)return!1;if(!_e)return rd(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ei(e.type,e.memoizedProps)),t&&(t=Et)){if(Di(e))throw pm(),Error(R(418));for(;t;)hm(e,t),t=Rr(t.nextSibling)}if(rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Pt?Rr(e.stateNode.nextSibling):null;return!0}function pm(){for(var e=Et;e;)e=Rr(e.nextSibling)}function In(){Et=Pt=null,_e=!1}function Lo(e){Yt===null?Yt=[e]:Yt.push(e)}var jg=wr.ReactCurrentBatchConfig;function Jn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var l=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function il(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nd(e){var t=e._init;return t(e._payload)}function gm(e){function t(p,m){if(e){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function l(p,m){return p=Ar(p,m),p.index=0,p.sibling=null,p}function a(p,m,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,m,v,j){return m===null||m.tag!==6?(m=Ga(v,p.mode,j),m.return=p,m):(m=l(m,v),m.return=p,m)}function c(p,m,v,j){var E=v.type;return E===gn?h(p,m,v.props.children,j,v.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nr&&nd(E)===m.type)?(j=l(m,v.props),j.ref=Jn(p,m,v),j.return=p,j):(j=Nl(v.type,v.key,v.props,null,p.mode,j),j.ref=Jn(p,m,v),j.return=p,j)}function d(p,m,v,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ya(v,p.mode,j),m.return=p,m):(m=l(m,v.children||[]),m.return=p,m)}function h(p,m,v,j,E){return m===null||m.tag!==7?(m=en(v,p.mode,j,E),m.return=p,m):(m=l(m,v),m.return=p,m)}function f(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ga(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ks:return v=Nl(m.type,m.key,m.props,null,p.mode,v),v.ref=Jn(p,null,m),v.return=p,v;case pn:return m=Ya(m,p.mode,v),m.return=p,m;case Nr:var j=m._init;return f(p,j(m._payload),v)}if(ns(m)||Gn(m))return m=en(m,p.mode,v,null),m.return=p,m;il(p,m)}return null}function g(p,m,v,j){var E=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:o(p,m,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ks:return v.key===E?c(p,m,v,j):null;case pn:return v.key===E?d(p,m,v,j):null;case Nr:return E=v._init,g(p,m,E(v._payload),j)}if(ns(v)||Gn(v))return E!==null?null:h(p,m,v,j,null);il(p,v)}return null}function y(p,m,v,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(v)||null,o(m,p,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ks:return p=p.get(j.key===null?v:j.key)||null,c(m,p,j,E);case pn:return p=p.get(j.key===null?v:j.key)||null,d(m,p,j,E);case Nr:var L=j._init;return y(p,m,v,L(j._payload),E)}if(ns(j)||Gn(j))return p=p.get(v)||null,h(m,p,j,E,null);il(m,j)}return null}function w(p,m,v,j){for(var E=null,L=null,P=m,k=m=0,X=null;P!==null&&k<v.length;k++){P.index>k?(X=P,P=null):X=P.sibling;var M=g(p,P,v[k],j);if(M===null){P===null&&(P=X);break}e&&P&&M.alternate===null&&t(p,P),m=a(M,m,k),L===null?E=M:L.sibling=M,L=M,P=X}if(k===v.length)return r(p,P),_e&&Xr(p,k),E;if(P===null){for(;k<v.length;k++)P=f(p,v[k],j),P!==null&&(m=a(P,m,k),L===null?E=P:L.sibling=P,L=P);return _e&&Xr(p,k),E}for(P=n(p,P);k<v.length;k++)X=y(P,p,k,v[k],j),X!==null&&(e&&X.alternate!==null&&P.delete(X.key===null?k:X.key),m=a(X,m,k),L===null?E=X:L.sibling=X,L=X);return e&&P.forEach(function(K){return t(p,K)}),_e&&Xr(p,k),E}function b(p,m,v,j){var E=Gn(v);if(typeof E!="function")throw Error(R(150));if(v=E.call(v),v==null)throw Error(R(151));for(var L=E=null,P=m,k=m=0,X=null,M=v.next();P!==null&&!M.done;k++,M=v.next()){P.index>k?(X=P,P=null):X=P.sibling;var K=g(p,P,M.value,j);if(K===null){P===null&&(P=X);break}e&&P&&K.alternate===null&&t(p,P),m=a(K,m,k),L===null?E=K:L.sibling=K,L=K,P=X}if(M.done)return r(p,P),_e&&Xr(p,k),E;if(P===null){for(;!M.done;k++,M=v.next())M=f(p,M.value,j),M!==null&&(m=a(M,m,k),L===null?E=M:L.sibling=M,L=M);return _e&&Xr(p,k),E}for(P=n(p,P);!M.done;k++,M=v.next())M=y(P,p,k,M.value,j),M!==null&&(e&&M.alternate!==null&&P.delete(M.key===null?k:M.key),m=a(M,m,k),L===null?E=M:L.sibling=M,L=M);return e&&P.forEach(function($){return t(p,$)}),_e&&Xr(p,k),E}function _(p,m,v,j){if(typeof v=="object"&&v!==null&&v.type===gn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ks:e:{for(var E=v.key,L=m;L!==null;){if(L.key===E){if(E=v.type,E===gn){if(L.tag===7){r(p,L.sibling),m=l(L,v.props.children),m.return=p,p=m;break e}}else if(L.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nr&&nd(E)===L.type){r(p,L.sibling),m=l(L,v.props),m.ref=Jn(p,L,v),m.return=p,p=m;break e}r(p,L);break}else t(p,L);L=L.sibling}v.type===gn?(m=en(v.props.children,p.mode,j,v.key),m.return=p,p=m):(j=Nl(v.type,v.key,v.props,null,p.mode,j),j.ref=Jn(p,m,v),j.return=p,p=j)}return i(p);case pn:e:{for(L=v.key;m!==null;){if(m.key===L)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(p,m.sibling),m=l(m,v.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=Ya(v,p.mode,j),m.return=p,p=m}return i(p);case Nr:return L=v._init,_(p,m,L(v._payload),j)}if(ns(v))return w(p,m,v,j);if(Gn(v))return b(p,m,v,j);il(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(p,m.sibling),m=l(m,v),m.return=p,p=m):(r(p,m),m=Ga(v,p.mode,j),m.return=p,p=m),i(p)):r(p,m)}return _}var Mn=gm(!0),xm=gm(!1),Al=$r(null),zl=null,Sn=null,Fo=null;function Do(){Fo=Sn=zl=null}function Ro(e){var t=Al.current;ke(Al),e._currentValue=t}function Ti(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fn(e,t){zl=e,Fo=Sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(Fo!==e)if(e={context:e,memoizedValue:t,next:null},Sn===null){if(zl===null)throw Error(R(308));Sn=e,zl.dependencies={lanes:0,firstContext:e}}else Sn=Sn.next=e;return t}var Jr=null;function To(e){Jr===null?Jr=[e]:Jr.push(e)}function vm(e,t,r,n){var l=t.interleaved;return l===null?(r.next=r,To(t)):(r.next=l.next,l.next=r),t.interleaved=r,vr(e,n)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sr=!1;function Io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,vr(e,r)}return l=n.interleaved,l===null?(t.next=t,To(n)):(t.next=l.next,l.next=t),n.interleaved=t,vr(e,r)}function xl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wo(e,r)}}function sd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=t:a=a.next=t}else l=a=t;r={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ol(e,t,r,n){var l=e.updateQueue;Sr=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==i&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(a!==null){var f=l.baseState;i=0,h=d=c=null,o=a;do{var g=o.lane,y=o.eventTime;if((n&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,b=o;switch(g=t,y=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){f=w.call(y,f,g);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,g=typeof w=="function"?w.call(y,f,g):w,g==null)break e;f=Le({},f,g);break e;case 2:Sr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=l.effects,g===null?l.effects=[o]:g.push(o))}else y={eventTime:y,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,i|=g;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;g=o,o=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);if(h===null&&(c=f),l.baseState=c,l.firstBaseUpdate=d,l.lastBaseUpdate=h,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);an|=i,e.lanes=i,e.memoizedState=f}}function ld(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],l=n.callback;if(l!==null){if(n.callback=null,n=r,typeof l!="function")throw Error(R(191,l));l.call(n)}}}var Os={},ar=$r(Os),Cs=$r(Os),_s=$r(Os);function Zr(e){if(e===Os)throw Error(R(174));return e}function Mo(e,t){switch(be(_s,t),be(Cs,e),be(ar,Os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hi(t,e)}ke(ar),be(ar,t)}function An(){ke(ar),ke(Cs),ke(_s)}function wm(e){Zr(_s.current);var t=Zr(ar.current),r=hi(t,e.type);t!==r&&(be(Cs,e),be(ar,r))}function Ao(e){Cs.current===e&&(ke(ar),ke(Cs))}var Ee=$r(0);function Ul(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=[];function zo(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var vl=wr.ReactCurrentDispatcher,$a=wr.ReactCurrentBatchConfig,ln=0,Pe=null,Ye=null,Ke=null,$l=!1,ds=!1,Es=0,bg=0;function rt(){throw Error(R(321))}function Oo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qt(e[r],t[r]))return!1;return!0}function Uo(e,t,r,n,l,a){if(ln=a,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?Cg:_g,e=r(n,l),ds){a=0;do{if(ds=!1,Es=0,25<=a)throw Error(R(301));a+=1,Ke=Ye=null,t.updateQueue=null,vl.current=Eg,e=r(n,l)}while(ds)}if(vl.current=Bl,t=Ye!==null&&Ye.next!==null,ln=0,Ke=Ye=Pe=null,$l=!1,t)throw Error(R(300));return e}function $o(){var e=Es!==0;return Es=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Pe.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Wt(){if(Ye===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Ke===null?Pe.memoizedState:Ke.next;if(t!==null)Ke=t,Ye=e;else{if(e===null)throw Error(R(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Ke===null?Pe.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function Ps(e,t){return typeof t=="function"?t(e):t}function Ba(e){var t=Wt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=Ye,l=n.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}n.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,n=n.baseState;var o=i=null,c=null,d=a;do{var h=d.lane;if((ln&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=f,i=n):c=c.next=f,Pe.lanes|=h,an|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=o,qt(n,t.memoizedState)||(wt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){l=e;do a=l.lane,Pe.lanes|=a,an|=a,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Wa(e){var t=Wt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,l=r.pending,a=t.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);qt(a,t.memoizedState)||(wt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function jm(){}function bm(e,t){var r=Pe,n=Wt(),l=t(),a=!qt(n.memoizedState,l);if(a&&(n.memoizedState=l,wt=!0),n=n.queue,Bo(km.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ke!==null&&Ke.memoizedState.tag&1){if(r.flags|=2048,Ls(9,Sm.bind(null,r,n,l,t),void 0,null),Je===null)throw Error(R(349));ln&30||Nm(r,t,l)}return l}function Nm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sm(e,t,r,n){t.value=r,t.getSnapshot=n,Cm(t)&&_m(e)}function km(e,t,r){return r(function(){Cm(t)&&_m(e)})}function Cm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qt(e,r)}catch{return!0}}function _m(e){var t=vr(e,1);t!==null&&Jt(t,e,1,-1)}function ad(e){var t=rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=kg.bind(null,Pe,e),[t.memoizedState,e]}function Ls(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Em(){return Wt().memoizedState}function yl(e,t,r,n){var l=rr();Pe.flags|=e,l.memoizedState=Ls(1|t,r,void 0,n===void 0?null:n)}function ta(e,t,r,n){var l=Wt();n=n===void 0?null:n;var a=void 0;if(Ye!==null){var i=Ye.memoizedState;if(a=i.destroy,n!==null&&Oo(n,i.deps)){l.memoizedState=Ls(t,r,a,n);return}}Pe.flags|=e,l.memoizedState=Ls(1|t,r,a,n)}function id(e,t){return yl(8390656,8,e,t)}function Bo(e,t){return ta(2048,8,e,t)}function Pm(e,t){return ta(4,2,e,t)}function Lm(e,t){return ta(4,4,e,t)}function Fm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dm(e,t,r){return r=r!=null?r.concat([e]):null,ta(4,4,Fm.bind(null,t,e),r)}function Wo(){}function Rm(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Oo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Tm(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Oo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Im(e,t,r){return ln&21?(qt(r,t)||(r=Uf(),Pe.lanes|=r,an|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=r)}function Ng(e,t){var r=ge;ge=r!==0&&4>r?r:4,e(!0);var n=$a.transition;$a.transition={};try{e(!1),t()}finally{ge=r,$a.transition=n}}function Mm(){return Wt().memoizedState}function Sg(e,t,r){var n=Mr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Am(e))zm(t,r);else if(r=vm(e,t,r,n),r!==null){var l=ct();Jt(r,e,n,l),Om(r,t,n)}}function kg(e,t,r){var n=Mr(e),l={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Am(e))zm(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,r);if(l.hasEagerState=!0,l.eagerState=o,qt(o,i)){var c=t.interleaved;c===null?(l.next=l,To(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}r=vm(e,t,l,n),r!==null&&(l=ct(),Jt(r,e,n,l),Om(r,t,n))}}function Am(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function zm(e,t){ds=$l=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Om(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wo(e,r)}}var Bl={readContext:Bt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Cg={readContext:Bt,useCallback:function(e,t){return rr().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:id,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,yl(4194308,4,Fm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return yl(4,2,e,t)},useMemo:function(e,t){var r=rr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=rr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Sg.bind(null,Pe,e),[n.memoizedState,e]},useRef:function(e){var t=rr();return e={current:e},t.memoizedState=e},useState:ad,useDebugValue:Wo,useDeferredValue:function(e){return rr().memoizedState=e},useTransition:function(){var e=ad(!1),t=e[0];return e=Ng.bind(null,e[1]),rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Pe,l=rr();if(_e){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),Je===null)throw Error(R(349));ln&30||Nm(n,t,r)}l.memoizedState=r;var a={value:r,getSnapshot:t};return l.queue=a,id(km.bind(null,n,a,e),[e]),n.flags|=2048,Ls(9,Sm.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=rr(),t=Je.identifierPrefix;if(_e){var r=hr,n=mr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Es++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=bg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_g={readContext:Bt,useCallback:Rm,useContext:Bt,useEffect:Bo,useImperativeHandle:Dm,useInsertionEffect:Pm,useLayoutEffect:Lm,useMemo:Tm,useReducer:Ba,useRef:Em,useState:function(){return Ba(Ps)},useDebugValue:Wo,useDeferredValue:function(e){var t=Wt();return Im(t,Ye.memoizedState,e)},useTransition:function(){var e=Ba(Ps)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:jm,useSyncExternalStore:bm,useId:Mm,unstable_isNewReconciler:!1},Eg={readContext:Bt,useCallback:Rm,useContext:Bt,useEffect:Bo,useImperativeHandle:Dm,useInsertionEffect:Pm,useLayoutEffect:Lm,useMemo:Tm,useReducer:Wa,useRef:Em,useState:function(){return Wa(Ps)},useDebugValue:Wo,useDeferredValue:function(e){var t=Wt();return Ye===null?t.memoizedState=e:Im(t,Ye.memoizedState,e)},useTransition:function(){var e=Wa(Ps)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:jm,useSyncExternalStore:bm,useId:Mm,unstable_isNewReconciler:!1};function Ht(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ii(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ra={isMounted:function(e){return(e=e._reactInternals)?un(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ct(),l=Mr(e),a=pr(n,l);a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Jt(t,e,l,n),xl(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ct(),l=Mr(e),a=pr(n,l);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Jt(t,e,l,n),xl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ct(),n=Mr(e),l=pr(r,n);l.tag=2,t!=null&&(l.callback=t),t=Tr(e,l,n),t!==null&&(Jt(t,e,n,r),xl(t,e,n))}};function od(e,t,r,n,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!bs(r,n)||!bs(l,a):!0}function Um(e,t,r){var n=!1,l=Or,a=t.contextType;return typeof a=="object"&&a!==null?a=Bt(a):(l=bt(t)?nn:lt.current,n=t.contextTypes,a=(n=n!=null)?Tn(e,l):Or),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function cd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function Mi(e,t,r,n){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Io(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Bt(a):(a=bt(t)?nn:lt.current,l.context=Tn(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ii(e,t,a,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ra.enqueueReplaceState(l,l.state,null),Ol(e,r,l,n),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function zn(e,t){try{var r="",n=t;do r+=r0(n),n=n.return;while(n);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Va(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ai(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Pg=typeof WeakMap=="function"?WeakMap:Map;function $m(e,t,r){r=pr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vl||(Vl=!0,Yi=n),Ai(e,t)},r}function Bm(e,t,r){r=pr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var l=t.value;r.payload=function(){return n(l)},r.callback=function(){Ai(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ai(e,t),typeof n!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function ud(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Pg;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(r)||(l.add(r),e=Wg.bind(null,e,t,r),t.then(e,e))}function dd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fd(e,t,r,n,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pr(-1,1),t.tag=2,Tr(r,t,1))),r.lanes|=1),e)}var Lg=wr.ReactCurrentOwner,wt=!1;function it(e,t,r,n){t.child=e===null?xm(t,null,r,n):Mn(t,e.child,r,n)}function md(e,t,r,n,l){r=r.render;var a=t.ref;return Fn(t,l),n=Uo(e,t,r,n,a,l),r=$o(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yr(e,t,l)):(_e&&r&&Eo(t),t.flags|=1,it(e,t,n,l),t.child)}function hd(e,t,r,n,l){if(e===null){var a=r.type;return typeof a=="function"&&!Jo(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Wm(e,t,a,n,l)):(e=Nl(r.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:bs,r(i,n)&&e.ref===t.ref)return yr(e,t,l)}return t.flags|=1,e=Ar(a,n),e.ref=t.ref,e.return=t,t.child=e}function Wm(e,t,r,n,l){if(e!==null){var a=e.memoizedProps;if(bs(a,n)&&e.ref===t.ref)if(wt=!1,t.pendingProps=n=a,(e.lanes&l)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,yr(e,t,l)}return zi(e,t,r,n,l)}function Vm(e,t,r){var n=t.pendingProps,l=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Cn,kt),kt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(Cn,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,be(Cn,kt),kt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,be(Cn,kt),kt|=n;return it(e,t,l,r),t.child}function Hm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zi(e,t,r,n,l){var a=bt(r)?nn:lt.current;return a=Tn(t,a),Fn(t,l),r=Uo(e,t,r,n,a,l),n=$o(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yr(e,t,l)):(_e&&n&&Eo(t),t.flags|=1,it(e,t,r,l),t.child)}function pd(e,t,r,n,l){if(bt(r)){var a=!0;Tl(t)}else a=!1;if(Fn(t,l),t.stateNode===null)wl(e,t),Um(t,r,n),Mi(t,r,n,l),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=bt(r)?nn:lt.current,d=Tn(t,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==d)&&cd(t,i,n,d),Sr=!1;var g=t.memoizedState;i.state=g,Ol(t,n,i,l),c=t.memoizedState,o!==n||g!==c||jt.current||Sr?(typeof h=="function"&&(Ii(t,r,h,n),c=t.memoizedState),(o=Sr||od(t,r,o,n,g,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ym(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ht(t.type,o),i.props=d,f=t.pendingProps,g=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=bt(r)?nn:lt.current,c=Tn(t,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||g!==c)&&cd(t,i,n,c),Sr=!1,g=t.memoizedState,i.state=g,Ol(t,n,i,l);var w=t.memoizedState;o!==f||g!==w||jt.current||Sr?(typeof y=="function"&&(Ii(t,r,y,n),w=t.memoizedState),(d=Sr||od(t,r,d,n,g,w,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),i.props=n,i.state=w,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),n=!1)}return Oi(e,t,r,n,a,l)}function Oi(e,t,r,n,l,a){Hm(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return l&&ed(t,r,!1),yr(e,t,a);n=t.stateNode,Lg.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Mn(t,e.child,null,a),t.child=Mn(t,null,o,a)):it(e,t,o,a),t.memoizedState=n.state,l&&ed(t,r,!0),t.child}function Gm(e){var t=e.stateNode;t.pendingContext?qu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qu(e,t.context,!1),Mo(e,t.containerInfo)}function gd(e,t,r,n,l){return In(),Lo(l),t.flags|=256,it(e,t,r,n),t.child}var Ui={dehydrated:null,treeContext:null,retryLane:0};function $i(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ym(e,t,r){var n=t.pendingProps,l=Ee.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),be(Ee,l&1),e===null)return Ri(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=la(i,n,0,null),e=en(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=$i(r),t.memoizedState=Ui,e):Vo(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return Fg(e,t,i,n,o,l,r);if(a){a=n.fallback,i=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==l?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ar(l,c),n.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=Ar(o,a):(a=en(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?$i(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Ui,n}return a=e.child,e=a.sibling,n=Ar(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Vo(e,t){return t=la({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ol(e,t,r,n){return n!==null&&Lo(n),Mn(t,e.child,null,r),e=Vo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fg(e,t,r,n,l,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Va(Error(R(422))),ol(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,l=t.mode,n=la({mode:"visible",children:n.children},l,0,null),a=en(a,l,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Mn(t,e.child,null,i),t.child.memoizedState=$i(i),t.memoizedState=Ui,a);if(!(t.mode&1))return ol(e,t,i,null);if(l.data==="$!"){if(n=l.nextSibling&&l.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(R(419)),n=Va(a,n,void 0),ol(e,t,i,n)}if(o=(i&e.childLanes)!==0,wt||o){if(n=Je,n!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(n.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,vr(e,l),Jt(n,e,l,-1))}return Ko(),n=Va(Error(R(421))),ol(e,t,i,n)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Vg.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Et=Rr(l.nextSibling),Pt=t,_e=!0,Yt=null,e!==null&&(At[zt++]=mr,At[zt++]=hr,At[zt++]=sn,mr=e.id,hr=e.overflow,sn=t),t=Vo(t,n.children),t.flags|=4096,t)}function xd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ti(e.return,t,r)}function Ha(e,t,r,n,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=l)}function Xm(e,t,r){var n=t.pendingProps,l=n.revealOrder,a=n.tail;if(it(e,t,n.children,r),n=Ee.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xd(e,r,t);else if(e.tag===19)xd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(be(Ee,n),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Ul(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ha(t,!1,l,r,a);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ul(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Ha(t,!0,r,null,a);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),an|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=Ar(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ar(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Dg(e,t,r){switch(t.tag){case 3:Gm(t),In();break;case 5:wm(t);break;case 1:bt(t.type)&&Tl(t);break;case 4:Mo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,l=t.memoizedProps.value;be(Al,n._currentValue),n._currentValue=l;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(be(Ee,Ee.current&1),t.flags|=128,null):r&t.child.childLanes?Ym(e,t,r):(be(Ee,Ee.current&1),e=yr(e,t,r),e!==null?e.sibling:null);be(Ee,Ee.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Xm(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),be(Ee,Ee.current),n)break;return null;case 22:case 23:return t.lanes=0,Vm(e,t,r)}return yr(e,t,r)}var Qm,Bi,Km,Jm;Qm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bi=function(){};Km=function(e,t,r,n){var l=e.memoizedProps;if(l!==n){e=t.stateNode,Zr(ar.current);var a=null;switch(r){case"input":l=ui(e,l),n=ui(e,n),a=[];break;case"select":l=Le({},l,{value:void 0}),n=Le({},n,{value:void 0}),a=[];break;case"textarea":l=mi(e,l),n=mi(e,n),a=[];break;default:typeof l.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Dl)}pi(r,n);var i;r=null;for(d in l)if(!n.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var o=l[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ps.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(o=l!=null?l[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ps.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Se("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Jm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Zn(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags&14680064,n|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Rg(e,t,r){var n=t.pendingProps;switch(Po(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return bt(t.type)&&Rl(),nt(t),null;case 3:return n=t.stateNode,An(),ke(jt),ke(lt),zo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yt!==null&&(Ki(Yt),Yt=null))),Bi(e,t),nt(t),null;case 5:Ao(t);var l=Zr(_s.current);if(r=t.type,e!==null&&t.stateNode!=null)Km(e,t,r,n,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return nt(t),null}if(e=Zr(ar.current),al(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[sr]=t,n[ks]=a,e=(t.mode&1)!==0,r){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(l=0;l<ls.length;l++)Se(ls[l],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":Cu(n,a),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Se("invalid",n);break;case"textarea":Eu(n,a),Se("invalid",n)}pi(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&ll(n.textContent,o,e),l=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&ll(n.textContent,o,e),l=["children",""+o]):ps.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Se("scroll",n)}switch(r){case"input":Js(n),_u(n,a,!0);break;case"textarea":Js(n),Pu(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Dl)}n=l,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[sr]=t,e[ks]=n,Qm(e,t,!1,!1),t.stateNode=e;e:{switch(i=gi(r,n),r){case"dialog":Se("cancel",e),Se("close",e),l=n;break;case"iframe":case"object":case"embed":Se("load",e),l=n;break;case"video":case"audio":for(l=0;l<ls.length;l++)Se(ls[l],e);l=n;break;case"source":Se("error",e),l=n;break;case"img":case"image":case"link":Se("error",e),Se("load",e),l=n;break;case"details":Se("toggle",e),l=n;break;case"input":Cu(e,n),l=ui(e,n),Se("invalid",e);break;case"option":l=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},l=Le({},n,{value:void 0}),Se("invalid",e);break;case"textarea":Eu(e,n),l=mi(e,n),Se("invalid",e);break;default:l=n}pi(r,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Ef(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cf(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&gs(e,c):typeof c=="number"&&gs(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ps.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Se("scroll",e):c!=null&&ho(e,a,c,i))}switch(r){case"input":Js(e),_u(e,n,!1);break;case"textarea":Js(e),Pu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?_n(e,!!n.multiple,a,!1):n.defaultValue!=null&&_n(e,!!n.multiple,n.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Dl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Jm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=Zr(_s.current),Zr(ar.current),al(t)){if(n=t.stateNode,r=t.memoizedProps,n[sr]=t,(a=n.nodeValue!==r)&&(e=Pt,e!==null))switch(e.tag){case 3:ll(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ll(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sr]=t,t.stateNode=n}return nt(t),null;case 13:if(ke(Ee),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Et!==null&&t.mode&1&&!(t.flags&128))pm(),In(),t.flags|=98560,a=!1;else if(a=al(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(R(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(R(317));a[sr]=t}else In(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),a=!1}else Yt!==null&&(Ki(Yt),Yt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Xe===0&&(Xe=3):Ko())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return An(),Bi(e,t),e===null&&Ns(t.stateNode.containerInfo),nt(t),null;case 10:return Ro(t.type._context),nt(t),null;case 17:return bt(t.type)&&Rl(),nt(t),null;case 19:if(ke(Ee),a=t.memoizedState,a===null)return nt(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)Zn(a,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ul(e),i!==null){for(t.flags|=128,Zn(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(Ee,Ee.current&1|2),t.child}e=e.sibling}a.tail!==null&&Me()>On&&(t.flags|=128,n=!0,Zn(a,!1),t.lanes=4194304)}else{if(!n)if(e=Ul(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Zn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!_e)return nt(t),null}else 2*Me()-a.renderingStartTime>On&&r!==1073741824&&(t.flags|=128,n=!0,Zn(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Me(),t.sibling=null,r=Ee.current,be(Ee,n?r&1|2:r&1),t):(nt(t),null);case 22:case 23:return Qo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?kt&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Tg(e,t){switch(Po(t),t.tag){case 1:return bt(t.type)&&Rl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(),ke(jt),ke(lt),zo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ao(t),null;case 13:if(ke(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Ee),null;case 4:return An(),null;case 10:return Ro(t.type._context),null;case 22:case 23:return Qo(),null;case 24:return null;default:return null}}var cl=!1,st=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,Y=null;function kn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Re(e,t,n)}else r.current=null}function Wi(e,t,r){try{r()}catch(n){Re(e,t,n)}}var vd=!1;function Mg(e,t){if(Ci=Pl,e=rm(),_o(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var l=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,h=0,f=e,g=null;t:for(;;){for(var y;f!==r||l!==0&&f.nodeType!==3||(o=i+l),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(y=f.firstChild)!==null;)g=f,f=y;for(;;){if(f===e)break t;if(g===r&&++d===l&&(o=i),g===a&&++h===n&&(c=i),(y=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(_i={focusedElem:e,selectionRange:r},Pl=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,_=w.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ht(t.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(j){Re(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=vd,vd=!1,w}function fs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Wi(t,r,a)}l=l.next}while(l!==n)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Vi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zm(e){var t=e.alternate;t!==null&&(e.alternate=null,Zm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sr],delete t[ks],delete t[Li],delete t[vg],delete t[yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qm(e){return e.tag===5||e.tag===3||e.tag===4}function yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Dl));else if(n!==4&&(e=e.child,e!==null))for(Hi(e,t,r),e=e.sibling;e!==null;)Hi(e,t,r),e=e.sibling}function Gi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Gi(e,t,r),e=e.sibling;e!==null;)Gi(e,t,r),e=e.sibling}var qe=null,Gt=!1;function br(e,t,r){for(r=r.child;r!==null;)eh(e,t,r),r=r.sibling}function eh(e,t,r){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Ql,r)}catch{}switch(r.tag){case 5:st||kn(r,t);case 6:var n=qe,l=Gt;qe=null,br(e,t,r),qe=n,Gt=l,qe!==null&&(Gt?(e=qe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qe.removeChild(r.stateNode));break;case 18:qe!==null&&(Gt?(e=qe,r=r.stateNode,e.nodeType===8?za(e.parentNode,r):e.nodeType===1&&za(e,r),ws(e)):za(qe,r.stateNode));break;case 4:n=qe,l=Gt,qe=r.stateNode.containerInfo,Gt=!0,br(e,t,r),qe=n,Gt=l;break;case 0:case 11:case 14:case 15:if(!st&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){l=n=n.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Wi(r,t,i),l=l.next}while(l!==n)}br(e,t,r);break;case 1:if(!st&&(kn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Re(r,t,o)}br(e,t,r);break;case 21:br(e,t,r);break;case 22:r.mode&1?(st=(n=st)||r.memoizedState!==null,br(e,t,r),st=n):br(e,t,r);break;default:br(e,t,r)}}function wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ig),t.forEach(function(n){var l=Hg.bind(null,e,n);r.has(n)||(r.add(n),n.then(l,l))})}}function Vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var l=r[n];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:qe=o.stateNode,Gt=!1;break e;case 3:qe=o.stateNode.containerInfo,Gt=!0;break e;case 4:qe=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(qe===null)throw Error(R(160));eh(a,i,l),qe=null,Gt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(d){Re(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)th(t,e),t=t.sibling}function th(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),tr(e),n&4){try{fs(3,e,e.return),na(3,e)}catch(b){Re(e,e.return,b)}try{fs(5,e,e.return)}catch(b){Re(e,e.return,b)}}break;case 1:Vt(t,e),tr(e),n&512&&r!==null&&kn(r,r.return);break;case 5:if(Vt(t,e),tr(e),n&512&&r!==null&&kn(r,r.return),e.flags&32){var l=e.stateNode;try{gs(l,"")}catch(b){Re(e,e.return,b)}}if(n&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Nf(l,a),gi(o,i);var d=gi(o,a);for(i=0;i<c.length;i+=2){var h=c[i],f=c[i+1];h==="style"?Ef(l,f):h==="dangerouslySetInnerHTML"?Cf(l,f):h==="children"?gs(l,f):ho(l,h,f,d)}switch(o){case"input":di(l,a);break;case"textarea":Sf(l,a);break;case"select":var g=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?_n(l,!!a.multiple,y,!1):g!==!!a.multiple&&(a.defaultValue!=null?_n(l,!!a.multiple,a.defaultValue,!0):_n(l,!!a.multiple,a.multiple?[]:"",!1))}l[ks]=a}catch(b){Re(e,e.return,b)}}break;case 6:if(Vt(t,e),tr(e),n&4){if(e.stateNode===null)throw Error(R(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(b){Re(e,e.return,b)}}break;case 3:if(Vt(t,e),tr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(b){Re(e,e.return,b)}break;case 4:Vt(t,e),tr(e);break;case 13:Vt(t,e),tr(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Yo=Me())),n&4&&wd(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(st=(d=st)||h,Vt(t,e),st=d):Vt(t,e),tr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Y=e,h=e.child;h!==null;){for(f=Y=h;Y!==null;){switch(g=Y,y=g.child,g.tag){case 0:case 11:case 14:case 15:fs(4,g,g.return);break;case 1:kn(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){n=g,r=g.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(b){Re(n,r,b)}}break;case 5:kn(g,g.return);break;case 22:if(g.memoizedState!==null){bd(f);continue}}y!==null?(y.return=g,Y=y):bd(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{l=f.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_f("display",i))}catch(b){Re(e,e.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Re(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vt(t,e),tr(e),n&4&&wd(e);break;case 21:break;default:Vt(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qm(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var l=n.stateNode;n.flags&32&&(gs(l,""),n.flags&=-33);var a=yd(e);Gi(e,a,l);break;case 3:case 4:var i=n.stateNode.containerInfo,o=yd(e);Hi(e,o,i);break;default:throw Error(R(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ag(e,t,r){Y=e,rh(e)}function rh(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var l=Y,a=l.child;if(l.tag===22&&n){var i=l.memoizedState!==null||cl;if(!i){var o=l.alternate,c=o!==null&&o.memoizedState!==null||st;o=cl;var d=st;if(cl=i,(st=c)&&!d)for(Y=l;Y!==null;)i=Y,c=i.child,i.tag===22&&i.memoizedState!==null?Nd(l):c!==null?(c.return=i,Y=c):Nd(l);for(;a!==null;)Y=a,rh(a),a=a.sibling;Y=l,cl=o,st=d}jd(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,Y=a):jd(e)}}function jd(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||na(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!st)if(r===null)n.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Ht(t.type,r.memoizedProps);n.componentDidUpdate(l,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ld(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ld(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ws(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}st||t.flags&512&&Vi(t)}catch(g){Re(t,t.return,g)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function bd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Nd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{na(4,t)}catch(c){Re(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var l=t.return;try{n.componentDidMount()}catch(c){Re(t,l,c)}}var a=t.return;try{Vi(t)}catch(c){Re(t,a,c)}break;case 5:var i=t.return;try{Vi(t)}catch(c){Re(t,i,c)}}}catch(c){Re(t,t.return,c)}if(t===e){Y=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Y=o;break}Y=t.return}}var zg=Math.ceil,Wl=wr.ReactCurrentDispatcher,Ho=wr.ReactCurrentOwner,$t=wr.ReactCurrentBatchConfig,fe=0,Je=null,Ue=null,et=0,kt=0,Cn=$r(0),Xe=0,Fs=null,an=0,sa=0,Go=0,ms=null,yt=null,Yo=0,On=1/0,dr=null,Vl=!1,Yi=null,Ir=null,ul=!1,Er=null,Hl=0,hs=0,Xi=null,jl=-1,bl=0;function ct(){return fe&6?Me():jl!==-1?jl:jl=Me()}function Mr(e){return e.mode&1?fe&2&&et!==0?et&-et:jg.transition!==null?(bl===0&&(bl=Uf()),bl):(e=ge,e!==0||(e=window.event,e=e===void 0?16:Yf(e.type)),e):1}function Jt(e,t,r,n){if(50<hs)throw hs=0,Xi=null,Error(R(185));Ms(e,r,n),(!(fe&2)||e!==Je)&&(e===Je&&(!(fe&2)&&(sa|=r),Xe===4&&Cr(e,et)),Nt(e,n),r===1&&fe===0&&!(t.mode&1)&&(On=Me()+500,ea&&Br()))}function Nt(e,t){var r=e.callbackNode;j0(e,t);var n=El(e,e===Je?et:0);if(n===0)r!==null&&Du(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Du(r),t===1)e.tag===0?wg(Sd.bind(null,e)):fm(Sd.bind(null,e)),gg(function(){!(fe&6)&&Br()}),r=null;else{switch($f(n)){case 1:r=yo;break;case 4:r=zf;break;case 16:r=_l;break;case 536870912:r=Of;break;default:r=_l}r=uh(r,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nh(e,t){if(jl=-1,bl=0,fe&6)throw Error(R(327));var r=e.callbackNode;if(Dn()&&e.callbackNode!==r)return null;var n=El(e,e===Je?et:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Gl(e,n);else{t=n;var l=fe;fe|=2;var a=lh();(Je!==e||et!==t)&&(dr=null,On=Me()+500,qr(e,t));do try{$g();break}catch(o){sh(e,o)}while(!0);Do(),Wl.current=a,fe=l,Ue!==null?t=0:(Je=null,et=0,t=Xe)}if(t!==0){if(t===2&&(l=ji(e),l!==0&&(n=l,t=Qi(e,l))),t===1)throw r=Fs,qr(e,0),Cr(e,n),Nt(e,Me()),r;if(t===6)Cr(e,n);else{if(l=e.current.alternate,!(n&30)&&!Og(l)&&(t=Gl(e,n),t===2&&(a=ji(e),a!==0&&(n=a,t=Qi(e,a))),t===1))throw r=Fs,qr(e,0),Cr(e,n),Nt(e,Me()),r;switch(e.finishedWork=l,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:Qr(e,yt,dr);break;case 3:if(Cr(e,n),(n&130023424)===n&&(t=Yo+500-Me(),10<t)){if(El(e,0)!==0)break;if(l=e.suspendedLanes,(l&n)!==n){ct(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Pi(Qr.bind(null,e,yt,dr),t);break}Qr(e,yt,dr);break;case 4:if(Cr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,l=-1;0<n;){var i=31-Kt(n);a=1<<i,i=t[i],i>l&&(l=i),n&=~a}if(n=l,n=Me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zg(n/1960))-n,10<n){e.timeoutHandle=Pi(Qr.bind(null,e,yt,dr),n);break}Qr(e,yt,dr);break;case 5:Qr(e,yt,dr);break;default:throw Error(R(329))}}}return Nt(e,Me()),e.callbackNode===r?nh.bind(null,e):null}function Qi(e,t){var r=ms;return e.current.memoizedState.isDehydrated&&(qr(e,t).flags|=256),e=Gl(e,t),e!==2&&(t=yt,yt=r,t!==null&&Ki(t)),e}function Ki(e){yt===null?yt=e:yt.push.apply(yt,e)}function Og(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var l=r[n],a=l.getSnapshot;l=l.value;try{if(!qt(a(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~Go,t&=~sa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),n=1<<r;e[r]=-1,t&=~n}}function Sd(e){if(fe&6)throw Error(R(327));Dn();var t=El(e,0);if(!(t&1))return Nt(e,Me()),null;var r=Gl(e,t);if(e.tag!==0&&r===2){var n=ji(e);n!==0&&(t=n,r=Qi(e,n))}if(r===1)throw r=Fs,qr(e,0),Cr(e,t),Nt(e,Me()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qr(e,yt,dr),Nt(e,Me()),null}function Xo(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(On=Me()+500,ea&&Br())}}function on(e){Er!==null&&Er.tag===0&&!(fe&6)&&Dn();var t=fe;fe|=1;var r=$t.transition,n=ge;try{if($t.transition=null,ge=1,e)return e()}finally{ge=n,$t.transition=r,fe=t,!(fe&6)&&Br()}}function Qo(){kt=Cn.current,ke(Cn)}function qr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pg(r)),Ue!==null)for(r=Ue.return;r!==null;){var n=r;switch(Po(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rl();break;case 3:An(),ke(jt),ke(lt),zo();break;case 5:Ao(n);break;case 4:An();break;case 13:ke(Ee);break;case 19:ke(Ee);break;case 10:Ro(n.type._context);break;case 22:case 23:Qo()}r=r.return}if(Je=e,Ue=e=Ar(e.current,null),et=kt=t,Xe=0,Fs=null,Go=sa=an=0,yt=ms=null,Jr!==null){for(t=0;t<Jr.length;t++)if(r=Jr[t],n=r.interleaved,n!==null){r.interleaved=null;var l=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,n.next=i}r.pending=n}Jr=null}return e}function sh(e,t){do{var r=Ue;try{if(Do(),vl.current=Bl,$l){for(var n=Pe.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}$l=!1}if(ln=0,Ke=Ye=Pe=null,ds=!1,Es=0,Ho.current=null,r===null||r.return===null){Xe=1,Fs=t,Ue=null;break}e:{var a=e,i=r.return,o=r,c=t;if(t=et,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=dd(i);if(y!==null){y.flags&=-257,fd(y,i,o,a,t),y.mode&1&&ud(a,d,t),t=y,c=d;var w=t.updateQueue;if(w===null){var b=new Set;b.add(c),t.updateQueue=b}else w.add(c);break e}else{if(!(t&1)){ud(a,d,t),Ko();break e}c=Error(R(426))}}else if(_e&&o.mode&1){var _=dd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),fd(_,i,o,a,t),Lo(zn(c,o));break e}}a=c=zn(c,o),Xe!==4&&(Xe=2),ms===null?ms=[a]:ms.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=$m(a,c,t);sd(a,p);break e;case 1:o=c;var m=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ir===null||!Ir.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=Bm(a,o,t);sd(a,j);break e}}a=a.return}while(a!==null)}ih(r)}catch(E){t=E,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function lh(){var e=Wl.current;return Wl.current=Bl,e===null?Bl:e}function Ko(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),Je===null||!(an&268435455)&&!(sa&268435455)||Cr(Je,et)}function Gl(e,t){var r=fe;fe|=2;var n=lh();(Je!==e||et!==t)&&(dr=null,qr(e,t));do try{Ug();break}catch(l){sh(e,l)}while(!0);if(Do(),fe=r,Wl.current=n,Ue!==null)throw Error(R(261));return Je=null,et=0,Xe}function Ug(){for(;Ue!==null;)ah(Ue)}function $g(){for(;Ue!==null&&!f0();)ah(Ue)}function ah(e){var t=ch(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?ih(e):Ue=t,Ho.current=null}function ih(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Tg(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ue=null;return}}else if(r=Rg(r,t,kt),r!==null){Ue=r;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Xe===0&&(Xe=5)}function Qr(e,t,r){var n=ge,l=$t.transition;try{$t.transition=null,ge=1,Bg(e,t,r,n)}finally{$t.transition=l,ge=n}return null}function Bg(e,t,r,n){do Dn();while(Er!==null);if(fe&6)throw Error(R(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(b0(e,a),e===Je&&(Ue=Je=null,et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ul||(ul=!0,uh(_l,function(){return Dn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=$t.transition,$t.transition=null;var i=ge;ge=1;var o=fe;fe|=4,Ho.current=null,Mg(e,r),th(r,e),og(_i),Pl=!!Ci,_i=Ci=null,e.current=r,Ag(r),m0(),fe=o,ge=i,$t.transition=a}else e.current=r;if(ul&&(ul=!1,Er=e,Hl=l),a=e.pendingLanes,a===0&&(Ir=null),g0(r.stateNode),Nt(e,Me()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],n(l.value,{componentStack:l.stack,digest:l.digest});if(Vl)throw Vl=!1,e=Yi,Yi=null,e;return Hl&1&&e.tag!==0&&Dn(),a=e.pendingLanes,a&1?e===Xi?hs++:(hs=0,Xi=e):hs=0,Br(),null}function Dn(){if(Er!==null){var e=$f(Hl),t=$t.transition,r=ge;try{if($t.transition=null,ge=16>e?16:e,Er===null)var n=!1;else{if(e=Er,Er=null,Hl=0,fe&6)throw Error(R(331));var l=fe;for(fe|=4,Y=e.current;Y!==null;){var a=Y,i=a.child;if(Y.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Y=d;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:fs(8,h,a)}var f=h.child;if(f!==null)f.return=h,Y=f;else for(;Y!==null;){h=Y;var g=h.sibling,y=h.return;if(Zm(h),h===d){Y=null;break}if(g!==null){g.return=y,Y=g;break}Y=y}}}var w=a.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}Y=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Y=i;else e:for(;Y!==null;){if(a=Y,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fs(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,Y=p;break e}Y=a.return}}var m=e.current;for(Y=m;Y!==null;){i=Y;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Y=v;else e:for(i=m;Y!==null;){if(o=Y,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:na(9,o)}}catch(E){Re(o,o.return,E)}if(o===i){Y=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Y=j;break e}Y=o.return}}if(fe=l,Br(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Ql,e)}catch{}n=!0}return n}finally{ge=r,$t.transition=t}}return!1}function kd(e,t,r){t=zn(r,t),t=$m(e,t,1),e=Tr(e,t,1),t=ct(),e!==null&&(Ms(e,1,t),Nt(e,t))}function Re(e,t,r){if(e.tag===3)kd(e,e,r);else for(;t!==null;){if(t.tag===3){kd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ir===null||!Ir.has(n))){e=zn(r,e),e=Bm(t,e,1),t=Tr(t,e,1),e=ct(),t!==null&&(Ms(t,1,e),Nt(t,e));break}}t=t.return}}function Wg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&r,Je===e&&(et&r)===r&&(Xe===4||Xe===3&&(et&130023424)===et&&500>Me()-Yo?qr(e,0):Go|=r),Nt(e,t)}function oh(e,t){t===0&&(e.mode&1?(t=el,el<<=1,!(el&130023424)&&(el=4194304)):t=1);var r=ct();e=vr(e,t),e!==null&&(Ms(e,t,r),Nt(e,r))}function Vg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oh(e,r)}function Hg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),oh(e,r)}var ch;ch=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wt=!1,Dg(e,t,r);wt=!!(e.flags&131072)}else wt=!1,_e&&t.flags&1048576&&mm(t,Ml,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wl(e,t),e=t.pendingProps;var l=Tn(t,lt.current);Fn(t,r),l=Uo(null,t,n,e,l,r);var a=$o();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(n)?(a=!0,Tl(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Io(t),l.updater=ra,t.stateNode=l,l._reactInternals=t,Mi(t,n,e,r),t=Oi(null,t,n,!0,a,r)):(t.tag=0,_e&&a&&Eo(t),it(null,t,l,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wl(e,t),e=t.pendingProps,l=n._init,n=l(n._payload),t.type=n,l=t.tag=Yg(n),e=Ht(n,e),l){case 0:t=zi(null,t,n,e,r);break e;case 1:t=pd(null,t,n,e,r);break e;case 11:t=md(null,t,n,e,r);break e;case 14:t=hd(null,t,n,Ht(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Ht(n,l),zi(e,t,n,l,r);case 1:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Ht(n,l),pd(e,t,n,l,r);case 3:e:{if(Gm(t),e===null)throw Error(R(387));n=t.pendingProps,a=t.memoizedState,l=a.element,ym(e,t),Ol(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=zn(Error(R(423)),t),t=gd(e,t,n,r,l);break e}else if(n!==l){l=zn(Error(R(424)),t),t=gd(e,t,n,r,l);break e}else for(Et=Rr(t.stateNode.containerInfo.firstChild),Pt=t,_e=!0,Yt=null,r=xm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(In(),n===l){t=yr(e,t,r);break e}it(e,t,n,r)}t=t.child}return t;case 5:return wm(t),e===null&&Ri(t),n=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,Ei(n,l)?i=null:a!==null&&Ei(n,a)&&(t.flags|=32),Hm(e,t),it(e,t,i,r),t.child;case 6:return e===null&&Ri(t),null;case 13:return Ym(e,t,r);case 4:return Mo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Mn(t,null,n,r):it(e,t,n,r),t.child;case 11:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Ht(n,l),md(e,t,n,l,r);case 7:return it(e,t,t.pendingProps,r),t.child;case 8:return it(e,t,t.pendingProps.children,r),t.child;case 12:return it(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,be(Al,n._currentValue),n._currentValue=i,a!==null)if(qt(a.value,i)){if(a.children===l.children&&!jt.current){t=yr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=pr(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Ti(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(R(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ti(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}it(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,n=t.pendingProps.children,Fn(t,r),l=Bt(l),n=n(l),t.flags|=1,it(e,t,n,r),t.child;case 14:return n=t.type,l=Ht(n,t.pendingProps),l=Ht(n.type,l),hd(e,t,n,l,r);case 15:return Wm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Ht(n,l),wl(e,t),t.tag=1,bt(n)?(e=!0,Tl(t)):e=!1,Fn(t,r),Um(t,n,l),Mi(t,n,l,r),Oi(null,t,n,!0,e,r);case 19:return Xm(e,t,r);case 22:return Vm(e,t,r)}throw Error(R(156,t.tag))};function uh(e,t){return Af(e,t)}function Gg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,n){return new Gg(e,t,r,n)}function Jo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yg(e){if(typeof e=="function")return Jo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===go)return 11;if(e===xo)return 14}return 2}function Ar(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nl(e,t,r,n,l,a){var i=2;if(n=e,typeof e=="function")Jo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case gn:return en(r.children,l,a,t);case po:i=8,l|=8;break;case ai:return e=Ot(12,r,t,l|2),e.elementType=ai,e.lanes=a,e;case ii:return e=Ot(13,r,t,l),e.elementType=ii,e.lanes=a,e;case oi:return e=Ot(19,r,t,l),e.elementType=oi,e.lanes=a,e;case wf:return la(r,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vf:i=10;break e;case yf:i=9;break e;case go:i=11;break e;case xo:i=14;break e;case Nr:i=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Ot(i,r,t,l),t.elementType=e,t.type=n,t.lanes=a,t}function en(e,t,r,n){return e=Ot(7,e,n,t),e.lanes=r,e}function la(e,t,r,n){return e=Ot(22,e,n,t),e.elementType=wf,e.lanes=r,e.stateNode={isHidden:!1},e}function Ga(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function Ya(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xg(e,t,r,n,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Zo(e,t,r,n,l,a,i,o,c){return e=new Xg(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ot(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Io(a),e}function Qg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function dh(e){if(!e)return Or;e=e._reactInternals;e:{if(un(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(bt(r))return dm(e,r,t)}return t}function fh(e,t,r,n,l,a,i,o,c){return e=Zo(r,n,!0,e,l,a,i,o,c),e.context=dh(null),r=e.current,n=ct(),l=Mr(r),a=pr(n,l),a.callback=t??null,Tr(r,a,l),e.current.lanes=l,Ms(e,l,n),Nt(e,n),e}function aa(e,t,r,n){var l=t.current,a=ct(),i=Mr(l);return r=dh(r),t.context===null?t.context=r:t.pendingContext=r,t=pr(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Tr(l,t,i),e!==null&&(Jt(e,l,i,a),xl(e,l,i)),i}function Yl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qo(e,t){Cd(e,t),(e=e.alternate)&&Cd(e,t)}function Kg(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}ia.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));aa(e,t,null,null)};ia.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;on(function(){aa(null,e,null,null)}),t[xr]=null}};function ia(e){this._internalRoot=e}ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<kr.length&&t!==0&&t<kr[r].priority;r++);kr.splice(r,0,e),r===0&&Gf(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _d(){}function Jg(e,t,r,n,l){if(l){if(typeof n=="function"){var a=n;n=function(){var d=Yl(i);a.call(d)}}var i=fh(t,n,e,0,null,!1,!1,"",_d);return e._reactRootContainer=i,e[xr]=i.current,Ns(e.nodeType===8?e.parentNode:e),on(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof n=="function"){var o=n;n=function(){var d=Yl(c);o.call(d)}}var c=Zo(e,0,!1,null,null,!1,!1,"",_d);return e._reactRootContainer=c,e[xr]=c.current,Ns(e.nodeType===8?e.parentNode:e),on(function(){aa(t,c,r,n)}),c}function ca(e,t,r,n,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var c=Yl(i);o.call(c)}}aa(t,i,e,l)}else i=Jg(r,t,e,l,n);return Yl(i)}Bf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ss(t.pendingLanes);r!==0&&(wo(t,r|1),Nt(t,Me()),!(fe&6)&&(On=Me()+500,Br()))}break;case 13:on(function(){var n=vr(e,1);if(n!==null){var l=ct();Jt(n,e,1,l)}}),qo(e,1)}};jo=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=ct();Jt(t,e,134217728,r)}qo(e,134217728)}};Wf=function(e){if(e.tag===13){var t=Mr(e),r=vr(e,t);if(r!==null){var n=ct();Jt(r,e,t,n)}qo(e,t)}};Vf=function(){return ge};Hf=function(e,t){var r=ge;try{return ge=e,t()}finally{ge=r}};vi=function(e,t,r){switch(t){case"input":if(di(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var l=ql(n);if(!l)throw Error(R(90));bf(n),di(n,l)}}}break;case"textarea":Sf(e,r);break;case"select":t=r.value,t!=null&&_n(e,!!r.multiple,t,!1)}};Ff=Xo;Df=on;var Zg={usingClientEntryPoint:!1,Events:[zs,wn,ql,Pf,Lf,Xo]},qn={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qg={bundleType:qn.bundleType,version:qn.version,rendererPackageName:qn.rendererPackageName,rendererConfig:qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=If(e),e===null?null:e.stateNode},findFiberByHostInstance:qn.findFiberByHostInstance||Kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Ql=dl.inject(qg),lr=dl}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;Dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(t))throw Error(R(200));return Qg(e,t,null,r)};Dt.createRoot=function(e,t){if(!tc(e))throw Error(R(299));var r=!1,n="",l=mh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Zo(e,1,!1,null,null,r,!1,n,l),e[xr]=t.current,Ns(e.nodeType===8?e.parentNode:e),new ec(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=If(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return on(e)};Dt.hydrate=function(e,t,r){if(!oa(t))throw Error(R(200));return ca(null,e,t,!0,r)};Dt.hydrateRoot=function(e,t,r){if(!tc(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,l=!1,a="",i=mh;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=fh(t,null,e,1,r??null,l,!1,a,i),e[xr]=t.current,Ns(e),n)for(e=0;e<n.length;e++)r=n[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new ia(t)};Dt.render=function(e,t,r){if(!oa(t))throw Error(R(200));return ca(null,e,t,!1,r)};Dt.unmountComponentAtNode=function(e){if(!oa(e))throw Error(R(40));return e._reactRootContainer?(on(function(){ca(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1};Dt.unstable_batchedUpdates=Xo;Dt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!oa(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ca(e,t,r,!1,n)};Dt.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(e){console.error(e)}}hh(),hf.exports=Dt;var rc=hf.exports,Ed=rc;si.createRoot=Ed.createRoot,si.hydrateRoot=Ed.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ds(){return Ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ds.apply(this,arguments)}var Pr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pr||(Pr={}));const Pd="popstate";function ex(e){e===void 0&&(e={});function t(n,l){let{pathname:a,search:i,hash:o}=n.location;return Ji("",{pathname:a,search:i,hash:o},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:ph(l)}return rx(t,r,null,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tx(){return Math.random().toString(36).substr(2,8)}function Ld(e,t){return{usr:e.state,key:e.key,idx:t}}function Ji(e,t,r,n){return r===void 0&&(r=null),Ds({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vn(t):t,{state:r,key:t&&t.key||n||tx()})}function ph(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function rx(e,t,r,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:a=!1}=n,i=l.history,o=Pr.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(Ds({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function f(){o=Pr.Pop;let _=h(),p=_==null?null:_-d;d=_,c&&c({action:o,location:b.location,delta:p})}function g(_,p){o=Pr.Push;let m=Ji(b.location,_,p);d=h()+1;let v=Ld(m,d),j=b.createHref(m);try{i.pushState(v,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;l.location.assign(j)}a&&c&&c({action:o,location:b.location,delta:1})}function y(_,p){o=Pr.Replace;let m=Ji(b.location,_,p);d=h();let v=Ld(m,d),j=b.createHref(m);i.replaceState(v,"",j),a&&c&&c({action:o,location:b.location,delta:0})}function w(_){let p=l.location.origin!=="null"?l.location.origin:l.location.href,m=typeof _=="string"?_:ph(_);return m=m.replace(/ $/,"%20"),$e(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let b={get action(){return o},get location(){return e(l,i)},listen(_){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(Pd,f),c=_,()=>{l.removeEventListener(Pd,f),c=null}},createHref(_){return t(l,_)},createURL:w,encodeLocation(_){let p=w(_);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:g,replace:y,go(_){return i.go(_)}};return b}var Fd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fd||(Fd={}));function nx(e,t,r){return r===void 0&&(r="/"),sx(e,t,r)}function sx(e,t,r,n){let l=typeof t=="string"?Vn(t):t,a=vh(l.pathname||"/",r);if(a==null)return null;let i=gh(e);lx(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=xx(a);o=hx(i[c],d)}return o}function gh(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let l=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=tn([n,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&($e(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gh(a.children,t,h,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:fx(d,a.index),routesMeta:h})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))l(a,i);else for(let c of xh(a.path))l(a,i,c)}),t}function xh(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,l=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return l?[a,""]:[a];let i=xh(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),l&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function lx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:mx(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ax=/^:[\w-]+$/,ix=3,ox=2,cx=1,ux=10,dx=-2,Dd=e=>e==="*";function fx(e,t){let r=e.split("/"),n=r.length;return r.some(Dd)&&(n+=dx),t&&(n+=ox),r.filter(l=>!Dd(l)).reduce((l,a)=>l+(ax.test(a)?ix:a===""?cx:ux),n)}function mx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function hx(e,t,r){let{routesMeta:n}=e,l={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,h=a==="/"?t:t.slice(a.length)||"/",f=px({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),g=c.route;if(!f)return null;Object.assign(l,f.params),i.push({params:l,pathname:tn([a,f.pathname]),pathnameBase:bx(tn([a,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(a=tn([a,f.pathnameBase]))}return i}function px(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=gx(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let a=l[0],i=a.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let b=o[f]||"";i=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const w=o[f];return y&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:e}}function gx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),nc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function xx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yx=e=>vx.test(e);function wx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:l=""}=typeof e=="string"?Vn(e):e,a;if(r)if(yx(r))a=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),nc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?a=Rd(r.substring(1),"/"):a=Rd(r,t)}else a=t;return{pathname:a,search:Nx(n),hash:Sx(l)}}function Rd(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Xa(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function yh(e,t){let r=jx(e);return t?r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function wh(e,t,r,n){n===void 0&&(n=!1);let l;typeof e=="string"?l=Vn(e):(l=Ds({},e),$e(!l.pathname||!l.pathname.includes("?"),Xa("?","pathname","search",l)),$e(!l.pathname||!l.pathname.includes("#"),Xa("#","pathname","hash",l)),$e(!l.search||!l.search.includes("#"),Xa("#","search","hash",l)));let a=e===""||l.pathname==="",i=a?"/":l.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),f-=1;l.pathname=g.join("/")}o=f>=0?t[f]:"/"}let c=wx(l,o),d=i&&i!=="/"&&i.endsWith("/"),h=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const tn=e=>e.join("/").replace(/\/\/+/g,"/"),bx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jh=["post","put","patch","delete"];new Set(jh);const Cx=["get",...jh];new Set(Cx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(this,arguments)}const sc=u.createContext(null),_x=u.createContext(null),Us=u.createContext(null),ua=u.createContext(null),Wr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),bh=u.createContext(null);function $s(){return u.useContext(ua)!=null}function dn(){return $s()||$e(!1),u.useContext(ua).location}function Nh(e){u.useContext(Us).static||u.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=u.useContext(Wr);return e?$x():Ex()}function Ex(){$s()||$e(!1);let e=u.useContext(sc),{basename:t,future:r,navigator:n}=u.useContext(Us),{matches:l}=u.useContext(Wr),{pathname:a}=dn(),i=JSON.stringify(yh(l,r.v7_relativeSplatPath)),o=u.useRef(!1);return Nh(()=>{o.current=!0}),u.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let f=wh(d,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:tn([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,i,a,e])}function Px(){let{matches:e}=u.useContext(Wr),t=e[e.length-1];return t?t.params:{}}function Lx(e,t){return Fx(e,t)}function Fx(e,t,r,n){$s()||$e(!1);let{navigator:l}=u.useContext(Us),{matches:a}=u.useContext(Wr),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=dn(),h;if(t){var f;let _=typeof t=="string"?Vn(t):t;c==="/"||(f=_.pathname)!=null&&f.startsWith(c)||$e(!1),h=_}else h=d;let g=h.pathname||"/",y=g;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=nx(e,{pathname:y}),b=Mx(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:tn([c,l.encodeLocation?l.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:tn([c,l.encodeLocation?l.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,n);return t&&b?u.createElement(ua.Provider,{value:{location:Rs({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Pr.Pop}},b):b}function Dx(){let e=Ux(),t=kx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:l},r):null,null)}const Rx=u.createElement(Dx,null);class Tx extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(Wr.Provider,{value:this.props.routeContext},u.createElement(bh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(e){let{routeContext:t,match:r,children:n}=e,l=u.useContext(sc);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Wr.Provider,{value:t},n)}function Mx(e,t,r,n){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(l=r)==null?void 0:l.errors;if(o!=null){let h=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||$e(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:g,errors:y}=r,w=f.route.loader&&g[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,f,g)=>{let y,w=!1,b=null,_=null;r&&(y=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||Rx,c&&(d<0&&g===0?(Bx("route-fallback"),w=!0,_=null):d===g&&(w=!0,_=f.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,g+1)),m=()=>{let v;return y?v=b:w?v=_:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=h,u.createElement(Ix,{match:f,routeContext:{outlet:h,matches:p,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?u.createElement(Tx,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Sh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Sh||{}),kh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kh||{});function Ax(e){let t=u.useContext(sc);return t||$e(!1),t}function zx(e){let t=u.useContext(_x);return t||$e(!1),t}function Ox(e){let t=u.useContext(Wr);return t||$e(!1),t}function Ch(e){let t=Ox(),r=t.matches[t.matches.length-1];return r.route.id||$e(!1),r.route.id}function Ux(){var e;let t=u.useContext(bh),r=zx(),n=Ch();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function $x(){let{router:e}=Ax(Sh.UseNavigateStable),t=Ch(kh.UseNavigateStable),r=u.useRef(!1);return Nh(()=>{r.current=!0}),u.useCallback(function(l,a){a===void 0&&(a={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Rs({fromRouteId:t},a)))},[e,t])}const Td={};function Bx(e,t,r){Td[e]||(Td[e]=!0)}function Wx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _h(e){let{to:t,replace:r,state:n,relative:l}=e;$s()||$e(!1);let{future:a,static:i}=u.useContext(Us),{matches:o}=u.useContext(Wr),{pathname:c}=dn(),d=Tt(),h=wh(t,yh(o,a.v7_relativeSplatPath),c,l==="path"),f=JSON.stringify(h);return u.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:l}),[d,f,l,r,n]),null}function Mt(e){$e(!1)}function Vx(e){let{basename:t="/",children:r=null,location:n,navigationType:l=Pr.Pop,navigator:a,static:i=!1,future:o}=e;$s()&&$e(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:a,static:i,future:Rs({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=Vn(n));let{pathname:h="/",search:f="",hash:g="",state:y=null,key:w="default"}=n,b=u.useMemo(()=>{let _=vh(h,c);return _==null?null:{location:{pathname:_,search:f,hash:g,state:y,key:w},navigationType:l}},[c,h,f,g,y,w,l]);return b==null?null:u.createElement(Us.Provider,{value:d},u.createElement(ua.Provider,{children:r,value:b}))}function Hx(e){let{children:t,location:r}=e;return Lx(Zi(t),r)}new Promise(()=>{});function Zi(e,t){t===void 0&&(t=[]);let r=[];return u.Children.forEach(e,(n,l)=>{if(!u.isValidElement(n))return;let a=[...t,l];if(n.type===u.Fragment){r.push.apply(r,Zi(n.props.children,a));return}n.type!==Mt&&$e(!1),!n.props.index||!n.props.children||$e(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Zi(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Gx="6";try{window.__reactRouterVersion=Gx}catch{}const Yx="startTransition",Id=Wp[Yx];function Xx(e){let{basename:t,children:r,future:n,window:l}=e,a=u.useRef();a.current==null&&(a.current=ex({window:l,v5Compat:!0}));let i=a.current,[o,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},h=u.useCallback(f=>{d&&Id?Id(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>i.listen(h),[i,h]),u.useEffect(()=>Wx(n),[n]),u.createElement(Vx,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var Md;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Md||(Md={}));var Ad;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ad||(Ad={}));const Qx="modulepreload",Kx=function(e){return"/"+e},zd={},Eh=function(t,r,n){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(r.map(c=>{if(c=Kx(c),c in zd)return;zd[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Qx,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return l.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Ph=u.createContext(void 0);function Jx({children:e}){const[t,r]=u.useState(null),[n,l]=u.useState(!0),a=Tt();u.useEffect(()=>{const c=localStorage.getItem("user");if(c)try{r(JSON.parse(c))}catch{localStorage.removeItem("user")}l(!1)},[]);const i=(c,d)=>{localStorage.setItem("user",JSON.stringify(d)),r(d),a("/")},o=()=>{localStorage.removeItem("user"),r(null),a("/auth")};return s.jsx(Ph.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:n,login:i,logout:o},children:e})}function jr(){const e=u.useContext(Ph);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Zx="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec";class qx{getUserEmail(){const t=localStorage.getItem("user");if(!t)return null;try{return JSON.parse(t).email||null}catch{return null}}async request(t,r={}){var i,o,c,d,h;const n=this.getUserEmail(),l={...r.headers||{}},a=n?`&auth=${encodeURIComponent("Email "+n)}`:"";try{const g=await(await fetch(`${Zx}?path=${t}${a}`,{...r,headers:l})).json();if(!g.ok){if(((i=g.error)==null?void 0:i.code)==="INVALID_TOKEN"||((o=g.error)==null?void 0:o.code)==="AUTH_REQUIRED"||((c=g.error)==null?void 0:c.code)==="FORBIDDEN"){localStorage.removeItem("user");const y=((d=g.error)==null?void 0:d.message)||"Your account is not authorized to access this application.";throw localStorage.setItem("auth_error",y),window.location.href="/auth",new Error(y)}throw new Error(((h=g.error)==null?void 0:h.message)||"An error occurred")}return g.data}catch(f){throw f instanceof Error?f:new Error("Network error")}}async get(t,r,n={}){const l=r?Object.fromEntries(Object.entries(r).filter(([i,o])=>o!==void 0)):void 0,a=l?"&"+new URLSearchParams(l).toString():"";return this.request(`${t}${a}`,{method:"POST",...n})}async post(t,r,n={}){return this.request(t,{method:"POST",body:JSON.stringify(r),...n})}async put(t,r){return this.request(t,{method:"PUT",body:JSON.stringify(r)})}}const oe=new qx,Od={async get(){return oe.get("profile/get")},async save(e){return oe.post("profile/save",e)}};function ev(e){return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{const a=n.result.split(",")[1];t(a)},n.onerror=r})}const Lh=u.createContext(void 0);let es=null,Qa=null;function tv({children:e}){const{isAuthenticated:t,isLoading:r}=jr(),[n,l]=u.useState(null),[a,i]=u.useState(!1),[o,c]=u.useState(null),d=async()=>{if(t){i(!0);try{const f=await Od.get();if(l({pseudo:f.pseudo,famileo_email:f.famileo_email,famileo_name:f.famileo_name,famileo_password_set:f.famileo_password_set,avatar_url:f.avatar_url}),f.avatar_base64&&f.avatar_url!==Qa)try{const g=`data:image/jpeg;base64,${f.avatar_base64}`;es&&URL.revokeObjectURL(es),es=g,Qa=f.avatar_url,c(g)}catch(g){console.error("Failed to convert avatar to data URL:",g),c(null)}else f.avatar_url===Qa&&es?c(es):f.avatar_base64||c(null)}catch(f){console.error("Failed to load profile:",f)}finally{i(!1)}}};u.useEffect(()=>{!r&&t&&d()},[t,r]);const h=async(f,g,y,w,b)=>{try{const _={pseudo:f,famileo_email:g,famileo_name:y};if(w&&w.trim()&&(_.famileo_password=w.trim()),b){const m=await ev(b);_.avatar=m}const p=await Od.save(_);l({pseudo:p.pseudo,famileo_email:p.famileo_email,famileo_password_set:p.famileo_password_set,avatar_url:p.avatar_url}),await d()}catch(_){throw console.error("Failed to save profile:",_),_}};return s.jsx(Lh.Provider,{value:{profile:n,isLoading:a,saveProfile:h,reloadProfile:d,avatarBlobUrl:o},children:e})}function lc(){const e=u.useContext(Lh);if(!e)throw new Error("useProfile must be used within ProfileProvider");return e}function _t({size:e="md",className:t=""}){const n={sm:{width:16,height:16,border:2},md:{width:32,height:32,border:3},lg:{width:48,height:48,border:4}}[e];return s.jsx("div",{className:`rounded-full animate-spin ${t}`,style:{width:n.width,height:n.height,borderWidth:n.border,borderStyle:"solid",borderColor:"#2563eb",borderTopColor:"transparent"}})}function Bs({message:e="Loading..."}){return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx(_t,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:e})]})}function ur({children:e}){const{isAuthenticated:t,isLoading:r}=jr();return r?s.jsx(Bs,{message:"Checking authentication..."}):t?s.jsx(s.Fragment,{children:e}):s.jsx(_h,{to:"/auth",replace:!0})}function ve({variant:e="primary",fullWidth:t=!1,className:r="",children:n,...l}){const a="px-6 py-3 rounded-lg font-medium transition-colors touch-manipulation flex items-center justify-center",i={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 disabled:bg-gray-300",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400 disabled:bg-gray-100",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800 disabled:bg-gray-300"},o=t?"w-full":"";return s.jsx("button",{className:`${a} ${i[e]} ${o} ${r}`,...l,children:n})}const Ts={MAX_TEXT_LENGTH:300,MAX_PHOTOS_IN_ASSEMBLY:10,IMAGE_MAX_SIZE_MB:2,TIMEZONE:"Europe/Paris",PDF_POLL_INTERVAL_MS:3e3,INFINITE_SCROLL_THRESHOLD:.8,TARGET_IMAGE_WIDTH_PX:2480,ARTICLES_PER_PAGE:10},Fh=["January","February","March","April","May","June","July","August","September","October","November","December"];function Dh(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function rv(){const{login:e}=jr(),t=Tt(),[r,n]=u.useState(!1),[l,a]=u.useState(null),[i]=u.useState(Dh()),[o,c]=u.useState(!1);u.useEffect(()=>{var w;const h=localStorage.getItem("user");if(!h)return;let f="";try{f=((w=JSON.parse(h))==null?void 0:w.email)||""}catch{localStorage.removeItem("user");return}if(!f)return;n(!0);const g="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",y=`&auth=${encodeURIComponent("Email "+f)}`;fetch(`${g}?path=auth/check${y}`,{method:"POST"}).then(b=>b.json()).then(b=>{if(b!=null&&b.ok){t("/");return}localStorage.removeItem("user")}).catch(()=>{localStorage.removeItem("user")}).finally(()=>{n(!1)})},[t]),u.useEffect(()=>{const h=localStorage.getItem("auth_error");h&&(a(h),localStorage.removeItem("auth_error"))},[]),u.useEffect(()=>{const h=document.createElement("script");return h.src="https://accounts.google.com/gsi/client",h.async=!0,h.defer=!0,document.body.appendChild(h),()=>{document.body.removeChild(h)}},[]);const d=()=>{var f,g,y;n(!0),a(null);const h=(y=(g=(f=window.google)==null?void 0:f.accounts)==null?void 0:g.oauth2)==null?void 0:y.initTokenClient({client_id:"175845978100-rqclosiat622f3b7ijpg17t2fnrnb522.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",callback:w=>{w.access_token?fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${w.access_token}`}}).then(b=>b.json()).then(b=>{const _=b.email,p=b.name,m="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",v=`&auth=${encodeURIComponent("Email "+_)}`;fetch(`${m}?path=auth/check${v}`,{method:"POST"}).then(j=>j.json()).then(j=>{var E;if(!(j!=null&&j.ok)){a(((E=j==null?void 0:j.error)==null?void 0:E.message)||"Your account is not authorized to access this application.");return}e(w.access_token,{email:_,name:p})}).catch(()=>{a("Failed to verify authorization")}).finally(()=>{n(!1)})}).catch(()=>{a("Failed to get user information"),n(!1),i&&c(!0)}):(a("Failed to authenticate with Google"),n(!1),i&&c(!0))},error_callback:()=>{a("Google Sign-In failed"),n(!1),i&&c(!0)}});h==null||h.requestAccessToken()};return r?s.jsx(Bs,{message:"Signing in..."}):i&&o?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),s.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),s.jsx("div",{className:"mb-6 w-full max-w-md",children:s.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Safari login required"}),s.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"Google sign-in doesn't work in app mode. Please login from Safari:"}),s.jsxs("ol",{className:"text-blue-800 text-sm space-y-2 mb-4 list-decimal list-inside",children:[s.jsx("li",{children:"Open Safari on your iPhone"}),s.jsxs("li",{children:["Go to ",s.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:"grut505.github.io"})]}),s.jsx("li",{children:"Sign in with your Google account"}),s.jsx("li",{children:"Add the app to your home screen again"})]}),s.jsx("p",{className:"text-blue-700 text-xs italic",children:"Important: you must re-add the app to your home screen after signing in from Safari."})]})}),s.jsx(ve,{onClick:()=>{window.location.href="https://grut505.github.io/auth"},className:"w-full max-w-sm",children:"Open in Safari"}),s.jsx("button",{onClick:()=>c(!1),className:"mt-4 text-sm text-gray-600 underline",children:"Try sign-in again"})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),s.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),l&&s.jsx("div",{className:"mb-6 w-full max-w-sm",children:s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("div",{className:"text-red-600 text-center text-sm",children:l})})}),s.jsx(ve,{onClick:d,className:"w-full max-w-sm",children:l?"Try another account":"Sign in with Google"})]})}const nv={},Ud=e=>{let t;const r=new Set,n=(h,f)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=f??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(w=>w(t,y))}},l=()=>t,c={setState:n,getState:l,getInitialState:()=>d,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(nv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,l,c);return c},sv=e=>e?Ud(e):Ud;var Rh={exports:{}},Th={},Ih={exports:{}},Mh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=u;function lv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var av=typeof Object.is=="function"?Object.is:lv,iv=Un.useState,ov=Un.useEffect,cv=Un.useLayoutEffect,uv=Un.useDebugValue;function dv(e,t){var r=t(),n=iv({inst:{value:r,getSnapshot:t}}),l=n[0].inst,a=n[1];return cv(function(){l.value=r,l.getSnapshot=t,Ka(l)&&a({inst:l})},[e,r,t]),ov(function(){return Ka(l)&&a({inst:l}),e(function(){Ka(l)&&a({inst:l})})},[e]),uv(r),r}function Ka(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!av(e,r)}catch{return!0}}function fv(e,t){return t()}var mv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fv:dv;Mh.useSyncExternalStore=Un.useSyncExternalStore!==void 0?Un.useSyncExternalStore:mv;Ih.exports=Mh;var hv=Ih.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=u,pv=hv;function gv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xv=typeof Object.is=="function"?Object.is:gv,vv=pv.useSyncExternalStore,yv=da.useRef,wv=da.useEffect,jv=da.useMemo,bv=da.useDebugValue;Th.useSyncExternalStoreWithSelector=function(e,t,r,n,l){var a=yv(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=jv(function(){function c(y){if(!d){if(d=!0,h=y,y=n(y),l!==void 0&&i.hasValue){var w=i.value;if(l(w,y))return f=w}return f=y}if(w=f,xv(h,y))return w;var b=n(y);return l!==void 0&&l(w,b)?(h=y,w):(h=y,f=b)}var d=!1,h,f,g=r===void 0?null:r;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,r,n,l]);var o=vv(e,a[0],a[1]);return wv(function(){i.hasValue=!0,i.value=o},[o]),bv(o),o};Rh.exports=Th;var Nv=Rh.exports;const Sv=tf(Nv),Ah={},{useDebugValue:kv}=uo,{useSyncExternalStoreWithSelector:Cv}=Sv;let $d=!1;const _v=e=>e;function Ev(e,t=_v,r){(Ah?"production":void 0)!=="production"&&r&&!$d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$d=!0);const n=Cv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return kv(n),n}const Bd=e=>{(Ah?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?sv(e):e,r=(n,l)=>Ev(t,n,l);return Object.assign(r,t),r},ac=e=>e?Bd(e):Bd,Wd={year:"",month:"",from:"",to:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"},nr=ac(e=>({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:Wd,setArticles:(t,r=null)=>{const n=new Set,l=t.filter(a=>n.has(a.id)?!1:(n.add(a.id),!0));return e({articles:l,cursor:r,hasMore:r!==null})},addArticles:(t,r)=>e(n=>{const l=new Set(n.articles.map(i=>i.id)),a=t.filter(i=>!l.has(i.id));return{articles:[...n.articles,...a],cursor:r,hasMore:r!==null}}),updateArticle:t=>e(r=>({articles:r.articles.map(n=>n.id===t.id?t:n)})),deleteArticle:t=>e(r=>({articles:r.articles.filter(n=>n.id!==t)})),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setFilters:t=>e({filters:t}),reset:()=>e({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:Wd})})),Ut={list:e=>oe.get("articles/list",e),authors:e=>oe.get("articles/authors",e),get:e=>oe.get("articles/get",{id:e}),create:e=>oe.post("articles/create",e),update:e=>oe.post("articles/update",e),delete:e=>oe.get("articles/delete",{id:e}),permanentDelete:e=>oe.get("articles/permanent-delete",{id:e}),backfillFamileoFingerprints:()=>oe.get("articles/backfill-famileo-fingerprints")};function zh({onClick:e,icon:t,className:r="",pwaOffsetClassName:n=""}){var a;const l=typeof window<"u"&&((a=window.matchMedia)==null?void 0:a.call(window,"(display-mode: standalone)").matches)||typeof window<"u"&&window.navigator.standalone===!0;return s.jsx("button",{onClick:e,className:`w-16 h-16 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 active:bg-blue-800 flex items-center justify-center text-3xl touch-manipulation ${r} ${l?n:""}`,"aria-label":"Create new article",children:t||"+"})}function Oh({message:e,onRetry:t,retryLabel:r="Retry"}){return s.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("div",{className:"text-red-600 text-center mb-4",children:e}),t&&s.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:r})]})}function ir(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function qi(){return new Date().getFullYear()}function eo(e){return new Date(e).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function ts(e){const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}const Vd=new Map;function Pv(e){if(!e)return null;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/thumbnail\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function Ws(e,t){const[r,n]=u.useState(""),[l,a]=u.useState(!0),[i,o]=u.useState(!1);return u.useEffect(()=>{if(!e){n(""),a(!1),o(!1);return}if(e.startsWith("data:")||e.startsWith("blob:")){n(e),a(!1),o(!1);return}const c=t||Pv(e);if(!c){o(!0),a(!1);return}const d=Vd.get(c);if(d){n(d),a(!1),o(!1);return}a(!0),o(!1),(async()=>{try{const f=await oe.get("image/fetch",{fileId:c});if(!f.base64){o(!0),a(!1);return}const g=`data:image/jpeg;base64,${f.base64}`;Vd.set(c,g),n(g),a(!1)}catch{o(!0),a(!1)}})()},[e,t]),{src:r,isLoading:l,error:i}}function Lt({isOpen:e,title:t,message:r,confirmLabel:n="Confirm",cancelLabel:l="Cancel",onConfirm:a,onCancel:i,variant:o="primary",isLoading:c=!1,progress:d=null}){return e?rc.createPortal(s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:h=>h.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:h=>{h.stopPropagation(),i()}}),s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",onClick:h=>h.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:t}),s.jsx("p",{className:"text-gray-600 mb-4",children:r}),d&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Deleting..."}),s.jsxs("span",{children:[d.current," / ",d.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-red-600 h-2.5 rounded-full transition-all duration-200",style:{width:`${d.current/d.total*100}%`}})})]}),!d&&s.jsx("div",{className:"mb-2"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ve,{variant:"secondary",fullWidth:!0,onClick:h=>{h.stopPropagation(),i()},disabled:c,children:l}),s.jsx(ve,{variant:o,fullWidth:!0,onClick:h=>{h.stopPropagation(),a()},disabled:c,children:c?"Deleting...":n})]})]})]}),document.body):null}function fa({isOpen:e,onClose:t,title:r,children:n,align:l="bottom"}){if(u.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const a=l==="center"?"items-center":"items-end sm:items-center",i=l==="center"?"rounded-2xl":"rounded-t-2xl sm:rounded-2xl";return rc.createPortal(s.jsxs("div",{className:`fixed inset-0 z-[1000] flex ${a} justify-center`,children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),s.jsxs("div",{className:`relative bg-white ${i} w-full sm:max-w-lg max-h-[85vh] sm:max-h-[90vh] flex flex-col shadow-xl`,children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 touch-manipulation p-2",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:n})]})]}),document.body)}const Ct={status:e=>oe.get("famileo/status",e),posts:(e,t)=>oe.get("famileo/posts",e,t),image:e=>oe.get("famileo/image",{url:encodeURIComponent(e)}),triggerRefresh:()=>oe.get("famileo/trigger-refresh"),families:()=>oe.get("famileo/families"),importedIds:()=>oe.get("famileo/imported-ids"),importedFingerprints:()=>oe.get("famileo/imported-fingerprints"),createPost:e=>oe.post("famileo/create-post",e),presignImage:e=>oe.post("famileo/presigned-image",e||{}),uploadImage:e=>oe.post("famileo/upload-image",e)},ic={list:()=>oe.get("users/list")};function Hd(e){if(!e)return null;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/thumbnail\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function ma({isOpen:e,onClose:t,authorLabel:r,authorEmail:n,dateLabel:l,excerpt:a,text:i,publishedAt:o,familyId:c,imageUrl:d,imageFileId:h}){const[f,g]=u.useState(!1),[y,w]=u.useState(null),[b,_]=u.useState(null),[p,m]=u.useState(!1),[v,j]=u.useState(null),[E,L]=u.useState(""),[P,k]=u.useState(""),[X,M]=u.useState(!1),[K,$]=u.useState(null),[O,te]=u.useState([]),[J,W]=u.useState(!1),[se,F]=u.useState(c?[c]:[]),[A,U]=u.useState({}),[B,ee]=u.useState(c?"custom":"all"),[pe,H]=u.useState(0),[ae,ne]=u.useState({}),[ye,Fe]=u.useState([]),[De,we]=u.useState(!1),je=i||"",Ne=o||new Date().toISOString(),Be=n||"",Ae=O.reduce((I,G)=>(I[G.famileo_id]=G.name,I),{}),ze=A.all,Qe=B==="all"?!!(ze&&ze.text.trim()&&ze.text.length<=300&&O.length>0):se.length>0&&se.every(I=>{var Z;const G=((Z=A[I])==null?void 0:Z.text)||"";return G.trim()&&G.length<=300}),z=O.filter(I=>!se.includes(String(I.famileo_id)));u.useEffect(()=>{e&&(w(null),_(null),g(!1),j(null),L(""),k(""),m(!1),$(null),F(c?[c]:[]),ee(c?"custom":"all"),H(0),U({}),ne({}))},[e,c]),u.useEffect(()=>{e&&(W(!0),Ct.families().then(I=>{te(I.families||[]),U(G=>G.all?G:{...G,all:{text:je,date:Ne,fullPage:!1,author:Be}})}).catch(()=>{te([])}).finally(()=>{W(!1)}))},[e]),u.useEffect(()=>{e&&(we(!0),ic.list().then(I=>{const G=(I.users||[]).filter(Z=>String(Z.status||"").toUpperCase()==="ACTIVE");Fe(G)}).catch(()=>{Fe([])}).finally(()=>{we(!1)}))},[e]),u.useEffect(()=>{if(!e)return;const I=h||Hd(d||"");I&&(m(!0),j(null),oe.get("image/fetch",{fileId:I}).then(G=>{if(!G.base64)throw new Error("Image not found.");k(G.base64),L(`data:image/jpeg;base64,${G.base64}`)}).catch(G=>{j(G instanceof Error?G.message:"Failed to load image.")}).finally(()=>{m(!1)}))},[e,d,h]);const ie=async()=>{if(B==="all"&&O.length===0){w("No families available.");return}if(B==="custom"&&se.length===0){w("Please select a family.");return}g(!0),w(null),_(null);try{const I=h||Hd(d||"");let G=P;I&&!G&&($("Loading image"),G=(await oe.get("image/fetch",{fileId:I})).base64);const Z=B==="all"?O.map(q=>q.famileo_id):se;for(let q=0;q<Z.length;q++){const Q=Z[q],me=O.find(ht=>ht.famileo_id===Q),Ce=B==="all"?A.all:A[Q],ue=Ce?Ce.text:i||"";if(!ue||!ue.trim())throw new Error("Text is empty.");if(ue.length>300)throw new Error("Text exceeds 300 characters.");const We=Ce?Ce.date:o,Oe=We?new Date(We):new Date,ft=isNaN(Oe.getTime())?new Date().toISOString():Oe.toISOString(),Ve=Ce?Ce.author:Be;$(`Uploading image  ${me?me.name:"Unknown family"}`);let mt="";if(G){const ht=await Ct.presignImage({author_email:Ve||void 0}),pt=JSON.parse(ht.raw);mt=(await Ct.uploadImage({presign:pt,image_base64:G,mime_type:"image/jpeg",filename:"Untitled.jpg",author_email:Ve||void 0})).key||""}$(`Creating post  ${me?me.name:"Unknown family"}`),await Ct.createPost({text:ue,published_at:ft,family_id:Q,image_key:mt||void 0,is_full_page:Ce?Ce.fullPage:X,author_email:Ve||void 0})}_(`Post created for ${Z.length} ${Z.length>1?"families":"family"}.`)}catch(I){w(I instanceof Error?I.message:"Error while posting to Famileo.")}finally{g(!1),$(null)}};return s.jsx(fa,{isOpen:e,onClose:t,title:"Famileo Poster",align:"center",children:s.jsxs("div",{className:"px-4 py-4 space-y-4 text-sm text-gray-700",children:[(r||l||a||E||p)&&s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[r&&s.jsx("div",{className:"text-xs text-gray-500",children:"Author"}),r&&s.jsx("div",{className:"text-sm font-medium text-gray-900",children:r}),l&&s.jsx("div",{className:"text-xs text-gray-500",children:"Date"}),l&&s.jsx("div",{className:"text-sm text-gray-800",children:l}),a&&s.jsx("div",{className:"text-xs text-gray-500",children:"Excerpt"}),a&&s.jsx("div",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:a})]}),s.jsxs("div",{className:"w-20 flex-shrink-0",children:[p&&s.jsx("div",{className:"text-xs text-gray-500",children:"Image"}),v&&s.jsx("div",{className:"text-xs text-red-600",children:v}),!p&&!v&&E&&s.jsx("img",{src:E,alt:"",className:"w-20 h-20 object-cover rounded-md border border-gray-100"}),!p&&!v&&!E&&s.jsx("div",{className:"text-xs text-gray-500",children:"No image"})]})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Families"}),s.jsxs("select",{value:B==="all"?"all":"",onChange:I=>{var q;const G=I.target.value,Z=((q=I.target.selectedOptions[0])==null?void 0:q.text)||"";if(G==="all"){ee("all"),F([]),H(0);return}G&&(ee("custom"),F(Q=>Q.includes(G)?Q:[...Q,G]),ne(Q=>({...Q,[G]:Z})),U(Q=>Q[G]?Q:{...Q,[G]:{text:je,date:Ne,fullPage:!1,author:Be}}),H(Q=>Q===0?0:Q))},disabled:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white disabled:bg-gray-100",children:[s.jsx("option",{value:"",children:"Select a family"}),se.length===0&&(J?s.jsx("option",{value:"all",children:"Loading families..."}):s.jsx("option",{value:"all",children:"All families"})),z.map(I=>s.jsx("option",{value:String(I.famileo_id),children:I.name},String(I.famileo_id)))]})]}),B==="custom"&&se.length===0&&s.jsx("div",{className:"text-xs text-amber-600",children:"At least one family must be selected."}),B==="custom"&&se.length>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{type:"button",onClick:()=>H(I=>Math.max(I-1,0)),disabled:pe===0,className:"px-3 py-2 text-lg text-gray-600 disabled:opacity-40",children:""}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Ae[se[pe]]||ae[se[pe]]||"Unknown family"}),s.jsx("button",{type:"button",onClick:()=>H(I=>Math.min(I+1,se.length-1)),disabled:pe===se.length-1,className:"px-3 py-2 text-lg text-gray-600 disabled:opacity-40",children:""})]}),(()=>{const I=B==="custom"?se[pe]:"all";if(!I)return null;const G=A[I]||{text:je,date:Ne,fullPage:!1,author:Be};return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 space-y-3",children:[B==="custom"&&s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("button",{type:"button",onClick:()=>{F(Z=>{const q=Z.filter(Q=>Q!==I);return q.length===0?(ee("all"),H(0)):H(Q=>Math.max(Math.min(Q,q.length-1),0)),q}),ne(Z=>{const q={...Z};return delete q[I],q})},className:"text-xs text-gray-500 hover:text-red-600",children:"Remove"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Author (Rememly)"}),s.jsxs("select",{value:G.author||"",onChange:Z=>{const q=Z.target.value;U(Q=>({...Q,[I]:{...Q[I]||{text:je,date:Ne,fullPage:!1,author:""},author:q}}))},disabled:De,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white disabled:bg-gray-100",children:[De?s.jsx("option",{value:"",children:"Loading authors..."}):s.jsx("option",{value:"",children:"Select an author"}),ye.map(Z=>s.jsx("option",{value:Z.email,children:Z.pseudo||Z.email},Z.email))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Text (max 300)"}),s.jsx("textarea",{value:G.text,onChange:Z=>{const q=Z.target.value.slice(0,300);U(Q=>({...Q,[I]:{...Q[I]||{text:"",date:Ne,fullPage:!1,author:""},text:q}}))},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white"}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[G.text.length,"/300"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),s.jsx("input",{type:"datetime-local",value:(G.date||"").slice(0,16),onChange:Z=>{const q=Z.target.value;U(Q=>({...Q,[I]:{...Q[I]||{text:je,date:Ne,fullPage:!1,author:""},date:q}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:G.fullPage||!1,onChange:Z=>{const q=Z.target.checked;U(Q=>({...Q,[I]:{...Q[I]||{text:je,date:Ne,fullPage:!1,author:""},fullPage:q}}))},className:"w-4 h-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Full-page image"]})]})})()]}),s.jsx("div",{className:"flex items-center justify-center gap-3",children:s.jsx("button",{onClick:ie,disabled:f||!Qe,className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-purple-600 text-white text-sm font-medium hover:bg-purple-700 disabled:opacity-60",children:f?"Sending...":`Send to ${B==="all"?O.length:se.length} ${B==="all"?O.length>1?"families":"family":se.length>1?"families":"family"}`})}),K&&s.jsx("div",{className:"text-sm text-gray-600",children:K}),b&&s.jsx("div",{className:"text-sm text-green-700 bg-green-50 border border-green-200 rounded-lg px-3 py-2",children:b}),y&&s.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:y})]})})}async function Lv(e,t=Ts.TARGET_IMAGE_WIDTH_PX){return new Promise((r,n)=>{const l=new FileReader;l.onload=a=>{var o;const i=new Image;i.onload=()=>{const c=document.createElement("canvas");let d=i.width,h=i.height;d>t&&(h=h*t/d,d=t),c.width=d,c.height=h,c.getContext("2d").drawImage(i,0,0,d,h);const g=c.toDataURL("image/jpeg",.85);r(g.split(",")[1])},i.onerror=n,i.src=(o=a.target)==null?void 0:o.result},l.onerror=n,l.readAsDataURL(e)})}function Fv(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{const l=n.result.split(",")[1];t(l)},n.onerror=r,n.readAsDataURL(e)})}async function My(e,t=.9){return new Promise(r=>{e.toBlob(async n=>{if(n){const l=await Fv(n);r(l)}},"image/jpeg",t)})}class Dv{async processImage(t){const r=await Lv(t);return{fileName:t.name,mimeType:"image/jpeg",base64:r}}async processMultipleImages(t){return Promise.all(t.map(r=>this.processImage(r)))}}const Gd=new Dv;class Rv{async createArticle(t,r,n,l,a,i,o,c){const d=await Gd.processImage(n),h={auteur:t,texte:r,image:d,date:l,famileo_post_id:a,assembly_state:i||null,full_page:o||!1,status:c};return Ut.create(h)}async updateArticle(t,r,n,l,a,i,o){const c={id:t,texte:r,date:l,assembly_state:a,full_page:i,status:o};return n&&(c.image=await Gd.processImage(n)),Ut.update(c)}async deleteArticle(t){await Ut.delete(t)}async restoreArticle(t){return Ut.update({id:t,status:"ACTIVE"})}}const Zt=new Rv;function Tv(e){if(!e)return"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w200`}return e}function Iv(e,t){if(t){const n=t.startsWith("blob:")||t.startsWith("data:")?t:Tv(t);return s.jsx("img",{src:n,alt:e,className:"w-10 h-10 rounded-full object-cover border-2 border-primary-200 flex-shrink-0"})}const r=e.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2);return s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-primary-700",children:r})})}function Mv({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=Tt(),{user:c}=jr(),{profile:d,avatarBlobUrl:h}=lc(),{src:f,isLoading:g,error:y}=Ws(e.image_url,e.image_file_id),[w,b]=u.useState(!1),[_,p]=u.useState(!1),[m,v]=u.useState(!1),[j,E]=u.useState(!1),[L,P]=u.useState(!1),k=e.status==="DELETED",X=e.status==="DRAFT",M=B=>{B.stopPropagation(),o(`/editor/${e.id}`)},K=()=>{l&&(i==null||i(e.id,!a))},$=B=>{B.stopPropagation(),b(!0)},O=async()=>{p(!0);try{await Zt.deleteArticle(e.id),b(!1),r==null||r(e.id)}catch(B){console.error("Failed to delete article:",B)}finally{p(!1)}},te=B=>{B.stopPropagation(),v(!0)},J=B=>{B.stopPropagation(),P(!0)},W=async()=>{E(!0);try{await Zt.restoreArticle(e.id),v(!1),n==null||n(e.id)}catch(B){console.error("Failed to restore article:",B)}finally{E(!1)}},se=e.author_pseudo||"Unknown",A=(c==null?void 0:c.email)===e.auteur&&h||void 0,U=B=>{B.stopPropagation(),i==null||i(e.id,B.target.checked)};return s.jsxs("div",{className:"px-4 mb-4",children:[s.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden border hover:shadow-lg transition-shadow max-w-2xl mx-auto relative z-0 ${k?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:K,children:[s.jsxs("div",{className:"flex min-h-[24px]",children:[!e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-green-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Local"}),e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-purple-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Famileo"}),t&&s.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Duplicate"}),X&&s.jsx("div",{className:"flex-1 bg-amber-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Draft"}),k&&s.jsx("div",{className:"flex-1 bg-red-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Deleted"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l&&s.jsx("input",{type:"checkbox",checked:a,onChange:U,onClick:B=>B.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),Iv(se,A),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:se}),s.jsx("span",{className:"text-sm text-gray-500",children:ir(e.date)})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:J,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:M,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),k?s.jsx("button",{onClick:te,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:$,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{onClick:K,className:"w-full cursor-pointer bg-gray-50 relative min-h-[160px] sm:min-h-[200px]",children:[g&&!y&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),y?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("p",{className:"text-sm",children:"Failed to load image"}),s.jsxs("p",{className:"text-xs mt-1",children:["FileId: ",e.image_file_id]})]}):f&&s.jsx("img",{src:f,alt:"",className:"w-full h-auto object-contain",loading:"lazy"})]}),e.texte&&s.jsx("div",{className:"p-4 transition-colors",children:s.jsx("p",{className:"whitespace-pre-wrap text-gray-900",children:e.texte})})]}),s.jsx(Lt,{isOpen:w,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:O,onCancel:()=>b(!1),variant:"danger",isLoading:_}),s.jsx(Lt,{isOpen:m,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:W,onCancel:()=>v(!1),isLoading:j}),s.jsx(ma,{isOpen:L,onClose:()=>P(!1),authorLabel:se,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function Av({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=Tt(),{src:c,isLoading:d,error:h}=Ws(e.image_url,e.image_file_id),[f,g]=u.useState(!1),[y,w]=u.useState(!1),[b,_]=u.useState(!1),[p,m]=u.useState(!1),[v,j]=u.useState(!1),E=e.status==="DELETED",L=e.status==="DRAFT",P=e.author_pseudo||"Unknown",k=()=>{l&&(i==null||i(e.id,!a))},X=W=>{W.stopPropagation(),i==null||i(e.id,W.target.checked)},M=W=>{W.stopPropagation(),o(`/editor/${e.id}`)},K=W=>{W.stopPropagation(),g(!0)},$=async()=>{w(!0);try{await Zt.deleteArticle(e.id),g(!1),r==null||r(e.id)}catch(W){console.error("Failed to delete article:",W)}finally{w(!1)}},O=W=>{W.stopPropagation(),_(!0)},te=W=>{W.stopPropagation(),j(!0)},J=async()=>{m(!0);try{await Zt.restoreArticle(e.id),_(!1),n==null||n(e.id)}catch(W){console.error("Failed to restore article:",W)}finally{m(!1)}};return s.jsxs("div",{className:"px-4 mb-3",children:[s.jsxs("div",{className:`bg-white rounded-lg border shadow-sm px-3 py-2 flex items-center gap-3 max-w-2xl mx-auto ${E?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:k,children:[l&&s.jsx("input",{type:"checkbox",checked:a,onChange:X,onClick:W=>W.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsxs("div",{className:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center flex-shrink-0",children:[d&&!h&&s.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),h?s.jsx("span",{className:"text-xs text-gray-400",children:"No image"}):c&&s.jsx("img",{src:c,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:P}),!e.famileo_post_id&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Local"}),e.famileo_post_id&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:"Famileo"}),t&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"Duplicate"}),L&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:"Draft"}),E&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Deleted"})]}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.texte&&s.jsx("div",{className:"text-sm text-gray-700 mt-1 truncate",children:e.texte})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:te,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:M,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),E?s.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:K,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsx(Lt,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:$,onCancel:()=>g(!1),variant:"danger",isLoading:y}),s.jsx(Lt,{isOpen:b,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:J,onCancel:()=>_(!1),isLoading:p}),s.jsx(ma,{isOpen:v,onClose:()=>j(!1),authorLabel:P,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function zv({article:e,isDuplicate:t,onDeleted:r,onRestored:n,selectionMode:l,selected:a,onSelectionChange:i}){const o=Tt(),{src:c,isLoading:d,error:h}=Ws(e.image_url,e.image_file_id),[f,g]=u.useState(!1),[y,w]=u.useState(!1),[b,_]=u.useState(!1),[p,m]=u.useState(!1),[v,j]=u.useState(!1),E=e.status==="DELETED",L=e.status==="DRAFT",P=e.author_pseudo||"Unknown",k=()=>{l&&(i==null||i(e.id,!a))},X=W=>{W.stopPropagation(),i==null||i(e.id,W.target.checked)},M=W=>{W.stopPropagation(),o(`/editor/${e.id}`)},K=W=>{W.stopPropagation(),g(!0)},$=async()=>{w(!0);try{await Zt.deleteArticle(e.id),g(!1),r==null||r(e.id)}catch(W){console.error("Failed to delete article:",W)}finally{w(!1)}},O=W=>{W.stopPropagation(),_(!0)},te=W=>{W.stopPropagation(),j(!0)},J=async()=>{m(!0);try{await Zt.restoreArticle(e.id),_(!1),n==null||n(e.id)}catch(W){console.error("Failed to restore article:",W)}finally{m(!1)}};return s.jsxs("div",{className:`bg-white rounded-lg shadow-sm overflow-hidden border transition-shadow hover:shadow-md relative ${E?"border-red-300":a?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:k,children:[s.jsxs("div",{className:"flex min-h-[18px]",children:[!e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-green-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Local"}),e.famileo_post_id&&s.jsx("div",{className:"flex-1 bg-purple-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Famileo"}),t&&s.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Duplicate"}),L&&s.jsx("div",{className:"flex-1 bg-amber-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Draft"}),E&&s.jsx("div",{className:"flex-1 bg-red-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Deleted"})]}),s.jsx("div",{className:"absolute top-8 left-2 z-10",children:l&&s.jsx("input",{type:"checkbox",checked:a,onChange:X,onClick:W=>W.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),s.jsxs("div",{className:"absolute top-8 right-2 z-10 flex items-center gap-1",children:[!e.famileo_post_id&&s.jsx("button",{onClick:te,className:"p-1.5 bg-white/90 text-gray-600 hover:text-purple-600 hover:bg-white rounded-md transition-colors","aria-label":"Poster vers Famileo",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]})}),s.jsx("button",{onClick:M,className:"p-1.5 bg-white/90 text-gray-600 hover:text-primary-600 hover:bg-white rounded-md transition-colors","aria-label":"Edit article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),E?s.jsx("button",{onClick:O,className:"p-1.5 bg-white/90 text-gray-600 hover:text-green-600 hover:bg-white rounded-md transition-colors","aria-label":"Restore article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):s.jsx("button",{onClick:K,className:"p-1.5 bg-white/90 text-gray-600 hover:text-red-600 hover:bg-white rounded-md transition-colors","aria-label":"Delete article",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsxs("div",{className:"w-full bg-gray-50 relative overflow-hidden",style:{aspectRatio:"4 / 3"},children:[d&&!h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-6 h-6 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),h?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 text-xs",children:"No image"}):c&&s.jsx("img",{src:c,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:P}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.texte&&s.jsx("div",{className:"text-xs text-gray-700 mt-2 max-h-12 overflow-hidden",children:e.texte})]}),s.jsx(Lt,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:$,onCancel:()=>g(!1),variant:"danger",isLoading:y}),s.jsx(Lt,{isOpen:b,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:J,onCancel:()=>_(!1),isLoading:p}),s.jsx(ma,{isOpen:v,onClose:()=>j(!1),authorLabel:P,authorEmail:e.auteur,dateLabel:ir(e.date),excerpt:e.texte,text:e.texte,publishedAt:e.date,imageUrl:e.image_url,imageFileId:e.image_file_id})]})}function Ov(){return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No articles yet"}),s.jsx("p",{className:"text-gray-600",children:"Tap the + button to create your first photo article"})]})}function Uv({monthYear:e,count:t,showPlus:r}){return s.jsx("div",{className:"bg-gray-100 px-4 pt-3 pb-2 sticky top-[108px] z-10",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-700 uppercase",children:e}),s.jsxs("span",{className:"ml-2 text-xs font-medium text-gray-600 bg-white/80 border border-gray-200 rounded-full px-2 py-0.5",children:[t,r?"+":""]})]})})}const Ja={developerName:"Grut - & Claude & ChatGPT",lastPublished:"10/02/2026",repoUrl:"https://github.com/Grut505/Rememly"},Xt=ac(e=>({toast:null,hasUnsavedChanges:!1,pendingNavigationPath:null,showToast:(t,r)=>{e({toast:{message:t,type:r}}),setTimeout(()=>e({toast:null}),3e3)},hideToast:()=>e({toast:null}),setUnsavedChanges:t=>e({hasUnsavedChanges:t}),setPendingNavigationPath:t=>e({pendingNavigationPath:t})}));function fn({onMenuClick:e}){const t=Tt(),r=dn(),n=Xt(h=>h.hasUnsavedChanges),l=Xt(h=>h.setPendingNavigationPath),[a,i]=u.useState(!1),o="1.2.0",c="242",d=r.pathname.startsWith("/settings");return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"bg-primary-600 text-white fixed left-0 right-0 z-30 shadow-md app-safe-top app-safe-top-height",children:s.jsxs("div",{className:"max-w-content mx-auto w-full h-14 flex items-center px-4 relative",children:[s.jsx("h1",{className:"absolute left-1/2 -translate-x-1/2 text-xl font-bold leading-none text-center pointer-events-none",children:"Rememly"}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 hover:bg-primary-700 rounded-lg transition-colors touch-manipulation flex items-center justify-center","aria-label":"About",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M12 18h.01"}),s.jsx("path",{d:"M9.09 9a3 3 0 015.82 1c0 2-3 2-3 4"}),s.jsx("circle",{cx:"12",cy:"12",r:"10"})]})}),s.jsx("button",{onClick:()=>{if(!d){if(n){l("/settings");return}t("/settings")}},className:`p-2 rounded-lg transition-colors touch-manipulation flex items-center justify-center ${d?"bg-primary-700":"hover:bg-primary-700"}`,"aria-label":"Settings",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),s.jsx("div",{className:"app-safe-top-height flex-shrink-0"}),s.jsx(fa,{isOpen:a,onClose:()=>i(!1),title:"About",align:"center",children:s.jsxs("div",{className:"px-4 py-4 space-y-4 text-sm text-gray-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:"Rememly"}),s.jsx("div",{className:"text-gray-600",children:"Personal memory book generator"})]}),s.jsxs("dl",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Developer"}),s.jsx("dd",{className:"text-right text-gray-900",children:Ja.developerName})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Versions"}),s.jsxs("dd",{className:"text-right text-gray-900",children:["v",o," / backend @",c]})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Last publish"}),s.jsx("dd",{className:"text-right text-gray-900",children:Ja.lastPublished})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("dt",{className:"text-gray-500",children:"Project"}),s.jsx("dd",{className:"text-right",children:s.jsx("a",{href:Ja.repoUrl,target:"_blank",rel:"noreferrer",className:"text-primary-600 hover:text-primary-700 underline",children:"GitHub (README)"})})]})]})]})})]})}const Qt=u.forwardRef(({label:e,error:t,className:r="",...n},l)=>s.jsxs("div",{className:"w-full",children:[e&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),s.jsx("input",{ref:l,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-red-500":"border-gray-300"} ${r}`,...n}),t&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]}));Qt.displayName="Input";const xe={year:"",month:"",dateFrom:"",dateTo:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"};function $v({initialFilters:e,onApply:t,onClose:r}){const n=Dh(),[l,a]=u.useState((e==null?void 0:e.year)??xe.year),[i,o]=u.useState((e==null?void 0:e.month)??xe.month),[c,d]=u.useState((e==null?void 0:e.dateFrom)??xe.dateFrom),[h,f]=u.useState((e==null?void 0:e.dateTo)??xe.dateTo),[g,y]=u.useState((e==null?void 0:e.author)??xe.author),[w,b]=u.useState((e==null?void 0:e.search)??xe.search),[_,p]=u.useState((e==null?void 0:e.duplicatesOnly)??xe.duplicatesOnly),[m,v]=u.useState((e==null?void 0:e.statusFilter)??xe.statusFilter),[j,E]=u.useState((e==null?void 0:e.sourceFilter)??xe.sourceFilter),[L,P]=u.useState([]),[k,X]=u.useState(!1);u.useEffect(()=>{e&&(a(e.year??xe.year),o(e.month??xe.month),d(e.dateFrom??xe.dateFrom),f(e.dateTo??xe.dateTo),y(e.author??xe.author),b(e.search??xe.search),p(e.duplicatesOnly??xe.duplicatesOnly),v(e.statusFilter??xe.statusFilter),E(e.sourceFilter??xe.sourceFilter))},[e]),u.useEffect(()=>{let $=!0;return(async()=>{X(!0);try{const te=await Ut.authors({status_filter:m,source_filter:j});$&&P(te.authors||[])}catch{$&&P([])}finally{$&&X(!1)}})(),()=>{$=!1}},[m,j]);const M=()=>{t({year:l,month:i,dateFrom:c,dateTo:h,author:g,search:w,duplicatesOnly:_,statusFilter:m,sourceFilter:j}),r()},K=()=>{a(xe.year),o(xe.month),d(xe.dateFrom),f(xe.dateTo),y(xe.author),b(xe.search),p(xe.duplicatesOnly),v(xe.statusFilter),E(xe.sourceFilter),t(xe),r()};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto overscroll-contain",children:[s.jsx(Qt,{type:"text",label:"Search",value:w,onChange:$=>b($.target.value),placeholder:"Search in loaded articles..."}),s.jsxs("div",{className:`grid gap-2 ${n?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),s.jsxs("select",{value:l,onChange:$=>{a($.target.value),$.target.value||o("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All years"}),[...Array(10)].map(($,O)=>{const te=qi()-O;return s.jsx("option",{value:te,children:te},te)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),s.jsxs("select",{value:i,onChange:$=>o($.target.value),disabled:!l,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l?"":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[s.jsx("option",{value:"",children:"All months"}),Fh.map(($,O)=>s.jsx("option",{value:(O+1).toString().padStart(2,"0"),children:$},O))]}),!l&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a year first"})]})]}),s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx(Qt,{type:"date",label:"From",value:c,onChange:$=>{const O=$.target.value;d(O),h&&O&&h<O&&f(O)},max:h||void 0,className:"min-w-0"})}),s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx(Qt,{type:"date",label:"To",value:h,onChange:$=>{const O=$.target.value;f(O),c&&O&&O<c&&d(O)},min:c||void 0,className:"min-w-0"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),s.jsx("select",{value:g,onChange:$=>y($.target.value),disabled:k,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${k?"bg-gray-100 text-gray-400 cursor-not-allowed":""}`,children:k?s.jsx("option",{value:"",children:"Loading authors..."}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"All authors"}),L.map($=>s.jsx("option",{value:$.email,children:$.pseudo||$.email.split("@")[0]},$.email))]})})]}),s.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:_,onChange:$=>p($.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"Show duplicates (Famileo)"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>v("active"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${m==="active"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Active"}),s.jsx("button",{type:"button",onClick:()=>v("draft"),className:`flex-1 px-3 py-2 text-sm font-medium border-l border-gray-300 transition-colors ${m==="draft"?"bg-amber-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Draft"}),s.jsx("button",{type:"button",onClick:()=>v("all"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${m==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>v("deleted"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${m==="deleted"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Deleted"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>E("all"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${j==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>E("famileo"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${j==="famileo"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Famileo"}),s.jsx("button",{type:"button",onClick:()=>E("local"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${j==="local"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Local"})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-white sticky bottom-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ve,{variant:"secondary",onClick:K,fullWidth:!0,children:"Reset"}),s.jsx(ve,{onClick:M,fullWidth:!0,children:"Apply Filters"})]})})]})})}function Uh({checked:e,onChange:t,label:r,disabled:n=!1}){return s.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${n?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ${e?"bg-primary-600":"bg-gray-300"}`,onClick:()=>!n&&t(!e),children:s.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ${e?"translate-x-5":"translate-x-0"}`})}),r&&s.jsx("span",{className:"text-sm text-gray-700 select-none",children:r})]})}function Bv(){const e=Tt(),{logout:t}=jr(),[r,n]=u.useState(!1),[l,a]=u.useState(!1),[i,o]=u.useState(new Set),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[g,y]=u.useState(!1),[w,b]=u.useState(null),[_,p]=u.useState(()=>{const D=localStorage.getItem("articles_view_mode");return D==="list"||D==="mosaic-2"||D==="mosaic-3"||D==="mosaic-4"?D:D==="mosaic"?"mosaic-2":"cards"}),m=_==="mosaic-2"||_==="mosaic-3"||_==="mosaic-4",{articles:v,isLoading:j,error:E,cursor:L,hasMore:P,filters:k,setArticles:X,addArticles:M,setLoading:K,setError:$,setFilters:O}=nr(),te=u.useRef(),J=u.useRef(!1),W=u.useRef(null),[se,F]=u.useState(!1),[A,U]=u.useState(!1),[B,ee]=u.useState(0),[pe,H]=u.useState(!1),ae=u.useRef(null),ne=70,ye=14,Fe=120;u.useEffect(()=>{J.current=j},[j]),u.useEffect(()=>{W.current=L},[L]),u.useEffect(()=>{localStorage.setItem("articles_view_mode",_)},[_]);const De=async()=>{K(!0),$(null),console.log("Loading articles with filters:",k);try{const D=await Ut.list({year:k.year||void 0,month:k.month,from:k.from,to:k.to,author:k.author,duplicates_only:k.duplicatesOnly?"true":void 0,limit:String(Ts.ARTICLES_PER_PAGE),status_filter:k.statusFilter||"active",source_filter:k.sourceFilter||"all"});console.log("Received articles:",D.items.length,"cursor:",D.next_cursor),X(D.items,D.next_cursor)}catch(D){$(D instanceof Error?D.message:"Failed to load articles")}finally{K(!1)}},we=u.useCallback(async()=>{j||(U(!0),await De(),U(!1))},[j,De]),je=u.useCallback(async()=>{const D=W.current;if(!(!D||J.current)){J.current=!0,F(!0),console.log("loadMore called with cursor:",D);try{const V=await Ut.list({year:k.year||void 0,month:k.month,from:k.from,to:k.to,author:k.author,cursor:D,duplicates_only:k.duplicatesOnly?"true":void 0,limit:String(Ts.ARTICLES_PER_PAGE),status_filter:k.statusFilter||"active",source_filter:k.sourceFilter||"all"});console.log("Loaded more articles:",V.items.length,"next cursor:",V.next_cursor),W.current=V.next_cursor,M(V.items,V.next_cursor)}catch(V){$(V instanceof Error?V.message:"Failed to load more")}finally{J.current=!1,F(!1)}}},[k.year,k.month,k.from,k.to,k.statusFilter,k.sourceFilter,M,$]),Ne=u.useCallback(D=>{te.current&&te.current.disconnect(),D&&(te.current=new IntersectionObserver(V=>{V[0].isIntersecting&&!J.current&&W.current&&(console.log("Sentinel visible, loading more..."),je())},{threshold:1,rootMargin:"0px"}),te.current.observe(D))},[je]),Be=D=>{console.log("Applying filters:",D),X([]),O({year:D.year,month:D.month,from:D.dateFrom,to:D.dateTo,author:D.author,search:D.search,duplicatesOnly:D.duplicatesOnly,statusFilter:D.statusFilter,sourceFilter:D.sourceFilter})},Ae=D=>{if(k.statusFilter==="active"||k.statusFilter==="draft"||!k.statusFilter)nr.getState().deleteArticle(D);else{const V=v.find(S=>S.id===D);V&&nr.getState().updateArticle({...V,status:"DELETED"})}},ze=D=>{if(k.statusFilter==="deleted"||k.statusFilter==="draft")nr.getState().deleteArticle(D);else{const V=v.find(S=>S.id===D);V&&nr.getState().updateArticle({...V,status:"ACTIVE"})}},Qe=(k.search||"").trim().toLowerCase(),z=u.useMemo(()=>{let D=v;return Qe&&(D=D.filter(V=>{const S=(V.texte||"").toLowerCase(),x=(V.author_pseudo||"").toLowerCase(),C=(V.auteur||"").toLowerCase();return S.includes(Qe)||x.includes(Qe)||C.includes(Qe)})),k.duplicatesOnly&&(D=D.filter(V=>!!V.is_duplicate)),D},[v,Qe,k.duplicatesOnly]),ie=(D,V)=>{o(S=>{const x=new Set(S);return V?x.add(D):x.delete(D),x})},I=()=>{i.size===z.length?o(new Set):o(new Set(z.map(D=>D.id)))},G=()=>{a(!1),o(new Set)},Z=D=>{a(D),D||o(new Set)},q=D=>{var S;(((S=document.scrollingElement)==null?void 0:S.scrollTop)??window.scrollY)<=0&&!A&&!j&&(ae.current=D.touches[0].clientY,H(!1))},Q=D=>{var T;if(A||j)return;if((((T=document.scrollingElement)==null?void 0:T.scrollTop)??window.scrollY)>0){ee(0),H(!1),ae.current=null;return}ae.current===null&&(ae.current=D.touches[0].clientY);const S=D.touches[0].clientY-ae.current;if(S<=ye){ee(0),H(!1);return}const x=S-ye,C=Fe*x/(x+Fe);ee(Math.min(ye+C,Fe)),H(!0)},me=()=>{B>=ne&&!A&&!j&&we(),ee(0),H(!1),ae.current=null},Ce=async()=>{d(!0);const D=Array.from(i);b({current:0,total:D.length});try{for(let V=0;V<D.length;V++)await Zt.deleteArticle(D[V]),b({current:V+1,total:D.length});k.statusFilter==="active"||k.statusFilter==="draft"||!k.statusFilter?i.forEach(V=>nr.getState().deleteArticle(V)):i.forEach(V=>{const S=v.find(x=>x.id===V);S&&nr.getState().updateArticle({...S,status:"DELETED"})}),G()}catch(V){console.error("Bulk delete failed:",V)}finally{d(!1),b(null),f(!1)}},ue=async()=>{d(!0);const D=Array.from(i);b({current:0,total:D.length});try{for(let V=0;V<D.length;V++)await Ut.permanentDelete(D[V]),b({current:V+1,total:D.length});i.forEach(V=>nr.getState().deleteArticle(V)),G()}catch(V){console.error("Bulk permanent delete failed:",V)}finally{d(!1),b(null),y(!1)}},We=k.statusFilter==="deleted",Oe=z.reduce((D,V)=>{const S=ts(V.date);return D[S]=(D[S]||0)+1,D},{}),ft=z.reduce((D,V)=>{const S=ts(V.date),x=eo(V.date),C=D[D.length-1];return!C||C.key!==S?D.push({key:S,label:x,items:[V]}):C.items.push(V),D},[]),Ve=_==="mosaic-2"?2:_==="mosaic-3"?3:4,mt=D=>{let V=0;for(let x=0;x<D.length;x++)V=(V*31+D.charCodeAt(x))%360;const S=V;return{border:`hsl(${S}, 35%, 70%)`,bg:`hsl(${S}, 45%, 92%)`,text:`hsl(${S}, 35%, 35%)`}},ht=z.length,pt=P?`${ht}+`:`${ht}`,Ze=z.length>0?ts(z[z.length-1].date):null,It=k.year||k.month||k.from||k.to||k.author||k.search||k.duplicatesOnly||k.statusFilter&&k.statusFilter!=="active"||k.sourceFilter&&k.sourceFilter!=="all",er={year:k.year||"",month:k.month||"",dateFrom:k.from||"",dateTo:k.to||"",author:k.author||"",search:k.search||"",duplicatesOnly:k.duplicatesOnly||!1,statusFilter:k.statusFilter||"active",sourceFilter:k.sourceFilter||"all"};u.useEffect(()=>{console.log("Filters changed, reloading articles:",k),De()},[k.year,k.month,k.from,k.to,k.author,k.search,k.duplicatesOnly,k.statusFilter,k.sourceFilter]);const Te=j;return s.jsxs("div",{className:"min-h-screen flex flex-col",onTouchStart:q,onTouchMove:Q,onTouchEnd:me,children:[s.jsx(fn,{}),s.jsxs("div",{className:"bg-white border-b border-gray-300 px-4 py-3 flex items-center justify-between fixed app-safe-top-14 left-0 right-0 z-[25] max-w-content mx-auto",children:[s.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:l?`${i.size} selected`:k.year||"All years"}),!l&&s.jsx("span",{className:"text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-full px-2 py-0.5",children:pt})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[l?s.jsx("button",{onClick:I,className:`touch-manipulation text-sm font-medium ${Te?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:Te,children:i.size===z.length?"Deselect all":"Select all"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("select",{value:_,onChange:D=>p(D.target.value),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"View mode",children:[s.jsx("option",{value:"cards",children:"Cards"}),s.jsx("option",{value:"list",children:"List"}),s.jsx("option",{value:"mosaic-2",children:"Mosaic 2 items"}),s.jsx("option",{value:"mosaic-3",children:"Mosaic 3 items"}),s.jsx("option",{value:"mosaic-4",children:"Mosaic 4 items"})]})}),s.jsxs("button",{onClick:we,className:`touch-manipulation text-sm font-medium flex items-center gap-2 hidden sm:flex ${Te?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:Te,children:[s.jsx("svg",{className:`w-4 h-4 ${A?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),s.jsxs("button",{onClick:()=>n(!0),className:`touch-manipulation flex items-center gap-2 ${Te?"text-gray-400 cursor-not-allowed":It?"text-white bg-primary-600 hover:bg-primary-700 px-3 py-1.5 rounded-lg font-medium":"text-primary-600 hover:text-primary-700"}`,disabled:Te,"aria-label":"Filter",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),It&&s.jsx("span",{className:"ml-1 bg-white text-primary-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]})]}),z.length>0&&s.jsx(Uh,{checked:l,onChange:Z,disabled:Te})]})]}),s.jsx("div",{className:"h-14"}),s.jsxs("div",{className:"flex-1 pb-20 relative",children:[(B>0||A)&&s.jsx("div",{className:"absolute left-0 right-0 flex items-center justify-center pointer-events-none",style:{top:0,transform:`translateY(${Math.min(B,80)}px)`,transition:pe?"none":"transform 260ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 200ms ease",opacity:Math.min(1,B/40),zIndex:5},children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-full shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("svg",{className:"absolute inset-0 w-6 h-6 text-gray-200",viewBox:"0 0 36 36",children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3"})}),s.jsx("svg",{className:`absolute inset-0 w-6 h-6 ${A?"animate-spin text-primary-600":"text-primary-600"}`,viewBox:"0 0 36 36",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",strokeDasharray:`${Math.min(100,B/ne*100)}, 100`,transition:"stroke-dasharray 120ms ease"},children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})}),s.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-transform ${B>=ne?"rotate-180":""}`,children:[s.jsx("svg",{className:`w-3.5 h-3.5 ${A?"hidden":"block"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 5v14m0 0l-5-5m5 5l5-5"})}),s.jsx("svg",{className:`w-3.5 h-3.5 ${A?"block":"hidden"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),s.jsx("span",{className:"text-xs text-gray-600",children:A?"Refreshing...":B>=ne?"Release to refresh":"Pull to refresh"})]})}),j&&z.length===0?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(_t,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading articles..."})]})}):E&&z.length===0?s.jsx("div",{className:"flex items-center justify-center p-6",children:s.jsx(Oh,{message:E,onRetry:De})}):z.length===0?s.jsx(Ov,{}):s.jsxs(s.Fragment,{children:[!m&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"-mt-[15px]",children:z.map((D,V)=>{const S=ts(D.date),x=V>0?ts(z[V-1].date):null,C=S!==x;return s.jsxs(u.Fragment,{children:[C&&s.jsx(Uv,{monthYear:eo(D.date),count:Oe[S]||0,showPlus:P&&Ze===S}),s.jsx("div",{className:`relative z-0 ${C?"pt-8":""}`,children:_==="cards"?s.jsx(Mv,{article:D,isDuplicate:!!D.is_duplicate,onDeleted:Ae,onRestored:ze,selectionMode:l,selected:i.has(D.id),onSelectionChange:ie}):s.jsx(Av,{article:D,isDuplicate:!!D.is_duplicate,onDeleted:Ae,onRestored:ze,selectionMode:l,selected:i.has(D.id),onSelectionChange:ie})})]},D.id)})})}),m&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"-mt-[25px]",children:ft.map((D,V)=>{const S=mt(D.key);return s.jsxs("div",{className:`px-4 mb-8 ${V===0?"mt-8":""}`,children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:S.border}}),s.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-full",style:{backgroundColor:S.bg,color:S.text},children:D.label}),s.jsx("div",{className:"text-xs text-gray-500",children:Oe[D.key]||D.items.length}),s.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:S.border}})]})}),s.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Ve}, minmax(0, 1fr))`},children:D.items.map(x=>s.jsx(zv,{article:x,isDuplicate:!!x.is_duplicate,onDeleted:Ae,onRestored:ze,selectionMode:l,selected:i.has(x.id),onSelectionChange:ie},x.id))}),s.jsx("div",{className:"border-b border-gray-200 mt-6"})]},D.key)})})}),P&&!se&&s.jsx("div",{ref:Ne,className:"h-4"})]})]}),se&&s.jsx("div",{className:"fixed bottom-24 left-0 right-0 flex justify-center z-50",children:s.jsx("div",{className:"bg-gray-100 shadow-lg rounded-full p-3 border border-gray-200",children:s.jsx(_t,{})})}),l&&i.size>0&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:s.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[i.size," article",i.size>1?"s":""," selected"]}),s.jsx("div",{className:"flex gap-2",children:We?s.jsx("button",{onClick:()=>y(!0),disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:c?"Deleting...":"Delete permanently"}):s.jsx("button",{onClick:()=>f(!0),disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:c?"Deleting...":"Delete"})})]})}),!l&&s.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-50",children:s.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:s.jsx(zh,{onClick:()=>e("/editor"),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),s.jsx(Lt,{isOpen:h,title:"Delete articles?",message:`${i.size} article${i.size>1?"s":""} will be marked as deleted. You can find them later by enabling the 'Show deleted' filter.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:Ce,onCancel:()=>f(!1),variant:"danger",isLoading:c,progress:w}),s.jsx(Lt,{isOpen:g,title:"Permanently delete articles?",message:` WARNING: ${i.size} article${i.size>1?"s":""} will be permanently removed from the database. This action cannot be undone!`,confirmLabel:"Delete permanently",cancelLabel:"Cancel",onConfirm:ue,onCancel:()=>y(!1),variant:"danger",isLoading:c,progress:w}),s.jsx(fa,{isOpen:r,onClose:()=>n(!1),title:"Filters",children:s.jsx($v,{initialFilters:er,onApply:Be,onClose:()=>n(!1)})})]})}const to=(e,t)=>t.some(r=>e instanceof r);let Yd,Xd;function Wv(){return Yd||(Yd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vv(){return Xd||(Xd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ro=new WeakMap,Za=new WeakMap,ha=new WeakMap;function Hv(e){const t=new Promise((r,n)=>{const l=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{r(rn(e.result)),l()},i=()=>{n(e.error),l()};e.addEventListener("success",a),e.addEventListener("error",i)});return ha.set(t,e),t}function Gv(e){if(ro.has(e))return;const t=new Promise((r,n)=>{const l=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{r(),l()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});ro.set(e,t)}let no={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return ro.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rn(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $h(e){no=e(no)}function Yv(e){return Vv().includes(e)?function(...t){return e.apply(so(this),t),rn(this.request)}:function(...t){return rn(e.apply(so(this),t))}}function Xv(e){return typeof e=="function"?Yv(e):(e instanceof IDBTransaction&&Gv(e),to(e,Wv())?new Proxy(e,no):e)}function rn(e){if(e instanceof IDBRequest)return Hv(e);if(Za.has(e))return Za.get(e);const t=Xv(e);return t!==e&&(Za.set(e,t),ha.set(t,e)),t}const so=e=>ha.get(e);function Qv(e,t,{blocked:r,upgrade:n,blocking:l,terminated:a}={}){const i=indexedDB.open(e,t),o=rn(i);return n&&i.addEventListener("upgradeneeded",c=>{n(rn(i.result),c.oldVersion,c.newVersion,rn(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),l&&c.addEventListener("versionchange",d=>l(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Kv=["get","getKey","getAll","getAllKeys","count"],Jv=["put","add","delete","clear"],qa=new Map;function Qd(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(qa.get(t))return qa.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,l=Jv.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(l||Kv.includes(r)))return;const a=async function(i,...o){const c=this.transaction(i,l?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),l&&c.done]))[0]};return qa.set(t,a),a}$h(e=>({...e,get:(t,r,n)=>Qd(t,r)||e.get(t,r,n),has:(t,r)=>!!Qd(t,r)||e.has(t,r)}));const Zv=["continue","continuePrimaryKey","advance"],Kd={},lo=new WeakMap,Bh=new WeakMap,qv={get(e,t){if(!Zv.includes(t))return e[t];let r=Kd[t];return r||(r=Kd[t]=function(...n){lo.set(this,Bh.get(this)[t](...n))}),r}};async function*ey(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,qv);for(Bh.set(r,t),ha.set(r,so(t));t;)yield r,t=await(lo.get(r)||t.continue()),lo.delete(r)}function Jd(e,t){return t===Symbol.asyncIterator&&to(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&to(e,[IDBIndex,IDBObjectStore])}$h(e=>({...e,get(t,r,n){return Jd(t,r)?ey:e.get(t,r,n)},has(t,r){return Jd(t,r)||e.has(t,r)}}));class ty{constructor(){yu(this,"dbPromise");this.dbPromise=Qv("rememly-db",1,{upgrade(t){t.objectStoreNames.contains("drafts")||t.createObjectStore("drafts",{keyPath:"id"}),t.objectStoreNames.contains("assemblyStates")||t.createObjectStore("assemblyStates",{keyPath:"articleId"})}})}async saveDraft(t){await(await this.dbPromise).put("drafts",{...t,timestamp:Date.now()})}async getDraft(t){return(await this.dbPromise).get("drafts",t)}async deleteDraft(t){await(await this.dbPromise).delete("drafts",t)}async saveAssemblyState(t,r){await(await this.dbPromise).put("assemblyStates",{articleId:t,state:r,timestamp:Date.now()})}async getAssemblyState(t){const n=await(await this.dbPromise).get("assemblyStates",t);return n==null?void 0:n.state}async deleteAssemblyState(t){await(await this.dbPromise).delete("assemblyStates",t)}}const ry=new ty;function ny(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async function sy(e){return new Promise(t=>{const r=new FileReader;r.onload=n=>{var l,a;try{const i=new DataView((l=n.target)==null?void 0:l.result);if(i.getUint16(0,!1)!==65496){t(null);return}let o=2;const c=i.byteLength;for(;o<c;){if(i.getUint8(o)!==255){t(null);return}if(i.getUint8(o+1)===225){const h=i.getUint16(o+2,!1),f=new DataView((a=n.target)==null?void 0:a.result,o+4,h-2);if(String.fromCharCode(f.getUint8(0),f.getUint8(1),f.getUint8(2),f.getUint8(3))!=="Exif"){t(null);return}const y=6,w=f.getUint16(y,!1)===18761,b=f.getUint32(y+4,w),_=f.getUint16(y+b,w);for(let p=0;p<_;p++){const m=y+b+2+p*12,v=f.getUint16(m,w);if(v===34665){const j=f.getUint32(m+8,w),E=f.getUint16(y+j,w);for(let L=0;L<E;L++){const P=y+j+2+L*12,k=f.getUint16(P,w);if(k===36867||k===36868){const X=f.getUint32(P+8,w);let M="";for(let O=0;O<19;O++)M+=String.fromCharCode(f.getUint8(y+X+O));const K=M.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),$=new Date(K);if(!isNaN($.getTime())){t($);return}}}}if(v===306){const j=f.getUint32(m+8,w);let E="";for(let k=0;k<19;k++)E+=String.fromCharCode(f.getUint8(y+j+k));const L=E.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),P=new Date(L);if(!isNaN(P.getTime())){t(P);return}}}t(null);return}o+=2+i.getUint16(o+2,!1)}t(null)}catch{t(null)}},r.onerror=()=>t(null),r.readAsArrayBuffer(e)})}function ly(e){if(!e)return console.warn("Empty image URL provided to PhotoPicker"),"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([^\/]+)/,/drive\.google\.com\/uc\?.*[&?]id=([^&]+)/,/drive\.google\.com\/open\?.*[&?]id=([^&]+)/,/lh3\.googleusercontent\.com\/d\/([^?&]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w2000`}return e}function ay({onPhotoSelected:e,currentImage:t,onPhotoAssembly:r}){const n=u.useRef(null),l=u.useRef(null),a=u.useRef(null),[i,o]=u.useState(!1),[c,d]=u.useState(!1),[h,f]=u.useState(null),[g,y]=u.useState(""),w=ny();u.useEffect(()=>()=>{h&&h.getTracks().forEach(j=>j.stop())},[h]),u.useEffect(()=>{if(!i)return;const j=L=>{L.key==="Escape"&&o(!1)},E=L=>{const P=L.target;P!=null&&P.closest("[data-photo-menu]")||P!=null&&P.closest("[data-photo-menu-trigger]")||o(!1)};return window.addEventListener("keydown",j),window.addEventListener("click",E),()=>{window.removeEventListener("keydown",j),window.removeEventListener("click",E)}},[i]);const b=async j=>{var L;const E=(L=j.target.files)==null?void 0:L[0];if(E){const P=await sy(E);e(E,P||void 0)}j.target.value=""},_=()=>{var j;(j=n.current)==null||j.click()},p=u.useCallback(async()=>{var j;if(y(""),!((j=navigator.mediaDevices)!=null&&j.getUserMedia)||!window.isSecureContext){y("Webcam not available. Choose from files.");return}try{const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});f(E),d(!0),setTimeout(()=>{l.current&&(l.current.srcObject=E)},100)}catch(E){console.error("Error accessing webcam:",E),y("Webcam not available. Choose from files.")}},[]),m=u.useCallback(()=>{if(l.current&&a.current){const j=l.current,E=a.current;E.width=j.videoWidth,E.height=j.videoHeight;const L=E.getContext("2d");L&&(L.drawImage(j,0,0),E.toBlob(async P=>{if(P){const k=new File([P],`webcam-${Date.now()}.jpg`,{type:"image/jpeg"});e(k,new Date),v()}},"image/jpeg",.9))}},[e]),v=u.useCallback(()=>{h&&(h.getTracks().forEach(j=>j.stop()),f(null)),d(!1)},[h]);return c?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[s.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto max-h-[50vh] object-contain"}),s.jsx("canvas",{ref:a,className:"hidden"})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx(ve,{onClick:m,fullWidth:!0,children:"Capture"}),s.jsx(ve,{variant:"secondary",onClick:v,fullWidth:!0,children:"Cancel"})]})]}):s.jsxs("div",{className:"w-full",children:[s.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:b,className:"hidden"}),t?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:ly(t),alt:"Selected",className:"w-full h-auto rounded-lg max-h-[40vh] object-contain"}),s.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ve,{onClick:()=>{w?_():o(j=>!j)},fullWidth:!0,"data-photo-menu-trigger":!0,children:"Select Photo"}),!w&&i&&s.jsxs("div",{"data-photo-menu":!0,className:"absolute left-0 right-0 mt-2 z-20 rounded-xl border border-gray-200 bg-white shadow-lg p-2",children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),_()},children:"Choose from files"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),p()},children:"Use webcam"}),g&&s.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:g})]})]}),r&&s.jsx(ve,{variant:"secondary",onClick:r,fullWidth:!0,children:"Photo Assembly"})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add a photo"}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ve,{onClick:()=>{w?_():o(j=>!j)},"data-photo-menu-trigger":!0,children:"Select Photo"}),!w&&i&&s.jsxs("div",{"data-photo-menu":!0,className:"absolute left-0 right-0 mt-2 z-20 rounded-xl border border-gray-200 bg-white shadow-lg p-2",children:[s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),_()},children:"Choose from files"}),s.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>{o(!1),p()},children:"Use webcam"}),g&&s.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:g})]})]}),r&&s.jsx(ve,{variant:"secondary",onClick:r,children:"Photo Assembly"})]})]})]})}function iy({value:e,onChange:t}){const r=u.useRef(null),n=a=>{const i=a.target.value;i.length<=Ts.MAX_TEXT_LENGTH&&t(i)};u.useEffect(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${r.current.scrollHeight}px`)},[e]);const l=Ts.MAX_TEXT_LENGTH-e.length;return s.jsxs("div",{className:"w-full",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text (optional)"}),s.jsx("textarea",{ref:r,value:e,onChange:n,placeholder:"Add a description...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6}),s.jsxs("div",{className:"mt-1 text-sm text-gray-500 text-right",children:[l," characters remaining"]})]})}function oy({value:e,onChange:t}){const r=a=>{const i=new Date(a),o=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),d=String(i.getDate()).padStart(2,"0"),h=String(i.getHours()).padStart(2,"0"),f=String(i.getMinutes()).padStart(2,"0");return`${o}-${c}-${d}T${h}:${f}`},n=a=>new Date(a).toISOString(),l=a=>{t(n(a.target.value))};return s.jsxs("div",{className:"space-y-2 overflow-hidden",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date and time"}),s.jsx("input",{type:"datetime-local",value:r(e),onChange:l,className:"w-full min-w-0 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent box-border text-base",style:{maxWidth:"100%"}})]})}function Zd(){const{id:e}=Px(),t=Tt(),r=dn(),{user:n}=jr(),{articles:l,updateArticle:a,deleteArticle:i}=nr(),{showToast:o}=Xt(),[c,d]=u.useState(""),[h,f]=u.useState(new Date().toISOString()),[g,y]=u.useState(null),[w,b]=u.useState(""),[_,p]=u.useState(""),[m,v]=u.useState(""),[j,E]=u.useState(!1),[L,P]=u.useState(!1),[k,X]=u.useState(!1),[M,K]=u.useState(!1),[$,O]=u.useState("DRAFT"),te=u.useRef(null),J=!!e,W=$==="DELETED",se=$==="DRAFT",{src:F}=Ws(_,m);u.useEffect(()=>{const H=r.state;if(H!=null&&H.famileoImport){const{text:ae,date:ne,imageBase64:ye,imageMimeType:Fe}=H.famileoImport;d(ae);const De=new Date(ne.replace(" ","T"));if(isNaN(De.getTime())||f(De.toISOString()),ye){const we=`data:${Fe};base64,${ye}`;b(we),fetch(we).then(je=>je.blob()).then(je=>{const Ne=new File([je],"famileo-import.jpg",{type:Fe});y(Ne)})}window.history.replaceState({},document.title)}},[r.state]),u.useEffect(()=>{J&&A()},[e]),u.useEffect(()=>{J&&!g&&F&&b(F)},[J,g,F]),u.useEffect(()=>{const H=document.body.style.overflow,ae=document.body.style.height;return document.body.style.overflow="hidden",document.body.style.height="100%",()=>{document.body.style.overflow=H,document.body.style.height=ae}},[]),u.useEffect(()=>{j||requestAnimationFrame(()=>{var H;(H=te.current)==null||H.scrollTo({top:0,left:0,behavior:"auto"}),requestAnimationFrame(()=>{var ae;(ae=te.current)==null||ae.scrollTo({top:0,left:0,behavior:"auto"})})})},[e,j,r.key]);const A=async()=>{if(e){E(!0);try{const H=l.find(ne=>ne.id===e);if(H){d(H.texte||""),f(H.date),p(H.image_url||""),v(H.image_file_id||""),O(H.status||"ACTIVE");return}const ae=await Ut.get(e);d(ae.texte),f(ae.date),p(ae.image_url||""),v(ae.image_file_id||""),O(ae.status||"ACTIVE")}catch{o("Failed to load article","error"),t("/")}finally{E(!1)}}},U=(H,ae)=>{y(H);const ne=URL.createObjectURL(H);b(ne),ae&&!J&&f(ae.toISOString())},B=async()=>{if(!g&&!J){o("Please select a photo","error");return}if(n){P(!0);try{if(J&&e){const H=W?"ACTIVE":$,ae=await Zt.updateArticle(e,c,g||void 0,h,void 0,void 0,H);a(ae),o(W?"Article restored":"Article updated","success")}else g&&(await Zt.createArticle(n.email,c,g,h,void 0,void 0,void 0,$),o("Article created","success"));await ry.deleteDraft(e||"new"),t("/")}catch(H){o(H instanceof Error?H.message:"Failed to save article","error")}finally{P(!1)}}},ee=()=>{w&&w.startsWith("blob:")&&URL.revokeObjectURL(w),t("/")},pe=async()=>{if(e){P(!0);try{console.log("Deleting article:",e);const H=await Zt.deleteArticle(e);console.log("Delete result:",H),i(e),o("Article deleted","success"),t("/")}catch(H){console.error("Delete error:",H),o(H instanceof Error?H.message:"Failed to delete article","error")}finally{P(!1),X(!1)}}};return j?s.jsx(Bs,{message:"Loading article..."}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),L&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg px-6 py-5 flex items-center gap-3",children:[s.jsx(_t,{}),s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Saving..."})]})}),s.jsxs("div",{className:"flex-1 flex flex-col max-w-content mx-auto w-full bg-white",children:[s.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-center flex-shrink-0 relative",children:[s.jsx("h1",{className:"text-lg font-semibold",children:J?"Edit Article":"New Article"}),s.jsxs("button",{type:"button",onClick:()=>K(!0),className:"absolute right-4 top-1/2 -translate-y-1/2 inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors","aria-label":"Poster vers Famileo",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M22 2L11 13"}),s.jsx("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})]}),"Famileo"]})]}),s.jsxs("div",{ref:te,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-6 pb-28 overscroll-contain",children:[s.jsx(oy,{value:h,onChange:f}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Status"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>O("ACTIVE"),className:`px-3 py-2 text-sm font-medium transition-colors ${$==="ACTIVE"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Published"}),s.jsx("button",{type:"button",onClick:()=>O("DRAFT"),className:`px-3 py-2 text-sm font-medium border-l border-gray-300 transition-colors ${$==="DRAFT"?"bg-amber-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Draft"})]})]}),s.jsx(ay,{onPhotoSelected:U,currentImage:w,onPhotoAssembly:()=>t("/photo-assembly",{state:{editMode:J,articleId:e,texte:c,dateModification:h}})}),s.jsx(iy,{value:c,onChange:d})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 p-3",children:s.jsxs("div",{className:"max-w-content mx-auto w-full flex gap-2",children:[J&&!W&&s.jsx(ve,{variant:"danger",onClick:()=>X(!0),disabled:L,className:"flex-1 px-3 py-2 text-sm",children:"Delete Article"}),s.jsx(ve,{onClick:B,disabled:L||!g&&!J,className:"flex-1 px-3 py-2 text-sm",children:L?"Saving...":W?"Save & restore":J?se?"Save Draft":"Update":se?"Save Draft":"Publish"}),s.jsx(ve,{variant:"secondary",onClick:ee,disabled:L,className:"flex-1 px-3 py-2 text-sm",children:"Cancel"})]})}),s.jsx(Lt,{isOpen:k,title:"Delete Article",message:"Are you sure you want to delete this article? This action cannot be undone.",confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",isLoading:L,onConfirm:pe,onCancel:()=>X(!1)}),s.jsx(ma,{isOpen:M,onClose:()=>K(!1),authorLabel:(n==null?void 0:n.email)||"Unknown",authorEmail:(n==null?void 0:n.email)||"",dateLabel:ir(h),excerpt:c,text:c,publishedAt:h,imageUrl:_,imageFileId:m})]})]})}function cy(){const e=Tt(),t=nr(y=>y.setFilters),[r,n]=u.useState(!0),[l,a]=u.useState(null),[i,o]=u.useState([]),[c,d]=u.useState(qi());u.useEffect(()=>{h()},[]);const h=async()=>{n(!0),a(null);try{const y=await Ut.list({limit:"1000",status_filter:"all"}),w=new Map;y.items.forEach(_=>{const p=new Date(_.date),m=p.getFullYear(),v=p.getMonth(),j=_.status==="DELETED"?"deleted":_.status==="DRAFT"?"draft":"active",E=!!_.famileo_post_id;w.has(m)||w.set(m,{total:0,active:0,activeFamileo:0,draft:0,deleted:0,monthMap:new Map});const L=w.get(m);L.total+=1,L[j]+=1,j==="active"&&E&&(L.activeFamileo+=1),L.monthMap.has(v)||L.monthMap.set(v,{total:0,active:0,activeFamileo:0,draft:0,deleted:0});const P=L.monthMap.get(v);P.total+=1,P[j]+=1,j==="active"&&E&&(P.activeFamileo+=1)});const b=Array.from(w.entries()).map(([_,p])=>({year:_,total:p.total,active:p.active,activeFamileo:p.activeFamileo,draft:p.draft,deleted:p.deleted,months:Array.from(p.monthMap.entries()).map(([m,v])=>({monthIndex:m,monthName:Fh[m],total:v.total,active:v.active,activeFamileo:v.activeFamileo,draft:v.draft,deleted:v.deleted})).sort((m,v)=>m.monthIndex-v.monthIndex)})).sort((_,p)=>p.year-_.year);if(o(b),b.length>0){const _=qi(),p=b.some(m=>m.year===_);d(p?_:b[0].year)}}catch(y){a(y instanceof Error?y.message:"Failed to load statistics")}finally{n(!1)}},f=(y,w="active")=>{t({year:String(y),month:"",from:"",to:"",statusFilter:w,sourceFilter:"all"}),e("/")},g=(y,w,b="active")=>{t({year:String(y),month:String(w+1).padStart(2,"0"),from:"",to:"",statusFilter:b,sourceFilter:"all"}),e("/")};return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:s.jsx(Oh,{message:l,onRetry:h})}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),s.jsx("div",{className:"flex-1 p-4 pb-24",children:r?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(_t,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading statistics..."})]})}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Year breakdown"}),s.jsxs("div",{className:"space-y-3",children:[i.map(y=>{const w=c===y.year;return s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"w-full px-4 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between text-left hover:bg-gray-50",children:[s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>d(w?null:y.year),onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&d(w?null:y.year)},className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900",children:y.year}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[y.total," total  ",y.active," active (",y.activeFamileo," famileo)  ",y.draft," draft  ",y.deleted," deleted"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>f(y.year,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),s.jsx("button",{onClick:()=>f(y.year,"draft"),className:"text-xs font-medium text-amber-600 hover:text-amber-700",children:"View draft"}),s.jsx("button",{onClick:()=>f(y.year,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"}),s.jsx("button",{onClick:()=>d(w?null:y.year),className:"text-xs font-medium text-gray-600 hover:text-gray-800",children:w?"Hide months":"Show months"})]})]}),w&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"mt-2 space-y-2",children:[y.months.map(b=>s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-2 border-b border-gray-100 last:border-b-0",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:b.monthName}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[b.total," total  ",b.active," active (",b.activeFamileo," famileo)  ",b.draft," draft  ",b.deleted," deleted"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("button",{onClick:()=>g(y.year,b.monthIndex,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),s.jsx("button",{onClick:()=>g(y.year,b.monthIndex,"draft"),className:"text-xs font-medium text-amber-600 hover:text-amber-700",children:"View draft"}),s.jsx("button",{onClick:()=>g(y.year,b.monthIndex,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"})]})]},`${y.year}-${b.monthIndex}`)),y.months.length===0&&s.jsx("div",{className:"text-sm text-gray-500",children:"No months found"})]})})]},y.year)}),i.length===0&&s.jsx("div",{className:"text-sm text-gray-500",children:"No statistics available"})]})]})})]})}function uy(e){if(!e||e.startsWith("blob:")||e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return`https://drive.google.com/thumbnail?id=${n[1]}&sz=w2000`}return e}function dy(){const{user:e,logout:t}=jr(),{showToast:r,setUnsavedChanges:n}=Xt(),{profile:l,isLoading:a,saveProfile:i,avatarBlobUrl:o}=lc(),[c,d]=u.useState(""),[h,f]=u.useState(null),[g,y]=u.useState(""),[w,b]=u.useState(""),[_,p]=u.useState(""),[m,v]=u.useState(""),[j,E]=u.useState(""),[L,P]=u.useState(!1),[k,X]=u.useState(""),[M,K]=u.useState(!1),[$,O]=u.useState(""),te=c.trim()!==$.trim()||g.trim()!==w.trim()||_.trim()!==m.trim()||h!==null||j.trim().length>0;u.useEffect(()=>{l?(d(l.pseudo),O(l.pseudo||""),y(l.famileo_email||""),b(l.famileo_email||""),p(l.famileo_name||""),v(l.famileo_name||""),P(!!l.famileo_password_set),X(o||l.avatar_url)):e&&(d(e.name),O(e.name||""),y(""),b(""),p(""),v(""),P(!1)),f(null),E("")},[l,e,o]);const J=F=>{var B;const A=(B=F.target.files)==null?void 0:B[0];if(!A)return;f(A);const U=URL.createObjectURL(A);X(U)},W=async()=>{if(!c.trim()){r("Please enter a pseudo","error");return}K(!0);try{const F=c.trim();await i(F,g.trim(),_.trim(),j.trim()||void 0,h||void 0),d(F),O(F),f(null),E(""),r("Profile saved","success")}catch{r("Failed to save profile","error")}finally{K(!1)}},se=()=>{t()};return u.useEffect(()=>{n(te)},[te,n]),a?s.jsx(Bs,{message:"Loading profile..."}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),s.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-md mx-auto w-full",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("div",{className:"relative",children:[k?s.jsx("img",{src:uy(k),alt:"Avatar",className:"w-32 h-32 rounded-full object-cover border-4 border-primary-200"}):s.jsx("div",{className:"w-32 h-32 rounded-full bg-primary-100 flex items-center justify-center border-4 border-primary-200",children:s.jsx("span",{className:"text-4xl font-semibold text-primary-600",children:c.charAt(0).toUpperCase()||"?"})}),s.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:J,className:"hidden"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to change avatar"})]}),s.jsx("div",{children:s.jsx(Qt,{label:"Pseudo",value:c,onChange:F=>d(F.target.value),placeholder:"Enter your pseudo"})}),s.jsx("div",{children:s.jsx(Qt,{label:"Famileo name",value:_,onChange:F=>p(F.target.value),placeholder:"Exact name used in Famileo"})}),s.jsx("div",{children:s.jsx(Qt,{label:"Famileo email",value:g,onChange:F=>y(F.target.value),placeholder:"Email used to login to Famileo",type:"email"})}),s.jsxs("div",{children:[s.jsx(Qt,{label:"Famileo password",type:"password",value:j,onChange:F=>E(F.target.value),placeholder:L?"Leave empty to keep current password":"Set Famileo password"}),L&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"A password is already saved for Famileo."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backend URL"}),s.jsx("input",{type:"text",value:"https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 text-xs"})]})]}),s.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:s.jsxs("div",{className:"max-w-md mx-auto w-full flex flex-col sm:flex-row sm:justify-center gap-2",children:[s.jsx(ve,{onClick:W,disabled:M||a||!c.trim()||!te,className:"w-full sm:w-auto",children:M?"Saving...":"Save Profile"}),s.jsx(ve,{variant:"danger",onClick:se,disabled:M,className:"w-full sm:w-auto",children:"Logout"})]})}),M&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(_t,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})})]})}function ei({post:e,selected:t,onSelectionChange:r,onImageLoaded:n,cachedImage:l,alreadyImported:a,variant:i="card"}){const[o,c]=u.useState(!1),[d,h]=u.useState(null),[f,g]=u.useState(!1),y=i==="mosaic",w=i==="row";u.useEffect(()=>{if(l){h(`data:${l.mimeType};base64,${l.base64}`);return}(async()=>{if(!(d||o||f)){c(!0);try{const p=await Ct.image(e.image_url);h(`data:${p.mimeType};base64,${p.base64}`),n(e.id,p.base64,p.mimeType)}catch{g(!0)}finally{c(!1)}}})()},[e.id,e.image_url,l]);const b=e.author_pseudo.split(" ").map(_=>_[0]).join("").toUpperCase().substring(0,2);return w?s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:`bg-white rounded-lg border shadow-sm px-3 py-2 flex items-center gap-3 transition-colors ${t?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:_=>r(_.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsxs("div",{className:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center flex-shrink-0",children:[o&&!f&&s.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),f?s.jsx("span",{className:"text-[10px] text-gray-400",children:"No image"}):d&&s.jsx("img",{src:d,alt:"",className:"w-full h-full object-cover"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:e.author_pseudo}),a&&s.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Imported"})]}),s.jsx("div",{className:"text-xs text-gray-500",children:ir(e.date)}),e.text&&s.jsx("div",{className:"text-xs text-gray-700 mt-1 truncate",children:e.text})]})]})}):s.jsx("div",{className:y?"":"px-4",children:s.jsxs("div",{className:`bg-white rounded-lg ${y?"shadow-sm":"shadow-md"} overflow-hidden border-2 transition-colors ${t?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[y?s.jsx("div",{className:"p-3 pb-2",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:e.author_pseudo}),s.jsx("div",{className:"text-[11px] text-gray-500",children:ir(e.date)})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-green-100 text-green-700",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Imported"]}),s.jsx("input",{type:"checkbox",checked:t,onChange:_=>r(_.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})]})]})}):s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:_=>r(_.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-orange-700",children:b})}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:e.author_pseudo}),s.jsx("span",{className:"text-sm text-gray-500",children:ir(e.date)})]})]}),a&&s.jsx("div",{className:"flex-shrink-0 ml-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Imported"]})})]}),s.jsxs("div",{className:`w-full bg-gray-100 relative ${y?"aspect-[4/3]":"min-h-[200px]"}`,children:[o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:s.jsx("p",{className:"text-sm",children:"Failed to load image"})}),d&&s.jsx("img",{src:d,alt:"",className:`w-full ${y?"h-full object-cover":"h-auto object-contain"}`})]}),e.text&&s.jsx("div",{className:y?"px-3 pb-3":"p-4",children:s.jsx("p",{className:`text-gray-900 ${y?"text-xs max-h-12 overflow-hidden":"whitespace-pre-wrap"}`,children:e.text})}),!y&&s.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100 text-xs text-gray-500",children:[s.jsxs("span",{children:["ID: ",e.id]}),s.jsx("span",{className:"mx-2",children:"|"}),s.jsx("span",{children:e.image_orientation})]})]})})}function fy(){const e=dn();Tt();const{user:t}=jr(),[r,n]=u.useState(""),[l,a]=u.useState(()=>{const S=new Date,x=S.getFullYear(),C=String(S.getMonth()+1).padStart(2,"0"),T=String(S.getDate()).padStart(2,"0");return`${x}-${C}-${T}`}),[i,o]=u.useState([]),[c,d]=u.useState(!1),[h,f]=u.useState(null),g=u.useRef(null),[y,w]=u.useState(new Set),[b,_]=u.useState({}),[p,m]=u.useState(!1),[v,j]=u.useState(null),E=u.useRef(!1),[L,P]=u.useState(!1),[k,X]=u.useState(!1),[M,K]=u.useState(null),[$,O]=u.useState(!1),[te,J]=u.useState([]),[W,se]=u.useState("declared"),[F,A]=u.useState([]),[U,B]=u.useState(()=>{const S=localStorage.getItem("famileo_view_mode");return S==="list"||S==="mosaic"?S:"card"}),[ee,pe]=u.useState(()=>{const S=Number(localStorage.getItem("famileo_mosaic_columns")||2);return S>=2&&S<=4?S:2}),[H,ae]=u.useState(""),[ne,ye]=u.useState(!0),[Fe,De]=u.useState(null),[we,je]=u.useState(new Set),[Ne,Be]=u.useState(new Set),[Ae,ze]=u.useState({}),[Qe,z]=u.useState(!1),ie=u.useRef(null),[I,G]=u.useState(!1);u.useEffect(()=>{(async()=>{try{const[x,C,T,le]=await Promise.all([Ct.families(),Ct.importedIds(),Ct.importedFingerprints(),ic.list()]);J(x.families),A(le.users||[]),x.families.length>0&&ae(x.families[0].famileo_id),je(new Set(C.ids)),Be(new Set(T.fingerprints||[]))}catch(x){console.error("Failed to load initial data:",x)}finally{ye(!1)}})()},[]),u.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=S}},[]),u.useEffect(()=>{requestAnimationFrame(()=>{var S;(S=ie.current)==null||S.scrollTo({top:0,left:0,behavior:"auto"}),requestAnimationFrame(()=>{var x;(x=ie.current)==null||x.scrollTo({top:0,left:0,behavior:"auto"})})})},[e.key]),u.useEffect(()=>{localStorage.setItem("famileo_view_mode",U)},[U]),u.useEffect(()=>{localStorage.setItem("famileo_mosaic_columns",String(ee))},[ee]);const Z=S=>{const x=S.toLowerCase();return x.includes("session expired")||x.includes("famileo session not configured")||x.includes("invalid famileo session")},q=S=>Z(S)?"Session Famileo expire. Rafrachissement en cours...":S,Q=async()=>{for(let x=0;x<20;x++){try{const C=await Ct.status({validate:"true",family_id:H||void 0});if(C.valid)return K(null),!0;K(C.message?q(C.message):"Refreshing session...")}catch(C){const T=C instanceof Error?C.message:"Refreshing session...";K(q(T))}await new Promise(C=>setTimeout(C,5e3))}return!1},me=async S=>{const x=[];let C=null,T=!0;const le=new Date(r+"T00:00:00").getTime(),he=new Date(l+"T23:59:59").getTime();let He=new Date(l+"T23:59:59.999Z").toISOString();for(;T;){const at=await Ct.posts({limit:"50",timestamp:He,family_id:H||void 0,author_filter:W},{signal:S});at.counts&&(C||(C={declared:0,others:0,total:0}),C.declared+=at.counts.declared||0,C.others+=at.counts.others||0,C.total+=at.counts.total||0);for(const gt of at.posts){const Ge=new Date(gt.date).getTime();Ge>=le&&Ge<=he&&x.push(gt)}z(!0);const Vr=await Promise.all(at.posts.map(async gt=>{const Ge=It(gt),St=await er(Ge);return[gt.id,St]}));ze(gt=>{const Ge={...gt};return Vr.forEach(([St,xt])=>{xt&&(Ge[St]=xt)}),Ge}),z(!1),at.next_timestamp&&new Date(at.next_timestamp).getTime()>=le?He=at.next_timestamp:T=!1}return C&&De(C),x},Ce=async()=>{if(!r||!l){f("Please select both start and end dates");return}const S=new AbortController;g.current=S,d(!0),f(null),K(null),o([]),w(new Set),_({}),De(null),ze({}),z(!1);try{const x=await me(S.signal);o(x),x.length===0&&f("No posts found in this date range")}catch(x){if(x instanceof Error&&x.name==="AbortError"){d(!1);return}const C=x instanceof Error?x.message:"Failed to fetch posts";if(Z(C)&&!$){O(!0),X(!0),K("Refreshing Famileo session... This may take a few minutes.");try{if(await Ct.triggerRefresh(),await Q()){const le=await me(S.signal);o(le),le.length===0&&f("No posts found in this date range"),K(null)}else f("Le rafrachissement Famileo a expir. Ressaie dans quelques minutes.")}catch(T){const le=T instanceof Error?T.message:"Failed to refresh session";f(q(le))}finally{X(!1),O(!1)}}else f(C)}finally{d(!1)}},ue=()=>{g.current&&(g.current.abort(),g.current=null),d(!1),X(!1),O(!1),K(null)},We=(S,x)=>{w(C=>{const T=new Set(C);return x?T.add(S):T.delete(S),T})},Oe=(S,x,C)=>{_(T=>({...T,[S]:{base64:x,mimeType:C}}))},ft=()=>{const S=i.filter(C=>!I||!we.has(String(C.id)));S.filter(C=>y.has(C.id)).length===S.length?w(C=>{const T=new Set(C);return S.forEach(le=>T.delete(le.id)),T}):w(C=>{const T=new Set(C);return S.forEach(le=>T.add(le.id)),T})},Ve=async()=>{if(!t||y.size===0)return;const S=i.filter(x=>y.has(x.id));S.sort((x,C)=>new Date(x.date).getTime()-new Date(C.date).getTime()),E.current=!1,m(!0),j({current:0,total:S.length,currentPostText:""});try{for(let x=0;x<S.length&&!E.current;x++){const C=S[x];j({current:x+1,total:S.length,currentPostText:C.text.substring(0,50)+(C.text.length>50?"...":"")});let T="",le="image/jpeg";const he=await Ct.image(C.full_image_url);T=he.base64,le=he.mimeType;const He=`data:${le};base64,${T}`,at=await fetch(He).then(xt=>xt.blob()),Vr=new File([at],"famileo-import.jpg",{type:le}),gt=new Date(C.date.replace(" ","T")),Ge=isNaN(gt.getTime())?new Date().toISOString():gt.toISOString();await Zt.createArticle(C.author_email||t.email,C.text,Vr,Ge,String(C.id)),je(xt=>new Set([...xt,String(C.id)]));let St=Ae[C.id];St||(St=await er(It(C))),St&&Be(xt=>new Set([...xt,St])),x<S.length-1&&await new Promise(xt=>setTimeout(xt,500))}w(new Set),E.current?K("Bulk creation cancelled."):K(`Successfully created ${S.length} article${S.length>1?"s":""}`)}catch(x){f(x instanceof Error?x.message:"Failed to create articles")}finally{m(!1),j(null),P(!1)}},mt=()=>{E.current=!0,P(!0)},ht=async()=>{X(!0),K(null),f(null);try{const S=await Ct.triggerRefresh();K(S.message)}catch(S){f(S instanceof Error?S.message:"Failed to trigger refresh")}finally{X(!1)}},pt=y.size,Ze=S=>String(S||"").toLowerCase().replace(/\s+/g," ").trim(),It=S=>{const x=Ze(S.author_email||(t==null?void 0:t.email)||""),C=S.date?String(S.date):"",T=C?new Date(C.replace(" ","T")):new Date(""),le=isNaN(T.getTime())?"":T.toISOString().slice(0,10),he=Ze(S.text||"");return`${x}|${le}|${he}`},er=async S=>{var le;if(!S||!((le=window.crypto)!=null&&le.subtle))return"";const x=new TextEncoder().encode(S),C=await window.crypto.subtle.digest("SHA-256",x);return Array.from(new Uint8Array(C)).map(he=>he.toString(16).padStart(2,"0")).join("")},Te=S=>{const x=Ae[S.id];return we.has(String(S.id))||!!x&&Ne.has(x)},D=i.filter(S=>!I||!Te(S)),V=D.filter(S=>y.has(S.id)).length;return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),s.jsxs("div",{ref:ie,className:`flex-1 overflow-y-auto overflow-x-hidden ${!c&&i.length===0?"overflow-hidden":""}`,children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Famileo Extractor"}),s.jsxs("button",{onClick:ht,disabled:k||p,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation disabled:opacity-50",title:"Refresh Famileo session",children:[s.jsx("svg",{className:`w-4 h-4 ${k?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:k?"Refreshing...":"Refresh Session"})]})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),s.jsx("select",{value:H,onChange:S=>ae(S.target.value),disabled:c||p||ne,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white",children:ne?s.jsx("option",{value:"",children:"Loading families..."}):te.length===0?s.jsx("option",{value:"",children:"No family configured"}):te.map(S=>s.jsx("option",{value:S.famileo_id,children:S.name},S.id))})]}),!ne&&te.length===0&&s.jsx("div",{className:"text-sm text-amber-600",children:'No family configured. Add families in the "families" sheet.'}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:r,onChange:S=>n(S.target.value),disabled:c||p,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:l,onChange:S=>a(S.target.value),disabled:c||p,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posts"}),s.jsxs("select",{value:W,onChange:S=>se(S.target.value),disabled:c||p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white",children:[s.jsx("option",{value:"all",children:"Everyone"}),s.jsx("option",{value:"others",children:"Other users"}),s.jsx("option",{value:"declared",children:"Declared users"}),F.length>0&&s.jsx("optgroup",{label:"Declared users (specific)",children:F.map(S=>s.jsxs("option",{value:S.email,children:[S.pseudo||S.email,S.famileo_name?`  ${S.famileo_name}`:""]},S.email))})]})]}),s.jsx("button",{onClick:Ce,disabled:c||p||ne||!r||!l||!H&&te.length>0,className:"w-full py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation",children:ne?"Loading families...":c?"Loading...":"Get Posts"})]})}),M&&s.jsx("div",{className:"mx-4 mt-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:M}),h&&s.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),c&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),s.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Loading posts..."}),s.jsx("button",{onClick:ue,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"})]}),!c&&i.length>0&&s.jsxs("div",{className:"flex-1 py-4 pb-24",children:[s.jsxs("div",{className:"px-4 mb-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," post",i.length>1?"s":""," found",pt>0&&s.jsxs("span",{className:"ml-2 text-primary-600 font-medium",children:["(",pt," selected)"]}),Qe&&s.jsx("span",{className:"ml-2 text-gray-400",children:" hashing"}),Fe&&s.jsxs("span",{className:"ml-2 text-gray-400",children:[" ",Fe.declared," declared / ",Fe.others," others"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:U,onChange:S=>B(S.target.value),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"View mode",children:[s.jsx("option",{value:"card",children:"Card view"}),s.jsx("option",{value:"list",children:"List view"}),s.jsx("option",{value:"mosaic",children:"Mosaic view"})]}),U==="mosaic"&&s.jsxs("select",{value:ee,onChange:S=>pe(Number(S.target.value)),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"Mosaic columns",children:[s.jsx("option",{value:2,children:"2 cols"}),s.jsx("option",{value:3,children:"3 cols"}),s.jsx("option",{value:4,children:"4 cols"})]}),s.jsx("button",{onClick:ft,disabled:p,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:V===D.length?"Deselect All":"Select All"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"hideImported",checked:I,onChange:S=>G(S.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("label",{htmlFor:"hideImported",className:"text-sm text-gray-600",children:["Hide already imported posts (",i.filter(S=>Te(S)).length,")"]})]})]}),U==="mosaic"?s.jsx("div",{className:"px-4 grid gap-3",style:{gridTemplateColumns:`repeat(${ee}, minmax(0, 1fr))`},children:i.filter(S=>!I||!Te(S)).map(S=>s.jsx(ei,{post:S,selected:y.has(S.id),onSelectionChange:x=>We(S.id,x),onImageLoaded:Oe,cachedImage:b[S.id],alreadyImported:Te(S),variant:"mosaic"},S.id))}):U==="list"?s.jsx("div",{className:"space-y-3",children:i.filter(S=>!I||!Te(S)).map(S=>s.jsx(ei,{post:S,selected:y.has(S.id),onSelectionChange:x=>We(S.id,x),onImageLoaded:Oe,cachedImage:b[S.id],alreadyImported:Te(S),variant:"row"},S.id))}):s.jsx("div",{className:"space-y-4",children:i.filter(S=>!I||!Te(S)).map(S=>s.jsx(ei,{post:S,selected:y.has(S.id),onSelectionChange:x=>We(S.id,x),onImageLoaded:Oe,cachedImage:b[S.id],alreadyImported:Te(S),variant:"card"},S.id))})]})]}),!c&&i.length>0&&s.jsx("div",{className:`fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 ${p?"pointer-events-none":""}`,children:s.jsx("div",{className:"max-w-content mx-auto",children:s.jsxs("button",{onClick:Ve,disabled:pt===0||p,className:"w-full py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})}),pt>0?`Bulk Create (${pt})`:"Select posts to create"]})})}),s.jsx(fa,{isOpen:!!(p&&v),onClose:mt,title:"Creating Articles",align:"center",children:v&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[v.current," / ",v.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all duration-300",style:{width:`${v.current/v.total*100}%`}})})]}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.currentPostText}),s.jsx("button",{onClick:mt,disabled:L,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 disabled:opacity-60 rounded-lg transition-colors",children:L?"Cancel in progress...":"Cancel"})]})})]})}const ot={create:e=>oe.post("pdf/create",e),previewCover:e=>oe.post("pdf/cover-preview",e),previewCoverContent:e=>oe.post("pdf/cover-preview-content",{file_id:e}),deleteCoverPreview:e=>oe.post("pdf/cover-preview-delete",{file_id:e}),process:e=>oe.get("pdf/process",{job_id:e}),status:e=>oe.get("pdf/status",{job_id:e}),list:e=>{const t=e?{date_from:e.date_from,date_to:e.date_to,author:e.author,include_in_progress:e.include_in_progress?"true":void 0}:void 0;return oe.get("pdf/list",t)},delete:e=>oe.post("pdf/delete",{job_id:e}),triggerMerge:e=>oe.post("pdf/merge-trigger",{job_id:e}),cancelMerge:e=>oe.post("pdf/merge-cancel",{job_id:e}),cleanupMerge:e=>oe.post("pdf/merge-cleanup",{job_id:e}),cancel:e=>oe.post("pdf/cancel",{job_id:e})},my=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).email||"me"}catch{return"me"}},hy=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).name||null}catch{return null}},py=e=>e==="PENDING"||e==="RUNNING"||e==="DONE"||e==="ERROR"||e==="CANCELLED"?e:"PENDING",oc=ac((e,t)=>({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null,startGeneration:async(r,n,l,a)=>{e({isGenerating:!0,jobId:null,progress:0,progressMessage:"Starting...",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:a||null});try{const i=await ot.create({from:r,to:n,options:l}),o=new Date().toISOString(),c=my(),d=hy()||c.split("@")[0],h={job_id:i.job_id,created_at:o,created_by:c,created_by_pseudo:d,date_from:r,date_to:n,status:py(i.status),progress:i.progress,progress_message:i.progress_message,pdf_url:i.pdf_url,pdf_file_id:i.pdf_file_id};return i.status==="DONE"&&i.pdf_url?(e({isGenerating:!1,progress:100,progressMessage:"Done!",pdfUrl:i.pdf_url,showSuccess:!0}),a&&a(),h):i.status==="ERROR"?(e({isGenerating:!1,error:"PDF generation failed",progressMessage:""}),null):(e({isGenerating:!1,jobId:i.job_id}),ot.process(i.job_id).catch(()=>{}),a&&a(),h)}catch(i){return e({isGenerating:!1,error:i instanceof Error?i.message:"Error while generating PDF",progressMessage:""}),null}},pollJobStatus:async r=>{try{const n=await ot.status(r);if(e({progress:n.progress||0,progressMessage:n.progress_message||""}),n.status==="DONE"){const l=t().onCompleteCallback;e({isGenerating:!1,pdfUrl:n.pdf_url||null,showSuccess:!0}),l&&l()}else n.status==="ERROR"?e({isGenerating:!1,error:n.error_message||"PDF generation failed"}):setTimeout(()=>t().pollJobStatus(r),1e3)}catch(n){e({isGenerating:!1,error:n instanceof Error?n.message:"Error while tracking job"})}},setLastCompletedJob:r=>{e({lastCompletedJob:r,showSuccess:!!(r!=null&&r.pdf_url),pdfUrl:(r==null?void 0:r.pdf_url)||null})},dismissSuccess:()=>{e({showSuccess:!1,pdfUrl:null,lastCompletedJob:null})},dismissError:()=>{e({error:null})},reset:()=>{e({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null})}})),re={get:e=>oe.get("config/get",{key:e}),set:(e,t)=>oe.post("config/set",{key:e,value:t})},gy=e=>{const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);return t?{y:t[1],m:t[2],d:t[3]}:{y:"",m:"",d:""}},xy=(e,t,r)=>!e||!t||!r?"":`${e}-${t}-${r}`,qd=(e,t)=>{const r=Number(e),n=Number(t);return!Number.isFinite(r)||!Number.isFinite(n)||n<1||n>12?31:new Date(r,n,0).getDate()};function vy({isOpen:e,onClose:t,onComplete:r}){const{startGeneration:n,isGenerating:l}=oc(),[a,i]=u.useState("dates"),[o,c]=u.useState(""),[d,h]=u.useState(""),[f,g]=u.useState(!1),[y,w]=u.useState(null),[b,_]=u.useState([]),[p,m]=u.useState(0),[v,j]=u.useState("full"),[E,L]=u.useState(!0),[P,k]=u.useState(0),[X,M]=u.useState("mosaic"),[K,$]=u.useState(!1),[O,te]=u.useState(!1),[J,W]=u.useState(""),[se,F]=u.useState(""),[A,U]=u.useState(""),[B,ee]=u.useState(!1),[pe,H]=u.useState("start"),[ae,ne]=u.useState({y:"",m:"",d:""}),[ye,Fe]=u.useState(!1),De=new Date().getFullYear(),we=Array.from({length:26},(z,ie)=>String(De-10+ie)),je=()=>{i("dates"),c(""),h(""),_([]),m(0),w(null),j("full"),L(!0),k(0),M("mosaic"),$(!1),te(!1),W(""),F(""),U("")},Ne=()=>{je(),t()},Be=async()=>{if(!o||!d){w("Please select a start and end date");return}if(d<o){w("End date cannot be earlier than start date");return}g(!0),w(null);try{const z=[];let ie=null;do{const Q=await Ut.list({from:o,to:d,limit:"100",cursor:ie||void 0,status_filter:"all"});z.push(...Q.items),ie=Q.next_cursor}while(ie);const I=new Map;let G=0,Z=0;for(const Q of z){if(Q.status==="DELETED")continue;Z++;const me=Q.date.substring(0,7),Ce=eo(Q.date),ue=Q.status==="ACTIVE",We=Q.status==="DRAFT",Oe=Q.is_duplicate===!0;I.has(me)||I.set(me,{label:Ce,activeCount:0,draftCount:0,duplicateCount:0});const ft=I.get(me);ue&&(ft.activeCount++,G++),We&&ft.draftCount++,Oe&&ft.duplicateCount++}const q=Array.from(I.entries()).sort((Q,me)=>Q[0].localeCompare(me[0])).map(([Q,me])=>({key:Q,label:me.label,activeCount:me.activeCount,draftCount:me.draftCount,duplicateCount:me.duplicateCount}));if(_(q),m(G),k(G),Z===0){w("No articles found for this period");return}G===0&&w("No active articles found for this period"),i("preview")}catch(z){w(z instanceof Error?z.message:"Error while loading")}finally{g(!1)}},Ae=async()=>{const z=await n(o,d,{mosaic_layout:v,show_seasonal_fruits:E,max_mosaic_photos:P>0?P:void 0,cover_style:X,family_name:J.trim()||void 0,cover_title:se.trim()||void 0,cover_subtitle:A.trim()||void 0,auto_merge:K,clean_chunks:K?O:void 0});je(),t(),r(z)},ze=z=>{const I=gy(z==="start"?o:d);if(!I.y||!I.m||!I.d){const G=new Date;I.y=String(G.getFullYear()),I.m=String(G.getMonth()+1).padStart(2,"0"),I.d=String(G.getDate()).padStart(2,"0")}ne(I),H(z)},Qe=z=>{z&&(pe==="start"?(c(z),d&&z>d&&h(z)):(h(z),o&&z<o&&c(z)),y&&w(null))};return u.useEffect(()=>{if(!e)return;let z=!1;const ie=window.scrollY||document.documentElement.scrollTop||0,I={overflow:document.body.style.overflow,position:document.body.style.position,top:document.body.style.top,width:document.body.style.width};document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${ie}px`,document.body.style.width="100%",(async()=>{ee(!0);try{const[q,Q,me]=await Promise.all([re.get("family_name"),re.get("pdf_cover_title"),re.get("pdf_cover_subtitle")]);if(z)return;const Ce=q.value||"";W(Ce),F(Q.value||""),U(me.value||"")}catch{z||(W(""),F(""),U(""))}finally{z||ee(!1)}})();const Z=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return Fe(Z),()=>{z=!0,document.body.style.overflow=I.overflow,document.body.style.position=I.position,document.body.style.top=I.top,document.body.style.width=I.width,window.scrollTo(0,ie)}},[e]),e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Ne}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col mx-2 pdf-generate-modal",children:[s.jsx("style",{children:`
            .pdf-generate-modal input[type="date"] {
              width: 100% !important;
              max-width: 100% !important;
              min-width: 0 !important;
              box-sizing: border-box !important;
              display: block;
            }
          `}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[a==="dates"&&"Select date range",a==="preview"&&"Article preview",a==="options"&&"Generation options"]}),s.jsx("button",{onClick:Ne,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4",children:[y&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:y}),a==="dates"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start date"}),ye?s.jsx("button",{type:"button",onClick:()=>ze("start"),disabled:f,className:`w-full px-3 py-2 border rounded-lg text-left text-sm bg-white ${pe==="start"?"border-primary-500 ring-1 ring-primary-200":"border-gray-300"}`,children:o||"Select date"}):s.jsx("input",{type:"date",value:o,onChange:z=>{const ie=z.target.value;c(ie),d&&ie&&d<ie&&h(ie),y&&w(null)},disabled:f,max:d||void 0,className:"block w-full min-w-0 max-w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100",style:{maxWidth:"100%",width:"100%"}})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End date"}),ye?s.jsx("button",{type:"button",onClick:()=>ze("end"),disabled:f,className:`w-full px-3 py-2 border rounded-lg text-left text-sm bg-white ${pe==="end"?"border-primary-500 ring-1 ring-primary-200":"border-gray-300"}`,children:d||"Select date"}):s.jsx("input",{type:"date",value:d,onChange:z=>{const ie=z.target.value;h(ie),o&&ie&&ie<o&&c(ie),y&&w(null)},disabled:f,min:o||void 0,className:"block w-full min-w-0 max-w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100",style:{maxWidth:"100%",width:"100%"}})]}),ye&&s.jsxs("div",{className:"mt-2 border border-gray-200 rounded-lg bg-gray-50 p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Select date (wheel)"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:(()=>{const z=qd(ae.y,ae.m),ie=[{key:"y",values:we},{key:"m",values:Array.from({length:12},(G,Z)=>String(Z+1).padStart(2,"0"))},{key:"d",values:Array.from({length:z},(G,Z)=>String(Z+1).padStart(2,"0"))}],I=32;return ie.map(G=>s.jsxs("div",{className:"h-40 overflow-y-auto snap-y snap-mandatory bg-white border border-gray-200 rounded-lg",onScroll:Z=>{const q=Z.currentTarget,Q=Math.round(q.scrollTop/I),me=G.values[Math.max(0,Math.min(G.values.length-1,Q))]||"";ne(Ce=>{const ue={...Ce,[G.key]:me};if(G.key==="m"){const Oe=qd(ue.y,me);ue.d&&Number(ue.d)>Oe&&(ue.d=String(Oe).padStart(2,"0"))}const We=xy(ue.y,ue.m,ue.d);return Qe(We),ue})},children:[s.jsx("div",{style:{height:I}}),G.values.map(Z=>{const q=ae[G.key]===Z;return s.jsx("div",{className:`h-8 flex items-center justify-center snap-center text-sm ${q?"text-primary-700 font-semibold":"text-gray-600"}`,children:Z},Z)}),s.jsx("div",{style:{height:I}})]},G.key))})()})]})]}),a==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-primary-50 rounded-lg p-4",children:s.jsxs("p",{className:"text-primary-800",children:[s.jsx("span",{className:"font-semibold text-primary-900",children:p})," active article",p>1?"s":""," ","across"," ",s.jsx("span",{className:"font-semibold text-primary-900",children:b.length})," mois"]})}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Monthly breakdown"})}),s.jsx("ul",{className:"divide-y divide-gray-100 max-h-[40vh] overflow-y-auto overscroll-contain",children:b.map(z=>s.jsxs("li",{className:"px-3 py-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-700",children:z.label}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Draft ",z.draftCount,"  Duplicate ",z.duplicateCount]})]}),s.jsxs("span",{className:"bg-primary-100 text-primary-700 px-2.5 py-0.5 rounded text-xs font-medium whitespace-nowrap",children:["Active ",z.activeCount]})]},z.key))})]})]}),a==="options"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:[s.jsx("strong",{children:p})," articles from"," ",s.jsx("strong",{children:new Date(o).toLocaleDateString("fr-FR")})," to"," ",s.jsx("strong",{children:new Date(d).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg bg-gray-50/60 p-4 space-y-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Cover"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover photos"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"range",min:1,max:p,value:P||p,onChange:z=>k(parseInt(z.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-12 text-right",children:P||p})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of photos in the cover mosaic"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover style"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>M("mosaic"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${X==="mosaic"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Mosaic"}),s.jsx("button",{onClick:()=>M("masked-title"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${X==="masked-title"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Masked title"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cover text"}),B&&s.jsx("span",{className:"text-xs text-gray-400",children:"Loading defaults..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Family name (vertical)"}),s.jsx("input",{type:"text",value:J,onChange:z=>W(z.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Famille Dupont"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:se,onChange:z=>F(z.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Memory Book"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Subtitle"}),s.jsx("input",{type:"text",value:A,onChange:z=>U(z.target.value.slice(0,30)),maxLength:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Du 01/01/2024 au 31/12/2024"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Defaults are pulled from Settings and can be overridden per PDF."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month divider style"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>j("full"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${v==="full"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Full mosaic"}),s.jsx("button",{onClick:()=>j("centered"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${v==="centered"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Centered mosaic"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:z=>L(z.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Seasonal fruits & vegetables"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Decorations around month dividers"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:K,onChange:z=>$(z.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-merge via GitHub Action"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Triggers the merge workflow after chunks are generated"})]})]}),K&&s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:z=>te(z.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delete chunks after merge"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Remove intermediate PDF parts once the merge succeeds"})]})]})]})]}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex gap-3",children:[a==="dates"&&s.jsxs(s.Fragment,{children:[s.jsx(ve,{variant:"secondary",onClick:Ne,fullWidth:!0,children:"Cancel"}),s.jsx(ve,{onClick:Be,disabled:!o||!d||f,fullWidth:!0,children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Searching..."]}):"Next"})]}),a==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(ve,{variant:"secondary",onClick:()=>i("dates"),fullWidth:!0,children:"Back"}),s.jsx(ve,{onClick:()=>i("options"),disabled:p===0,fullWidth:!0,children:"Next"})]}),a==="options"&&s.jsxs(s.Fragment,{children:[s.jsx(ve,{variant:"secondary",onClick:()=>i("preview"),fullWidth:!0,children:"Back"}),s.jsxs(ve,{onClick:Ae,disabled:l,fullWidth:!0,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate PDF"]})]})]})]})]}):null}const yy=jr;function wy(){const{user:e}=yy(),{profile:t}=lc(),[r,n]=u.useState([]),[l,a]=u.useState(!0),[i,o]=u.useState(!1),[c,d]=u.useState(0),[h,f]=u.useState(!1),g=u.useRef(null),y=u.useRef(null),w=70,b=14,_=120,[p,m]=u.useState(null),[v,j]=u.useState(""),[E,L]=u.useState("all"),[P,k]=u.useState("created_at"),[X,M]=u.useState("desc"),[K,$]=u.useState([]),[O,te]=u.useState(!1),[J,W]=u.useState(new Set),[se,F]=u.useState(null),[A,U]=u.useState(!1),[B,ee]=u.useState(!1),[pe,H]=u.useState(null),[ae,ne]=u.useState(null),[ye,Fe]=u.useState(new Set),[De,we]=u.useState(new Set),[je,Ne]=u.useState(!1),Be=u.useCallback(async()=>{m(null);const x=await ot.list({include_in_progress:!0});n(x.items||[]),$(x.authors||[])},[]),Ae=u.useCallback(async()=>{a(!0);try{await Be()}catch(x){m(x instanceof Error?x.message:"Failed to load PDF list")}finally{a(!1)}},[Be]),ze=u.useCallback(async()=>{if(!(l||i)){o(!0);try{await Be()}catch(x){m(x instanceof Error?x.message:"Failed to refresh PDF list")}finally{o(!1)}}},[Be,l,i]);u.useEffect(()=>{Ae()},[Ae]);const[Qe,z]=u.useState(new Map),{setLastCompletedJob:ie}=oc(),I=r.filter(x=>x.status==="PENDING"||x.status==="RUNNING"),G=r.filter(x=>x.status==="DONE"||x.status==="ERROR"||x.status==="CANCELLED");u.useEffect(()=>{if(I.length===0)return;const x=setInterval(async()=>{const C=await Promise.all(I.map(async T=>{try{return{...await ot.status(T.job_id),job_id:T.job_id}}catch{return null}}));n(T=>T.map(le=>{const he=C.find(He=>He&&He.job_id===le.job_id);return he?{...le,status:he.status,progress:he.progress,progress_message:he.progress_message,pdf_url:he.pdf_url,pdf_file_id:he.pdf_file_id,error_message:he.error_message}:le}))},2e3);return()=>clearInterval(x)},[I.length]),u.useEffect(()=>{const x=new Map(r.map(C=>[C.job_id,C.status]));for(const[C,T]of Qe){const le=x.get(C);if((T==="PENDING"||T==="RUNNING")&&le==="DONE"){const he=r.find(He=>He.job_id===C);he&&ie(he)}}z(x)},[r,Qe,ie]);const Z=x=>{if(!x)return 0;const C=new Date(x);return isNaN(C.getTime())?0:C.getTime()},q=G.filter(x=>!v||x.created_by===v).filter(x=>E==="merged"?!!x.pdf_url:E==="pending"?x.status==="DONE"&&!x.pdf_url:!0).sort((x,C)=>{let T=0;return P==="created_at"?T=Z(x.created_at)-Z(C.created_at):P==="date_from"?T=Z(x.date_from)-Z(C.date_from):P==="created_by"&&(T=(x.created_by||"").localeCompare(C.created_by||"")),X==="desc"?-T:T}),Q=x=>{try{return new Date(x).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return x}},me=(x,C)=>{try{const T=new Date(x),le=new Date(C),he={day:"2-digit",month:"short",year:"numeric"};return`${T.toLocaleDateString("fr-FR",he)}  ${le.toLocaleDateString("fr-FR",he)}`}catch{return`${x}  ${C}`}},Ce=x=>{const C=(x.progress_message||"").toLowerCase();return x.status!=="RUNNING"?!1:x.chunks_folder_id&&!x.pdf_url?!0:C.includes("merge")},ue=u.useCallback((x,C)=>{var le;return C||(x?e!=null&&e.email&&(t!=null&&t.pseudo)&&x===e.email?t.pseudo:((le=r.find(he=>he.created_by===x))==null?void 0:le.created_by_pseudo)||x.split("@")[0]:"Unknown")},[r,t==null?void 0:t.pseudo,e==null?void 0:e.email]),We=x=>{const C=new Set(J);C.has(x)?C.delete(x):C.add(x),W(C)},Oe=()=>{J.size===q.length?W(new Set):W(new Set(q.map(x=>x.job_id)))},ft=async()=>{if(se){ee(!0);try{await ot.delete(se),n(x=>x.filter(C=>C.job_id!==se)),F(null)}catch(x){m(x instanceof Error?x.message:"Failed to delete PDF")}finally{ee(!1)}}},Ve=async()=>{if(J.size!==0){ee(!0);try{for(const x of J)await ot.delete(x);n(x=>x.filter(C=>!J.has(C.job_id))),W(new Set),te(!1),U(!1)}catch(x){m(x instanceof Error?x.message:"Failed to delete PDFs")}finally{ee(!1)}}},mt=x=>{Ne(!1),x&&(n(C=>{const T=C.findIndex(he=>he.job_id===x.job_id);if(T===-1)return[x,...C];const le=[...C];return le[T]={...le[T],...x},le}),$(C=>x.created_by&&!C.includes(x.created_by)?[...C,x.created_by]:C))},ht=async x=>{ne(x);try{await ot.cancel(x),n(C=>C.filter(T=>T.job_id!==x))}catch(C){m(C instanceof Error?C.message:"Failed to cancel PDF generation")}finally{ne(null)}},pt=x=>{if(!x)return"The PDF will be permanently deleted from Google Drive.";const C=r.find(T=>T.job_id===x);return C?C.chunks_folder_id?"The merged PDF, the chunks folder, and all temporary files will be permanently deleted from Google Drive.":"The merged PDF will be permanently deleted from Google Drive.":"The PDF will be permanently deleted from Google Drive."},Ze=async x=>{ne(x);try{await ot.cancelMerge(x),n(C=>C.map(T=>T.job_id!==x?T:{...T,status:"ERROR",progress:0,progress_message:"Merge failed",error_message:"Merge failed"}))}catch(C){m(C instanceof Error?C.message:"Failed to cancel merge")}finally{ne(null)}},It=async x=>{Fe(C=>new Set(C).add(x));try{await ot.triggerMerge(x),n(C=>C.map(T=>T.job_id!==x?T:{...T,status:"RUNNING",progress:10,progress_message:"Merge queued",error_message:void 0}))}catch(C){m(C instanceof Error?C.message:"Failed to trigger merge")}finally{Fe(C=>{const T=new Set(C);return T.delete(x),T})}},er=async x=>{we(C=>new Set(C).add(x));try{await ot.cleanupMerge(x),n(C=>C.map(T=>T.job_id!==x?T:{...T,chunks_folder_id:void 0,chunks_folder_url:void 0,progress_message:"Chunks cleaned"}))}catch(C){m(C instanceof Error?C.message:"Failed to clean chunks")}finally{we(C=>{const T=new Set(C);return T.delete(x),T})}},Te=async()=>{pe&&(await er(pe),H(null))},D=x=>{var T;(((T=y.current)==null?void 0:T.scrollTop)??0)<=0&&!i&&!l&&(g.current=x.touches[0].clientY,f(!1))},V=x=>{var He;if(i||l)return;if((((He=y.current)==null?void 0:He.scrollTop)??0)>0){d(0),f(!1),g.current=null;return}g.current===null&&(g.current=x.touches[0].clientY);const T=x.touches[0].clientY-g.current;if(T<=b){d(0),f(!1);return}const le=T-b,he=_*le/(le+_);d(Math.min(b+he,_)),f(!0)},S=()=>{c>=w&&!i&&!l&&ze(),d(0),f(!1),g.current=null};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),s.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky app-safe-top-14 z-20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:O?`${J.size} selected`:"Generated PDFs"}),!O&&s.jsx("span",{className:"text-xs font-semibold text-gray-600 bg-gray-100 border border-gray-200 rounded-full px-2.5 py-1",children:q.length}),s.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[O&&s.jsx("button",{onClick:Oe,className:"text-primary-600 hover:text-primary-700 touch-manipulation text-sm font-medium",children:J.size===q.length?"Deselect all":"Select all"}),!O&&s.jsxs("button",{onClick:ze,className:`touch-manipulation text-sm font-medium flex items-center gap-2 hidden sm:flex ${l||i?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:l||i,children:[s.jsx("svg",{className:`w-4 h-4 ${i?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),q.length>0&&s.jsx(Uh,{checked:O,onChange:x=>{te(x),x||W(new Set)},label:"Select"})]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-3 h-11 overflow-x-auto",children:O?s.jsx("span",{className:"text-sm text-gray-500",children:"Select PDFs to delete"}):s.jsxs(s.Fragment,{children:[K.length>1&&s.jsxs("select",{value:v,onChange:x=>j(x.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[s.jsx("option",{value:"",children:"Author"}),K.map(x=>s.jsx("option",{value:x,children:ue(x)},x))]}),s.jsxs("select",{value:E,onChange:x=>L(x.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[s.jsx("option",{value:"all",children:"All PDFs"}),s.jsx("option",{value:"merged",children:"Merged"}),s.jsx("option",{value:"pending",children:"Merge pending"})]}),s.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden text-xs",children:[s.jsxs("button",{onClick:()=>{P==="created_at"?M(X==="desc"?"asc":"desc"):(k("created_at"),M("desc"))},className:`px-3 py-2.5 font-medium transition-colors flex items-center gap-1 ${P==="created_at"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Created",P==="created_at"&&s.jsx("span",{className:"text-[10px]",children:X==="desc"?"":""})]}),s.jsxs("button",{onClick:()=>{P==="date_from"?M(X==="desc"?"asc":"desc"):(k("date_from"),M("desc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${P==="date_from"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Period",P==="date_from"&&s.jsx("span",{className:"text-[10px]",children:X==="desc"?"":""})]}),s.jsxs("button",{onClick:()=>{P==="created_by"?M(X==="desc"?"asc":"desc"):(k("created_by"),M("asc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${P==="created_by"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Author",P==="created_by"&&s.jsx("span",{className:"text-[10px]",children:X==="desc"?"":""})]})]})]})})]}),p&&s.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[p,s.jsx("button",{onClick:()=>m(null),className:"ml-2 text-red-500 hover:text-red-700",children:""})]}),s.jsx("div",{ref:y,className:"flex-1 overflow-y-auto overscroll-contain",onTouchStart:D,onTouchMove:V,onTouchEnd:S,children:s.jsxs("div",{className:"relative p-4 pb-24",children:[(c>0||i)&&s.jsx("div",{className:"absolute left-0 right-0 flex items-center justify-center pointer-events-none",style:{top:0,transform:`translateY(${Math.min(c,80)}px)`,transition:h?"none":"transform 260ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 200ms ease",opacity:Math.min(1,c/40),zIndex:5},children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-full shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("svg",{className:"absolute inset-0 w-6 h-6 text-gray-200",viewBox:"0 0 36 36",children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3"})}),s.jsx("svg",{className:`absolute inset-0 w-6 h-6 ${i?"animate-spin text-primary-600":"text-primary-600"}`,viewBox:"0 0 36 36",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",strokeDasharray:`${Math.min(100,c/w*100)}, 100`,transition:"stroke-dasharray 120ms ease"},children:s.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})}),s.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-transform ${c>=w?"rotate-180":""}`,children:[s.jsx("svg",{className:`w-3.5 h-3.5 ${i?"hidden":"block"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 5v14m0 0l-5-5m5 5l5-5"})}),s.jsx("svg",{className:`w-3.5 h-3.5 ${i?"block":"hidden"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),s.jsx("span",{className:"text-xs text-gray-600",children:i?"Refreshing...":c>=w?"Release to refresh":"Pull to refresh"})]})}),l?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(_t,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading PDFs..."})]})}):I.length===0&&q.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No PDFs generated"})]}):s.jsxs(s.Fragment,{children:[I.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generating"}),s.jsx("div",{className:"space-y-3",children:I.map(x=>s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:s.jsxs("svg",{className:"w-5 h-5 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900",children:me(x.date_from,x.date_to)}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-blue-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:`${x.progress||0}%`}})}),s.jsxs("span",{className:"text-xs text-blue-600 font-medium w-8",children:[x.progress||0,"%"]})]}),s.jsx("p",{className:"text-xs text-blue-500 mt-0.5",children:x.progress_message||"Pending..."}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",ue(x.created_by,x.created_by_pseudo)]}),x.chunks_folder_url&&s.jsx("a",{href:x.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:C=>C.stopPropagation(),children:"PDF parts folder"})]}),s.jsx("button",{onClick:()=>Ce(x)?Ze(x.job_id):ht(x.job_id),disabled:ae===x.job_id,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:Ce(x)?"Cancel merge":"Cancel",children:ae===x.job_id?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})},x.job_id))})]}),q.length>0&&s.jsxs("div",{children:[I.length>0&&s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generated"}),s.jsx("div",{className:"space-y-3",children:q.map(x=>s.jsx("div",{onClick:()=>O&&We(x.job_id),className:`bg-white rounded-lg shadow-sm border transition-colors ${O?J.has(x.job_id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300":"border-gray-200"} p-4 ${O?"cursor-pointer":""}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[O&&s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${J.has(x.job_id)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:J.has(x.job_id)&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-gray-900",children:me(x.date_from,x.date_to)}),x.pdf_url&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded",children:"Merged"}),!x.pdf_url&&x.status==="DONE"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-50 text-yellow-700 rounded",children:"Merge pending"}),x.status==="ERROR"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:"Error"}),x.status==="CANCELLED"&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded",children:"Cancelled"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Created on ",Q(x.created_at)]}),x.status==="ERROR"&&s.jsx("p",{className:"text-xs text-red-500 mt-0.5 truncate",title:x.error_message||"Merge failed",children:x.error_message||"Merge failed"}),x.status==="DONE"&&!x.pdf_url&&x.progress_message&&s.jsx("p",{className:"text-xs text-amber-600 mt-0.5 truncate",title:x.progress_message,children:x.progress_message}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",ue(x.created_by,x.created_by_pseudo)]}),x.chunks_folder_url&&s.jsx("a",{href:x.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:C=>C.stopPropagation(),children:"PDF parts folder"})]}),!O&&s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[x.pdf_url&&s.jsx("a",{href:x.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Voir le PDF",onClick:C=>C.stopPropagation(),children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),x.pdf_url&&x.chunks_folder_id&&s.jsx("button",{onClick:C=>{C.stopPropagation(),H(x.job_id)},className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors disabled:opacity-50",title:"Clean chunks",disabled:De.has(x.job_id),children:De.has(x.job_id)?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M3 6h18M8 6V4h8v2M6 6l1 14h10l1-14M10 10v6M14 10v6"})})}),!x.pdf_url&&(x.status==="DONE"||x.status==="ERROR")&&x.chunks_folder_id&&s.jsx("button",{onClick:C=>{C.stopPropagation(),It(x.job_id)},className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50",title:"Trigger merge",disabled:ye.has(x.job_id),children:ye.has(x.job_id)?s.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{onClick:C=>{C.stopPropagation(),F(x.job_id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},x.job_id))})]})]})]})}),O&&J.size>0&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:s.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[J.size," PDF",J.size>1?"s":""," selected"]}),s.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Delete"})]})}),!O&&s.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-30",children:s.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:s.jsx(zh,{onClick:()=>Ne(!0),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),s.jsx(vy,{isOpen:je,onClose:()=>Ne(!1),onComplete:mt}),s.jsx(Lt,{isOpen:!!se,title:"Delete PDF?",message:pt(se),confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:ft,onCancel:()=>F(null),variant:"danger",isLoading:B}),s.jsx(Lt,{isOpen:A,title:`Delete ${J.size} PDF${J.size>1?"s":""}?`,message:"Selected PDFs will be permanently deleted from Google Drive.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:Ve,onCancel:()=>U(!1),variant:"danger",isLoading:B}),s.jsx(Lt,{isOpen:!!pe,title:"Clean chunks?",message:"This will delete the chunks folder and move the merged PDF to Rememly/pdf.",confirmLabel:"Clean",cancelLabel:"Cancel",onConfirm:Te,onCancel:()=>H(null),variant:"danger",isLoading:De.has(pe||"")})]})}const ti={getPdfRange:()=>oe.get("logs/pdf/range"),clearPdfRange:(e,t)=>oe.post("logs/pdf/clear",{from:e,to:t}),cleanupPdfProperties:()=>oe.post("pdf/cleanup-properties")},ri=[{value:"garamond",label:"Garamond"},{value:"palatino",label:"Palatino"},{value:"baskerville",label:"Baskerville"},{value:"didot",label:"Didot"},{value:"caslon",label:"Caslon"},{value:"georgia",label:"Georgia"},{value:"optima",label:"Optima"}],ni=[{value:400,label:"Regular (400)"},{value:500,label:"Medium (500)"},{value:600,label:"Semibold (600)"},{value:700,label:"Bold (700)"},{value:800,label:"Extra Bold (800)"}];function jy(){const{showToast:e,setUnsavedChanges:t}=Xt(),[r,n]=u.useState(""),[l,a]=u.useState(""),[i,o]=u.useState(""),[c,d]=u.useState(""),[h,f]=u.useState(""),[g,y]=u.useState(""),[w,b]=u.useState(0),[_,p]=u.useState(0),[m,v]=u.useState(5),[j,E]=u.useState(5),[L,P]=u.useState("garamond"),[k,X]=u.useState("garamond"),[M,K]=u.useState(700),[$,O]=u.useState(700),[te,J]=u.useState(1),[W,se]=u.useState(1),[F,A]=u.useState(1),[U,B]=u.useState(1),[ee,pe]=u.useState(8.5),[H,ae]=u.useState(8.5),[ne,ye]=u.useState(3.5),[Fe,De]=u.useState(3.5),[we,je]=u.useState(.99),[Ne,Be]=u.useState(.99),[Ae,ze]=u.useState("palatino"),[Qe,z]=u.useState("palatino"),[ie,I]=u.useState(700),[G,Z]=u.useState(700),[q,Q]=u.useState(0),[me,Ce]=u.useState(0),[ue,We]=u.useState(1),[Oe,ft]=u.useState(1),[Ve,mt]=u.useState(1),[ht,pt]=u.useState(1),[Ze,It]=u.useState(8.5),[er,Te]=u.useState(8.5),[D,V]=u.useState(.85),[S,x]=u.useState(.85),[C,T]=u.useState("palatino"),[le,he]=u.useState("palatino"),[He,at]=u.useState(700),[Vr,gt]=u.useState(700),[Ge,St]=u.useState(0),[xt,uc]=u.useState(0),[or,Vs]=u.useState(1),[pa,dc]=u.useState(1),[cr,Hs]=u.useState(1),[ga,fc]=u.useState(1),[mc,Wh]=u.useState(!0),[xa,hc]=u.useState(!1),[Vh,pc]=u.useState(!0),[Gs,Hh]=u.useState(null),[Ys,Gh]=u.useState(null),[Hr,va]=u.useState(null),[Gr,ya]=u.useState(null),[gc,xc]=u.useState(!1),[Yh,Xs]=u.useState(0),[Yr,vc]=u.useState(null),[Xh,yc]=u.useState(null),[wc,jc]=u.useState(!1),[bc,Nc]=u.useState(!1),[Qh,Sc]=u.useState(!1),[kc,Cc]=u.useState(!1),[_c,Kh]=u.useState([]),wa=r.trim()!==l.trim()||i.trim()!==c.trim()||h.trim()!==g.trim()||w!==_||m!==j||L!==k||M!==$||ne!==Fe||te!==W||F!==U||ee!==H||we!==Ne||Ae!==Qe||ie!==G||q!==me||ue!==Oe||Ve!==ht||Ze!==er||D!==S||C!==le||He!==Vr||Ge!==xt||or!==pa||cr!==ga;u.useEffect(()=>{Jh(),Ec(),Pc(),Zh()},[]);const Jh=async()=>{try{const[N,de,Ie,vt,Hn,ja,mn,op,cp,up,dp,fp,mp,hp,pp,gp,xp,vp,yp,wp,jp,bp,Np,Sp]=await Promise.all([re.get("family_name"),re.get("pdf_cover_title"),re.get("pdf_cover_subtitle"),re.get("pdf_cover_vertical_letter_spacing"),re.get("pdf_cover_family_x_cm"),re.get("pdf_cover_family_font_family"),re.get("pdf_cover_family_font_weight"),re.get("pdf_cover_family_h_cm"),re.get("pdf_cover_family_scale_x"),re.get("pdf_cover_family_scale_y"),re.get("pdf_cover_title_font_family"),re.get("pdf_cover_title_font_weight"),re.get("pdf_cover_title_letter_spacing_em"),re.get("pdf_cover_title_scale_x"),re.get("pdf_cover_title_scale_y"),re.get("pdf_cover_subtitle_font_family"),re.get("pdf_cover_subtitle_font_weight"),re.get("pdf_cover_subtitle_letter_spacing_em"),re.get("pdf_cover_subtitle_scale_x"),re.get("pdf_cover_subtitle_scale_y"),re.get("pdf_cover_title_x_cm"),re.get("pdf_cover_title_h_cm"),re.get("pdf_cover_subtitle_x_cm"),re.get("pdf_cover_subtitle_h_cm")]),Fc=N.value||"",Dc=de.value||"",Rc=Ie.value||"",Tc=vt.value||"0",Ic=Hn.value||"",Mc=ja.value||"garamond",Ac=mn.value||"700",zc=op.value||"3.5",Oc=cp.value||"1",Uc=up.value||"1",$c=dp.value||"palatino",Bc=fp.value||"700",Wc=mp.value||"0",Vc=hp.value||"1",Hc=pp.value||"1",Gc=gp.value||"palatino",Yc=xp.value||"700",Xc=vp.value||"0",Qc=yp.value||"1",Kc=wp.value||"1",Jc=jp.value||"",Zc=bp.value||"",qc=Np.value||"",eu=Sp.value||"";n(Fc),a(Fc),o(Dc),d(Dc),f(Rc),y(Rc);const tu=Number.isFinite(parseFloat(Tc))?parseFloat(Tc):0;b(tu),p(tu);const ru=Number.isFinite(parseFloat(Ic))?parseFloat(Ic):5;v(ru),E(ru),P(Mc),X(Mc);const nu=Number.isFinite(parseFloat(Ac))?parseFloat(Ac):700;K(nu),O(nu);const su=Number.isFinite(parseFloat(zc))?parseFloat(zc):3.5;ye(su),De(su);const lu=Number.isFinite(parseFloat(Oc))?parseFloat(Oc):1;J(lu),se(lu);const au=Number.isFinite(parseFloat(Uc))?parseFloat(Uc):1;A(au),B(au),ze($c),z($c);const iu=Number.isFinite(parseFloat(Bc))?parseFloat(Bc):700;I(iu),Z(iu);const ou=Number.isFinite(parseFloat(Wc))?parseFloat(Wc):0;Q(ou),Ce(ou);const cu=Number.isFinite(parseFloat(Vc))?parseFloat(Vc):1;We(cu),ft(cu);const uu=Number.isFinite(parseFloat(Hc))?parseFloat(Hc):1;mt(uu),pt(uu),T(Gc),he(Gc);const du=Number.isFinite(parseFloat(Yc))?parseFloat(Yc):700;at(du),gt(du);const fu=Number.isFinite(parseFloat(Xc))?parseFloat(Xc):0;St(fu),uc(fu);const mu=Number.isFinite(parseFloat(Qc))?parseFloat(Qc):1;Vs(mu),dc(mu);const hu=Number.isFinite(parseFloat(Kc))?parseFloat(Kc):1;Hs(hu),fc(hu);const pu=Number.isFinite(parseFloat(Jc))?parseFloat(Jc):8.5;pe(pu),ae(pu);const gu=Number.isFinite(parseFloat(Zc))?parseFloat(Zc):.99;je(gu),Be(gu);const xu=Number.isFinite(parseFloat(qc))?parseFloat(qc):8.5;It(xu),Te(xu);const vu=Number.isFinite(parseFloat(eu))?parseFloat(eu):.85;V(vu),x(vu)}catch{e("Error while loading","error")}finally{Wh(!1)}};u.useEffect(()=>()=>{Yr&&Yr.startsWith("blob:")&&URL.revokeObjectURL(Yr)},[Yr]);const Zh=async()=>{try{const N=localStorage.getItem("cover_preview_file_id");if(!N)return;await ot.deleteCoverPreview(N)}catch{}finally{localStorage.removeItem("cover_preview_file_id")}},qh=async()=>{hc(!0);try{const N=r.trim(),de=i.trim(),Ie=h.trim();await Promise.all([re.set("family_name",N),re.set("pdf_cover_title",de),re.set("pdf_cover_subtitle",Ie),re.set("pdf_cover_vertical_letter_spacing",String(w)),re.set("pdf_cover_family_x_cm",String(m)),re.set("pdf_cover_family_font_family",L),re.set("pdf_cover_family_font_weight",String(M)),re.set("pdf_cover_family_h_cm",String(ne)),re.set("pdf_cover_family_scale_x",String(te)),re.set("pdf_cover_family_scale_y",String(F)),re.set("pdf_cover_title_font_family",Ae),re.set("pdf_cover_title_font_weight",String(ie)),re.set("pdf_cover_title_letter_spacing_em",String(q)),re.set("pdf_cover_title_scale_x",String(ue)),re.set("pdf_cover_title_scale_y",String(Ve)),re.set("pdf_cover_title_x_cm",String(ee)),re.set("pdf_cover_title_h_cm",String(we)),re.set("pdf_cover_subtitle_font_family",C),re.set("pdf_cover_subtitle_font_weight",String(He)),re.set("pdf_cover_subtitle_letter_spacing_em",String(Ge)),re.set("pdf_cover_subtitle_scale_x",String(or)),re.set("pdf_cover_subtitle_scale_y",String(cr)),re.set("pdf_cover_subtitle_x_cm",String(Ze)),re.set("pdf_cover_subtitle_h_cm",String(D))]),n(N),a(N),o(de),d(de),f(Ie),y(Ie),p(w),E(m),X(L),O(M),De(ne),se(te),B(F),ae(ee),Be(we),z(Ae),Z(ie),Ce(q),ft(ue),pt(Ve),Te(Ze),x(D),he(C),gt(He),uc(Ge),dc(or),fc(cr),e("Configuration saved","success")}catch{e("Error while saving","error")}finally{hc(!1)}},ep=async()=>{jc(!0);try{const N=await ot.previewCover({from:new Date().toISOString().slice(0,10),to:new Date().toISOString().slice(0,10),options:{cover_style:"masked-title",max_mosaic_photos:0,preview_solid:!0,family_name:r.trim(),cover_title:i.trim(),cover_subtitle:h.trim(),cover_vertical_letter_spacing_em:w,cover_family_x_cm:m,cover_family_font_family:L,cover_family_font_weight:M,cover_family_letter_spacing_em:w,cover_family_h_cm:ne,cover_family_scale_x:te,cover_family_scale_y:F,cover_title_font_family:Ae,cover_title_font_weight:ie,cover_title_letter_spacing_em:q,cover_title_scale_x:ue,cover_title_scale_y:Ve,cover_title_x_cm:ee,cover_title_h_cm:we,cover_subtitle_font_family:C,cover_subtitle_font_weight:He,cover_subtitle_letter_spacing_em:Ge,cover_subtitle_scale_x:or,cover_subtitle_scale_y:cr,cover_subtitle_x_cm:Ze,cover_subtitle_h_cm:D}});yc(N.file_id),localStorage.setItem("cover_preview_file_id",N.file_id);const de=await ot.previewCoverContent(N.file_id),Ie=atob(de.base64),vt=new Uint8Array(Ie.length);for(let mn=0;mn<Ie.length;mn++)vt[mn]=Ie.charCodeAt(mn);const Hn=new Blob([vt.buffer],{type:de.mime_type||"application/pdf"}),ja=URL.createObjectURL(Hn);vc(ja)}catch{e("Preview failed","error")}finally{jc(!1)}},tp=async()=>{const N=Xh,de=Yr;if(vc(null),yc(null),de&&de.startsWith("blob:")&&URL.revokeObjectURL(de),N)try{await ot.deleteCoverPreview(N)}catch{}localStorage.removeItem("cover_preview_file_id")},Ec=async()=>{pc(!0);try{const N=await ti.getPdfRange(),de=N.min?new Date(N.min).getTime():null,Ie=N.max?new Date(N.max).getTime():null;Hh(de),Gh(Ie),va(de),ya(Ie)}catch{e("Failed to load logs range","error")}finally{pc(!1)}},rp=async()=>{if(Hr===null||Gr===null)return;xc(!0),Xs(0);const N=Date.now(),de=setInterval(()=>{const Ie=Date.now()-N,vt=Math.min(90,Math.floor(Ie/3e3*90));Xs(vt)},150);try{const Ie=new Date(Hr).toISOString(),vt=new Date(Gr).toISOString(),Hn=await ti.clearPdfRange(Ie,vt);Xs(100),e(`Logs deleted: ${Hn.deleted}`,"success"),await Ec()}catch{e("Failed to clear logs","error")}finally{clearInterval(de),setTimeout(()=>{xc(!1),Xs(0)},300)}},np=async()=>{Nc(!0);try{const N=await ti.cleanupPdfProperties();e(`Properties cleaned: ${N.deleted}, queue removed: ${N.queueRemoved}`,"success")}catch{e("Failed to cleanup properties","error")}finally{Nc(!1)}},sp=async()=>{Sc(!0);try{const N=await Ut.backfillFamileoFingerprints();e(`Backfill done: ${N.updated}/${N.total}`,"success")}catch{e("Failed to backfill fingerprints","error")}finally{Sc(!1)}},Pc=async()=>{Cc(!0);try{const N=await ic.list();Kh(N.users||[])}catch{e("Failed to load users","error")}finally{Cc(!1)}},Lc=N=>N===null?"--":new Date(N).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});u.useEffect(()=>{t(wa)},[wa,t]);const lp=N=>{if(!N)return"--";const de=new Date(N);return Number.isNaN(de.getTime())?"--":de.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},ap=N=>{if(!N)return"";if(N.includes("drive.google.com/thumbnail"))return N;const de=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const Ie of de){const vt=N.match(Ie);if(vt&&vt[1])return`https://drive.google.com/thumbnail?id=${vt[1]}&sz=w200`}return N},ip=({user:N})=>{const{src:de,isLoading:Ie,error:vt}=Ws(N.avatar_url,N.avatar_file_id);return Ie?s.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-100 border border-gray-200 animate-pulse"}):vt||!de?s.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-[10px] text-gray-500",children:"--"}):s.jsx("img",{src:de||ap(N.avatar_url),alt:N.pseudo||N.email,className:"w-7 h-7 rounded-full object-cover border border-gray-200"})};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(fn,{}),s.jsx("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-content mx-auto w-full",children:mc?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(_t,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Declared users"}),s.jsx("button",{onClick:Pc,disabled:kc,className:"text-xs text-primary-600 hover:text-primary-700",children:"Refresh"})]}),kc?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(_t,{size:"md"})}):_c.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No users found."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-xs",children:[s.jsx("thead",{className:"text-gray-500",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"py-2 pr-3",children:"Avatar"}),s.jsx("th",{className:"py-2 pr-3",children:"Email"}),s.jsx("th",{className:"py-2 pr-3",children:"Pseudo"}),s.jsx("th",{className:"py-2 pr-3",children:"Famileo"}),s.jsx("th",{className:"py-2 pr-3",children:"Created"}),s.jsx("th",{className:"py-2 pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"text-gray-700",children:_c.map(N=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"py-2 pr-3",children:s.jsx(ip,{user:N})}),s.jsx("td",{className:"py-2 pr-3",children:N.email}),s.jsx("td",{className:"py-2 pr-3",children:N.pseudo||"--"}),s.jsx("td",{className:"py-2 pr-3",children:N.famileo_name||"--"}),s.jsx("td",{className:"py-2 pr-3",children:lp(N.date_created)}),s.jsx("td",{className:"py-2 pr-3",children:N.status||"--"})]},N.email))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF cover page"}),s.jsxs("div",{className:"mt-3 space-y-4",children:[s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Family name settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Qt,{label:"Family name",value:r,onChange:N=>n(N.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., Dupont family"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>n(l),disabled:r.trim()===l.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",ne.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>ye(Fe),disabled:ne===Fe,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:1.5,max:5,step:.05,value:ne,onChange:N=>ye(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:1.5,max:5,step:.05,value:Number.isFinite(ne)?ne:3.5,onChange:N=>ye(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",te.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>J(W),disabled:te===W,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:te,onChange:N=>J(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(te)?te:1,onChange:N=>J(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",F.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>A(U),disabled:F===U,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:F,onChange:N=>A(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(F)?F:1,onChange:N=>A(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Family name horizontal position (",m.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>v(j),disabled:m===j,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:m,onChange:N=>v(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite(m)?m:0,onChange:N=>v(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (relative to title) (",w.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>b(_),disabled:w===_,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:w,onChange:N=>b(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(w)?w:0,onChange:N=>b(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>P(k),disabled:L===k,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:L,onChange:N=>P(N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ri.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>K($),disabled:M===$,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:M,onChange:N=>K(Number(N.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ni.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]})]})]}),s.jsx("div",{children:s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Title settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Qt,{label:"Cover title",value:i,onChange:N=>o(N.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., Memory Book"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>o(c),disabled:i.trim()===c.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Horizontal position (",ee.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>pe(H),disabled:ee===H,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:ee,onChange:N=>pe(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite(ee)?ee:0,onChange:N=>pe(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",we.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>je(Ne),disabled:we===Ne,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.5,max:2,step:.01,value:we,onChange:N=>je(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.5,max:2,step:.01,value:Number.isFinite(we)?we:.99,onChange:N=>je(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",ue.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>We(Oe),disabled:ue===Oe,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:ue,onChange:N=>We(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(ue)?ue:1,onChange:N=>We(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",Ve.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>mt(ht),disabled:Ve===ht,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:Ve,onChange:N=>mt(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(Ve)?Ve:1,onChange:N=>mt(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (",q.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>Q(me),disabled:q===me,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:q,onChange:N=>Q(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(q)?q:0,onChange:N=>Q(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>ze(Qe),disabled:Ae===Qe,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:Ae,onChange:N=>ze(N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ri.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>I(G),disabled:ie===G,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:ie,onChange:N=>I(Number(N.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ni.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]})]})]})}),s.jsx("div",{children:s.jsxs("details",{className:"rounded-md border border-gray-100 bg-gray-50/70 px-3 py-2",children:[s.jsx("summary",{className:"text-xs text-gray-600 cursor-pointer select-none",children:"Subtitle settings"}),s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(Qt,{label:"Cover subtitle",value:h,onChange:N=>f(N.target.value.slice(0,30)),maxLength:30,placeholder:"e.g., 2024  2025"}),s.jsx("div",{className:"mt-1 flex justify-end",children:s.jsx("button",{onClick:()=>f(g),disabled:h.trim()===g.trim(),className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Horizontal position (",Ze.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>It(er),disabled:Ze===er,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:0,max:12,step:.05,value:Ze,onChange:N=>It(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:0,max:12,step:.01,value:Number.isFinite(Ze)?Ze:0,onChange:N=>It(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Font size (",D.toFixed(2),"cm)"]}),s.jsx("button",{onClick:()=>V(S),disabled:D===S,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.4,max:1.6,step:.01,value:D,onChange:N=>V(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.4,max:1.6,step:.01,value:Number.isFinite(D)?D:.85,onChange:N=>V(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character width (",or.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>Vs(pa),disabled:or===pa,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:or,onChange:N=>Vs(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(or)?or:1,onChange:N=>Vs(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Character height (",cr.toFixed(2),"x)"]}),s.jsx("button",{onClick:()=>Hs(ga),disabled:cr===ga,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:.6,max:3,step:.01,value:cr,onChange:N=>Hs(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:.6,max:3,step:.01,value:Number.isFinite(cr)?cr:1,onChange:N=>Hs(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Letter spacing (",Ge.toFixed(3),"em)"]}),s.jsx("button",{onClick:()=>St(xt),disabled:Ge===xt,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:-.2,max:.2,step:.001,value:Ge,onChange:N=>St(Number(N.target.value)),className:"w-full"}),s.jsx("input",{type:"number",min:-.2,max:.2,step:.001,value:Number.isFinite(Ge)?Ge:0,onChange:N=>St(Number(N.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font family"}),s.jsx("button",{onClick:()=>T(le),disabled:C===le,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:C,onChange:N=>T(N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ri.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Font weight"}),s.jsx("button",{onClick:()=>at(Vr),disabled:He===Vr,className:"text-xs text-gray-500 hover:text-gray-700 disabled:text-gray-300",children:"Reset"})]}),s.jsx("select",{value:He,onChange:N=>at(Number(N.target.value)),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-xs text-gray-700 bg-white",children:ni.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]})]})]})})]}),s.jsx("div",{className:"mt-4",children:Yr?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("a",{href:Yr,target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-primary-200 bg-primary-50 text-primary-700 text-sm font-medium hover:bg-primary-100 transition-colors",children:["Open preview PDF",s.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M14 3h7v7m0-7L10 14m-4 7h7a2 2 0 002-2v-7"})})]}),s.jsx("button",{onClick:tp,className:"w-full text-xs text-gray-500 hover:text-gray-700",children:"Close preview"})]}):s.jsx(ve,{variant:"secondary",onClick:ep,disabled:wc,fullWidth:!0,children:wc?"Generating preview...":"Preview PDF"})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF logs"}),Vh?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(_t,{size:"md"})}):Gs===null||Ys===null?s.jsx("p",{className:"text-sm text-gray-500",children:"No logs available."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[Lc(Hr),"  ",Lc(Gr)]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"From"}),s.jsx("input",{type:"range",min:Gs,max:Ys,value:Hr??Gs,onChange:N=>{const de=Number(N.target.value);va(de),Gr!==null&&de>Gr&&ya(de)},className:"w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"To"}),s.jsx("input",{type:"range",min:Gs,max:Ys,value:Gr??Ys,onChange:N=>{const de=Number(N.target.value);ya(de),Hr!==null&&de<Hr&&va(de)},className:"w-full"})]})]}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(ve,{variant:"secondary",onClick:rp,disabled:gc||Hr===null||Gr===null,className:"w-full sm:w-auto",children:"Clear logs"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Maintenance"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Remove orphan PDF properties when jobs were deleted manually."}),s.jsxs("div",{className:"flex flex-col items-start gap-4",children:[s.jsx(ve,{variant:"secondary",onClick:np,disabled:bc,className:"w-full sm:w-auto",children:"Clean PDF properties"}),s.jsxs("div",{className:"flex flex-col items-start gap-2 w-full",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Rebuilds Famileo fingerprints for existing articles to improve duplicate detection."}),s.jsx(ve,{variant:"secondary",onClick:sp,disabled:Qh,className:"w-full sm:w-auto",children:"Backfill Famileo fingerprints"})]})]})]})]})}),s.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:s.jsx("div",{className:"max-w-md mx-auto w-full flex justify-center",children:s.jsx(ve,{onClick:qh,disabled:xa||mc||!wa,className:"w-full sm:w-auto",children:xa?"Saving...":"Save"})})}),xa&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(_t,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})}),gc&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 w-72",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(_t,{size:"md"})}),s.jsx("p",{className:"mt-3 text-sm text-gray-700 text-center",children:"Clearing logs..."}),s.jsx("div",{className:"mt-3 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary-600 transition-all",style:{width:`${Yh}%`}})})]})}),bc&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[s.jsx(_t,{size:"md"}),s.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Cleaning properties..."})]})})]})}function by(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:l,onRegisteredSW:a,onRegisterError:i}=e;let o,c,d;const h=async(g=!0)=>{await c,await(d==null?void 0:d())};async function f(){if("serviceWorker"in navigator){if(o=await Eh(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/sw.js",{scope:"/",type:"classic"})).catch(g=>{i==null||i(g)}),!o)return;d=async()=>{await(o==null?void 0:o.messageSkipWaiting())};{let g=!1;const y=()=>{g=!0,o==null||o.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),r==null||r()};o.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"?w.isExternal?y():!g&&(n==null||n()):w.isExternal?window.location.reload():!g&&(n==null||n()):w.isUpdate||n==null||n()}),o.addEventListener("waiting",y),o.addEventListener("externalwaiting",y)}o.register({immediate:t}).then(g=>{a?a("/sw.js",g):l==null||l(g)}).catch(g=>{i==null||i(g)})}}return c=f(),h}function Ny(e={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:n,onRegistered:l,onRegisteredSW:a,onRegisterError:i}=e,[o,c]=u.useState(!1),[d,h]=u.useState(!1),[f]=u.useState(()=>by({immediate:t,onOfflineReady(){h(!0),n==null||n()},onNeedRefresh(){c(!0),r==null||r()},onRegistered:l,onRegisteredSW:a,onRegisterError:i}));return{needRefresh:[o,c],offlineReady:[d,h],updateServiceWorker:f}}function Sy(){const{needRefresh:[e],updateServiceWorker:t}=Ny({onRegistered(r){console.log("SW Registered:",r),r&&setInterval(()=>{r.update()},3e4)},onRegisterError(r){console.log("SW registration error",r)}});return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:s.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900",children:"New version available"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"A newer version of Rememly is ready. Update now to get the latest fixes."})]}),s.jsx("div",{className:"mt-5 flex justify-center",children:s.jsx("button",{onClick:()=>t(!0),className:"rounded-md bg-primary-600 px-5 py-2 text-sm font-semibold text-white",children:"Update"})})]})}):null}function ky(){const{error:e,pdfUrl:t,showSuccess:r,lastCompletedJob:n,dismissSuccess:l,dismissError:a}=oc();if(!r&&!e)return null;const i=(o,c)=>{try{const d=new Date(o),h=new Date(c),f={day:"2-digit",month:"short",year:"numeric"};return`${d.toLocaleDateString("fr-FR",f)} - ${h.toLocaleDateString("fr-FR",f)}`}catch{return`${o} - ${c}`}};return s.jsxs("div",{className:"fixed bottom-20 left-4 right-4 z-50 max-w-md mx-auto",children:[r&&t&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 animate-slide-up",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"PDF generated successfully!"}),n&&s.jsx("p",{className:"text-xs text-green-600 mt-0.5",children:i(n.date_from,n.date_to)}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View"]}),s.jsx("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 hover:bg-green-100 rounded-lg transition-colors",children:"Close"})]})]}),s.jsx("button",{onClick:l,className:"text-green-400 hover:text-green-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})}),e&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 animate-slide-up",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Generation error"}),s.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:e})]}),s.jsx("button",{onClick:a,className:"text-red-400 hover:text-red-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})})]})}function Cy(){const e=Tt(),t=Xt(o=>o.hasUnsavedChanges),r=Xt(o=>o.setUnsavedChanges),n=Xt(o=>o.pendingNavigationPath),l=Xt(o=>o.setPendingNavigationPath),[a,i]=u.useState(!1);return u.useEffect(()=>{n&&(t?i(!0):(e(n),l(null)))},[n,t,e,l]),u.useEffect(()=>{const o=c=>{t&&(c.preventDefault(),c.returnValue="")};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[t]),s.jsx(Lt,{isOpen:a,title:"Discard changes?",message:"You have unsaved changes. Are you sure you want to leave?",confirmLabel:"Discard",cancelLabel:"Stay",onConfirm:()=>{i(!1);const o=n;r(!1),l(null),o&&e(o)},onCancel:()=>{i(!1),l(null)},variant:"danger"})}const _y=[{label:"Articles",path:"/",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M5 6h14M5 12h14M5 18h10"})})},{label:"Stats",path:"/stats",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{label:"Famileo",path:"/famileo",icon:s.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("circle",{cx:"12",cy:"5.5",r:"2.7"}),s.jsx("rect",{x:"10.5",y:"8.5",width:"3",height:"7.5",rx:"1.5"}),s.jsx("rect",{x:"2.5",y:"10",width:"6",height:"9.5",rx:"2"}),s.jsx("rect",{x:"15.5",y:"4",width:"6",height:"15.5",rx:"2"}),s.jsx("circle",{cx:"5.5",cy:"14.5",r:"0.9"}),s.jsx("circle",{cx:"18.5",cy:"12",r:"0.9"}),s.jsx("path",{d:"M12 15.5v4.5m0 0l-2-2m2 2l2-2",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})},{label:"PDF",path:"/pdf-export",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{label:"Profile",path:"/profile",icon:s.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],Ey=["/auth","/editor","/photo-assembly"];function Py(){const e=Tt(),t=dn(),r=Xt(i=>i.hasUnsavedChanges),n=Xt(i=>i.setPendingNavigationPath),[l,a]=u.useState(!1);return u.useEffect(()=>{const i=window.matchMedia("(display-mode: standalone)"),o=()=>{const c=window.navigator;a(i.matches||c.standalone===!0)};return o(),i.addEventListener?(i.addEventListener("change",o),()=>i.removeEventListener("change",o)):(i.addListener(o),()=>i.removeListener(o))},[]),Ey.some(i=>t.pathname.startsWith(i))?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:l?"h-20":"h-16","aria-hidden":"true"}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-primary-600 shadow-[0_10px_30px_rgba(0,0,0,0.12)]",children:s.jsx("div",{className:"max-w-content mx-auto w-full",children:s.jsx("div",{className:`flex items-center justify-between px-2 ${l?"pt-0.5 pb-6":"py-1"}`,children:_y.map(i=>{const o=t.pathname===i.path,c=()=>{if(t.pathname!==i.path){if(r){n(i.path);return}e(i.path)}};return s.jsx("button",{onClick:c,className:`flex flex-col items-center justify-center px-3 py-1 rounded-xl transition-all ${o?"text-white":"text-primary-100 hover:text-white"}`,"aria-label":i.label,children:s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all ${o?"bg-white shadow-sm":"bg-transparent"}`,children:s.jsx("span",{className:`${o?"text-primary-700":"text-primary-100"}`,children:i.icon})})},i.path)})})})})]})}const Ly=u.lazy(()=>Eh(()=>import("./PhotoAssemblyScreen-D5LMrL35.js"),[]).then(e=>({default:e.PhotoAssemblyScreen})));function Fy(){const[e,t]=u.useState(!1);return u.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(orientation: landscape)"),n=()=>{const l=r.matches,a=window.innerWidth<=1024;t(l&&a)};return n(),r.addEventListener?r.addEventListener("change",n):r.addListener(n),window.addEventListener("resize",n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n),window.removeEventListener("resize",n)}},[]),u.useEffect(()=>{var h,f,g;if(typeof window>"u")return;const r=window.navigator,n=((h=window.matchMedia)==null?void 0:h.call(window,"(display-mode: standalone)").matches)||r.standalone===!0,l=/iPad|iPhone|iPod/.test(window.navigator.userAgent);if(!n||!l)return;const a=document.createElement("div");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="0",a.style.height="env(safe-area-inset-top)",a.style.pointerEvents="none",a.style.visibility="hidden",document.body.appendChild(a);const i=70,o=y=>Math.min(Math.max(y,0),i),c=()=>{var _;let w=o(Math.round(a.getBoundingClientRect().height));if(!w){const p=o(Math.round(((_=window.visualViewport)==null?void 0:_.offsetTop)||0));p>0&&(w=p)}const b=w;document.documentElement.style.setProperty("--safe-area-top",`${b}px`)},d=()=>{requestAnimationFrame(c),setTimeout(c,300),setTimeout(c,1e3)};return d(),window.addEventListener("orientationchange",d),window.addEventListener("resize",d),(f=window.visualViewport)==null||f.addEventListener("resize",d),(g=window.visualViewport)==null||g.addEventListener("scroll",d),()=>{var y,w;window.removeEventListener("orientationchange",d),window.removeEventListener("resize",d),(y=window.visualViewport)==null||y.removeEventListener("resize",d),(w=window.visualViewport)==null||w.removeEventListener("scroll",d),a.remove()}},[]),s.jsx(Jx,{children:s.jsxs(tv,{children:[s.jsx(Sy,{}),s.jsx(ky,{}),s.jsx(Cy,{}),e?s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center text-center px-6",children:s.jsxs("div",{className:"max-w-md",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"Not compatible with landscape mode"}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Please rotate your device to portrait."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-white",children:s.jsx("div",{className:"max-w-content mx-auto w-full",children:s.jsxs(Hx,{children:[s.jsx(Mt,{path:"/auth",element:s.jsx(rv,{})}),s.jsx(Mt,{path:"/",element:s.jsx(ur,{children:s.jsx(Bv,{})})}),s.jsx(Mt,{path:"/editor",element:s.jsx(ur,{children:s.jsx(Zd,{})})}),s.jsx(Mt,{path:"/editor/:id",element:s.jsx(ur,{children:s.jsx(Zd,{})})}),s.jsx(Mt,{path:"/stats",element:s.jsx(ur,{children:s.jsx(cy,{})})}),s.jsx(Mt,{path:"/photo-assembly",element:s.jsx(ur,{children:s.jsx(u.Suspense,{fallback:s.jsx(Bs,{message:"Loading photo assembly..."}),children:s.jsx(Ly,{})})})}),s.jsx(Mt,{path:"/profile",element:s.jsx(ur,{children:s.jsx(dy,{})})}),s.jsx(Mt,{path:"/famileo",element:s.jsx(ur,{children:s.jsx(fy,{})})}),s.jsx(Mt,{path:"/pdf-export",element:s.jsx(ur,{children:s.jsx(wy,{})})}),s.jsx(Mt,{path:"/settings",element:s.jsx(ur,{children:s.jsx(jy,{})})}),s.jsx(Mt,{path:"*",element:s.jsx(_h,{to:"/",replace:!0})})]})})}),s.jsx(Py,{})]})]})})}const cc=document.getElementById("root");if(!cc)throw new Error("Root element not found");const ef=()=>{si.createRoot(cc).render(s.jsx(uo.StrictMode,{children:s.jsx(Xx,{children:s.jsx(Fy,{})})}))},Dy=e=>{cc.innerHTML=`
    <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui, -apple-system, sans-serif;color:#111;">
      <div>${e}</div>
    </div>
  `},Ry=()=>{const e=localStorage.getItem("user");if(!e)return null;try{const t=JSON.parse(e);return typeof t.email=="string"?t.email:null}catch{return null}},Ty=async()=>{var a,i;if(window.location.pathname==="/auth"){ef();return}const e=Ry();if(!e){window.location.replace("/auth");return}Dy("Checking authentication...");const t="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",r=`&auth=${encodeURIComponent("Email "+e)}`,l=await(await fetch(`${t}?path=auth/check${r}`,{method:"POST"})).json();if(!(l!=null&&l.ok)){localStorage.removeItem("user");const o=((a=l==null?void 0:l.error)==null?void 0:a.message)||"Your account is not authorized to access this application.";localStorage.setItem("auth_error",o),window.location.replace("/auth");return}localStorage.setItem("user",JSON.stringify((i=l.data)==null?void 0:i.user)),ef()};Ty().catch(()=>{localStorage.removeItem("user"),localStorage.setItem("auth_error","Authentication check failed."),window.location.replace("/auth")});export{fn as A,Ts as C,fa as M,Lt as a,Tt as b,My as c,dn as d,jr as e,nr as f,Zt as g,s as j,u as r,Xt as u};
