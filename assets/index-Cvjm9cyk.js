var Vf=Object.defineProperty;var Hf=(e,t,n)=>t in e?Vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vi=(e,t,n)=>Hf(e,typeof t!="symbol"?t+"":t,n);function Gf(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function qu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ec={exports:{}},ml={},tc={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=Symbol.for("react.element"),Qf=Symbol.for("react.portal"),Yf=Symbol.for("react.fragment"),Kf=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),Jf=Symbol.for("react.provider"),Zf=Symbol.for("react.context"),qf=Symbol.for("react.forward_ref"),em=Symbol.for("react.suspense"),tm=Symbol.for("react.memo"),nm=Symbol.for("react.lazy"),yi=Symbol.iterator;function rm(e){return e===null||typeof e!="object"?null:(e=yi&&e[yi]||e["@@iterator"],typeof e=="function"?e:null)}var nc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rc=Object.assign,sc={};function dr(e,t,n){this.props=e,this.context=t,this.refs=sc,this.updater=n||nc}dr.prototype.isReactComponent={};dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lc(){}lc.prototype=dr.prototype;function ga(e,t,n){this.props=e,this.context=t,this.refs=sc,this.updater=n||nc}var xa=ga.prototype=new lc;xa.constructor=ga;rc(xa,dr.prototype);xa.isPureReactComponent=!0;var wi=Array.isArray,oc=Object.prototype.hasOwnProperty,va={current:null},ac={key:!0,ref:!0,__self:!0,__source:!0};function ic(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)oc.call(t,r)&&!ac.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:os,type:e,key:o,ref:a,props:s,_owner:va.current}}function sm(e,t){return{$$typeof:os,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ya(e){return typeof e=="object"&&e!==null&&e.$$typeof===os}function lm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ji=/\/+/g;function Tl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lm(""+e.key):t.toString(36)}function Ds(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case os:case Qf:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Tl(a,0):r,wi(s)?(n="",e!=null&&(n=e.replace(ji,"$&/")+"/"),Ds(s,t,n,"",function(c){return c})):s!=null&&(ya(s)&&(s=sm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ji,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",wi(e))for(var i=0;i<e.length;i++){o=e[i];var u=r+Tl(o,i);a+=Ds(o,t,n,u,s)}else if(u=rm(e),typeof u=="function")for(e=u.call(e),i=0;!(o=e.next()).done;)o=o.value,u=r+Tl(o,i++),a+=Ds(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function hs(e,t,n){if(e==null)return e;var r=[],s=0;return Ds(e,r,"","",function(o){return t.call(n,o,s++)}),r}function om(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},Rs={transition:null},am={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Rs,ReactCurrentOwner:va};function uc(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:hs,forEach:function(e,t,n){hs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hs(e,function(){t++}),t},toArray:function(e){return hs(e,function(t){return t})||[]},only:function(e){if(!ya(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=dr;Q.Fragment=Yf;Q.Profiler=Xf;Q.PureComponent=ga;Q.StrictMode=Kf;Q.Suspense=em;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=am;Q.act=uc;Q.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rc({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=va.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)oc.call(t,u)&&!ac.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:os,type:e.type,key:s,ref:o,props:r,_owner:a}};Q.createContext=function(e){return e={$$typeof:Zf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jf,_context:e},e.Consumer=e};Q.createElement=ic;Q.createFactory=function(e){var t=ic.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:qf,render:e}};Q.isValidElement=ya;Q.lazy=function(e){return{$$typeof:nm,_payload:{_status:-1,_result:e},_init:om}};Q.memo=function(e,t){return{$$typeof:tm,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=Rs.transition;Rs.transition={};try{e()}finally{Rs.transition=t}};Q.unstable_act=uc;Q.useCallback=function(e,t){return Fe.current.useCallback(e,t)};Q.useContext=function(e){return Fe.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};Q.useEffect=function(e,t){return Fe.current.useEffect(e,t)};Q.useId=function(){return Fe.current.useId()};Q.useImperativeHandle=function(e,t,n){return Fe.current.useImperativeHandle(e,t,n)};Q.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return Fe.current.useMemo(e,t)};Q.useReducer=function(e,t,n){return Fe.current.useReducer(e,t,n)};Q.useRef=function(e){return Fe.current.useRef(e)};Q.useState=function(e){return Fe.current.useState(e)};Q.useSyncExternalStore=function(e,t,n){return Fe.current.useSyncExternalStore(e,t,n)};Q.useTransition=function(){return Fe.current.useTransition()};Q.version="18.3.1";tc.exports=Q;var p=tc.exports;const wa=qu(p),im=Gf({__proto__:null,default:wa},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um=p,cm=Symbol.for("react.element"),dm=Symbol.for("react.fragment"),fm=Object.prototype.hasOwnProperty,mm=um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function cc(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)fm.call(t,r)&&!hm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:cm,type:e,key:o,ref:a,props:s,_owner:mm.current}}ml.Fragment=dm;ml.jsx=cc;ml.jsxs=cc;ec.exports=ml;var l=ec.exports,ho={},dc={exports:{}},Je={},fc={exports:{}},mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,M){var T=E.length;E.push(M);e:for(;0<T;){var U=T-1>>>1,G=E[U];if(0<s(G,M))E[U]=M,E[T]=G,T=U;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var M=E[0],T=E.pop();if(T!==M){E[0]=T;e:for(var U=0,G=E.length,ve=G>>>1;U<ve;){var ye=2*(U+1)-1,Ce=E[ye],ie=ye+1,De=E[ie];if(0>s(Ce,T))ie<G&&0>s(De,Ce)?(E[U]=De,E[ie]=T,U=ie):(E[U]=Ce,E[ye]=T,U=ye);else if(ie<G&&0>s(De,T))E[U]=De,E[ie]=T,U=ie;else break e}}return M}function s(E,M){var T=E.sortIndex-M.sortIndex;return T!==0?T:E.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],m=1,f=null,h=3,v=!1,y=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(E){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=E)r(c),M.sortIndex=M.expirationTime,t(u,M);else break;M=n(c)}}function w(E){if(S=!1,x(E),!y)if(n(u)!==null)y=!0,re(C);else{var M=n(c);M!==null&&I(w,M.startTime-E)}}function C(E,M){y=!1,S&&(S=!1,g(N),N=-1),v=!0;var T=h;try{for(x(M),f=n(u);f!==null&&(!(f.expirationTime>M)||E&&!B());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var G=U(f.expirationTime<=M);M=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(u)&&r(u),x(M)}else r(u);f=n(u)}if(f!==null)var ve=!0;else{var ye=n(c);ye!==null&&I(w,ye.startTime-M),ve=!1}return ve}finally{f=null,h=T,v=!1}}var b=!1,_=null,N=-1,O=5,A=-1;function B(){return!(e.unstable_now()-A<O)}function P(){if(_!==null){var E=e.unstable_now();A=E;var M=!0;try{M=_(!0,E)}finally{M?W():(b=!1,_=null)}}else b=!1}var W;if(typeof d=="function")W=function(){d(P)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,me=J.port2;J.port1.onmessage=P,W=function(){me.postMessage(null)}}else W=function(){k(P,0)};function re(E){_=E,b||(b=!0,W())}function I(E,M){N=k(function(){E(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,re(C))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var T=h;h=M;try{return E()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,M){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var T=h;h=E;try{return M()}finally{h=T}},e.unstable_scheduleCallback=function(E,M,T){var U=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?U+T:U):T=U,E){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=T+G,E={id:m++,callback:M,priorityLevel:E,startTime:T,expirationTime:G,sortIndex:-1},T>U?(E.sortIndex=T,t(c,E),n(u)===null&&E===n(c)&&(S?(g(N),N=-1):S=!0,I(w,T-U))):(E.sortIndex=G,t(u,E),y||v||(y=!0,re(C))),E},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(E){var M=h;return function(){var T=h;h=M;try{return E.apply(this,arguments)}finally{h=T}}}})(mc);fc.exports=mc;var pm=fc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=p,Xe=pm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hc=new Set,Ur={};function Rn(e,t){rr(e,t),rr(e+"Capture",t)}function rr(e,t){for(Ur[e]=t,e=0;e<t.length;e++)hc.add(t[e])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=Object.prototype.hasOwnProperty,xm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Si={},Ni={};function vm(e){return po.call(Ni,e)?!0:po.call(Si,e)?!1:xm.test(e)?Ni[e]=!0:(Si[e]=!0,!1)}function ym(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wm(e,t,n,r){if(t===null||typeof t>"u"||ym(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Le[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Le[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Le[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Le[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Le[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Le[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Le[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Le[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Le[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ja=/[\-:]([a-z])/g;function Sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ja,Sa);Le[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ja,Sa);Le[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ja,Sa);Le[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Le[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Le[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Na(e,t,n,r){var s=Le.hasOwnProperty(t)?Le[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wm(t,n,s,r)&&(n=null),r||s===null?vm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $t=gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ps=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),ka=Symbol.for("react.strict_mode"),go=Symbol.for("react.profiler"),pc=Symbol.for("react.provider"),gc=Symbol.for("react.context"),Ca=Symbol.for("react.forward_ref"),xo=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),ba=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),xc=Symbol.for("react.offscreen"),ki=Symbol.iterator;function xr(e){return e===null||typeof e!="object"?null:(e=ki&&e[ki]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,Ml;function Er(e){if(Ml===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ml=t&&t[1]||""}return`
`+Ml+e}var zl=!1;function Al(e,t){if(!e||zl)return"";zl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{zl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Er(e):""}function jm(e){switch(e.tag){case 5:return Er(e.type);case 16:return Er("Lazy");case 13:return Er("Suspense");case 19:return Er("SuspenseList");case 0:case 2:case 15:return e=Al(e.type,!1),e;case 11:return e=Al(e.type.render,!1),e;case 1:return e=Al(e.type,!0),e;default:return""}}function yo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case On:return"Fragment";case Fn:return"Portal";case go:return"Profiler";case ka:return"StrictMode";case xo:return"Suspense";case vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gc:return(e.displayName||"Context")+".Consumer";case pc:return(e._context.displayName||"Context")+".Provider";case Ca:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ba:return t=e.displayName||null,t!==null?t:yo(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return yo(e(t))}catch{}}return null}function Sm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yo(t);case 8:return t===ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nm(e){var t=vc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gs(e){e._valueTracker||(e._valueTracker=Nm(e))}function yc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wo(e,t){var n=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ci(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=un(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wc(e,t){t=t.checked,t!=null&&Na(e,"checked",t,!1)}function jo(e,t){wc(e,t);var n=un(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?So(e,t.type,n):t.hasOwnProperty("defaultValue")&&So(e,t.type,un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bi(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function So(e,t,n){(t!=="number"||Ws(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _r=Array.isArray;function Xn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+un(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function No(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ei(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(_r(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:un(n)}}function jc(e,t){var n=un(t.value),r=un(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _i(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ko(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xs,Nc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $r(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},km=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(e){km.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dr[t]=Dr[e]})});function kc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dr.hasOwnProperty(e)&&Dr[e]?(""+t).trim():t+"px"}function Cc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Cm=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(e,t){if(t){if(Cm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function bo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=null;function Ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _o=null,Jn=null,Zn=null;function Pi(e){if(e=us(e)){if(typeof _o!="function")throw Error(D(280));var t=e.stateNode;t&&(t=vl(t),_o(e.stateNode,e.type,t))}}function bc(e){Jn?Zn?Zn.push(e):Zn=[e]:Jn=e}function Ec(){if(Jn){var e=Jn,t=Zn;if(Zn=Jn=null,Pi(e),t)for(e=0;e<t.length;e++)Pi(t[e])}}function _c(e,t){return e(t)}function Pc(){}var Fl=!1;function Lc(e,t,n){if(Fl)return e(t,n);Fl=!0;try{return _c(e,t,n)}finally{Fl=!1,(Jn!==null||Zn!==null)&&(Pc(),Ec())}}function Br(e,t){var n=e.stateNode;if(n===null)return null;var r=vl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Po=!1;if(At)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Po=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Po=!1}function bm(e,t,n,r,s,o,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var Rr=!1,Vs=null,Hs=!1,Lo=null,Em={onError:function(e){Rr=!0,Vs=e}};function _m(e,t,n,r,s,o,a,i,u){Rr=!1,Vs=null,bm.apply(Em,arguments)}function Pm(e,t,n,r,s,o,a,i,u){if(_m.apply(this,arguments),Rr){if(Rr){var c=Vs;Rr=!1,Vs=null}else throw Error(D(198));Hs||(Hs=!0,Lo=c)}}function In(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Li(e){if(In(e)!==e)throw Error(D(188))}function Lm(e){var t=e.alternate;if(!t){if(t=In(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Li(s),e;if(o===r)return Li(s),t;o=o.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Rc(e){return e=Lm(e),e!==null?Ic(e):null}function Ic(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ic(e);if(t!==null)return t;e=e.sibling}return null}var Tc=Xe.unstable_scheduleCallback,Di=Xe.unstable_cancelCallback,Dm=Xe.unstable_shouldYield,Rm=Xe.unstable_requestPaint,xe=Xe.unstable_now,Im=Xe.unstable_getCurrentPriorityLevel,_a=Xe.unstable_ImmediatePriority,Mc=Xe.unstable_UserBlockingPriority,Gs=Xe.unstable_NormalPriority,Tm=Xe.unstable_LowPriority,zc=Xe.unstable_IdlePriority,hl=null,Et=null;function Mm(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(hl,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Fm,zm=Math.log,Am=Math.LN2;function Fm(e){return e>>>=0,e===0?32:31-(zm(e)/Am|0)|0}var vs=64,ys=4194304;function Pr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Pr(i):(o&=a,o!==0&&(r=Pr(o)))}else a=n&~s,a!==0?r=Pr(a):o!==0&&(r=Pr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xt(t),s=1<<n,r|=e[n],t&=~s;return r}function Om(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Um(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-xt(o),i=1<<a,u=s[a];u===-1?(!(i&n)||i&r)&&(s[a]=Om(i,t)):u<=t&&(e.expiredLanes|=i),o&=~i}}function Do(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ac(){var e=vs;return vs<<=1,!(vs&4194240)&&(vs=64),e}function Ol(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function as(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=n}function $m(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-xt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Pa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var q=0;function Fc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oc,La,Uc,$c,Bc,Ro=!1,ws=[],en=null,tn=null,nn=null,Wr=new Map,Vr=new Map,Kt=[],Bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ri(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(t.pointerId)}}function yr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=us(t),t!==null&&La(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Wm(e,t,n,r,s){switch(t){case"focusin":return en=yr(en,e,t,n,r,s),!0;case"dragenter":return tn=yr(tn,e,t,n,r,s),!0;case"mouseover":return nn=yr(nn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Wr.set(o,yr(Wr.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Vr.set(o,yr(Vr.get(o)||null,e,t,n,r,s)),!0}return!1}function Wc(e){var t=wn(e.target);if(t!==null){var n=In(t);if(n!==null){if(t=n.tag,t===13){if(t=Dc(n),t!==null){e.blockedOn=t,Bc(e.priority,function(){Uc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Io(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Eo=r,n.target.dispatchEvent(r),Eo=null}else return t=us(n),t!==null&&La(t),e.blockedOn=n,!1;t.shift()}return!0}function Ii(e,t,n){Is(e)&&n.delete(t)}function Vm(){Ro=!1,en!==null&&Is(en)&&(en=null),tn!==null&&Is(tn)&&(tn=null),nn!==null&&Is(nn)&&(nn=null),Wr.forEach(Ii),Vr.forEach(Ii)}function wr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ro||(Ro=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Vm)))}function Hr(e){function t(s){return wr(s,e)}if(0<ws.length){wr(ws[0],e);for(var n=1;n<ws.length;n++){var r=ws[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&wr(en,e),tn!==null&&wr(tn,e),nn!==null&&wr(nn,e),Wr.forEach(t),Vr.forEach(t),n=0;n<Kt.length;n++)r=Kt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kt.length&&(n=Kt[0],n.blockedOn===null);)Wc(n),n.blockedOn===null&&Kt.shift()}var qn=$t.ReactCurrentBatchConfig,Ys=!0;function Hm(e,t,n,r){var s=q,o=qn.transition;qn.transition=null;try{q=1,Da(e,t,n,r)}finally{q=s,qn.transition=o}}function Gm(e,t,n,r){var s=q,o=qn.transition;qn.transition=null;try{q=4,Da(e,t,n,r)}finally{q=s,qn.transition=o}}function Da(e,t,n,r){if(Ys){var s=Io(e,t,n,r);if(s===null)Kl(e,t,r,Ks,n),Ri(e,r);else if(Wm(s,e,t,n,r))r.stopPropagation();else if(Ri(e,r),t&4&&-1<Bm.indexOf(e)){for(;s!==null;){var o=us(s);if(o!==null&&Oc(o),o=Io(e,t,n,r),o===null&&Kl(e,t,r,Ks,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Kl(e,t,r,null,n)}}var Ks=null;function Io(e,t,n,r){if(Ks=null,e=Ea(r),e=wn(e),e!==null)if(t=In(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function Vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Im()){case _a:return 1;case Mc:return 4;case Gs:case Tm:return 16;case zc:return 536870912;default:return 16}default:return 16}}var Jt=null,Ra=null,Ts=null;function Hc(){if(Ts)return Ts;var e,t=Ra,n=t.length,r,s="value"in Jt?Jt.value:Jt.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Ts=s.slice(e,1<r?1-r:void 0)}function Ms(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function js(){return!0}function Ti(){return!1}function Ze(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?js:Ti,this.isPropagationStopped=Ti,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),t}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=Ze(fr),is=fe({},fr,{view:0,detail:0}),Qm=Ze(is),Ul,$l,jr,pl=fe({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Ul=e.screenX-jr.screenX,$l=e.screenY-jr.screenY):$l=Ul=0,jr=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),Mi=Ze(pl),Ym=fe({},pl,{dataTransfer:0}),Km=Ze(Ym),Xm=fe({},is,{relatedTarget:0}),Bl=Ze(Xm),Jm=fe({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Zm=Ze(Jm),qm=fe({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eh=Ze(qm),th=fe({},fr,{data:0}),zi=Ze(th),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sh[e])?!!t[e]:!1}function Ta(){return lh}var oh=fe({},is,{key:function(e){if(e.key){var t=nh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(e){return e.type==="keypress"?Ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ah=Ze(oh),ih=fe({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=Ze(ih),uh=fe({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),ch=Ze(uh),dh=fe({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fh=Ze(dh),mh=fe({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hh=Ze(mh),ph=[9,13,27,32],Ma=At&&"CompositionEvent"in window,Ir=null;At&&"documentMode"in document&&(Ir=document.documentMode);var gh=At&&"TextEvent"in window&&!Ir,Gc=At&&(!Ma||Ir&&8<Ir&&11>=Ir),Fi=" ",Oi=!1;function Qc(e,t){switch(e){case"keyup":return ph.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function xh(e,t){switch(e){case"compositionend":return Yc(t);case"keypress":return t.which!==32?null:(Oi=!0,Fi);case"textInput":return e=t.data,e===Fi&&Oi?null:e;default:return null}}function vh(e,t){if(Un)return e==="compositionend"||!Ma&&Qc(e,t)?(e=Hc(),Ts=Ra=Jt=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gc&&t.locale!=="ko"?null:t.data;default:return null}}var yh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yh[e.type]:t==="textarea"}function Kc(e,t,n,r){bc(r),t=Xs(t,"onChange"),0<t.length&&(n=new Ia("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Tr=null,Gr=null;function wh(e){od(e,0)}function gl(e){var t=Wn(e);if(yc(t))return e}function jh(e,t){if(e==="change")return t}var Xc=!1;if(At){var Wl;if(At){var Vl="oninput"in document;if(!Vl){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Vl=typeof $i.oninput=="function"}Wl=Vl}else Wl=!1;Xc=Wl&&(!document.documentMode||9<document.documentMode)}function Bi(){Tr&&(Tr.detachEvent("onpropertychange",Jc),Gr=Tr=null)}function Jc(e){if(e.propertyName==="value"&&gl(Gr)){var t=[];Kc(t,Gr,e,Ea(e)),Lc(wh,t)}}function Sh(e,t,n){e==="focusin"?(Bi(),Tr=t,Gr=n,Tr.attachEvent("onpropertychange",Jc)):e==="focusout"&&Bi()}function Nh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(Gr)}function kh(e,t){if(e==="click")return gl(t)}function Ch(e,t){if(e==="input"||e==="change")return gl(t)}function bh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:bh;function Qr(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!po.call(t,s)||!wt(e[s],t[s]))return!1}return!0}function Wi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vi(e,t){var n=Wi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wi(n)}}function Zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qc(){for(var e=window,t=Ws();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ws(e.document)}return t}function za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Eh(e){var t=qc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zc(n.ownerDocument.documentElement,n)){if(r!==null&&za(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Vi(n,o);var a=Vi(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _h=At&&"documentMode"in document&&11>=document.documentMode,$n=null,To=null,Mr=null,Mo=!1;function Hi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mo||$n==null||$n!==Ws(r)||(r=$n,"selectionStart"in r&&za(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mr&&Qr(Mr,r)||(Mr=r,r=Xs(To,"onSelect"),0<r.length&&(t=new Ia("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$n)))}function Ss(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bn={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionend:Ss("Transition","TransitionEnd")},Hl={},ed={};At&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function xl(e){if(Hl[e])return Hl[e];if(!Bn[e])return e;var t=Bn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ed)return Hl[e]=t[n];return e}var td=xl("animationend"),nd=xl("animationiteration"),rd=xl("animationstart"),sd=xl("transitionend"),ld=new Map,Gi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){ld.set(e,t),Rn(t,[e])}for(var Gl=0;Gl<Gi.length;Gl++){var Ql=Gi[Gl],Ph=Ql.toLowerCase(),Lh=Ql[0].toUpperCase()+Ql.slice(1);dn(Ph,"on"+Lh)}dn(td,"onAnimationEnd");dn(nd,"onAnimationIteration");dn(rd,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(sd,"onTransitionEnd");rr("onMouseEnter",["mouseout","mouseover"]);rr("onMouseLeave",["mouseout","mouseover"]);rr("onPointerEnter",["pointerout","pointerover"]);rr("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Qi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Pm(r,t,void 0,e),e.currentTarget=null}function od(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==o&&s.isPropagationStopped())break e;Qi(s,i,c),o=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==o&&s.isPropagationStopped())break e;Qi(s,i,c),o=u}}}if(Hs)throw e=Lo,Hs=!1,Lo=null,e}function le(e,t){var n=t[Uo];n===void 0&&(n=t[Uo]=new Set);var r=e+"__bubble";n.has(r)||(ad(t,e,2,!1),n.add(r))}function Yl(e,t,n){var r=0;t&&(r|=4),ad(n,e,r,t)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Yr(e){if(!e[Ns]){e[Ns]=!0,hc.forEach(function(n){n!=="selectionchange"&&(Dh.has(n)||Yl(n,!1,e),Yl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ns]||(t[Ns]=!0,Yl("selectionchange",!1,t))}}function ad(e,t,n,r){switch(Vc(t)){case 1:var s=Hm;break;case 4:s=Gm;break;default:s=Da}n=s.bind(null,t,n,e),s=void 0,!Po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kl(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;i!==null;){if(a=wn(i),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}i=i.parentNode}}r=r.return}Lc(function(){var c=o,m=Ea(n),f=[];e:{var h=ld.get(e);if(h!==void 0){var v=Ia,y=e;switch(e){case"keypress":if(Ms(n)===0)break e;case"keydown":case"keyup":v=ah;break;case"focusin":y="focus",v=Bl;break;case"focusout":y="blur",v=Bl;break;case"beforeblur":case"afterblur":v=Bl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ch;break;case td:case nd:case rd:v=Zm;break;case sd:v=fh;break;case"scroll":v=Qm;break;case"wheel":v=hh;break;case"copy":case"cut":case"paste":v=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ai}var S=(t&4)!==0,k=!S&&e==="scroll",g=S?h!==null?h+"Capture":null:h;S=[];for(var d=c,x;d!==null;){x=d;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=Br(d,g),w!=null&&S.push(Kr(d,w,x)))),k)break;d=d.return}0<S.length&&(h=new v(h,y,null,n,m),f.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==Eo&&(y=n.relatedTarget||n.fromElement)&&(wn(y)||y[Ft]))break e;if((v||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?wn(y):null,y!==null&&(k=In(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(S=Mi,w="onMouseLeave",g="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ai,w="onPointerLeave",g="onPointerEnter",d="pointer"),k=v==null?h:Wn(v),x=y==null?h:Wn(y),h=new S(w,d+"leave",v,n,m),h.target=k,h.relatedTarget=x,w=null,wn(m)===c&&(S=new S(g,d+"enter",y,n,m),S.target=x,S.relatedTarget=k,w=S),k=w,v&&y)t:{for(S=v,g=y,d=0,x=S;x;x=An(x))d++;for(x=0,w=g;w;w=An(w))x++;for(;0<d-x;)S=An(S),d--;for(;0<x-d;)g=An(g),x--;for(;d--;){if(S===g||g!==null&&S===g.alternate)break t;S=An(S),g=An(g)}S=null}else S=null;v!==null&&Yi(f,h,v,S,!1),y!==null&&k!==null&&Yi(f,k,y,S,!0)}}e:{if(h=c?Wn(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var C=jh;else if(Ui(h))if(Xc)C=Ch;else{C=Nh;var b=Sh}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=kh);if(C&&(C=C(e,c))){Kc(f,C,n,m);break e}b&&b(e,h,c),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&So(h,"number",h.value)}switch(b=c?Wn(c):window,e){case"focusin":(Ui(b)||b.contentEditable==="true")&&($n=b,To=c,Mr=null);break;case"focusout":Mr=To=$n=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,Hi(f,n,m);break;case"selectionchange":if(_h)break;case"keydown":case"keyup":Hi(f,n,m)}var _;if(Ma)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Un?Qc(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Gc&&n.locale!=="ko"&&(Un||N!=="onCompositionStart"?N==="onCompositionEnd"&&Un&&(_=Hc()):(Jt=m,Ra="value"in Jt?Jt.value:Jt.textContent,Un=!0)),b=Xs(c,N),0<b.length&&(N=new zi(N,e,null,n,m),f.push({event:N,listeners:b}),_?N.data=_:(_=Yc(n),_!==null&&(N.data=_)))),(_=gh?xh(e,n):vh(e,n))&&(c=Xs(c,"onBeforeInput"),0<c.length&&(m=new zi("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:c}),m.data=_))}od(f,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Br(e,n),o!=null&&r.unshift(Kr(e,o,s)),o=Br(e,t),o!=null&&r.push(Kr(e,o,s))),e=e.return}return r}function An(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yi(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,s?(u=Br(n,o),u!=null&&a.unshift(Kr(n,u,i))):s||(u=Br(n,o),u!=null&&a.push(Kr(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Rh=/\r\n?/g,Ih=/\u0000|\uFFFD/g;function Ki(e){return(typeof e=="string"?e:""+e).replace(Rh,`
`).replace(Ih,"")}function ks(e,t,n){if(t=Ki(t),Ki(e)!==t&&n)throw Error(D(425))}function Js(){}var zo=null,Ao=null;function Fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oo=typeof setTimeout=="function"?setTimeout:void 0,Th=typeof clearTimeout=="function"?clearTimeout:void 0,Xi=typeof Promise=="function"?Promise:void 0,Mh=typeof queueMicrotask=="function"?queueMicrotask:typeof Xi<"u"?function(e){return Xi.resolve(null).then(e).catch(zh)}:Oo;function zh(e){setTimeout(function(){throw e})}function Xl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Hr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Hr(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ji(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),bt="__reactFiber$"+mr,Xr="__reactProps$"+mr,Ft="__reactContainer$"+mr,Uo="__reactEvents$"+mr,Ah="__reactListeners$"+mr,Fh="__reactHandles$"+mr;function wn(e){var t=e[bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ft]||n[bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ji(e);e!==null;){if(n=e[bt])return n;e=Ji(e)}return t}e=n,n=e.parentNode}return null}function us(e){return e=e[bt]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function vl(e){return e[Xr]||null}var $o=[],Vn=-1;function fn(e){return{current:e}}function oe(e){0>Vn||(e.current=$o[Vn],$o[Vn]=null,Vn--)}function ne(e,t){Vn++,$o[Vn]=e.current,e.current=t}var cn={},Me=fn(cn),We=fn(!1),En=cn;function sr(e,t){var n=e.type.contextTypes;if(!n)return cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ve(e){return e=e.childContextTypes,e!=null}function Zs(){oe(We),oe(Me)}function Zi(e,t,n){if(Me.current!==cn)throw Error(D(168));ne(Me,t),ne(We,n)}function id(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Sm(e)||"Unknown",s));return fe({},n,r)}function qs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cn,En=Me.current,ne(Me,e),ne(We,We.current),!0}function qi(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=id(e,t,En),r.__reactInternalMemoizedMergedChildContext=e,oe(We),oe(Me),ne(Me,e)):oe(We),ne(We,n)}var It=null,yl=!1,Jl=!1;function ud(e){It===null?It=[e]:It.push(e)}function Oh(e){yl=!0,ud(e)}function mn(){if(!Jl&&It!==null){Jl=!0;var e=0,t=q;try{var n=It;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}It=null,yl=!1}catch(s){throw It!==null&&(It=It.slice(e+1)),Tc(_a,mn),s}finally{q=t,Jl=!1}}return null}var Hn=[],Gn=0,el=null,tl=0,nt=[],rt=0,_n=null,Tt=1,Mt="";function vn(e,t){Hn[Gn++]=tl,Hn[Gn++]=el,el=e,tl=t}function cd(e,t,n){nt[rt++]=Tt,nt[rt++]=Mt,nt[rt++]=_n,_n=e;var r=Tt;e=Mt;var s=32-xt(r)-1;r&=~(1<<s),n+=1;var o=32-xt(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Tt=1<<32-xt(t)+s|n<<s|r,Mt=o+e}else Tt=1<<o|n<<s|r,Mt=e}function Aa(e){e.return!==null&&(vn(e,1),cd(e,1,0))}function Fa(e){for(;e===el;)el=Hn[--Gn],Hn[Gn]=null,tl=Hn[--Gn],Hn[Gn]=null;for(;e===_n;)_n=nt[--rt],nt[rt]=null,Mt=nt[--rt],nt[rt]=null,Tt=nt[--rt],nt[rt]=null}var Ye=null,Qe=null,ae=!1,mt=null;function dd(e,t){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_n!==null?{id:Tt,overflow:Mt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ye=e,Qe=null,!0):!1;default:return!1}}function Bo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wo(e){if(ae){var t=Qe;if(t){var n=t;if(!eu(e,t)){if(Bo(e))throw Error(D(418));t=rn(n.nextSibling);var r=Ye;t&&eu(e,t)?dd(r,n):(e.flags=e.flags&-4097|2,ae=!1,Ye=e)}}else{if(Bo(e))throw Error(D(418));e.flags=e.flags&-4097|2,ae=!1,Ye=e}}}function tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function Cs(e){if(e!==Ye)return!1;if(!ae)return tu(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fo(e.type,e.memoizedProps)),t&&(t=Qe)){if(Bo(e))throw fd(),Error(D(418));for(;t;)dd(e,t),t=rn(t.nextSibling)}if(tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Ye?rn(e.stateNode.nextSibling):null;return!0}function fd(){for(var e=Qe;e;)e=rn(e.nextSibling)}function lr(){Qe=Ye=null,ae=!1}function Oa(e){mt===null?mt=[e]:mt.push(e)}var Uh=$t.ReactCurrentBatchConfig;function Sr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nu(e){var t=e._init;return t(e._payload)}function md(e){function t(g,d){if(e){var x=g.deletions;x===null?(g.deletions=[d],g.flags|=16):x.push(d)}}function n(g,d){if(!e)return null;for(;d!==null;)t(g,d),d=d.sibling;return null}function r(g,d){for(g=new Map;d!==null;)d.key!==null?g.set(d.key,d):g.set(d.index,d),d=d.sibling;return g}function s(g,d){return g=an(g,d),g.index=0,g.sibling=null,g}function o(g,d,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<d?(g.flags|=2,d):x):(g.flags|=2,d)):(g.flags|=1048576,d)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,d,x,w){return d===null||d.tag!==6?(d=so(x,g.mode,w),d.return=g,d):(d=s(d,x),d.return=g,d)}function u(g,d,x,w){var C=x.type;return C===On?m(g,d,x.props.children,w,x.key):d!==null&&(d.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qt&&nu(C)===d.type)?(w=s(d,x.props),w.ref=Sr(g,d,x),w.return=g,w):(w=Bs(x.type,x.key,x.props,null,g.mode,w),w.ref=Sr(g,d,x),w.return=g,w)}function c(g,d,x,w){return d===null||d.tag!==4||d.stateNode.containerInfo!==x.containerInfo||d.stateNode.implementation!==x.implementation?(d=lo(x,g.mode,w),d.return=g,d):(d=s(d,x.children||[]),d.return=g,d)}function m(g,d,x,w,C){return d===null||d.tag!==7?(d=kn(x,g.mode,w,C),d.return=g,d):(d=s(d,x),d.return=g,d)}function f(g,d,x){if(typeof d=="string"&&d!==""||typeof d=="number")return d=so(""+d,g.mode,x),d.return=g,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case ps:return x=Bs(d.type,d.key,d.props,null,g.mode,x),x.ref=Sr(g,null,d),x.return=g,x;case Fn:return d=lo(d,g.mode,x),d.return=g,d;case Qt:var w=d._init;return f(g,w(d._payload),x)}if(_r(d)||xr(d))return d=kn(d,g.mode,x,null),d.return=g,d;bs(g,d)}return null}function h(g,d,x,w){var C=d!==null?d.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:i(g,d,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ps:return x.key===C?u(g,d,x,w):null;case Fn:return x.key===C?c(g,d,x,w):null;case Qt:return C=x._init,h(g,d,C(x._payload),w)}if(_r(x)||xr(x))return C!==null?null:m(g,d,x,w,null);bs(g,x)}return null}function v(g,d,x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,i(d,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ps:return g=g.get(w.key===null?x:w.key)||null,u(d,g,w,C);case Fn:return g=g.get(w.key===null?x:w.key)||null,c(d,g,w,C);case Qt:var b=w._init;return v(g,d,x,b(w._payload),C)}if(_r(w)||xr(w))return g=g.get(x)||null,m(d,g,w,C,null);bs(d,w)}return null}function y(g,d,x,w){for(var C=null,b=null,_=d,N=d=0,O=null;_!==null&&N<x.length;N++){_.index>N?(O=_,_=null):O=_.sibling;var A=h(g,_,x[N],w);if(A===null){_===null&&(_=O);break}e&&_&&A.alternate===null&&t(g,_),d=o(A,d,N),b===null?C=A:b.sibling=A,b=A,_=O}if(N===x.length)return n(g,_),ae&&vn(g,N),C;if(_===null){for(;N<x.length;N++)_=f(g,x[N],w),_!==null&&(d=o(_,d,N),b===null?C=_:b.sibling=_,b=_);return ae&&vn(g,N),C}for(_=r(g,_);N<x.length;N++)O=v(_,g,N,x[N],w),O!==null&&(e&&O.alternate!==null&&_.delete(O.key===null?N:O.key),d=o(O,d,N),b===null?C=O:b.sibling=O,b=O);return e&&_.forEach(function(B){return t(g,B)}),ae&&vn(g,N),C}function S(g,d,x,w){var C=xr(x);if(typeof C!="function")throw Error(D(150));if(x=C.call(x),x==null)throw Error(D(151));for(var b=C=null,_=d,N=d=0,O=null,A=x.next();_!==null&&!A.done;N++,A=x.next()){_.index>N?(O=_,_=null):O=_.sibling;var B=h(g,_,A.value,w);if(B===null){_===null&&(_=O);break}e&&_&&B.alternate===null&&t(g,_),d=o(B,d,N),b===null?C=B:b.sibling=B,b=B,_=O}if(A.done)return n(g,_),ae&&vn(g,N),C;if(_===null){for(;!A.done;N++,A=x.next())A=f(g,A.value,w),A!==null&&(d=o(A,d,N),b===null?C=A:b.sibling=A,b=A);return ae&&vn(g,N),C}for(_=r(g,_);!A.done;N++,A=x.next())A=v(_,g,N,A.value,w),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?N:A.key),d=o(A,d,N),b===null?C=A:b.sibling=A,b=A);return e&&_.forEach(function(P){return t(g,P)}),ae&&vn(g,N),C}function k(g,d,x,w){if(typeof x=="object"&&x!==null&&x.type===On&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ps:e:{for(var C=x.key,b=d;b!==null;){if(b.key===C){if(C=x.type,C===On){if(b.tag===7){n(g,b.sibling),d=s(b,x.props.children),d.return=g,g=d;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qt&&nu(C)===b.type){n(g,b.sibling),d=s(b,x.props),d.ref=Sr(g,b,x),d.return=g,g=d;break e}n(g,b);break}else t(g,b);b=b.sibling}x.type===On?(d=kn(x.props.children,g.mode,w,x.key),d.return=g,g=d):(w=Bs(x.type,x.key,x.props,null,g.mode,w),w.ref=Sr(g,d,x),w.return=g,g=w)}return a(g);case Fn:e:{for(b=x.key;d!==null;){if(d.key===b)if(d.tag===4&&d.stateNode.containerInfo===x.containerInfo&&d.stateNode.implementation===x.implementation){n(g,d.sibling),d=s(d,x.children||[]),d.return=g,g=d;break e}else{n(g,d);break}else t(g,d);d=d.sibling}d=lo(x,g.mode,w),d.return=g,g=d}return a(g);case Qt:return b=x._init,k(g,d,b(x._payload),w)}if(_r(x))return y(g,d,x,w);if(xr(x))return S(g,d,x,w);bs(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,d!==null&&d.tag===6?(n(g,d.sibling),d=s(d,x),d.return=g,g=d):(n(g,d),d=so(x,g.mode,w),d.return=g,g=d),a(g)):n(g,d)}return k}var or=md(!0),hd=md(!1),nl=fn(null),rl=null,Qn=null,Ua=null;function $a(){Ua=Qn=rl=null}function Ba(e){var t=nl.current;oe(nl),e._currentValue=t}function Vo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function er(e,t){rl=e,Ua=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function ot(e){var t=e._currentValue;if(Ua!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(rl===null)throw Error(D(308));Qn=e,rl.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var jn=null;function Wa(e){jn===null?jn=[e]:jn.push(e)}function pd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Wa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ot(e,r)}function Ot(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yt=!1;function Va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ot(e,n)}return s=r.interleaved,s===null?(t.next=t,Wa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ot(e,n)}function zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}function ru(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,r){var s=e.updateQueue;Yt=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==a&&(i===null?m.firstBaseUpdate=c:i.next=c,m.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;a=0,m=c=u=null,i=o;do{var h=i.lane,v=i.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,S=i;switch(h=t,v=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){f=y.call(v,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,h=typeof y=="function"?y.call(v,f,h):y,h==null)break e;f=fe({},f,h);break e;case 2:Yt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else v={eventTime:v,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(c=m=v,u=f):m=m.next=v,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ln|=a,e.lanes=a,e.memoizedState=f}}function su(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var cs={},_t=fn(cs),Jr=fn(cs),Zr=fn(cs);function Sn(e){if(e===cs)throw Error(D(174));return e}function Ha(e,t){switch(ne(Zr,t),ne(Jr,e),ne(_t,cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ko(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ko(t,e)}oe(_t),ne(_t,t)}function ar(){oe(_t),oe(Jr),oe(Zr)}function xd(e){Sn(Zr.current);var t=Sn(_t.current),n=ko(t,e.type);t!==n&&(ne(Jr,e),ne(_t,n))}function Ga(e){Jr.current===e&&(oe(_t),oe(Jr))}var ce=fn(0);function ll(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zl=[];function Qa(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var As=$t.ReactCurrentDispatcher,ql=$t.ReactCurrentBatchConfig,Pn=0,de=null,Ne=null,be=null,ol=!1,zr=!1,qr=0,$h=0;function Re(){throw Error(D(321))}function Ya(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wt(e[n],t[n]))return!1;return!0}function Ka(e,t,n,r,s,o){if(Pn=o,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,As.current=e===null||e.memoizedState===null?Hh:Gh,e=n(r,s),zr){o=0;do{if(zr=!1,qr=0,25<=o)throw Error(D(301));o+=1,be=Ne=null,t.updateQueue=null,As.current=Qh,e=n(r,s)}while(zr)}if(As.current=al,t=Ne!==null&&Ne.next!==null,Pn=0,be=Ne=de=null,ol=!1,t)throw Error(D(300));return e}function Xa(){var e=qr!==0;return qr=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=e:be=be.next=e,be}function at(){if(Ne===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=be===null?de.memoizedState:be.next;if(t!==null)be=t,Ne=e;else{if(e===null)throw Error(D(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},be===null?de.memoizedState=be=e:be=be.next=e}return be}function es(e,t){return typeof t=="function"?t(e):t}function eo(e){var t=at(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ne,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,u=null,c=o;do{var m=c.lane;if((Pn&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,de.lanes|=m,Ln|=m}c=c.next}while(c!==null&&c!==o);u===null?a=r:u.next=i,wt(r,t.memoizedState)||(Be=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,de.lanes|=o,Ln|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function to(e){var t=at(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);wt(o,t.memoizedState)||(Be=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function vd(){}function yd(e,t){var n=de,r=at(),s=t(),o=!wt(r.memoizedState,s);if(o&&(r.memoizedState=s,Be=!0),r=r.queue,Ja(Sd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,ts(9,jd.bind(null,n,r,s,t),void 0,null),Ee===null)throw Error(D(349));Pn&30||wd(n,t,s)}return s}function wd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jd(e,t,n,r){t.value=n,t.getSnapshot=r,Nd(t)&&kd(e)}function Sd(e,t,n){return n(function(){Nd(t)&&kd(e)})}function Nd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wt(e,n)}catch{return!0}}function kd(e){var t=Ot(e,1);t!==null&&vt(t,e,1,-1)}function lu(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=Vh.bind(null,de,e),[t.memoizedState,e]}function ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cd(){return at().memoizedState}function Fs(e,t,n,r){var s=kt();de.flags|=e,s.memoizedState=ts(1|t,n,void 0,r===void 0?null:r)}function wl(e,t,n,r){var s=at();r=r===void 0?null:r;var o=void 0;if(Ne!==null){var a=Ne.memoizedState;if(o=a.destroy,r!==null&&Ya(r,a.deps)){s.memoizedState=ts(t,n,o,r);return}}de.flags|=e,s.memoizedState=ts(1|t,n,o,r)}function ou(e,t){return Fs(8390656,8,e,t)}function Ja(e,t){return wl(2048,8,e,t)}function bd(e,t){return wl(4,2,e,t)}function Ed(e,t){return wl(4,4,e,t)}function _d(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pd(e,t,n){return n=n!=null?n.concat([e]):null,wl(4,4,_d.bind(null,t,e),n)}function Za(){}function Ld(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ya(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Dd(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ya(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Rd(e,t,n){return Pn&21?(wt(n,t)||(n=Ac(),de.lanes|=n,Ln|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=n)}function Bh(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=ql.transition;ql.transition={};try{e(!1),t()}finally{q=n,ql.transition=r}}function Id(){return at().memoizedState}function Wh(e,t,n){var r=on(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Td(e))Md(t,n);else if(n=pd(e,t,n,r),n!==null){var s=Ae();vt(n,e,r,s),zd(n,t,r)}}function Vh(e,t,n){var r=on(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Td(e))Md(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,wt(i,a)){var u=t.interleaved;u===null?(s.next=s,Wa(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=pd(e,t,s,r),n!==null&&(s=Ae(),vt(n,e,r,s),zd(n,t,r))}}function Td(e){var t=e.alternate;return e===de||t!==null&&t===de}function Md(e,t){zr=ol=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}var al={readContext:ot,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Hh={readContext:ot,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:ou,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fs(4194308,4,_d.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var n=kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wh.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:lu,useDebugValue:Za,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=lu(!1),t=e[0];return e=Bh.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=de,s=kt();if(ae){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ee===null)throw Error(D(349));Pn&30||wd(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,ou(Sd.bind(null,r,o,e),[e]),r.flags|=2048,ts(9,jd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=kt(),t=Ee.identifierPrefix;if(ae){var n=Mt,r=Tt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$h++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gh={readContext:ot,useCallback:Ld,useContext:ot,useEffect:Ja,useImperativeHandle:Pd,useInsertionEffect:bd,useLayoutEffect:Ed,useMemo:Dd,useReducer:eo,useRef:Cd,useState:function(){return eo(es)},useDebugValue:Za,useDeferredValue:function(e){var t=at();return Rd(t,Ne.memoizedState,e)},useTransition:function(){var e=eo(es)[0],t=at().memoizedState;return[e,t]},useMutableSource:vd,useSyncExternalStore:yd,useId:Id,unstable_isNewReconciler:!1},Qh={readContext:ot,useCallback:Ld,useContext:ot,useEffect:Ja,useImperativeHandle:Pd,useInsertionEffect:bd,useLayoutEffect:Ed,useMemo:Dd,useReducer:to,useRef:Cd,useState:function(){return to(es)},useDebugValue:Za,useDeferredValue:function(e){var t=at();return Ne===null?t.memoizedState=e:Rd(t,Ne.memoizedState,e)},useTransition:function(){var e=to(es)[0],t=at().memoizedState;return[e,t]},useMutableSource:vd,useSyncExternalStore:yd,useId:Id,unstable_isNewReconciler:!1};function ct(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ho(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jl={isMounted:function(e){return(e=e._reactInternals)?In(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ae(),s=on(e),o=zt(r,s);o.payload=t,n!=null&&(o.callback=n),t=sn(e,o,s),t!==null&&(vt(t,e,s,r),zs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ae(),s=on(e),o=zt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=sn(e,o,s),t!==null&&(vt(t,e,s,r),zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ae(),r=on(e),s=zt(n,r);s.tag=2,t!=null&&(s.callback=t),t=sn(e,s,r),t!==null&&(vt(t,e,r,n),zs(t,e,r))}};function au(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Qr(n,r)||!Qr(s,o):!0}function Ad(e,t,n){var r=!1,s=cn,o=t.contextType;return typeof o=="object"&&o!==null?o=ot(o):(s=Ve(t)?En:Me.current,r=t.contextTypes,o=(r=r!=null)?sr(e,s):cn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function iu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jl.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Va(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=ot(o):(o=Ve(t)?En:Me.current,s.context=sr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ho(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&jl.enqueueReplaceState(s,s.state,null),sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ir(e,t){try{var n="",r=t;do n+=jm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function no(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yh=typeof WeakMap=="function"?WeakMap:Map;function Fd(e,t,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ul||(ul=!0,ra=r),Qo(e,t)},n}function Od(e,t,n){n=zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qo(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qo(e,t),typeof r!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function uu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yh;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ip.bind(null,e,t,n),t.then(e,e))}function cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function du(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zt(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var Kh=$t.ReactCurrentOwner,Be=!1;function ze(e,t,n,r){t.child=e===null?hd(t,null,n,r):or(t,e.child,n,r)}function fu(e,t,n,r,s){n=n.render;var o=t.ref;return er(t,s),r=Ka(e,t,n,r,o,s),n=Xa(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ut(e,t,s)):(ae&&n&&Aa(t),t.flags|=1,ze(e,t,r,s),t.child)}function mu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!oi(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Ud(e,t,o,r,s)):(e=Bs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Qr,n(a,r)&&e.ref===t.ref)return Ut(e,t,s)}return t.flags|=1,e=an(o,r),e.ref=t.ref,e.return=t,t.child=e}function Ud(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Qr(o,r)&&e.ref===t.ref)if(Be=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,Ut(e,t,s)}return Yo(e,t,n,r,s)}function $d(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Kn,Ge),Ge|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(Kn,Ge),Ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ne(Kn,Ge),Ge|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ne(Kn,Ge),Ge|=r;return ze(e,t,s,n),t.child}function Bd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yo(e,t,n,r,s){var o=Ve(n)?En:Me.current;return o=sr(t,o),er(t,s),n=Ka(e,t,n,r,o,s),r=Xa(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ut(e,t,s)):(ae&&r&&Aa(t),t.flags|=1,ze(e,t,n,s),t.child)}function hu(e,t,n,r,s){if(Ve(n)){var o=!0;qs(t)}else o=!1;if(er(t,s),t.stateNode===null)Os(e,t),Ad(t,n,r),Go(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ot(c):(c=Ve(n)?En:Me.current,c=sr(t,c));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&iu(t,a,r,c),Yt=!1;var h=t.memoizedState;a.state=h,sl(t,r,a,s),u=t.memoizedState,i!==r||h!==u||We.current||Yt?(typeof m=="function"&&(Ho(t,n,m,r),u=t.memoizedState),(i=Yt||au(t,n,i,r,h,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,gd(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ct(t.type,i),a.props=c,f=t.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=ot(u):(u=Ve(n)?En:Me.current,u=sr(t,u));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==u)&&iu(t,a,r,u),Yt=!1,h=t.memoizedState,a.state=h,sl(t,r,a,s);var y=t.memoizedState;i!==f||h!==y||We.current||Yt?(typeof v=="function"&&(Ho(t,n,v,r),y=t.memoizedState),(c=Yt||au(t,n,c,r,h,y,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ko(e,t,n,r,o,s)}function Ko(e,t,n,r,s,o){Bd(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&qi(t,n,!1),Ut(e,t,o);r=t.stateNode,Kh.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=or(t,e.child,null,o),t.child=or(t,null,i,o)):ze(e,t,i,o),t.memoizedState=r.state,s&&qi(t,n,!0),t.child}function Wd(e){var t=e.stateNode;t.pendingContext?Zi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zi(e,t.context,!1),Ha(e,t.containerInfo)}function pu(e,t,n,r,s){return lr(),Oa(s),t.flags|=256,ze(e,t,n,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vd(e,t,n){var r=t.pendingProps,s=ce.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ne(ce,s&1),e===null)return Wo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=kl(a,r,0,null),e=kn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Jo(n),t.memoizedState=Xo,e):qa(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return Xh(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=an(s,u),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=an(i,o):(o=kn(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Jo(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Xo,r}return o=e.child,e=o.sibling,r=an(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qa(e,t){return t=kl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,n,r){return r!==null&&Oa(r),or(t,e.child,null,n),e=qa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xh(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=no(Error(D(422))),Es(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=kl({mode:"visible",children:r.children},s,0,null),o=kn(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&or(t,e.child,null,a),t.child.memoizedState=Jo(a),t.memoizedState=Xo,o);if(!(t.mode&1))return Es(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(D(419)),r=no(o,r,void 0),Es(e,t,a,r)}if(i=(a&e.childLanes)!==0,Be||i){if(r=Ee,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ot(e,s),vt(r,e,s,-1))}return li(),r=no(Error(D(421))),Es(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=up.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Qe=rn(s.nextSibling),Ye=t,ae=!0,mt=null,e!==null&&(nt[rt++]=Tt,nt[rt++]=Mt,nt[rt++]=_n,Tt=e.id,Mt=e.overflow,_n=t),t=qa(t,r.children),t.flags|=4096,t)}function gu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vo(e.return,t,n)}function ro(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Hd(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ze(e,t,r.children,n),r=ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gu(e,n,t);else if(e.tag===19)gu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ne(ce,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ll(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ro(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ll(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ro(t,!0,n,null,o);break;case"together":ro(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Os(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ut(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ln|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=an(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=an(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jh(e,t,n){switch(t.tag){case 3:Wd(t),lr();break;case 5:xd(t);break;case 1:Ve(t.type)&&qs(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ne(nl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ne(ce,ce.current&1),t.flags|=128,null):n&t.child.childLanes?Vd(e,t,n):(ne(ce,ce.current&1),e=Ut(e,t,n),e!==null?e.sibling:null);ne(ce,ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hd(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(ce,ce.current),r)break;return null;case 22:case 23:return t.lanes=0,$d(e,t,n)}return Ut(e,t,n)}var Gd,Zo,Qd,Yd;Gd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zo=function(){};Qd=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Sn(_t.current);var o=null;switch(n){case"input":s=wo(e,s),r=wo(e,r),o=[];break;case"select":s=fe({},s,{value:void 0}),r=fe({},r,{value:void 0}),o=[];break;case"textarea":s=No(e,s),r=No(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Js)}Co(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var i=s[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ur.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(i=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ur.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&le("scroll",e),o||i===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Yd=function(e,t,n,r){n!==r&&(t.flags|=4)};function Nr(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zh(e,t,n){var r=t.pendingProps;switch(Fa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Ve(t.type)&&Zs(),Ie(t),null;case 3:return r=t.stateNode,ar(),oe(We),oe(Me),Qa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mt!==null&&(oa(mt),mt=null))),Zo(e,t),Ie(t),null;case 5:Ga(t);var s=Sn(Zr.current);if(n=t.type,e!==null&&t.stateNode!=null)Qd(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Ie(t),null}if(e=Sn(_t.current),Cs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[bt]=t,r[Xr]=o,e=(t.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)le(Lr[s],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":Ci(r,o),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},le("invalid",r);break;case"textarea":Ei(r,o),le("invalid",r)}Co(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&ks(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&ks(r.textContent,i,e),s=["children",""+i]):Ur.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&le("scroll",r)}switch(n){case"input":gs(r),bi(r,o,!0);break;case"textarea":gs(r),_i(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Js)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[bt]=t,e[Xr]=r,Gd(e,t,!1,!1),t.stateNode=e;e:{switch(a=bo(n,r),n){case"dialog":le("cancel",e),le("close",e),s=r;break;case"iframe":case"object":case"embed":le("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)le(Lr[s],e);s=r;break;case"source":le("error",e),s=r;break;case"img":case"image":case"link":le("error",e),le("load",e),s=r;break;case"details":le("toggle",e),s=r;break;case"input":Ci(e,r),s=wo(e,r),le("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=fe({},r,{value:void 0}),le("invalid",e);break;case"textarea":Ei(e,r),s=No(e,r),le("invalid",e);break;default:s=r}Co(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="style"?Cc(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Nc(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$r(e,u):typeof u=="number"&&$r(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ur.hasOwnProperty(o)?u!=null&&o==="onScroll"&&le("scroll",e):u!=null&&Na(e,o,u,a))}switch(n){case"input":gs(e),bi(e,r,!1);break;case"textarea":gs(e),_i(e);break;case"option":r.value!=null&&e.setAttribute("value",""+un(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Xn(e,!!r.multiple,o,!1):r.defaultValue!=null&&Xn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Js)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)Yd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Sn(Zr.current),Sn(_t.current),Cs(t)){if(r=t.stateNode,n=t.memoizedProps,r[bt]=t,(o=r.nodeValue!==n)&&(e=Ye,e!==null))switch(e.tag){case 3:ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ks(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=t,t.stateNode=r}return Ie(t),null;case 13:if(oe(ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Qe!==null&&t.mode&1&&!(t.flags&128))fd(),lr(),t.flags|=98560,o=!1;else if(o=Cs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(D(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[bt]=t}else lr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),o=!1}else mt!==null&&(oa(mt),mt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?ke===0&&(ke=3):li())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return ar(),Zo(e,t),e===null&&Yr(t.stateNode.containerInfo),Ie(t),null;case 10:return Ba(t.type._context),Ie(t),null;case 17:return Ve(t.type)&&Zs(),Ie(t),null;case 19:if(oe(ce),o=t.memoizedState,o===null)return Ie(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Nr(o,!1);else{if(ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ll(e),a!==null){for(t.flags|=128,Nr(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ne(ce,ce.current&1|2),t.child}e=e.sibling}o.tail!==null&&xe()>ur&&(t.flags|=128,r=!0,Nr(o,!1),t.lanes=4194304)}else{if(!r)if(e=ll(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Nr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ae)return Ie(t),null}else 2*xe()-o.renderingStartTime>ur&&n!==1073741824&&(t.flags|=128,r=!0,Nr(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=xe(),t.sibling=null,n=ce.current,ne(ce,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return si(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ge&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function qh(e,t){switch(Fa(t),t.tag){case 1:return Ve(t.type)&&Zs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),oe(We),oe(Me),Qa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ga(t),null;case 13:if(oe(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(ce),null;case 4:return ar(),null;case 10:return Ba(t.type._context),null;case 22:case 23:return si(),null;case 24:return null;default:return null}}var _s=!1,Te=!1,ep=typeof WeakSet=="function"?WeakSet:Set,z=null;function Yn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){he(e,t,r)}else n.current=null}function qo(e,t,n){try{n()}catch(r){he(e,t,r)}}var xu=!1;function tp(e,t){if(zo=Ys,e=qc(),za(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,m=0,f=e,h=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)h=f,f=v;for(;;){if(f===e)break t;if(h===n&&++c===s&&(i=a),h===o&&++m===r&&(u=a),(v=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=v}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ao={focusedElem:e,selectionRange:n},Ys=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,k=y.memoizedState,g=t.stateNode,d=g.getSnapshotBeforeUpdate(t.elementType===t.type?S:ct(t.type,S),k);g.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){he(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return y=xu,xu=!1,y}function Ar(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&qo(t,n,o)}s=s.next}while(s!==r)}}function Sl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ea(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Kd(e){var t=e.alternate;t!==null&&(e.alternate=null,Kd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[Xr],delete t[Uo],delete t[Ah],delete t[Fh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xd(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ta(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Js));else if(r!==4&&(e=e.child,e!==null))for(ta(e,t,n),e=e.sibling;e!==null;)ta(e,t,n),e=e.sibling}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}var _e=null,ft=!1;function Ht(e,t,n){for(n=n.child;n!==null;)Jd(e,t,n),n=n.sibling}function Jd(e,t,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 5:Te||Yn(n,t);case 6:var r=_e,s=ft;_e=null,Ht(e,t,n),_e=r,ft=s,_e!==null&&(ft?(e=_e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(ft?(e=_e,n=n.stateNode,e.nodeType===8?Xl(e.parentNode,n):e.nodeType===1&&Xl(e,n),Hr(e)):Xl(_e,n.stateNode));break;case 4:r=_e,s=ft,_e=n.stateNode.containerInfo,ft=!0,Ht(e,t,n),_e=r,ft=s;break;case 0:case 11:case 14:case 15:if(!Te&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&qo(n,t,a),s=s.next}while(s!==r)}Ht(e,t,n);break;case 1:if(!Te&&(Yn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){he(n,t,i)}Ht(e,t,n);break;case 21:Ht(e,t,n);break;case 22:n.mode&1?(Te=(r=Te)||n.memoizedState!==null,Ht(e,t,n),Te=r):Ht(e,t,n);break;default:Ht(e,t,n)}}function yu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ep),t.forEach(function(r){var s=cp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ut(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:_e=i.stateNode,ft=!1;break e;case 3:_e=i.stateNode.containerInfo,ft=!0;break e;case 4:_e=i.stateNode.containerInfo,ft=!0;break e}i=i.return}if(_e===null)throw Error(D(160));Jd(o,a,s),_e=null,ft=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){he(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zd(t,e),t=t.sibling}function Zd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ut(t,e),Nt(e),r&4){try{Ar(3,e,e.return),Sl(3,e)}catch(S){he(e,e.return,S)}try{Ar(5,e,e.return)}catch(S){he(e,e.return,S)}}break;case 1:ut(t,e),Nt(e),r&512&&n!==null&&Yn(n,n.return);break;case 5:if(ut(t,e),Nt(e),r&512&&n!==null&&Yn(n,n.return),e.flags&32){var s=e.stateNode;try{$r(s,"")}catch(S){he(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&wc(s,o),bo(i,a);var c=bo(i,o);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?Cc(s,f):m==="dangerouslySetInnerHTML"?Nc(s,f):m==="children"?$r(s,f):Na(s,m,f,c)}switch(i){case"input":jo(s,o);break;case"textarea":jc(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Xn(s,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?Xn(s,!!o.multiple,o.defaultValue,!0):Xn(s,!!o.multiple,o.multiple?[]:"",!1))}s[Xr]=o}catch(S){he(e,e.return,S)}}break;case 6:if(ut(t,e),Nt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(S){he(e,e.return,S)}}break;case 3:if(ut(t,e),Nt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hr(t.containerInfo)}catch(S){he(e,e.return,S)}break;case 4:ut(t,e),Nt(e);break;case 13:ut(t,e),Nt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ni=xe())),r&4&&yu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(Te=(c=Te)||m,ut(t,e),Te=c):ut(t,e),Nt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(z=e,m=e.child;m!==null;){for(f=z=m;z!==null;){switch(h=z,v=h.child,h.tag){case 0:case 11:case 14:case 15:Ar(4,h,h.return);break;case 1:Yn(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(S){he(r,n,S)}}break;case 5:Yn(h,h.return);break;case 22:if(h.memoizedState!==null){ju(f);continue}}v!==null?(v.return=h,z=v):ju(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=kc("display",a))}catch(S){he(e,e.return,S)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){he(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ut(t,e),Nt(e),r&4&&yu(e);break;case 21:break;default:ut(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xd(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($r(s,""),r.flags&=-33);var o=vu(e);na(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=vu(e);ta(e,i,a);break;default:throw Error(D(161))}}catch(u){he(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function np(e,t,n){z=e,qd(e)}function qd(e,t,n){for(var r=(e.mode&1)!==0;z!==null;){var s=z,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||_s;if(!a){var i=s.alternate,u=i!==null&&i.memoizedState!==null||Te;i=_s;var c=Te;if(_s=a,(Te=u)&&!c)for(z=s;z!==null;)a=z,u=a.child,a.tag===22&&a.memoizedState!==null?Su(s):u!==null?(u.return=a,z=u):Su(s);for(;o!==null;)z=o,qd(o),o=o.sibling;z=s,_s=i,Te=c}wu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,z=o):wu(e)}}function wu(e){for(;z!==null;){var t=z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Te||Sl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Te)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ct(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&su(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}su(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Hr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Te||t.flags&512&&ea(t)}catch(h){he(t,t.return,h)}}if(t===e){z=null;break}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}}function ju(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,z=n;break}z=t.return}}function Su(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Sl(4,t)}catch(u){he(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){he(t,s,u)}}var o=t.return;try{ea(t)}catch(u){he(t,o,u)}break;case 5:var a=t.return;try{ea(t)}catch(u){he(t,a,u)}}}catch(u){he(t,t.return,u)}if(t===e){z=null;break}var i=t.sibling;if(i!==null){i.return=t.return,z=i;break}z=t.return}}var rp=Math.ceil,il=$t.ReactCurrentDispatcher,ei=$t.ReactCurrentOwner,lt=$t.ReactCurrentBatchConfig,X=0,Ee=null,je=null,Pe=0,Ge=0,Kn=fn(0),ke=0,ns=null,Ln=0,Nl=0,ti=0,Fr=null,$e=null,ni=0,ur=1/0,Rt=null,ul=!1,ra=null,ln=null,Ps=!1,Zt=null,cl=0,Or=0,sa=null,Us=-1,$s=0;function Ae(){return X&6?xe():Us!==-1?Us:Us=xe()}function on(e){return e.mode&1?X&2&&Pe!==0?Pe&-Pe:Uh.transition!==null?($s===0&&($s=Ac()),$s):(e=q,e!==0||(e=window.event,e=e===void 0?16:Vc(e.type)),e):1}function vt(e,t,n,r){if(50<Or)throw Or=0,sa=null,Error(D(185));as(e,n,r),(!(X&2)||e!==Ee)&&(e===Ee&&(!(X&2)&&(Nl|=n),ke===4&&Xt(e,Pe)),He(e,r),n===1&&X===0&&!(t.mode&1)&&(ur=xe()+500,yl&&mn()))}function He(e,t){var n=e.callbackNode;Um(e,t);var r=Qs(e,e===Ee?Pe:0);if(r===0)n!==null&&Di(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Di(n),t===1)e.tag===0?Oh(Nu.bind(null,e)):ud(Nu.bind(null,e)),Mh(function(){!(X&6)&&mn()}),n=null;else{switch(Fc(r)){case 1:n=_a;break;case 4:n=Mc;break;case 16:n=Gs;break;case 536870912:n=zc;break;default:n=Gs}n=af(n,ef.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ef(e,t){if(Us=-1,$s=0,X&6)throw Error(D(327));var n=e.callbackNode;if(tr()&&e.callbackNode!==n)return null;var r=Qs(e,e===Ee?Pe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dl(e,r);else{t=r;var s=X;X|=2;var o=nf();(Ee!==e||Pe!==t)&&(Rt=null,ur=xe()+500,Nn(e,t));do try{op();break}catch(i){tf(e,i)}while(!0);$a(),il.current=o,X=s,je!==null?t=0:(Ee=null,Pe=0,t=ke)}if(t!==0){if(t===2&&(s=Do(e),s!==0&&(r=s,t=la(e,s))),t===1)throw n=ns,Nn(e,0),Xt(e,r),He(e,xe()),n;if(t===6)Xt(e,r);else{if(s=e.current.alternate,!(r&30)&&!sp(s)&&(t=dl(e,r),t===2&&(o=Do(e),o!==0&&(r=o,t=la(e,o))),t===1))throw n=ns,Nn(e,0),Xt(e,r),He(e,xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:yn(e,$e,Rt);break;case 3:if(Xt(e,r),(r&130023424)===r&&(t=ni+500-xe(),10<t)){if(Qs(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ae(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Oo(yn.bind(null,e,$e,Rt),t);break}yn(e,$e,Rt);break;case 4:if(Xt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-xt(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rp(r/1960))-r,10<r){e.timeoutHandle=Oo(yn.bind(null,e,$e,Rt),r);break}yn(e,$e,Rt);break;case 5:yn(e,$e,Rt);break;default:throw Error(D(329))}}}return He(e,xe()),e.callbackNode===n?ef.bind(null,e):null}function la(e,t){var n=Fr;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=dl(e,t),e!==2&&(t=$e,$e=n,t!==null&&oa(t)),e}function oa(e){$e===null?$e=e:$e.push.apply($e,e)}function sp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!wt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xt(e,t){for(t&=~ti,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Nu(e){if(X&6)throw Error(D(327));tr();var t=Qs(e,0);if(!(t&1))return He(e,xe()),null;var n=dl(e,t);if(e.tag!==0&&n===2){var r=Do(e);r!==0&&(t=r,n=la(e,r))}if(n===1)throw n=ns,Nn(e,0),Xt(e,t),He(e,xe()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yn(e,$e,Rt),He(e,xe()),null}function ri(e,t){var n=X;X|=1;try{return e(t)}finally{X=n,X===0&&(ur=xe()+500,yl&&mn())}}function Dn(e){Zt!==null&&Zt.tag===0&&!(X&6)&&tr();var t=X;X|=1;var n=lt.transition,r=q;try{if(lt.transition=null,q=1,e)return e()}finally{q=r,lt.transition=n,X=t,!(X&6)&&mn()}}function si(){Ge=Kn.current,oe(Kn)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Th(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Fa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zs();break;case 3:ar(),oe(We),oe(Me),Qa();break;case 5:Ga(r);break;case 4:ar();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:Ba(r.type._context);break;case 22:case 23:si()}n=n.return}if(Ee=e,je=e=an(e.current,null),Pe=Ge=t,ke=0,ns=null,ti=Nl=Ln=0,$e=Fr=null,jn!==null){for(t=0;t<jn.length;t++)if(n=jn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}jn=null}return e}function tf(e,t){do{var n=je;try{if($a(),As.current=al,ol){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ol=!1}if(Pn=0,be=Ne=de=null,zr=!1,qr=0,ei.current=null,n===null||n.return===null){ke=1,ns=t,je=null;break}e:{var o=e,a=n.return,i=n,u=t;if(t=Pe,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=i,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=cu(a);if(v!==null){v.flags&=-257,du(v,a,i,o,t),v.mode&1&&uu(o,c,t),t=v,u=c;var y=t.updateQueue;if(y===null){var S=new Set;S.add(u),t.updateQueue=S}else y.add(u);break e}else{if(!(t&1)){uu(o,c,t),li();break e}u=Error(D(426))}}else if(ae&&i.mode&1){var k=cu(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),du(k,a,i,o,t),Oa(ir(u,i));break e}}o=u=ir(u,i),ke!==4&&(ke=2),Fr===null?Fr=[o]:Fr.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=Fd(o,u,t);ru(o,g);break e;case 1:i=u;var d=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ln===null||!ln.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=Od(o,i,t);ru(o,w);break e}}o=o.return}while(o!==null)}sf(n)}catch(C){t=C,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function nf(){var e=il.current;return il.current=al,e===null?al:e}function li(){(ke===0||ke===3||ke===2)&&(ke=4),Ee===null||!(Ln&268435455)&&!(Nl&268435455)||Xt(Ee,Pe)}function dl(e,t){var n=X;X|=2;var r=nf();(Ee!==e||Pe!==t)&&(Rt=null,Nn(e,t));do try{lp();break}catch(s){tf(e,s)}while(!0);if($a(),X=n,il.current=r,je!==null)throw Error(D(261));return Ee=null,Pe=0,ke}function lp(){for(;je!==null;)rf(je)}function op(){for(;je!==null&&!Dm();)rf(je)}function rf(e){var t=of(e.alternate,e,Ge);e.memoizedProps=e.pendingProps,t===null?sf(e):je=t,ei.current=null}function sf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qh(n,t),n!==null){n.flags&=32767,je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ke=6,je=null;return}}else if(n=Zh(n,t,Ge),n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);ke===0&&(ke=5)}function yn(e,t,n){var r=q,s=lt.transition;try{lt.transition=null,q=1,ap(e,t,n,r)}finally{lt.transition=s,q=r}return null}function ap(e,t,n,r){do tr();while(Zt!==null);if(X&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if($m(e,o),e===Ee&&(je=Ee=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ps||(Ps=!0,af(Gs,function(){return tr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=lt.transition,lt.transition=null;var a=q;q=1;var i=X;X|=4,ei.current=null,tp(e,n),Zd(n,e),Eh(Ao),Ys=!!zo,Ao=zo=null,e.current=n,np(n),Rm(),X=i,q=a,lt.transition=o}else e.current=n;if(Ps&&(Ps=!1,Zt=e,cl=s),o=e.pendingLanes,o===0&&(ln=null),Mm(n.stateNode),He(e,xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,e=ra,ra=null,e;return cl&1&&e.tag!==0&&tr(),o=e.pendingLanes,o&1?e===sa?Or++:(Or=0,sa=e):Or=0,mn(),null}function tr(){if(Zt!==null){var e=Fc(cl),t=lt.transition,n=q;try{if(lt.transition=null,q=16>e?16:e,Zt===null)var r=!1;else{if(e=Zt,Zt=null,cl=0,X&6)throw Error(D(331));var s=X;for(X|=4,z=e.current;z!==null;){var o=z,a=o.child;if(z.flags&16){var i=o.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(z=c;z!==null;){var m=z;switch(m.tag){case 0:case 11:case 15:Ar(8,m,o)}var f=m.child;if(f!==null)f.return=m,z=f;else for(;z!==null;){m=z;var h=m.sibling,v=m.return;if(Kd(m),m===c){z=null;break}if(h!==null){h.return=v,z=h;break}z=v}}}var y=o.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}z=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,z=a;else e:for(;z!==null;){if(o=z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ar(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,z=g;break e}z=o.return}}var d=e.current;for(z=d;z!==null;){a=z;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,z=x;else e:for(a=d;z!==null;){if(i=z,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Sl(9,i)}}catch(C){he(i,i.return,C)}if(i===a){z=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,z=w;break e}z=i.return}}if(X=s,mn(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(hl,e)}catch{}r=!0}return r}finally{q=n,lt.transition=t}}return!1}function ku(e,t,n){t=ir(n,t),t=Fd(e,t,1),e=sn(e,t,1),t=Ae(),e!==null&&(as(e,1,t),He(e,t))}function he(e,t,n){if(e.tag===3)ku(e,e,n);else for(;t!==null;){if(t.tag===3){ku(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ln===null||!ln.has(r))){e=ir(n,e),e=Od(t,e,1),t=sn(t,e,1),e=Ae(),t!==null&&(as(t,1,e),He(t,e));break}}t=t.return}}function ip(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(Pe&n)===n&&(ke===4||ke===3&&(Pe&130023424)===Pe&&500>xe()-ni?Nn(e,0):ti|=n),He(e,t)}function lf(e,t){t===0&&(e.mode&1?(t=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):t=1);var n=Ae();e=Ot(e,t),e!==null&&(as(e,t,n),He(e,n))}function up(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lf(e,n)}function cp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),lf(e,n)}var of;of=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)Be=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Be=!1,Jh(e,t,n);Be=!!(e.flags&131072)}else Be=!1,ae&&t.flags&1048576&&cd(t,tl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Os(e,t),e=t.pendingProps;var s=sr(t,Me.current);er(t,n),s=Ka(null,t,r,e,s,n);var o=Xa();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ve(r)?(o=!0,qs(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Va(t),s.updater=jl,t.stateNode=s,s._reactInternals=t,Go(t,r,e,n),t=Ko(null,t,r,!0,o,n)):(t.tag=0,ae&&o&&Aa(t),ze(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Os(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=fp(r),e=ct(r,e),s){case 0:t=Yo(null,t,r,e,n);break e;case 1:t=hu(null,t,r,e,n);break e;case 11:t=fu(null,t,r,e,n);break e;case 14:t=mu(null,t,r,ct(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ct(r,s),Yo(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ct(r,s),hu(e,t,r,s,n);case 3:e:{if(Wd(t),e===null)throw Error(D(387));r=t.pendingProps,o=t.memoizedState,s=o.element,gd(e,t),sl(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ir(Error(D(423)),t),t=pu(e,t,r,n,s);break e}else if(r!==s){s=ir(Error(D(424)),t),t=pu(e,t,r,n,s);break e}else for(Qe=rn(t.stateNode.containerInfo.firstChild),Ye=t,ae=!0,mt=null,n=hd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lr(),r===s){t=Ut(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return xd(t),e===null&&Wo(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Fo(r,s)?a=null:o!==null&&Fo(r,o)&&(t.flags|=32),Bd(e,t),ze(e,t,a,n),t.child;case 6:return e===null&&Wo(t),null;case 13:return Vd(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=or(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ct(r,s),fu(e,t,r,s,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ne(nl,r._currentValue),r._currentValue=a,o!==null)if(wt(o.value,a)){if(o.children===s.children&&!We.current){t=Ut(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=zt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Vo(o.return,n,t),i.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(D(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Vo(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ze(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,er(t,n),s=ot(s),r=r(s),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,s=ct(r,t.pendingProps),s=ct(r.type,s),mu(e,t,r,s,n);case 15:return Ud(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ct(r,s),Os(e,t),t.tag=1,Ve(r)?(e=!0,qs(t)):e=!1,er(t,n),Ad(t,r,s),Go(t,r,s,n),Ko(null,t,r,!0,e,n);case 19:return Hd(e,t,n);case 22:return $d(e,t,n)}throw Error(D(156,t.tag))};function af(e,t){return Tc(e,t)}function dp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,n,r){return new dp(e,t,n,r)}function oi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fp(e){if(typeof e=="function")return oi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ca)return 11;if(e===ba)return 14}return 2}function an(e,t){var n=e.alternate;return n===null?(n=st(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bs(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")oi(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case On:return kn(n.children,s,o,t);case ka:a=8,s|=8;break;case go:return e=st(12,n,t,s|2),e.elementType=go,e.lanes=o,e;case xo:return e=st(13,n,t,s),e.elementType=xo,e.lanes=o,e;case vo:return e=st(19,n,t,s),e.elementType=vo,e.lanes=o,e;case xc:return kl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pc:a=10;break e;case gc:a=9;break e;case Ca:a=11;break e;case ba:a=14;break e;case Qt:a=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=st(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function kn(e,t,n,r){return e=st(7,e,r,t),e.lanes=n,e}function kl(e,t,n,r){return e=st(22,e,r,t),e.elementType=xc,e.lanes=n,e.stateNode={isHidden:!1},e}function so(e,t,n){return e=st(6,e,null,t),e.lanes=n,e}function lo(e,t,n){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ai(e,t,n,r,s,o,a,i,u){return e=new mp(e,t,n,i,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=st(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Va(o),e}function hp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uf(e){if(!e)return cn;e=e._reactInternals;e:{if(In(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Ve(n))return id(e,n,t)}return t}function cf(e,t,n,r,s,o,a,i,u){return e=ai(n,r,!0,e,s,o,a,i,u),e.context=uf(null),n=e.current,r=Ae(),s=on(n),o=zt(r,s),o.callback=t??null,sn(n,o,s),e.current.lanes=s,as(e,s,r),He(e,r),e}function Cl(e,t,n,r){var s=t.current,o=Ae(),a=on(s);return n=uf(n),t.context===null?t.context=n:t.pendingContext=n,t=zt(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sn(s,t,a),e!==null&&(vt(e,s,a,o),zs(e,s,a)),a}function fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ii(e,t){Cu(e,t),(e=e.alternate)&&Cu(e,t)}function pp(){return null}var df=typeof reportError=="function"?reportError:function(e){console.error(e)};function ui(e){this._internalRoot=e}bl.prototype.render=ui.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Cl(e,t,null,null)};bl.prototype.unmount=ui.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dn(function(){Cl(null,e,null,null)}),t[Ft]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=$c();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kt.length&&t!==0&&t<Kt[n].priority;n++);Kt.splice(n,0,e),n===0&&Wc(e)}};function ci(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function El(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bu(){}function gp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=fl(a);o.call(c)}}var a=cf(t,r,e,0,null,!1,!1,"",bu);return e._reactRootContainer=a,e[Ft]=a.current,Yr(e.nodeType===8?e.parentNode:e),Dn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var c=fl(u);i.call(c)}}var u=ai(e,0,!1,null,null,!1,!1,"",bu);return e._reactRootContainer=u,e[Ft]=u.current,Yr(e.nodeType===8?e.parentNode:e),Dn(function(){Cl(t,u,n,r)}),u}function _l(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var u=fl(a);i.call(u)}}Cl(t,a,e,s)}else a=gp(n,t,e,s,r);return fl(a)}Oc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pr(t.pendingLanes);n!==0&&(Pa(t,n|1),He(t,xe()),!(X&6)&&(ur=xe()+500,mn()))}break;case 13:Dn(function(){var r=Ot(e,1);if(r!==null){var s=Ae();vt(r,e,1,s)}}),ii(e,1)}};La=function(e){if(e.tag===13){var t=Ot(e,134217728);if(t!==null){var n=Ae();vt(t,e,134217728,n)}ii(e,134217728)}};Uc=function(e){if(e.tag===13){var t=on(e),n=Ot(e,t);if(n!==null){var r=Ae();vt(n,e,t,r)}ii(e,t)}};$c=function(){return q};Bc=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};_o=function(e,t,n){switch(t){case"input":if(jo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vl(r);if(!s)throw Error(D(90));yc(r),jo(r,s)}}}break;case"textarea":jc(e,n);break;case"select":t=n.value,t!=null&&Xn(e,!!n.multiple,t,!1)}};_c=ri;Pc=Dn;var xp={usingClientEntryPoint:!1,Events:[us,Wn,vl,bc,Ec,ri]},kr={findFiberByHostInstance:wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vp={bundleType:kr.bundleType,version:kr.version,rendererPackageName:kr.rendererPackageName,rendererConfig:kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rc(e),e===null?null:e.stateNode},findFiberByHostInstance:kr.findFiberByHostInstance||pp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ls=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ls.isDisabled&&Ls.supportsFiber)try{hl=Ls.inject(vp),Et=Ls}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xp;Je.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ci(t))throw Error(D(200));return hp(e,t,null,n)};Je.createRoot=function(e,t){if(!ci(e))throw Error(D(299));var n=!1,r="",s=df;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ai(e,1,!1,null,null,n,!1,r,s),e[Ft]=t.current,Yr(e.nodeType===8?e.parentNode:e),new ui(t)};Je.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Rc(t),e=e===null?null:e.stateNode,e};Je.flushSync=function(e){return Dn(e)};Je.hydrate=function(e,t,n){if(!El(t))throw Error(D(200));return _l(null,e,t,!0,n)};Je.hydrateRoot=function(e,t,n){if(!ci(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=df;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=cf(t,null,e,1,n??null,s,!1,o,a),e[Ft]=t.current,Yr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new bl(t)};Je.render=function(e,t,n){if(!El(t))throw Error(D(200));return _l(null,e,t,!1,n)};Je.unmountComponentAtNode=function(e){if(!El(e))throw Error(D(40));return e._reactRootContainer?(Dn(function(){_l(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1};Je.unstable_batchedUpdates=ri;Je.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!El(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return _l(e,t,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function ff(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ff)}catch(e){console.error(e)}}ff(),dc.exports=Je;var mf=dc.exports,Eu=mf;ho.createRoot=Eu.createRoot,ho.hydrateRoot=Eu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rs.apply(this,arguments)}var qt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qt||(qt={}));const _u="popstate";function yp(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:i}=r.location;return aa("",{pathname:o,search:a,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hf(s)}return jp(t,n,null,e)}function Se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function di(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wp(){return Math.random().toString(36).substr(2,8)}function Pu(e,t){return{usr:e.state,key:e.key,idx:t}}function aa(e,t,n,r){return n===void 0&&(n=null),rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hr(t):t,{state:n,key:t&&t.key||r||wp()})}function hf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function jp(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=qt.Pop,u=null,c=m();c==null&&(c=0,a.replaceState(rs({},a.state,{idx:c}),""));function m(){return(a.state||{idx:null}).idx}function f(){i=qt.Pop;let k=m(),g=k==null?null:k-c;c=k,u&&u({action:i,location:S.location,delta:g})}function h(k,g){i=qt.Push;let d=aa(S.location,k,g);c=m()+1;let x=Pu(d,c),w=S.createHref(d);try{a.pushState(x,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(w)}o&&u&&u({action:i,location:S.location,delta:1})}function v(k,g){i=qt.Replace;let d=aa(S.location,k,g);c=m();let x=Pu(d,c),w=S.createHref(d);a.replaceState(x,"",w),o&&u&&u({action:i,location:S.location,delta:0})}function y(k){let g=s.location.origin!=="null"?s.location.origin:s.location.href,d=typeof k=="string"?k:hf(k);return d=d.replace(/ $/,"%20"),Se(g,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,g)}let S={get action(){return i},get location(){return e(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(_u,f),u=k,()=>{s.removeEventListener(_u,f),u=null}},createHref(k){return t(s,k)},createURL:y,encodeLocation(k){let g=y(k);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:v,go(k){return a.go(k)}};return S}var Lu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lu||(Lu={}));function Sp(e,t,n){return n===void 0&&(n="/"),Np(e,t,n)}function Np(e,t,n,r){let s=typeof t=="string"?hr(t):t,o=xf(s.pathname||"/",n);if(o==null)return null;let a=pf(e);kp(a);let i=null;for(let u=0;i==null&&u<a.length;++u){let c=zp(o);i=Ip(a[u],c)}return i}function pf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let u={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Se(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Cn([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Se(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pf(o.children,t,m,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:Dp(c,o.index),routesMeta:m})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let u of gf(o.path))s(o,a,u)}),t}function gf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=gf(r.join("/")),i=[];return i.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&i.push(...a),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function kp(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Rp(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Cp=/^:[\w-]+$/,bp=3,Ep=2,_p=1,Pp=10,Lp=-2,Du=e=>e==="*";function Dp(e,t){let n=e.split("/"),r=n.length;return n.some(Du)&&(r+=Lp),t&&(r+=Ep),n.filter(s=>!Du(s)).reduce((s,o)=>s+(Cp.test(o)?bp:o===""?_p:Pp),r)}function Rp(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Ip(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let u=r[i],c=i===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",f=Tp({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},m),h=u.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Cn([o,f.pathname]),pathnameBase:$p(Cn([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Cn([o,f.pathnameBase]))}return a}function Tp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Mp(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((c,m,f)=>{let{paramName:h,isOptional:v}=m;if(h==="*"){let S=i[f]||"";a=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const y=i[f];return v&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function Mp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),di(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,u)=>(r.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function zp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return di(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Ap=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fp=e=>Ap.test(e);function Op(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?hr(e):e,o;if(n)if(Fp(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),di(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Ru(n.substring(1),"/"):o=Ru(n,t)}else o=t;return{pathname:o,search:Bp(r),hash:Wp(s)}}function Ru(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Up(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function vf(e,t){let n=Up(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yf(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=hr(e):(s=rs({},e),Se(!s.pathname||!s.pathname.includes("?"),oo("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),oo("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),oo("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let u=Op(s,i),c=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||m)&&(u.pathname+="/"),u}const Cn=e=>e.join("/").replace(/\/\/+/g,"/"),$p=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bp=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Wp=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wf=["post","put","patch","delete"];new Set(wf);const Hp=["get",...wf];new Set(Hp);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ss.apply(this,arguments)}const fi=p.createContext(null),Gp=p.createContext(null),ds=p.createContext(null),Pl=p.createContext(null),hn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),jf=p.createContext(null);function fs(){return p.useContext(Pl)!=null}function pr(){return fs()||Se(!1),p.useContext(Pl).location}function Sf(e){p.useContext(ds).static||p.useLayoutEffect(e)}function qe(){let{isDataRoute:e}=p.useContext(hn);return e?o0():Qp()}function Qp(){fs()||Se(!1);let e=p.useContext(fi),{basename:t,future:n,navigator:r}=p.useContext(ds),{matches:s}=p.useContext(hn),{pathname:o}=pr(),a=JSON.stringify(vf(s,n.v7_relativeSplatPath)),i=p.useRef(!1);return Sf(()=>{i.current=!0}),p.useCallback(function(c,m){if(m===void 0&&(m={}),!i.current)return;if(typeof c=="number"){r.go(c);return}let f=yf(c,JSON.parse(a),o,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Cn([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,o,e])}function Yp(){let{matches:e}=p.useContext(hn),t=e[e.length-1];return t?t.params:{}}function Kp(e,t){return Xp(e,t)}function Xp(e,t,n,r){fs()||Se(!1);let{navigator:s}=p.useContext(ds),{matches:o}=p.useContext(hn),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=pr(),m;if(t){var f;let k=typeof t=="string"?hr(t):t;u==="/"||(f=k.pathname)!=null&&f.startsWith(u)||Se(!1),m=k}else m=c;let h=m.pathname||"/",v=h;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(k.length).join("/")}let y=Sp(e,{pathname:v}),S=t0(y&&y.map(k=>Object.assign({},k,{params:Object.assign({},i,k.params),pathname:Cn([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Cn([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return t&&S?p.createElement(Pl.Provider,{value:{location:ss({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:qt.Pop}},S):S}function Jp(){let e=l0(),t=Vp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:s},n):null,null)}const Zp=p.createElement(Jp,null);class qp extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(hn.Provider,{value:this.props.routeContext},p.createElement(jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e0(e){let{routeContext:t,match:n,children:r}=e,s=p.useContext(fi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(hn.Provider,{value:t},r)}function t0(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let m=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);m>=0||Se(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=m),f.route.id){let{loaderData:h,errors:v}=n,y=f.route.loader&&h[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((m,f,h)=>{let v,y=!1,S=null,k=null;n&&(v=i&&f.route.id?i[f.route.id]:void 0,S=f.route.errorElement||Zp,u&&(c<0&&h===0?(a0("route-fallback"),y=!0,k=null):c===h&&(y=!0,k=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),d=()=>{let x;return v?x=S:y?x=k:f.route.Component?x=p.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=m,p.createElement(e0,{match:f,routeContext:{outlet:m,matches:g,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(qp,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:d(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):d()},null)}var Nf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Nf||{}),kf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kf||{});function n0(e){let t=p.useContext(fi);return t||Se(!1),t}function r0(e){let t=p.useContext(Gp);return t||Se(!1),t}function s0(e){let t=p.useContext(hn);return t||Se(!1),t}function Cf(e){let t=s0(),n=t.matches[t.matches.length-1];return n.route.id||Se(!1),n.route.id}function l0(){var e;let t=p.useContext(jf),n=r0(),r=Cf();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function o0(){let{router:e}=n0(Nf.UseNavigateStable),t=Cf(kf.UseNavigateStable),n=p.useRef(!1);return Sf(()=>{n.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ss({fromRouteId:t},o)))},[e,t])}const Iu={};function a0(e,t,n){Iu[e]||(Iu[e]=!0)}function i0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function bf(e){let{to:t,replace:n,state:r,relative:s}=e;fs()||Se(!1);let{future:o,static:a}=p.useContext(ds),{matches:i}=p.useContext(hn),{pathname:u}=pr(),c=qe(),m=yf(t,vf(i,o.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(m);return p.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function tt(e){Se(!1)}function u0(e){let{basename:t="/",children:n=null,location:r,navigationType:s=qt.Pop,navigator:o,static:a=!1,future:i}=e;fs()&&Se(!1);let u=t.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:u,navigator:o,static:a,future:ss({v7_relativeSplatPath:!1},i)}),[u,i,o,a]);typeof r=="string"&&(r=hr(r));let{pathname:m="/",search:f="",hash:h="",state:v=null,key:y="default"}=r,S=p.useMemo(()=>{let k=xf(m,u);return k==null?null:{location:{pathname:k,search:f,hash:h,state:v,key:y},navigationType:s}},[u,m,f,h,v,y,s]);return S==null?null:p.createElement(ds.Provider,{value:c},p.createElement(Pl.Provider,{children:n,value:S}))}function c0(e){let{children:t,location:n}=e;return Kp(ia(t),n)}new Promise(()=>{});function ia(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,s)=>{if(!p.isValidElement(r))return;let o=[...t,s];if(r.type===p.Fragment){n.push.apply(n,ia(r.props.children,o));return}r.type!==tt&&Se(!1),!r.props.index||!r.props.children||Se(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=ia(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const d0="6";try{window.__reactRouterVersion=d0}catch{}const f0="startTransition",Tu=im[f0];function m0(e){let{basename:t,children:n,future:r,window:s}=e,o=p.useRef();o.current==null&&(o.current=yp({window:s,v5Compat:!0}));let a=o.current,[i,u]=p.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},m=p.useCallback(f=>{c&&Tu?Tu(()=>u(f)):u(f)},[u,c]);return p.useLayoutEffect(()=>a.listen(m),[a,m]),p.useEffect(()=>i0(r),[r]),p.createElement(u0,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Mu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mu||(Mu={}));var zu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zu||(zu={}));const h0="modulepreload",p0=function(e){return"/"+e},Au={},Ef=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=p0(u),u in Au)return;Au[u]=!0;const c=u.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":h0,c||(f.as="script"),f.crossOrigin="",f.href=u,i&&f.setAttribute("nonce",i),document.head.appendChild(f),c)return new Promise((h,v)=>{f.addEventListener("load",h),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},_f=p.createContext(void 0);function g0({children:e}){const[t,n]=p.useState(null),[r,s]=p.useState(!0),o=qe();p.useEffect(()=>{const u=localStorage.getItem("user");if(u)try{n(JSON.parse(u))}catch{localStorage.removeItem("user")}s(!1)},[]);const a=(u,c)=>{localStorage.setItem("user",JSON.stringify(c)),n(c),o("/")},i=()=>{localStorage.removeItem("user"),n(null),o("/auth")};return l.jsx(_f.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:r,login:a,logout:i},children:e})}function Bt(){const e=p.useContext(_f);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const x0="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec";class v0{getUserEmail(){const t=localStorage.getItem("user");if(!t)return null;try{return JSON.parse(t).email||null}catch{return null}}async request(t,n={}){var a,i,u,c,m;const r=this.getUserEmail(),s={...n.headers||{}},o=r?`&auth=${encodeURIComponent("Email "+r)}`:"";try{const h=await(await fetch(`${x0}?path=${t}${o}`,{...n,headers:s})).json();if(!h.ok){if(((a=h.error)==null?void 0:a.code)==="INVALID_TOKEN"||((i=h.error)==null?void 0:i.code)==="AUTH_REQUIRED"||((u=h.error)==null?void 0:u.code)==="FORBIDDEN"){localStorage.removeItem("user");const v=((c=h.error)==null?void 0:c.message)||"Your account is not authorized to access this application.";throw localStorage.setItem("auth_error",v),window.location.href="/auth",new Error(v)}throw new Error(((m=h.error)==null?void 0:m.message)||"An error occurred")}return h.data}catch(f){throw f instanceof Error?f:new Error("Network error")}}async get(t,n,r={}){const s=n?Object.fromEntries(Object.entries(n).filter(([a,i])=>i!==void 0)):void 0,o=s?"&"+new URLSearchParams(s).toString():"";return this.request(`${t}${o}`,{method:"POST",...r})}async post(t,n,r={}){return this.request(t,{method:"POST",body:JSON.stringify(n),...r})}async put(t,n){return this.request(t,{method:"PUT",body:JSON.stringify(n)})}}const Z=new v0,Fu={async get(){return Z.get("profile/get")},async save(e){return Z.post("profile/save",e)}};function y0(e){return new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const o=r.result.split(",")[1];t(o)},r.onerror=n})}const Pf=p.createContext(void 0);let Cr=null,ao=null;function w0({children:e}){const{isAuthenticated:t,isLoading:n}=Bt(),[r,s]=p.useState(null),[o,a]=p.useState(!1),[i,u]=p.useState(null),c=async()=>{if(t){a(!0);try{const f=await Fu.get();if(s({pseudo:f.pseudo,avatar_url:f.avatar_url}),f.avatar_base64&&f.avatar_url!==ao)try{const h=`data:image/jpeg;base64,${f.avatar_base64}`;Cr&&URL.revokeObjectURL(Cr),Cr=h,ao=f.avatar_url,u(h)}catch(h){console.error("Failed to convert avatar to data URL:",h),u(null)}else f.avatar_url===ao&&Cr?u(Cr):f.avatar_base64||u(null)}catch(f){console.error("Failed to load profile:",f)}finally{a(!1)}}};p.useEffect(()=>{!n&&t&&c()},[t,n]);const m=async(f,h)=>{try{const v={pseudo:f};if(h){const S=await y0(h);v.avatar=S}const y=await Fu.save(v);s({pseudo:y.pseudo,avatar_url:y.avatar_url}),await c()}catch(v){throw console.error("Failed to save profile:",v),v}};return l.jsx(Pf.Provider,{value:{profile:r,isLoading:o,saveProfile:m,reloadProfile:c,avatarBlobUrl:i},children:e})}function mi(){const e=p.useContext(Pf);if(!e)throw new Error("useProfile must be used within ProfileProvider");return e}function ht({size:e="md",className:t=""}){const r={sm:{width:16,height:16,border:2},md:{width:32,height:32,border:3},lg:{width:48,height:48,border:4}}[e];return l.jsx("div",{className:`rounded-full animate-spin ${t}`,style:{width:r.width,height:r.height,borderWidth:r.border,borderStyle:"solid",borderColor:"#2563eb",borderTopColor:"transparent"}})}function ms({message:e="Loading..."}){return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[l.jsx(ht,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:e})]})}function Dt({children:e}){const{isAuthenticated:t,isLoading:n}=Bt();return n?l.jsx(ms,{message:"Checking authentication..."}):t?l.jsx(l.Fragment,{children:e}):l.jsx(bf,{to:"/auth",replace:!0})}function te({variant:e="primary",fullWidth:t=!1,className:n="",children:r,...s}){const o="px-6 py-3 rounded-lg font-medium transition-colors touch-manipulation flex items-center justify-center",a={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 disabled:bg-gray-300",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400 disabled:bg-gray-100",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800 disabled:bg-gray-300"},i=t?"w-full":"";return l.jsx("button",{className:`${o} ${a[e]} ${i} ${n}`,...s,children:r})}const ls={MAX_TEXT_LENGTH:300,MAX_PHOTOS_IN_ASSEMBLY:10,IMAGE_MAX_SIZE_MB:2,TIMEZONE:"Europe/Paris",PDF_POLL_INTERVAL_MS:3e3,INFINITE_SCROLL_THRESHOLD:.8,TARGET_IMAGE_WIDTH_PX:2480,ARTICLES_PER_PAGE:10},Lf=["January","February","March","April","May","June","July","August","September","October","November","December"];function Df(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function j0(){const{login:e}=Bt(),t=qe(),[n,r]=p.useState(!1),[s,o]=p.useState(null),[a]=p.useState(Df()),[i,u]=p.useState(!1);p.useEffect(()=>{var y;const m=localStorage.getItem("user");if(!m)return;let f="";try{f=((y=JSON.parse(m))==null?void 0:y.email)||""}catch{localStorage.removeItem("user");return}if(!f)return;r(!0);const h="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",v=`&auth=${encodeURIComponent("Email "+f)}`;fetch(`${h}?path=auth/check${v}`,{method:"POST"}).then(S=>S.json()).then(S=>{if(S!=null&&S.ok){t("/");return}localStorage.removeItem("user")}).catch(()=>{localStorage.removeItem("user")}).finally(()=>{r(!1)})},[t]),p.useEffect(()=>{const m=localStorage.getItem("auth_error");m&&(o(m),localStorage.removeItem("auth_error"))},[]),p.useEffect(()=>{const m=document.createElement("script");return m.src="https://accounts.google.com/gsi/client",m.async=!0,m.defer=!0,document.body.appendChild(m),()=>{document.body.removeChild(m)}},[]);const c=()=>{var f,h,v;r(!0),o(null);const m=(v=(h=(f=window.google)==null?void 0:f.accounts)==null?void 0:h.oauth2)==null?void 0:v.initTokenClient({client_id:"175845978100-rqclosiat622f3b7ijpg17t2fnrnb522.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",callback:y=>{y.access_token?fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${y.access_token}`}}).then(S=>S.json()).then(S=>{const k=S.email,g=S.name,d="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",x=`&auth=${encodeURIComponent("Email "+k)}`;fetch(`${d}?path=auth/check${x}`,{method:"POST"}).then(w=>w.json()).then(w=>{var C;if(!(w!=null&&w.ok)){o(((C=w==null?void 0:w.error)==null?void 0:C.message)||"Your account is not authorized to access this application.");return}e(y.access_token,{email:k,name:g})}).catch(()=>{o("Failed to verify authorization")}).finally(()=>{r(!1)})}).catch(()=>{o("Failed to get user information"),r(!1),a&&u(!0)}):(o("Failed to authenticate with Google"),r(!1),a&&u(!0))},error_callback:()=>{o("Google Sign-In failed"),r(!1),a&&u(!0)}});m==null||m.requestAccessToken()};return n?l.jsx(ms,{message:"Signing in..."}):a&&i?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),l.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),l.jsx("div",{className:"mb-6 w-full max-w-md",children:l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Safari login required"}),l.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"Google sign-in doesn't work in app mode. Please login from Safari:"}),l.jsxs("ol",{className:"text-blue-800 text-sm space-y-2 mb-4 list-decimal list-inside",children:[l.jsx("li",{children:"Open Safari on your iPhone"}),l.jsxs("li",{children:["Go to ",l.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:"grut505.github.io"})]}),l.jsx("li",{children:"Sign in with your Google account"}),l.jsx("li",{children:"Add the app to your home screen again"})]}),l.jsx("p",{className:"text-blue-700 text-xs italic",children:"Important: you must re-add the app to your home screen after signing in from Safari."})]})}),l.jsx(te,{onClick:()=>{window.location.href="https://grut505.github.io/auth"},className:"w-full max-w-sm",children:"Open in Safari"}),l.jsx("button",{onClick:()=>u(!1),className:"mt-4 text-sm text-gray-600 underline",children:"Try sign-in again"})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rememly"}),l.jsx("p",{className:"text-gray-600",children:"Family photo journal"})]}),s&&l.jsx("div",{className:"mb-6 w-full max-w-sm",children:l.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("div",{className:"text-red-600 text-center text-sm",children:s})})}),l.jsx(te,{onClick:c,className:"w-full max-w-sm",children:s?"Try another account":"Sign in with Google"})]})}const S0={},Ou=e=>{let t;const n=new Set,r=(m,f)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const v=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,v))}},s=()=>t,u={setState:r,getState:s,getInitialState:()=>c,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(S0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,u);return u},N0=e=>e?Ou(e):Ou;var Rf={exports:{}},If={},Tf={exports:{}},Mf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr=p;function k0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var C0=typeof Object.is=="function"?Object.is:k0,b0=cr.useState,E0=cr.useEffect,_0=cr.useLayoutEffect,P0=cr.useDebugValue;function L0(e,t){var n=t(),r=b0({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return _0(function(){s.value=n,s.getSnapshot=t,io(s)&&o({inst:s})},[e,n,t]),E0(function(){return io(s)&&o({inst:s}),e(function(){io(s)&&o({inst:s})})},[e]),P0(n),n}function io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!C0(e,n)}catch{return!0}}function D0(e,t){return t()}var R0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D0:L0;Mf.useSyncExternalStore=cr.useSyncExternalStore!==void 0?cr.useSyncExternalStore:R0;Tf.exports=Mf;var I0=Tf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=p,T0=I0;function M0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z0=typeof Object.is=="function"?Object.is:M0,A0=T0.useSyncExternalStore,F0=Ll.useRef,O0=Ll.useEffect,U0=Ll.useMemo,$0=Ll.useDebugValue;If.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=F0(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=U0(function(){function u(v){if(!c){if(c=!0,m=v,v=r(v),s!==void 0&&a.hasValue){var y=a.value;if(s(y,v))return f=y}return f=v}if(y=f,z0(m,v))return y;var S=r(v);return s!==void 0&&s(y,S)?(m=v,y):(m=v,f=S)}var c=!1,m,f,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,r,s]);var i=A0(e,o[0],o[1]);return O0(function(){a.hasValue=!0,a.value=i},[i]),$0(i),i};Rf.exports=If;var B0=Rf.exports;const W0=qu(B0),zf={},{useDebugValue:V0}=wa,{useSyncExternalStoreWithSelector:H0}=W0;let Uu=!1;const G0=e=>e;function Q0(e,t=G0,n){(zf?"production":void 0)!=="production"&&n&&!Uu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Uu=!0);const r=H0(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return V0(r),r}const $u=e=>{(zf?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?N0(e):e,n=(r,s)=>Q0(t,r,s);return Object.assign(n,t),n},hi=e=>e?$u(e):$u,Bu={year:"",month:"",from:"",to:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"},Ct=hi(e=>({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:Bu,setArticles:(t,n=null)=>{const r=new Set,s=t.filter(o=>r.has(o.id)?!1:(r.add(o.id),!0));return e({articles:s,cursor:n,hasMore:n!==null})},addArticles:(t,n)=>e(r=>{const s=new Set(r.articles.map(a=>a.id)),o=t.filter(a=>!s.has(a.id));return{articles:[...r.articles,...o],cursor:n,hasMore:n!==null}}),updateArticle:t=>e(n=>({articles:n.articles.map(r=>r.id===t.id?t:r)})),deleteArticle:t=>e(n=>({articles:n.articles.filter(r=>r.id!==t)})),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setFilters:t=>e({filters:t}),reset:()=>e({articles:[],isLoading:!1,error:null,cursor:null,hasMore:!0,filters:Bu})})),pt={list:e=>Z.get("articles/list",e),authors:e=>Z.get("articles/authors",e),get:e=>Z.get("articles/get",{id:e}),create:e=>Z.post("articles/create",e),update:e=>Z.post("articles/update",e),delete:e=>Z.get("articles/delete",{id:e}),permanentDelete:e=>Z.get("articles/permanent-delete",{id:e})};function Af({onClick:e,icon:t,className:n="",pwaOffsetClassName:r=""}){var o;const s=typeof window<"u"&&((o=window.matchMedia)==null?void 0:o.call(window,"(display-mode: standalone)").matches)||typeof window<"u"&&window.navigator.standalone===!0;return l.jsx("button",{onClick:e,className:`w-16 h-16 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 active:bg-blue-800 flex items-center justify-center text-3xl touch-manipulation ${n} ${s?r:""}`,"aria-label":"Create new article",children:t||"+"})}function Ff({message:e,onRetry:t,retryLabel:n="Retry"}){return l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-red-50 border border-red-200 rounded-lg",children:[l.jsx("div",{className:"text-red-600 text-center mb-4",children:e}),t&&l.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:n})]})}function Dl(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function ua(){return new Date().getFullYear()}function ca(e){return new Date(e).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function br(e){const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}const Wu=new Map;function Y0(e){if(!e)return null;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/thumbnail\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const n of t){const r=e.match(n);if(r&&r[1])return r[1]}return null}function Rl(e,t){const[n,r]=p.useState(""),[s,o]=p.useState(!0),[a,i]=p.useState(!1);return p.useEffect(()=>{if(!e){r(""),o(!1),i(!1);return}if(e.startsWith("data:")||e.startsWith("blob:")){r(e),o(!1),i(!1);return}const u=t||Y0(e);if(!u){i(!0),o(!1);return}const c=Wu.get(u);if(c){r(c),o(!1),i(!1);return}o(!0),i(!1),(async()=>{try{const f=await Z.get("image/fetch",{fileId:u});if(!f.base64){i(!0),o(!1);return}const h=`data:image/jpeg;base64,${f.base64}`;Wu.set(u,h),r(h),o(!1)}catch{i(!0),o(!1)}})()},[e,t]),{src:n,isLoading:s,error:a}}function Ke({isOpen:e,title:t,message:n,confirmLabel:r="Confirm",cancelLabel:s="Cancel",onConfirm:o,onCancel:a,variant:i="primary",isLoading:u=!1,progress:c=null}){return e?mf.createPortal(l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:m=>m.stopPropagation(),children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:m=>{m.stopPropagation(),a()}}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",onClick:m=>m.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:t}),l.jsx("p",{className:"text-gray-600 mb-4",children:n}),c&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[l.jsx("span",{children:"Deleting..."}),l.jsxs("span",{children:[c.current," / ",c.total]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-red-600 h-2.5 rounded-full transition-all duration-200",style:{width:`${c.current/c.total*100}%`}})})]}),!c&&l.jsx("div",{className:"mb-2"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(te,{variant:"secondary",fullWidth:!0,onClick:m=>{m.stopPropagation(),a()},disabled:u,children:s}),l.jsx(te,{variant:i,fullWidth:!0,onClick:m=>{m.stopPropagation(),o()},disabled:u,children:u?"Deleting...":r})]})]})]}),document.body):null}async function K0(e,t=ls.TARGET_IMAGE_WIDTH_PX){return new Promise((n,r)=>{const s=new FileReader;s.onload=o=>{var i;const a=new Image;a.onload=()=>{const u=document.createElement("canvas");let c=a.width,m=a.height;c>t&&(m=m*t/c,c=t),u.width=c,u.height=m,u.getContext("2d").drawImage(a,0,0,c,m);const h=u.toDataURL("image/jpeg",.85);n(h.split(",")[1])},a.onerror=r,a.src=(i=o.target)==null?void 0:i.result},s.onerror=r,s.readAsDataURL(e)})}function X0(e){return new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{const s=r.result.split(",")[1];t(s)},r.onerror=n,r.readAsDataURL(e)})}async function rx(e,t=.9){return new Promise(n=>{e.toBlob(async r=>{if(r){const s=await X0(r);n(s)}},"image/jpeg",t)})}class J0{async processImage(t){const n=await K0(t);return{fileName:t.name,mimeType:"image/jpeg",base64:n}}async processMultipleImages(t){return Promise.all(t.map(n=>this.processImage(n)))}}const Vu=new J0;class Z0{async createArticle(t,n,r,s,o,a,i){const u=await Vu.processImage(r),c={auteur:t,texte:n,image:u,date:s,famileo_post_id:o,assembly_state:a||null,full_page:i||!1};return pt.create(c)}async updateArticle(t,n,r,s,o,a,i){const u={id:t,texte:n,date:s,assembly_state:o,full_page:a,status:i};return r&&(u.image=await Vu.processImage(r)),pt.update(u)}async deleteArticle(t){await pt.delete(t)}async restoreArticle(t){return pt.update({id:t,status:"ACTIVE"})}}const yt=new Z0;function q0(e){if(!e)return"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const n of t){const r=e.match(n);if(r&&r[1])return`https://drive.google.com/thumbnail?id=${r[1]}&sz=w200`}return e}function eg(e,t){if(t){const r=t.startsWith("blob:")||t.startsWith("data:")?t:q0(t);return l.jsx("img",{src:r,alt:e,className:"w-10 h-10 rounded-full object-cover border-2 border-primary-200 flex-shrink-0"})}const n=e.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2);return l.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-sm font-semibold text-primary-700",children:n})})}function tg({article:e,isDuplicate:t,onDeleted:n,onRestored:r,selectionMode:s,selected:o,onSelectionChange:a}){const i=qe(),{user:u}=Bt(),{profile:c,avatarBlobUrl:m}=mi(),{src:f,isLoading:h,error:v}=Rl(e.image_url,e.image_file_id),[y,S]=p.useState(!1),[k,g]=p.useState(!1),[d,x]=p.useState(!1),[w,C]=p.useState(!1),b=e.status==="DELETED",_=I=>{I.stopPropagation(),i(`/editor/${e.id}`)},N=()=>{s&&(a==null||a(e.id,!o))},O=I=>{I.stopPropagation(),S(!0)},A=async()=>{g(!0);try{await yt.deleteArticle(e.id),S(!1),n==null||n(e.id)}catch(I){console.error("Failed to delete article:",I)}finally{g(!1)}},B=I=>{I.stopPropagation(),x(!0)},P=async()=>{C(!0);try{await yt.restoreArticle(e.id),x(!1),r==null||r(e.id)}catch(I){console.error("Failed to restore article:",I)}finally{C(!1)}},W=e.author_pseudo||"Unknown",me=(u==null?void 0:u.email)===e.auteur&&m||void 0,re=I=>{I.stopPropagation(),a==null||a(e.id,I.target.checked)};return l.jsxs("div",{className:"px-4 mb-4",children:[l.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden border hover:shadow-lg transition-shadow max-w-2xl mx-auto relative z-0 ${b?"border-red-300":o?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:N,children:[l.jsxs("div",{className:"flex min-h-[24px]",children:[!e.famileo_post_id&&l.jsx("div",{className:"flex-1 bg-green-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Local"}),e.famileo_post_id&&l.jsx("div",{className:"flex-1 bg-purple-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Famileo"}),t&&l.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Duplicate"}),b&&l.jsx("div",{className:"flex-1 bg-red-500 text-white text-xs font-semibold px-2 py-1 text-center",children:"Deleted"})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s&&l.jsx("input",{type:"checkbox",checked:o,onChange:re,onClick:I=>I.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),eg(W,me),l.jsxs("div",{className:"flex flex-col min-w-0",children:[l.jsx("span",{className:"font-semibold text-gray-900",children:W}),l.jsx("span",{className:"text-sm text-gray-500",children:Dl(e.date)})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:_,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),b?l.jsx("button",{onClick:B,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):l.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),l.jsxs("div",{onClick:N,className:"w-full cursor-pointer bg-gray-50 relative min-h-[160px] sm:min-h-[200px]",children:[h&&!v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),v?l.jsxs("div",{className:"p-8 text-center text-gray-500",children:[l.jsx("p",{className:"text-sm",children:"Failed to load image"}),l.jsxs("p",{className:"text-xs mt-1",children:["FileId: ",e.image_file_id]})]}):f&&l.jsx("img",{src:f,alt:"",className:"w-full h-auto object-contain",loading:"lazy"})]}),e.texte&&l.jsx("div",{className:"p-4 transition-colors",children:l.jsx("p",{className:"whitespace-pre-wrap text-gray-900",children:e.texte})})]}),l.jsx(Ke,{isOpen:y,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:A,onCancel:()=>S(!1),variant:"danger",isLoading:k}),l.jsx(Ke,{isOpen:d,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:P,onCancel:()=>x(!1),isLoading:w})]})}function ng({article:e,isDuplicate:t,onDeleted:n,onRestored:r,selectionMode:s,selected:o,onSelectionChange:a}){const i=qe(),{src:u,isLoading:c,error:m}=Rl(e.image_url,e.image_file_id),[f,h]=p.useState(!1),[v,y]=p.useState(!1),[S,k]=p.useState(!1),[g,d]=p.useState(!1),x=e.status==="DELETED",w=e.author_pseudo||"Unknown",C=()=>{s&&(a==null||a(e.id,!o))},b=P=>{P.stopPropagation(),a==null||a(e.id,P.target.checked)},_=P=>{P.stopPropagation(),i(`/editor/${e.id}`)},N=P=>{P.stopPropagation(),h(!0)},O=async()=>{y(!0);try{await yt.deleteArticle(e.id),h(!1),n==null||n(e.id)}catch(P){console.error("Failed to delete article:",P)}finally{y(!1)}},A=P=>{P.stopPropagation(),k(!0)},B=async()=>{d(!0);try{await yt.restoreArticle(e.id),k(!1),r==null||r(e.id)}catch(P){console.error("Failed to restore article:",P)}finally{d(!1)}};return l.jsxs("div",{className:"px-4 mb-3",children:[l.jsxs("div",{className:`bg-white rounded-lg border shadow-sm px-3 py-2 flex items-center gap-3 max-w-2xl mx-auto ${x?"border-red-300":o?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:C,children:[s&&l.jsx("input",{type:"checkbox",checked:o,onChange:b,onClick:P=>P.stopPropagation(),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),l.jsxs("div",{className:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center flex-shrink-0",children:[c&&!m&&l.jsx("div",{className:"w-5 h-5 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),m?l.jsx("span",{className:"text-xs text-gray-400",children:"No image"}):u&&l.jsx("img",{src:u,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:w}),!e.famileo_post_id&&l.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Local"}),e.famileo_post_id&&l.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:"Famileo"}),t&&l.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"Duplicate"}),x&&l.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Deleted"})]}),l.jsx("div",{className:"text-xs text-gray-500",children:Dl(e.date)}),e.texte&&l.jsx("div",{className:"text-sm text-gray-700 mt-1 truncate",children:e.texte})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:_,className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Edit article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),x?l.jsx("button",{onClick:A,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Restore article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):l.jsx("button",{onClick:N,className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0 touch-manipulation","aria-label":"Delete article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),l.jsx(Ke,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:O,onCancel:()=>h(!1),variant:"danger",isLoading:v}),l.jsx(Ke,{isOpen:S,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:B,onCancel:()=>k(!1),isLoading:g})]})}function rg({article:e,isDuplicate:t,onDeleted:n,onRestored:r,selectionMode:s,selected:o,onSelectionChange:a}){const i=qe(),{src:u,isLoading:c,error:m}=Rl(e.image_url,e.image_file_id),[f,h]=p.useState(!1),[v,y]=p.useState(!1),[S,k]=p.useState(!1),[g,d]=p.useState(!1),x=e.status==="DELETED",w=e.author_pseudo||"Unknown",C=()=>{s&&(a==null||a(e.id,!o))},b=P=>{P.stopPropagation(),a==null||a(e.id,P.target.checked)},_=P=>{P.stopPropagation(),i(`/editor/${e.id}`)},N=P=>{P.stopPropagation(),h(!0)},O=async()=>{y(!0);try{await yt.deleteArticle(e.id),h(!1),n==null||n(e.id)}catch(P){console.error("Failed to delete article:",P)}finally{y(!1)}},A=P=>{P.stopPropagation(),k(!0)},B=async()=>{d(!0);try{await yt.restoreArticle(e.id),k(!1),r==null||r(e.id)}catch(P){console.error("Failed to restore article:",P)}finally{d(!1)}};return l.jsxs("div",{className:`bg-white rounded-lg shadow-sm overflow-hidden border transition-shadow hover:shadow-md relative ${x?"border-red-300":o?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:C,children:[l.jsxs("div",{className:"flex min-h-[18px]",children:[!e.famileo_post_id&&l.jsx("div",{className:"flex-1 bg-green-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Local"}),e.famileo_post_id&&l.jsx("div",{className:"flex-1 bg-purple-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Famileo"}),t&&l.jsx("div",{className:"flex-1 bg-yellow-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Duplicate"}),x&&l.jsx("div",{className:"flex-1 bg-red-500 text-white text-[10px] font-semibold px-2 py-0.5 text-center",children:"Deleted"})]}),l.jsx("div",{className:"absolute top-8 left-2 z-10",children:s&&l.jsx("input",{type:"checkbox",checked:o,onChange:b,onClick:P=>P.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),l.jsxs("div",{className:"absolute top-8 right-2 z-10 flex items-center gap-1",children:[l.jsx("button",{onClick:_,className:"p-1.5 bg-white/90 text-gray-600 hover:text-primary-600 hover:bg-white rounded-md transition-colors","aria-label":"Edit article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),x?l.jsx("button",{onClick:A,className:"p-1.5 bg-white/90 text-gray-600 hover:text-green-600 hover:bg-white rounded-md transition-colors","aria-label":"Restore article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):l.jsx("button",{onClick:N,className:"p-1.5 bg-white/90 text-gray-600 hover:text-red-600 hover:bg-white rounded-md transition-colors","aria-label":"Delete article",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("div",{className:"w-full bg-gray-50 relative overflow-hidden",style:{aspectRatio:"4 / 3"},children:[c&&!m&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-6 h-6 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),m?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 text-xs",children:"No image"}):u&&l.jsx("img",{src:u,alt:"",className:"w-full h-full object-cover",loading:"lazy"})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:w}),l.jsx("div",{className:"text-xs text-gray-500",children:Dl(e.date)}),e.texte&&l.jsx("div",{className:"text-xs text-gray-700 mt-2 max-h-12 overflow-hidden",children:e.texte})]}),l.jsx(Ke,{isOpen:f,title:"Delete article?",message:"The article will be marked as deleted. You can find it later by enabling the 'Show deleted' filter.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:O,onCancel:()=>h(!1),variant:"danger",isLoading:v}),l.jsx(Ke,{isOpen:S,title:"Restore article?",message:"The article will be restored and visible again in your timeline.",confirmLabel:"Restore",cancelLabel:"Cancel",onConfirm:B,onCancel:()=>k(!1),isLoading:g})]})}function sg(){return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No articles yet"}),l.jsx("p",{className:"text-gray-600",children:"Tap the + button to create your first photo article"})]})}function lg({monthYear:e,count:t,showPlus:n}){return l.jsx("div",{className:"bg-gray-100 px-4 pt-3 pb-2 sticky top-[108px] z-10",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-700 uppercase",children:e}),l.jsxs("span",{className:"ml-2 text-xs font-medium text-gray-600 bg-white/80 border border-gray-200 rounded-full px-2 py-0.5",children:[t,n?"+":""]})]})})}function Of({isOpen:e,onClose:t,title:n,children:r,align:s="bottom"}){if(p.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const o=s==="center"?"items-center":"items-end sm:items-center",a=s==="center"?"rounded-2xl":"rounded-t-2xl sm:rounded-2xl";return l.jsxs("div",{className:`fixed inset-0 z-50 flex ${o} justify-center`,children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),l.jsxs("div",{className:`relative bg-white ${a} w-full sm:max-w-lg max-h-[85vh] sm:max-h-[90vh] flex flex-col shadow-xl`,children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 touch-manipulation p-2",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})]})}const uo={developerName:"Grut - & Claude & ChatGPT",lastPublished:"02/02/2026",repoUrl:"https://github.com/Grut505/Rememly"},gt=hi(e=>({toast:null,hasUnsavedChanges:!1,pendingNavigationPath:null,showToast:(t,n)=>{e({toast:{message:t,type:n}}),setTimeout(()=>e({toast:null}),3e3)},hideToast:()=>e({toast:null}),setUnsavedChanges:t=>e({hasUnsavedChanges:t}),setPendingNavigationPath:t=>e({pendingNavigationPath:t})}));function Tn({onMenuClick:e}){const t=qe(),n=pr(),r=gt(m=>m.hasUnsavedChanges),s=gt(m=>m.setPendingNavigationPath),[o,a]=p.useState(!1),i="1.2.0",u="139",c=n.pathname.startsWith("/settings");return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-primary-600 text-white fixed left-0 right-0 z-30 shadow-md app-safe-top-offset",children:l.jsxs("div",{className:"max-w-content mx-auto w-full h-14 flex items-center px-4 relative",children:[l.jsx("h1",{className:"absolute left-1/2 -translate-x-1/2 text-xl font-bold leading-none text-center pointer-events-none",children:"Rememly"}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-primary-700 rounded-lg transition-colors touch-manipulation flex items-center justify-center","aria-label":"About",children:l.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{d:"M12 18h.01"}),l.jsx("path",{d:"M9.09 9a3 3 0 015.82 1c0 2-3 2-3 4"}),l.jsx("circle",{cx:"12",cy:"12",r:"10"})]})}),l.jsx("button",{onClick:()=>{if(!c){if(r){s("/settings");return}t("/settings")}},className:`p-2 rounded-lg transition-colors touch-manipulation flex items-center justify-center ${c?"bg-primary-700":"hover:bg-primary-700"}`,"aria-label":"Settings",children:l.jsxs("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),l.jsx("div",{className:"app-safe-top-height flex-shrink-0"}),l.jsx(Of,{isOpen:o,onClose:()=>a(!1),title:"About",align:"center",children:l.jsxs("div",{className:"px-4 py-4 space-y-4 text-sm text-gray-700",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-semibold text-gray-900",children:"Rememly"}),l.jsx("div",{className:"text-gray-600",children:"Personal memory book generator"})]}),l.jsxs("dl",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsx("dt",{className:"text-gray-500",children:"Developer"}),l.jsx("dd",{className:"text-right text-gray-900",children:uo.developerName})]}),l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsx("dt",{className:"text-gray-500",children:"Versions"}),l.jsxs("dd",{className:"text-right text-gray-900",children:["v",i," / backend @",u]})]}),l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsx("dt",{className:"text-gray-500",children:"Last publish"}),l.jsx("dd",{className:"text-right text-gray-900",children:uo.lastPublished})]}),l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsx("dt",{className:"text-gray-500",children:"Project"}),l.jsx("dd",{className:"text-right",children:l.jsx("a",{href:uo.repoUrl,target:"_blank",rel:"noreferrer",className:"text-primary-600 hover:text-primary-700 underline",children:"GitHub (README)"})})]})]})]})})]})}const nr=p.forwardRef(({label:e,error:t,className:n="",...r},s)=>l.jsxs("div",{className:"w-full",children:[e&&l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),l.jsx("input",{ref:s,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-red-500":"border-gray-300"} ${n}`,...r}),t&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]}));nr.displayName="Input";const ee={year:"",month:"",dateFrom:"",dateTo:"",author:"",search:"",duplicatesOnly:!1,statusFilter:"active",sourceFilter:"all"};function og({initialFilters:e,onApply:t,onClose:n}){const r=Df(),[s,o]=p.useState((e==null?void 0:e.year)??ee.year),[a,i]=p.useState((e==null?void 0:e.month)??ee.month),[u,c]=p.useState((e==null?void 0:e.dateFrom)??ee.dateFrom),[m,f]=p.useState((e==null?void 0:e.dateTo)??ee.dateTo),[h,v]=p.useState((e==null?void 0:e.author)??ee.author),[y,S]=p.useState((e==null?void 0:e.search)??ee.search),[k,g]=p.useState((e==null?void 0:e.duplicatesOnly)??ee.duplicatesOnly),[d,x]=p.useState((e==null?void 0:e.statusFilter)??ee.statusFilter),[w,C]=p.useState((e==null?void 0:e.sourceFilter)??ee.sourceFilter),[b,_]=p.useState([]),[N,O]=p.useState(!1);p.useEffect(()=>{e&&(o(e.year??ee.year),i(e.month??ee.month),c(e.dateFrom??ee.dateFrom),f(e.dateTo??ee.dateTo),v(e.author??ee.author),S(e.search??ee.search),g(e.duplicatesOnly??ee.duplicatesOnly),x(e.statusFilter??ee.statusFilter),C(e.sourceFilter??ee.sourceFilter))},[e]),p.useEffect(()=>{let P=!0;return(async()=>{O(!0);try{const J=await pt.authors({status_filter:d,source_filter:w});P&&_(J.authors||[])}catch{P&&_([])}finally{P&&O(!1)}})(),()=>{P=!1}},[d,w]);const A=()=>{t({year:s,month:a,dateFrom:u,dateTo:m,author:h,search:y,duplicatesOnly:k,statusFilter:d,sourceFilter:w}),n()},B=()=>{o(ee.year),i(ee.month),c(ee.dateFrom),f(ee.dateTo),v(ee.author),S(ee.search),g(ee.duplicatesOnly),x(ee.statusFilter),C(ee.sourceFilter),t(ee),n()};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto overscroll-contain",children:[l.jsx(nr,{type:"text",label:"Search",value:y,onChange:P=>S(P.target.value),placeholder:"Search in loaded articles..."}),l.jsxs("div",{className:`grid gap-3 ${r?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),l.jsxs("select",{value:s,onChange:P=>{o(P.target.value),P.target.value||i("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"All years"}),[...Array(10)].map((P,W)=>{const J=ua()-W;return l.jsx("option",{value:J,children:J},J)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),l.jsxs("select",{value:a,onChange:P=>i(P.target.value),disabled:!s,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${s?"":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[l.jsx("option",{value:"",children:"All months"}),Lf.map((P,W)=>l.jsx("option",{value:(W+1).toString().padStart(2,"0"),children:P},W))]}),!s&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a year first"})]})]}),l.jsxs("div",{className:`grid gap-3 w-full ${r?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"}`,children:[l.jsx(nr,{type:"date",label:"From",value:u,onChange:P=>{const W=P.target.value;c(W),m&&W&&m<W&&f(W)},max:m||void 0,className:"min-w-0"}),l.jsx(nr,{type:"date",label:"To",value:m,onChange:P=>{const W=P.target.value;f(W),u&&W&&W<u&&c(W)},min:u||void 0,className:"min-w-0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author"}),l.jsxs("select",{value:h,onChange:P=>v(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"All authors"}),b.map(P=>l.jsx("option",{value:P.email,children:P.pseudo||P.email.split("@")[0]},P.email))]}),N&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading authors..."})]}),l.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700",children:[l.jsx("input",{type:"checkbox",checked:k,onChange:P=>g(P.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),"Show duplicates (Famileo)"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),l.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[l.jsx("button",{type:"button",onClick:()=>x("active"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${d==="active"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Active"}),l.jsx("button",{type:"button",onClick:()=>x("all"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${d==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),l.jsx("button",{type:"button",onClick:()=>x("deleted"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${d==="deleted"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Deleted"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),l.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[l.jsx("button",{type:"button",onClick:()=>C("all"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${w==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),l.jsx("button",{type:"button",onClick:()=>C("famileo"),className:`flex-1 px-3 py-2 text-sm font-medium border-x border-gray-300 transition-colors ${w==="famileo"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Famileo"}),l.jsx("button",{type:"button",onClick:()=>C("local"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${w==="local"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Local"})]})]})]}),l.jsx("div",{className:"border-t border-gray-200 p-4 bg-white sticky bottom-0",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(te,{variant:"secondary",onClick:B,fullWidth:!0,children:"Reset"}),l.jsx(te,{onClick:A,fullWidth:!0,children:"Apply Filters"})]})})]})})}function Uf({checked:e,onChange:t,label:n,disabled:r=!1}){return l.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${r?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ${e?"bg-primary-600":"bg-gray-300"}`,onClick:()=>!r&&t(!e),children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ${e?"translate-x-5":"translate-x-0"}`})}),n&&l.jsx("span",{className:"text-sm text-gray-700 select-none",children:n})]})}function ag(){const e=qe(),{logout:t}=Bt(),[n,r]=p.useState(!1),[s,o]=p.useState(!1),[a,i]=p.useState(new Set),[u,c]=p.useState(!1),[m,f]=p.useState(!1),[h,v]=p.useState(!1),[y,S]=p.useState(null),[k,g]=p.useState(()=>{const L=localStorage.getItem("articles_view_mode");return L==="list"||L==="mosaic-2"||L==="mosaic-3"||L==="mosaic-4"?L:L==="mosaic"?"mosaic-2":"cards"}),d=k==="mosaic-2"||k==="mosaic-3"||k==="mosaic-4",{articles:x,isLoading:w,error:C,cursor:b,hasMore:_,filters:N,setArticles:O,addArticles:A,setLoading:B,setError:P,setFilters:W}=Ct(),J=p.useRef(),me=p.useRef(!1),re=p.useRef(null),[I,E]=p.useState(!1),[M,T]=p.useState(!1),[U,G]=p.useState(0),ve=p.useRef(null),ye=60;p.useEffect(()=>{me.current=w},[w]),p.useEffect(()=>{re.current=b},[b]),p.useEffect(()=>{localStorage.setItem("articles_view_mode",k)},[k]);const Ce=async()=>{B(!0),P(null),console.log("Loading articles with filters:",N);try{const L=await pt.list({year:N.year||void 0,month:N.month,from:N.from,to:N.to,author:N.author,duplicates_only:N.duplicatesOnly?"true":void 0,limit:String(ls.ARTICLES_PER_PAGE),status_filter:N.statusFilter||"active",source_filter:N.sourceFilter||"all"});console.log("Received articles:",L.items.length,"cursor:",L.next_cursor),O(L.items,L.next_cursor)}catch(L){P(L instanceof Error?L.message:"Failed to load articles")}finally{B(!1)}},ie=p.useCallback(async()=>{w||(T(!0),await Ce(),T(!1))},[w,Ce]),De=p.useCallback(async()=>{const L=re.current;if(!(!L||me.current)){me.current=!0,E(!0),console.log("loadMore called with cursor:",L);try{const F=await pt.list({year:N.year||void 0,month:N.month,from:N.from,to:N.to,author:N.author,cursor:L,duplicates_only:N.duplicatesOnly?"true":void 0,limit:String(ls.ARTICLES_PER_PAGE),status_filter:N.statusFilter||"active",source_filter:N.sourceFilter||"all"});console.log("Loaded more articles:",F.items.length,"next cursor:",F.next_cursor),re.current=F.next_cursor,A(F.items,F.next_cursor)}catch(F){P(F instanceof Error?F.message:"Failed to load more")}finally{me.current=!1,E(!1)}}},[N.year,N.month,N.from,N.to,N.statusFilter,N.sourceFilter,A,P]),jt=p.useCallback(L=>{J.current&&J.current.disconnect(),L&&(J.current=new IntersectionObserver(F=>{F[0].isIntersecting&&!me.current&&re.current&&(console.log("Sentinel visible, loading more..."),De())},{threshold:1,rootMargin:"0px"}),J.current.observe(L))},[De]),et=L=>{console.log("Applying filters:",L),O([]),W({year:L.year,month:L.month,from:L.dateFrom,to:L.dateTo,author:L.author,search:L.search,duplicatesOnly:L.duplicatesOnly,statusFilter:L.statusFilter,sourceFilter:L.sourceFilter})},pn=L=>{if(N.statusFilter==="active"||!N.statusFilter)Ct.getState().deleteArticle(L);else{const F=x.find(K=>K.id===L);F&&Ct.getState().updateArticle({...F,status:"DELETED"})}},Wt=L=>{if(N.statusFilter==="deleted")Ct.getState().deleteArticle(L);else{const F=x.find(K=>K.id===L);F&&Ct.getState().updateArticle({...F,status:"ACTIVE"})}},St=(N.search||"").trim().toLowerCase(),pe=p.useMemo(()=>{let L=x;return St&&(L=L.filter(F=>{const K=(F.texte||"").toLowerCase(),ue=(F.author_pseudo||"").toLowerCase(),Vt=(F.auteur||"").toLowerCase();return K.includes(St)||ue.includes(St)||Vt.includes(St)})),N.duplicatesOnly&&(L=L.filter(F=>!!F.is_duplicate)),L},[x,St,N.duplicatesOnly]),gn=(L,F)=>{i(K=>{const ue=new Set(K);return F?ue.add(L):ue.delete(L),ue})},gr=()=>{a.size===pe.length?i(new Set):i(new Set(pe.map(L=>L.id)))},Mn=()=>{o(!1),i(new Set)},Pt=L=>{o(L),L||i(new Set)},$=L=>{var K;(((K=document.scrollingElement)==null?void 0:K.scrollTop)??window.scrollY)<=0&&!M&&!w&&(ve.current=L.touches[0].clientY)},H=L=>{var ue;if(ve.current===null||M||w)return;if((((ue=document.scrollingElement)==null?void 0:ue.scrollTop)??window.scrollY)>0){G(0),ve.current=null;return}const K=L.touches[0].clientY-ve.current;K>0?G(Math.min(K,80)):G(0)},Y=()=>{U>=ye&&!M&&!w&&ie(),G(0),ve.current=null},ge=async()=>{c(!0);const L=Array.from(a);S({current:0,total:L.length});try{for(let F=0;F<L.length;F++)await yt.deleteArticle(L[F]),S({current:F+1,total:L.length});N.statusFilter==="active"||!N.statusFilter?a.forEach(F=>Ct.getState().deleteArticle(F)):a.forEach(F=>{const K=x.find(ue=>ue.id===F);K&&Ct.getState().updateArticle({...K,status:"DELETED"})}),Mn()}catch(F){console.error("Bulk delete failed:",F)}finally{c(!1),S(null),f(!1)}},Ue=async()=>{c(!0);const L=Array.from(a);S({current:0,total:L.length});try{for(let F=0;F<L.length;F++)await pt.permanentDelete(L[F]),S({current:F+1,total:L.length});a.forEach(F=>Ct.getState().deleteArticle(F)),Mn()}catch(F){console.error("Bulk permanent delete failed:",F)}finally{c(!1),S(null),v(!1)}},Lt=N.statusFilter==="deleted",it=pe.reduce((L,F)=>{const K=br(F.date);return L[K]=(L[K]||0)+1,L},{}),j=pe.reduce((L,F)=>{const K=br(F.date),ue=ca(F.date),Vt=L[L.length-1];return!Vt||Vt.key!==K?L.push({key:K,label:ue,items:[F]}):Vt.items.push(F),L},[]),R=k==="mosaic-2"?2:k==="mosaic-3"?3:4,V=L=>{let F=0;for(let ue=0;ue<L.length;ue++)F=(F*31+L.charCodeAt(ue))%360;const K=F;return{border:`hsl(${K}, 35%, 70%)`,bg:`hsl(${K}, 45%, 92%)`,text:`hsl(${K}, 35%, 35%)`}},we=pe.length,se=_?`${we}+`:`${we}`,zn=pe.length>0?br(pe[pe.length-1].date):null,xi=N.year||N.month||N.from||N.to||N.author||N.search||N.duplicatesOnly||N.statusFilter&&N.statusFilter!=="active"||N.sourceFilter&&N.sourceFilter!=="all",Wf={year:N.year||"",month:N.month||"",dateFrom:N.from||"",dateTo:N.to||"",author:N.author||"",search:N.search||"",duplicatesOnly:N.duplicatesOnly||!1,statusFilter:N.statusFilter||"active",sourceFilter:N.sourceFilter||"all"};p.useEffect(()=>{console.log("Filters changed, reloading articles:",N),Ce()},[N.year,N.month,N.from,N.to,N.author,N.search,N.duplicatesOnly,N.statusFilter,N.sourceFilter]);const xn=w;return l.jsxs("div",{className:"min-h-screen flex flex-col",onTouchStart:$,onTouchMove:H,onTouchEnd:Y,children:[l.jsx(Tn,{}),l.jsxs("div",{className:"bg-white border-b border-gray-300 px-4 py-3 flex items-center justify-between fixed top-[56px] left-0 right-0 z-[25] max-w-content mx-auto",children:[l.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:s?`${a.size} selected`:N.year||"All years"}),!s&&l.jsx("span",{className:"text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-full px-2 py-0.5",children:se})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[s?l.jsx("button",{onClick:gr,className:`touch-manipulation text-sm font-medium ${xn?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:xn,children:a.size===pe.length?"Deselect all":"Select all"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center",children:l.jsxs("select",{value:k,onChange:L=>g(L.target.value),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg","aria-label":"View mode",children:[l.jsx("option",{value:"cards",children:"Cards"}),l.jsx("option",{value:"list",children:"List"}),l.jsx("option",{value:"mosaic-2",children:"Mosaic 2 items"}),l.jsx("option",{value:"mosaic-3",children:"Mosaic 3 items"}),l.jsx("option",{value:"mosaic-4",children:"Mosaic 4 items"})]})}),l.jsxs("button",{onClick:ie,className:`touch-manipulation text-sm font-medium flex items-center gap-2 hidden sm:flex ${xn?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,disabled:xn,children:[l.jsx("svg",{className:`w-4 h-4 ${M?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),l.jsxs("button",{onClick:()=>r(!0),className:`touch-manipulation flex items-center gap-2 ${xn?"text-gray-400 cursor-not-allowed":xi?"text-white bg-primary-600 hover:bg-primary-700 px-3 py-1.5 rounded-lg font-medium":"text-primary-600 hover:text-primary-700"}`,disabled:xn,"aria-label":"Filter",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),xi&&l.jsx("span",{className:"ml-1 bg-white text-primary-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]})]}),pe.length>0&&l.jsx(Uf,{checked:s,onChange:Pt,disabled:xn})]})]}),l.jsx("div",{className:"h-[36px]"}),l.jsxs("div",{className:"flex-1 pb-20",children:[(U>0||M)&&l.jsx("div",{className:"flex items-center justify-center",style:{height:`${Math.max(U,64)}px`},children:l.jsxs("div",{className:"flex items-center gap-3 bg-white/80 backdrop-blur px-3 py-2 rounded-full shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"relative w-6 h-6",children:[l.jsx("svg",{className:"absolute inset-0 w-6 h-6 text-gray-200",viewBox:"0 0 36 36",children:l.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3"})}),l.jsx("svg",{className:`absolute inset-0 w-6 h-6 ${M?"animate-spin text-primary-600":"text-primary-600"}`,viewBox:"0 0 36 36",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",strokeDasharray:`${Math.min(100,U/ye*100)}, 100`,transition:"stroke-dasharray 120ms ease"},children:l.jsx("path",{d:`M18 2.0845
                       a 15.9155 15.9155 0 0 1 0 31.831
                       a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})}),l.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-transform ${U>=ye?"rotate-180":""}`,children:[l.jsx("svg",{className:`w-3.5 h-3.5 ${M?"hidden":"block"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 5v14m0 0l-5-5m5 5l5-5"})}),l.jsx("svg",{className:`w-3.5 h-3.5 ${M?"block":"hidden"} text-primary-700`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),l.jsx("span",{className:"text-xs text-gray-600",children:M?"Refreshing...":U>=ye?"Release to refresh":"Pull to refresh"})]})}),w&&pe.length===0?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(ht,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading articles..."})]})}):C&&pe.length===0?l.jsx("div",{className:"flex items-center justify-center p-6",children:l.jsx(Ff,{message:C,onRetry:Ce})}):pe.length===0?l.jsx(sg,{}):l.jsxs(l.Fragment,{children:[!d&&l.jsx(l.Fragment,{children:pe.map((L,F)=>{const K=br(L.date),ue=F>0?br(pe[F-1].date):null,Vt=K!==ue;return l.jsxs(p.Fragment,{children:[Vt&&l.jsx(lg,{monthYear:ca(L.date),count:it[K]||0,showPlus:_&&zn===K}),l.jsx("div",{className:`relative z-0 ${Vt?"pt-8":""}`,children:k==="cards"?l.jsx(tg,{article:L,isDuplicate:!!L.is_duplicate,onDeleted:pn,onRestored:Wt,selectionMode:s,selected:a.has(L.id),onSelectionChange:gn}):l.jsx(ng,{article:L,isDuplicate:!!L.is_duplicate,onDeleted:pn,onRestored:Wt,selectionMode:s,selected:a.has(L.id),onSelectionChange:gn})})]},L.id)})}),d&&l.jsx(l.Fragment,{children:j.map((L,F)=>{const K=V(L.key);return l.jsxs("div",{className:`px-4 mb-8 ${F===0?"mt-8":""}`,children:[l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:K.border}}),l.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-full",style:{backgroundColor:K.bg,color:K.text},children:L.label}),l.jsx("div",{className:"text-xs text-gray-500",children:it[L.key]||L.items.length}),l.jsx("div",{className:"h-2 rounded-full flex-1",style:{backgroundColor:K.border}})]})}),l.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:L.items.map(ue=>l.jsx(rg,{article:ue,isDuplicate:!!ue.is_duplicate,onDeleted:pn,onRestored:Wt,selectionMode:s,selected:a.has(ue.id),onSelectionChange:gn},ue.id))}),l.jsx("div",{className:"border-b border-gray-200 mt-6"})]},L.key)})}),_&&!I&&l.jsx("div",{ref:jt,className:"h-4"})]})]}),I&&l.jsx("div",{className:"fixed bottom-24 left-0 right-0 flex justify-center z-50",children:l.jsx("div",{className:"bg-gray-100 shadow-lg rounded-full p-3 border border-gray-200",children:l.jsx(ht,{})})}),s&&a.size>0&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:l.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[a.size," article",a.size>1?"s":""," selected"]}),l.jsx("div",{className:"flex gap-2",children:Lt?l.jsx("button",{onClick:()=>v(!0),disabled:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:u?"Deleting...":"Delete permanently"}):l.jsx("button",{onClick:()=>f(!0),disabled:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:u?"Deleting...":"Delete"})})]})}),!s&&l.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-50",children:l.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:l.jsx(Af,{onClick:()=>e("/editor"),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),l.jsx(Ke,{isOpen:m,title:"Delete articles?",message:`${a.size} article${a.size>1?"s":""} will be marked as deleted. You can find them later by enabling the 'Show deleted' filter.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:ge,onCancel:()=>f(!1),variant:"danger",isLoading:u,progress:y}),l.jsx(Ke,{isOpen:h,title:"Permanently delete articles?",message:` WARNING: ${a.size} article${a.size>1?"s":""} will be permanently removed from the database. This action cannot be undone!`,confirmLabel:"Delete permanently",cancelLabel:"Cancel",onConfirm:Ue,onCancel:()=>v(!1),variant:"danger",isLoading:u,progress:y}),l.jsx(Of,{isOpen:n,onClose:()=>r(!1),title:"Filters",children:l.jsx(og,{initialFilters:Wf,onApply:et,onClose:()=>r(!1)})})]})}const da=(e,t)=>t.some(n=>e instanceof n);let Hu,Gu;function ig(){return Hu||(Hu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ug(){return Gu||(Gu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fa=new WeakMap,co=new WeakMap,Il=new WeakMap;function cg(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(bn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",o),e.addEventListener("error",a)});return Il.set(t,e),t}function dg(e){if(fa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});fa.set(e,t)}let ma={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return fa.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $f(e){ma=e(ma)}function fg(e){return ug().includes(e)?function(...t){return e.apply(ha(this),t),bn(this.request)}:function(...t){return bn(e.apply(ha(this),t))}}function mg(e){return typeof e=="function"?fg(e):(e instanceof IDBTransaction&&dg(e),da(e,ig())?new Proxy(e,ma):e)}function bn(e){if(e instanceof IDBRequest)return cg(e);if(co.has(e))return co.get(e);const t=mg(e);return t!==e&&(co.set(e,t),Il.set(t,e)),t}const ha=e=>Il.get(e);function hg(e,t,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(e,t),i=bn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(bn(a.result),u.oldVersion,u.newVersion,bn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),i.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),i}const pg=["get","getKey","getAll","getAllKeys","count"],gg=["put","add","delete","clear"],fo=new Map;function Qu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(fo.get(t))return fo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=gg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pg.includes(n)))return;const o=async function(a,...i){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(i.shift())),(await Promise.all([c[n](...i),s&&u.done]))[0]};return fo.set(t,o),o}$f(e=>({...e,get:(t,n,r)=>Qu(t,n)||e.get(t,n,r),has:(t,n)=>!!Qu(t,n)||e.has(t,n)}));const xg=["continue","continuePrimaryKey","advance"],Yu={},pa=new WeakMap,Bf=new WeakMap,vg={get(e,t){if(!xg.includes(t))return e[t];let n=Yu[t];return n||(n=Yu[t]=function(...r){pa.set(this,Bf.get(this)[t](...r))}),n}};async function*yg(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,vg);for(Bf.set(n,t),Il.set(n,ha(t));t;)yield n,t=await(pa.get(n)||t.continue()),pa.delete(n)}function Ku(e,t){return t===Symbol.asyncIterator&&da(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&da(e,[IDBIndex,IDBObjectStore])}$f(e=>({...e,get(t,n,r){return Ku(t,n)?yg:e.get(t,n,r)},has(t,n){return Ku(t,n)||e.has(t,n)}}));class wg{constructor(){vi(this,"dbPromise");this.dbPromise=hg("rememly-db",1,{upgrade(t){t.objectStoreNames.contains("drafts")||t.createObjectStore("drafts",{keyPath:"id"}),t.objectStoreNames.contains("assemblyStates")||t.createObjectStore("assemblyStates",{keyPath:"articleId"})}})}async saveDraft(t){await(await this.dbPromise).put("drafts",{...t,timestamp:Date.now()})}async getDraft(t){return(await this.dbPromise).get("drafts",t)}async deleteDraft(t){await(await this.dbPromise).delete("drafts",t)}async saveAssemblyState(t,n){await(await this.dbPromise).put("assemblyStates",{articleId:t,state:n,timestamp:Date.now()})}async getAssemblyState(t){const r=await(await this.dbPromise).get("assemblyStates",t);return r==null?void 0:r.state}async deleteAssemblyState(t){await(await this.dbPromise).delete("assemblyStates",t)}}const jg=new wg;function Sg(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}async function Ng(e){return new Promise(t=>{const n=new FileReader;n.onload=r=>{var s,o;try{const a=new DataView((s=r.target)==null?void 0:s.result);if(a.getUint16(0,!1)!==65496){t(null);return}let i=2;const u=a.byteLength;for(;i<u;){if(a.getUint8(i)!==255){t(null);return}if(a.getUint8(i+1)===225){const m=a.getUint16(i+2,!1),f=new DataView((o=r.target)==null?void 0:o.result,i+4,m-2);if(String.fromCharCode(f.getUint8(0),f.getUint8(1),f.getUint8(2),f.getUint8(3))!=="Exif"){t(null);return}const v=6,y=f.getUint16(v,!1)===18761,S=f.getUint32(v+4,y),k=f.getUint16(v+S,y);for(let g=0;g<k;g++){const d=v+S+2+g*12,x=f.getUint16(d,y);if(x===34665){const w=f.getUint32(d+8,y),C=f.getUint16(v+w,y);for(let b=0;b<C;b++){const _=v+w+2+b*12,N=f.getUint16(_,y);if(N===36867||N===36868){const O=f.getUint32(_+8,y);let A="";for(let W=0;W<19;W++)A+=String.fromCharCode(f.getUint8(v+O+W));const B=A.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),P=new Date(B);if(!isNaN(P.getTime())){t(P);return}}}}if(x===306){const w=f.getUint32(d+8,y);let C="";for(let N=0;N<19;N++)C+=String.fromCharCode(f.getUint8(v+w+N));const b=C.replace(/^(\d{4}):(\d{2}):(\d{2})/,"$1-$2-$3"),_=new Date(b);if(!isNaN(_.getTime())){t(_);return}}}t(null);return}i+=2+a.getUint16(i+2,!1)}t(null)}catch{t(null)}},n.onerror=()=>t(null),n.readAsArrayBuffer(e)})}function kg(e){if(!e)return console.warn("Empty image URL provided to PhotoPicker"),"";if(e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([^\/]+)/,/drive\.google\.com\/uc\?.*[&?]id=([^&]+)/,/drive\.google\.com\/open\?.*[&?]id=([^&]+)/,/lh3\.googleusercontent\.com\/d\/([^?&]+)/];for(const n of t){const r=e.match(n);if(r&&r[1])return`https://drive.google.com/thumbnail?id=${r[1]}&sz=w2000`}return e}function Cg({onPhotoSelected:e,currentImage:t}){const n=p.useRef(null),r=p.useRef(null),s=p.useRef(null),o=p.useRef(null),[a,i]=p.useState(!1),[u,c]=p.useState(!1),[m,f]=p.useState(null),h=Sg();p.useEffect(()=>()=>{m&&m.getTracks().forEach(d=>d.stop())},[m]);const v=async d=>{var w;const x=(w=d.target.files)==null?void 0:w[0];if(x){const C=await Ng(x);e(x,C||void 0),i(!1)}d.target.value=""},y=p.useCallback(async()=>{var d,x;if(h)(d=n.current)==null||d.click();else try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});f(w),c(!0),setTimeout(()=>{s.current&&(s.current.srcObject=w)},100)}catch(w){console.error("Error accessing webcam:",w),(x=n.current)==null||x.click()}},[h]),S=p.useCallback(()=>{if(s.current&&o.current){const d=s.current,x=o.current;x.width=d.videoWidth,x.height=d.videoHeight;const w=x.getContext("2d");w&&(w.drawImage(d,0,0),x.toBlob(async C=>{if(C){const b=new File([C],`webcam-${Date.now()}.jpg`,{type:"image/jpeg"});e(b,new Date),k(),i(!1)}},"image/jpeg",.9))}},[e]),k=p.useCallback(()=>{m&&(m.getTracks().forEach(d=>d.stop()),f(null)),c(!1)},[m]),g=()=>{var d;(d=r.current)==null||d.click()};return u?l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[l.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto max-h-[50vh] object-contain"}),l.jsx("canvas",{ref:o,className:"hidden"})]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx(te,{onClick:S,fullWidth:!0,children:"Capture"}),l.jsx(te,{variant:"secondary",onClick:k,fullWidth:!0,children:"Cancel"})]})]}):l.jsxs("div",{className:"w-full",children:[l.jsx("input",{ref:n,type:"file",accept:"image/*",capture:"environment",onChange:v,className:"hidden"}),l.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:v,className:"hidden"}),t?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:kg(t),alt:"Selected",className:"w-full h-auto rounded-lg max-h-[40vh] object-contain"}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx(te,{variant:"secondary",fullWidth:!0,onClick:y,children:"Take Photo"}),l.jsx(te,{variant:"secondary",fullWidth:!0,onClick:g,children:"Gallery"})]})]}):l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Add a photo"}),a?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(te,{onClick:y,fullWidth:!0,children:"Take Photo"}),l.jsx(te,{variant:"secondary",onClick:g,fullWidth:!0,children:"Choose from Gallery"}),l.jsx("button",{onClick:()=>i(!1),className:"text-sm text-gray-500 mt-2",children:"Cancel"})]}):l.jsx("div",{className:"flex justify-center",children:l.jsx(te,{onClick:()=>i(!0),children:"Select Photo"})})]})]})}function bg({value:e,onChange:t}){const n=s=>{const o=s.target.value;o.length<=ls.MAX_TEXT_LENGTH&&t(o)},r=ls.MAX_TEXT_LENGTH-e.length;return l.jsxs("div",{className:"w-full",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text (optional)"}),l.jsx("textarea",{value:e,onChange:n,placeholder:"Add a description...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4}),l.jsxs("div",{className:"mt-1 text-sm text-gray-500 text-right",children:[r," characters remaining"]})]})}function Eg({value:e,onChange:t}){const n=o=>{const a=new Date(o),i=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0"),m=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0");return`${i}-${u}-${c}T${m}:${f}`},r=o=>new Date(o).toISOString(),s=o=>{t(r(o.target.value))};return l.jsxs("div",{className:"space-y-2 overflow-hidden",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date and time"}),l.jsx("input",{type:"datetime-local",value:n(e),onChange:s,className:"w-full min-w-0 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent box-border text-base",style:{maxWidth:"100%"}})]})}function Xu(){const{id:e}=Yp(),t=qe(),n=pr(),{user:r}=Bt(),{articles:s,updateArticle:o,deleteArticle:a}=Ct(),{showToast:i}=gt(),[u,c]=p.useState(""),[m,f]=p.useState(new Date().toISOString()),[h,v]=p.useState(null),[y,S]=p.useState(""),[k,g]=p.useState(""),[d,x]=p.useState(""),[w,C]=p.useState(!1),[b,_]=p.useState(!1),[N,O]=p.useState(!1),[A,B]=p.useState("ACTIVE"),P=!!e,W=A==="DELETED",{src:J}=Rl(k,d);p.useEffect(()=>{const T=n.state;if(T!=null&&T.famileoImport){const{text:U,date:G,imageBase64:ve,imageMimeType:ye}=T.famileoImport;c(U);const Ce=new Date(G.replace(" ","T"));if(isNaN(Ce.getTime())||f(Ce.toISOString()),ve){const ie=`data:${ye};base64,${ve}`;S(ie),fetch(ie).then(De=>De.blob()).then(De=>{const jt=new File([De],"famileo-import.jpg",{type:ye});v(jt)})}window.history.replaceState({},document.title)}},[n.state]),p.useEffect(()=>{P&&me()},[e]),p.useEffect(()=>{P&&!h&&J&&S(J)},[P,h,J]);const me=async()=>{if(e){C(!0);try{const T=s.find(G=>G.id===e);if(T){c(T.texte||""),f(T.date),g(T.image_url||""),x(T.image_file_id||""),B(T.status||"ACTIVE");return}const U=await pt.get(e);c(U.texte),f(U.date),g(U.image_url||""),x(U.image_file_id||""),B(U.status||"ACTIVE")}catch{i("Failed to load article","error"),t("/")}finally{C(!1)}}},re=(T,U)=>{v(T);const G=URL.createObjectURL(T);S(G),U&&!P&&f(U.toISOString())},I=async()=>{if(!h&&!P){i("Please select a photo","error");return}if(r){_(!0);try{if(P&&e){const T=W?"ACTIVE":void 0,U=await yt.updateArticle(e,u,h||void 0,m,void 0,void 0,T);o(U),i(W?"Article restored":"Article updated","success")}else h&&(await yt.createArticle(r.email,u,h,m),i("Article created","success"));await jg.deleteDraft(e||"new"),t("/")}catch(T){i(T instanceof Error?T.message:"Failed to save article","error")}finally{_(!1)}}},E=()=>{y&&y.startsWith("blob:")&&URL.revokeObjectURL(y),t("/")},M=async()=>{if(e){_(!0);try{console.log("Deleting article:",e);const T=await yt.deleteArticle(e);console.log("Delete result:",T),a(e),i("Article deleted","success"),t("/")}catch(T){console.error("Delete error:",T),i(T instanceof Error?T.message:"Failed to delete article","error")}finally{_(!1),O(!1)}}};return w?l.jsx(ms,{message:"Loading article..."}):l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsxs("div",{className:"flex-1 flex flex-col max-w-content mx-auto w-full bg-white",children:[l.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-center flex-shrink-0",children:l.jsx("h1",{className:"text-lg font-semibold",children:P?"Edit Article":"New Article"})}),l.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-6 pb-4",children:[l.jsx(Cg,{onPhotoSelected:re,currentImage:y}),l.jsx(bg,{value:u,onChange:c}),l.jsx(Eg,{value:m,onChange:f})]}),l.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 space-y-2 flex-shrink-0",children:[l.jsx(te,{onClick:I,disabled:b||!h&&!P,fullWidth:!0,children:b?"Saving...":W?"Save and restore":P?"Update":"Create"}),l.jsx(te,{variant:"secondary",onClick:()=>t("/photo-assembly",{state:{editMode:P,articleId:e,texte:u,dateModification:m}}),disabled:b,fullWidth:!0,children:"Use Photo Assembly"}),P&&!W&&l.jsx(te,{variant:"danger",onClick:()=>O(!0),disabled:b,fullWidth:!0,children:"Delete Article"}),l.jsx(te,{variant:"secondary",onClick:E,disabled:b,fullWidth:!0,children:"Cancel"})]}),l.jsx(Ke,{isOpen:N,title:"Delete Article",message:"Are you sure you want to delete this article? This action cannot be undone.",confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",isLoading:b,onConfirm:M,onCancel:()=>O(!1)})]})]})}function _g(){const e=qe(),t=Ct(v=>v.setFilters),[n,r]=p.useState(!0),[s,o]=p.useState(null),[a,i]=p.useState([]),[u,c]=p.useState(ua());p.useEffect(()=>{m()},[]);const m=async()=>{r(!0),o(null);try{const v=await pt.list({limit:"1000",status_filter:"all"}),y=new Map;v.items.forEach(k=>{const g=new Date(k.date),d=g.getFullYear(),x=g.getMonth(),w=k.status==="DELETED"?"deleted":"active";y.has(d)||y.set(d,{total:0,active:0,deleted:0,monthMap:new Map});const C=y.get(d);C.total+=1,C[w]+=1,C.monthMap.has(x)||C.monthMap.set(x,{total:0,active:0,deleted:0});const b=C.monthMap.get(x);b.total+=1,b[w]+=1});const S=Array.from(y.entries()).map(([k,g])=>({year:k,total:g.total,active:g.active,deleted:g.deleted,months:Array.from(g.monthMap.entries()).map(([d,x])=>({monthIndex:d,monthName:Lf[d],total:x.total,active:x.active,deleted:x.deleted})).sort((d,x)=>d.monthIndex-x.monthIndex)})).sort((k,g)=>g.year-k.year);if(i(S),S.length>0){const k=ua(),g=S.some(d=>d.year===k);c(g?k:S[0].year)}}catch(v){o(v instanceof Error?v.message:"Failed to load statistics")}finally{r(!1)}},f=(v,y="active")=>{t({year:String(v),month:"",from:"",to:"",statusFilter:y,sourceFilter:"all"}),e("/")},h=(v,y,S="active")=>{t({year:String(v),month:String(y+1).padStart(2,"0"),from:"",to:"",statusFilter:S,sourceFilter:"all"}),e("/")};return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:l.jsx(Ff,{message:s,onRetry:m})}):l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsx("div",{className:"flex-1 p-4 pb-24",children:n?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(ht,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading statistics..."})]})}):l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Year breakdown"}),l.jsxs("div",{className:"space-y-3",children:[a.map(v=>{const y=u===v.year;return l.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"w-full px-4 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between text-left hover:bg-gray-50",children:[l.jsxs("div",{role:"button",tabIndex:0,onClick:()=>c(y?null:v.year),onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&c(y?null:v.year)},className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-base font-semibold text-gray-900",children:v.year}),l.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[v.total," total  ",v.active," active  ",v.deleted," deleted"]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>f(v.year,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),l.jsx("button",{onClick:()=>f(v.year,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"}),l.jsx("button",{onClick:()=>c(y?null:v.year),className:"text-xs font-medium text-gray-600 hover:text-gray-800",children:y?"Hide months":"Show months"})]})]}),y&&l.jsx("div",{className:"px-4 pb-3",children:l.jsxs("div",{className:"mt-2 space-y-2",children:[v.months.map(S=>l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-2 border-b border-gray-100 last:border-b-0",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-900",children:S.monthName}),l.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[S.total," total  ",S.active," active  ",S.deleted," deleted"]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("button",{onClick:()=>h(v.year,S.monthIndex,"active"),className:"text-xs font-medium text-primary-600 hover:text-primary-700",children:"View active"}),l.jsx("button",{onClick:()=>h(v.year,S.monthIndex,"deleted"),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"View deleted"})]})]},`${v.year}-${S.monthIndex}`)),v.months.length===0&&l.jsx("div",{className:"text-sm text-gray-500",children:"No months found"})]})})]},v.year)}),a.length===0&&l.jsx("div",{className:"text-sm text-gray-500",children:"No statistics available"})]})]})})]})}function Pg(e){if(!e||e.startsWith("blob:")||e.includes("drive.google.com/thumbnail"))return e;const t=[/drive\.google\.com\/file\/d\/([A-Za-z0-9_-]+)/,/drive\.google\.com\/uc\?.*id=([A-Za-z0-9_-]+)/,/drive\.google\.com\/open\?.*id=([A-Za-z0-9_-]+)/,/lh3\.googleusercontent\.com\/d\/([A-Za-z0-9_-]+)/];for(const n of t){const r=e.match(n);if(r&&r[1])return`https://drive.google.com/thumbnail?id=${r[1]}&sz=w2000`}return e}function Lg(){const{user:e,logout:t}=Bt(),{showToast:n,setUnsavedChanges:r}=gt(),{profile:s,isLoading:o,saveProfile:a,avatarBlobUrl:i}=mi(),[u,c]=p.useState(""),[m,f]=p.useState(null),[h,v]=p.useState(""),[y,S]=p.useState(!1),[k,g]=p.useState(""),d=u.trim()!==k.trim()||m!==null;p.useEffect(()=>{s?(c(s.pseudo),g(s.pseudo||""),v(i||s.avatar_url)):e&&(c(e.name),g(e.name||"")),f(null)},[s,e,i]);const x=b=>{var O;const _=(O=b.target.files)==null?void 0:O[0];if(!_)return;f(_);const N=URL.createObjectURL(_);v(N)},w=async()=>{if(!u.trim()){n("Please enter a pseudo","error");return}S(!0);try{const b=u.trim();await a(b,m||void 0),c(b),g(b),f(null),n("Profile saved","success")}catch{n("Failed to save profile","error")}finally{S(!1)}},C=()=>{t()};return p.useEffect(()=>{r(d)},[d,r]),o?l.jsx(ms,{message:"Loading profile..."}):l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-md mx-auto w-full",children:[l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsxs("div",{className:"relative",children:[h?l.jsx("img",{src:Pg(h),alt:"Avatar",className:"w-32 h-32 rounded-full object-cover border-4 border-primary-200"}):l.jsx("div",{className:"w-32 h-32 rounded-full bg-primary-100 flex items-center justify-center border-4 border-primary-200",children:l.jsx("span",{className:"text-4xl font-semibold text-primary-600",children:u.charAt(0).toUpperCase()||"?"})}),l.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:l.jsxs("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),l.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:x,className:"hidden"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Click to change avatar"})]}),l.jsx("div",{children:l.jsx(nr,{label:"Pseudo",value:u,onChange:b=>c(b.target.value),placeholder:"Enter your pseudo"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backend URL"}),l.jsx("input",{type:"text",value:"https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 text-xs"})]})]}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:l.jsxs("div",{className:"max-w-md mx-auto w-full flex flex-col sm:flex-row sm:justify-center gap-2",children:[l.jsx(te,{onClick:w,disabled:y||o||!u.trim()||!d,className:"w-full sm:w-auto",children:y?"Saving...":"Save Profile"}),l.jsx(te,{variant:"danger",onClick:C,disabled:y,className:"w-full sm:w-auto",children:"Logout"})]})}),y&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[l.jsx(ht,{size:"md"}),l.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})})]})}const Gt={status:e=>Z.get("famileo/status",e),posts:(e,t)=>Z.get("famileo/posts",e,t),image:e=>Z.get("famileo/image",{url:encodeURIComponent(e)}),triggerRefresh:()=>Z.get("famileo/trigger-refresh"),families:()=>Z.get("famileo/families"),importedIds:()=>Z.get("famileo/imported-ids")};function Dg({post:e,selected:t,onSelectionChange:n,onImageLoaded:r,cachedImage:s,alreadyImported:o}){const[a,i]=p.useState(!1),[u,c]=p.useState(null),[m,f]=p.useState(!1);p.useEffect(()=>{if(s){c(`data:${s.mimeType};base64,${s.base64}`);return}(async()=>{if(!(u||a||m)){i(!0);try{const y=await Gt.image(e.image_url);c(`data:${y.mimeType};base64,${y.base64}`),r(e.id,y.base64,y.mimeType)}catch{f(!0)}finally{i(!1)}}})()},[e.id,e.image_url,s]);const h=e.author_pseudo.split(" ").map(v=>v[0]).join("").toUpperCase().substring(0,2);return l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden border-2 transition-colors ${t?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx("input",{type:"checkbox",checked:t,onChange:v=>n(v.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 flex-shrink-0"}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-sm font-semibold text-orange-700",children:h})}),l.jsxs("div",{className:"flex flex-col min-w-0",children:[l.jsx("span",{className:"font-semibold text-gray-900",children:e.author_pseudo}),l.jsx("span",{className:"text-sm text-gray-500",children:Dl(e.date)})]})]}),o&&l.jsx("div",{className:"flex-shrink-0 ml-2",children:l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[l.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Imported"]})})]}),l.jsxs("div",{className:"w-full bg-gray-100 relative min-h-[200px]",children:[a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}),m&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:l.jsx("p",{className:"text-sm",children:"Failed to load image"})}),u&&l.jsx("img",{src:u,alt:"",className:"w-full h-auto object-contain"})]}),e.text&&l.jsx("div",{className:"p-4",children:l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:e.text})}),l.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100 text-xs text-gray-500",children:[l.jsxs("span",{children:["ID: ",e.id]}),l.jsx("span",{className:"mx-2",children:"|"}),l.jsx("span",{children:e.image_orientation})]})]})})}function Rg(){const e=qe(),{user:t}=Bt(),[n,r]=p.useState(""),[s,o]=p.useState(""),[a,i]=p.useState([]),[u,c]=p.useState(!1),[m,f]=p.useState(null),h=p.useRef(null),[v,y]=p.useState(new Set),[S,k]=p.useState({}),[g,d]=p.useState(!1),[x,w]=p.useState(null),C=p.useRef(!1),[b,_]=p.useState(!1),[N,O]=p.useState(!1),[A,B]=p.useState(null),[P,W]=p.useState(!1),[J,me]=p.useState([]),[re,I]=p.useState(""),[E,M]=p.useState(!0),[T,U]=p.useState(new Set),[G,ve]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const[H,Y]=await Promise.all([Gt.families(),Gt.importedIds()]);me(H.families),H.families.length>0&&I(H.families[0].famileo_id),U(new Set(Y.ids))}catch(H){console.error("Failed to load initial data:",H)}finally{M(!1)}})()},[]);const ye=$=>{const H=$.toLowerCase();return H.includes("session expired")||H.includes("famileo session not configured")||H.includes("invalid famileo session")},Ce=$=>ye($)?"Session Famileo expire. Rafrachissement en cours...":$,ie=async()=>{for(let H=0;H<20;H++){try{const Y=await Gt.status({validate:"true",family_id:re||void 0});if(Y.valid)return B(null),!0;B(Y.message?Ce(Y.message):"Refreshing session...")}catch(Y){const ge=Y instanceof Error?Y.message:"Refreshing session...";B(Ce(ge))}await new Promise(Y=>setTimeout(Y,5e3))}return!1},De=async $=>{const H=[];let Y=!0;const ge=new Date(n+"T00:00:00").getTime(),Ue=new Date(s+"T23:59:59").getTime();let Lt=new Date(s+"T23:59:59.999Z").toISOString();for(;Y;){const it=await Gt.posts({limit:"50",timestamp:Lt,family_id:re||void 0},{signal:$});for(const j of it.posts){const R=new Date(j.date).getTime();R>=ge&&R<=Ue&&H.push(j)}it.next_timestamp&&new Date(it.next_timestamp).getTime()>=ge?Lt=it.next_timestamp:Y=!1}return H},jt=async()=>{if(!n||!s){f("Please select both start and end dates");return}const $=new AbortController;h.current=$,c(!0),f(null),B(null),i([]),y(new Set),k({});try{const H=await De($.signal);i(H),H.length===0&&f("No posts found in this date range")}catch(H){if(H instanceof Error&&H.name==="AbortError"){c(!1);return}const Y=H instanceof Error?H.message:"Failed to fetch posts";if(ye(Y)&&!P){W(!0),O(!0),B("Refreshing Famileo session... This may take a few minutes.");try{if(await Gt.triggerRefresh(),await ie()){const Ue=await De($.signal);i(Ue),Ue.length===0&&f("No posts found in this date range"),B(null)}else f("Le rafrachissement Famileo a expir. Ressaie dans quelques minutes.")}catch(ge){const Ue=ge instanceof Error?ge.message:"Failed to refresh session";f(Ce(Ue))}finally{O(!1),W(!1)}}else f(Y)}finally{c(!1)}},et=()=>{h.current&&(h.current.abort(),h.current=null),c(!1),O(!1),W(!1),B(null)},pn=()=>{e("/")},Wt=($,H)=>{y(Y=>{const ge=new Set(Y);return H?ge.add($):ge.delete($),ge})},St=($,H,Y)=>{k(ge=>({...ge,[$]:{base64:H,mimeType:Y}}))},pe=()=>{v.size===a.length?y(new Set):y(new Set(a.map($=>$.id)))},gn=async()=>{if(!t||v.size===0)return;const $=a.filter(H=>v.has(H.id));$.sort((H,Y)=>new Date(H.date).getTime()-new Date(Y.date).getTime()),C.current=!1,d(!0),w({current:0,total:$.length,currentPostText:""});try{for(let H=0;H<$.length&&!C.current;H++){const Y=$[H];w({current:H+1,total:$.length,currentPostText:Y.text.substring(0,50)+(Y.text.length>50?"...":"")});let ge="",Ue="image/jpeg";const Lt=await Gt.image(Y.full_image_url);ge=Lt.base64,Ue=Lt.mimeType;const it=`data:${Ue};base64,${ge}`,j=await fetch(it).then(se=>se.blob()),R=new File([j],"famileo-import.jpg",{type:Ue}),V=new Date(Y.date.replace(" ","T")),we=isNaN(V.getTime())?new Date().toISOString():V.toISOString();await yt.createArticle(Y.author_email,Y.text,R,we,String(Y.id)),U(se=>new Set([...se,String(Y.id)])),H<$.length-1&&await new Promise(se=>setTimeout(se,500))}y(new Set),C.current?B("Bulk creation cancelled."):B(`Successfully created ${$.length} article${$.length>1?"s":""}`)}catch(H){f(H instanceof Error?H.message:"Failed to create articles")}finally{d(!1),w(null),_(!1)}},gr=()=>{C.current=!0,_(!0)},Mn=async()=>{O(!0),B(null),f(null);try{const $=await Gt.triggerRefresh();B($.message)}catch($){f($ instanceof Error?$.message:"Failed to trigger refresh")}finally{O(!1)}},Pt=v.size;return l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-14 z-20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:pn,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation",disabled:g,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M15 19l-7-7 7-7"})})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Famileo Extractor"})]}),l.jsxs("button",{onClick:Mn,disabled:N||g,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation disabled:opacity-50",title:"Refresh Famileo session",children:[l.jsx("svg",{className:`w-4 h-4 ${N?"animate-spin":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),l.jsx("span",{children:N?"Refreshing...":"Refresh Session"})]})]})}),l.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[J.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),l.jsx("select",{value:re,onChange:$=>I($.target.value),disabled:u||g||E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white",children:J.map($=>l.jsx("option",{value:$.famileo_id,children:$.name},$.id))})]}),E&&l.jsx("div",{className:"text-sm text-gray-500",children:"Loading families..."}),!E&&J.length===0&&l.jsx("div",{className:"text-sm text-amber-600",children:'No family configured. Add families in the "families" sheet.'}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),l.jsx("input",{type:"date",value:n,onChange:$=>r($.target.value),disabled:u||g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),l.jsx("input",{type:"date",value:s,onChange:$=>o($.target.value),disabled:u||g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 text-gray-900 bg-white appearance-none"})]})]}),l.jsx("button",{onClick:jt,disabled:u||g||E||!n||!s||!re&&J.length>0,className:"w-full py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation",children:E?"Loading families...":u?"Loading...":"Get Posts"})]})}),g&&x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 mx-4 max-w-sm w-full shadow-xl",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Creating Articles"}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[x.current," / ",x.total]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all duration-300",style:{width:`${x.current/x.total*100}%`}})})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate",children:x.currentPostText}),l.jsx("button",{onClick:gr,disabled:b,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 disabled:opacity-60 rounded-lg transition-colors",children:b?"Cancel in progress...":"Cancel"})]})}),A&&l.jsx("div",{className:"mx-4 mt-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:A}),m&&l.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:m}),u&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),l.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Loading posts..."}),l.jsx("button",{onClick:et,className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"})]}),!u&&a.length>0&&l.jsxs("div",{className:"flex-1 py-4 pb-24",children:[l.jsxs("div",{className:"px-4 mb-3 flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:[a.length," post",a.length>1?"s":""," found",Pt>0&&l.jsxs("span",{className:"ml-2 text-primary-600 font-medium",children:["(",Pt," selected)"]})]}),l.jsx("button",{onClick:pe,disabled:g,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:v.size===a.length?"Deselect All":"Select All"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",id:"hideImported",checked:G,onChange:$=>ve($.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsxs("label",{htmlFor:"hideImported",className:"text-sm text-gray-600",children:["Hide already imported posts (",a.filter($=>T.has(String($.id))).length,")"]})]})]}),l.jsx("div",{className:"space-y-4",children:a.filter($=>!G||!T.has(String($.id))).map($=>l.jsx(Dg,{post:$,selected:v.has($.id),onSelectionChange:H=>Wt($.id,H),onImageLoaded:St,cachedImage:S[$.id],alreadyImported:T.has(String($.id))},$.id))})]}),!u&&a.length>0&&l.jsx("div",{className:`fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 ${g?"pointer-events-none":""}`,children:l.jsx("div",{className:"max-w-content mx-auto",children:l.jsxs("button",{onClick:gn,disabled:Pt===0||g,className:"w-full py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors touch-manipulation flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 4v16m8-8H4"})}),Pt>0?`Bulk Create (${Pt})`:"Select posts to create"]})})})]})}const dt={create:e=>Z.post("pdf/create",e),process:e=>Z.get("pdf/process",{job_id:e}),status:e=>Z.get("pdf/status",{job_id:e}),list:e=>{const t=e?{date_from:e.date_from,date_to:e.date_to,author:e.author,include_in_progress:e.include_in_progress?"true":void 0}:void 0;return Z.get("pdf/list",t)},delete:e=>Z.post("pdf/delete",{job_id:e}),triggerMerge:e=>Z.post("pdf/merge-trigger",{job_id:e}),cancelMerge:e=>Z.post("pdf/merge-cancel",{job_id:e}),cleanupMerge:e=>Z.post("pdf/merge-cleanup",{job_id:e}),cancel:e=>Z.post("pdf/cancel",{job_id:e})},Ig=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).email||"me"}catch{return"me"}},Tg=()=>{try{const e=localStorage.getItem("user");return e&&JSON.parse(e).name||null}catch{return null}},Mg=e=>e==="PENDING"||e==="RUNNING"||e==="DONE"||e==="ERROR"||e==="CANCELLED"?e:"PENDING",pi=hi((e,t)=>({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null,startGeneration:async(n,r,s,o)=>{e({isGenerating:!0,jobId:null,progress:0,progressMessage:"Starting...",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:o||null});try{const a=await dt.create({from:n,to:r,options:s}),i=new Date().toISOString(),u=Ig(),c=Tg()||u.split("@")[0],m={job_id:a.job_id,created_at:i,created_by:u,created_by_pseudo:c,date_from:n,date_to:r,status:Mg(a.status),progress:a.progress,progress_message:a.progress_message,pdf_url:a.pdf_url,pdf_file_id:a.pdf_file_id};return a.status==="DONE"&&a.pdf_url?(e({isGenerating:!1,progress:100,progressMessage:"Done!",pdfUrl:a.pdf_url,showSuccess:!0}),o&&o(),m):a.status==="ERROR"?(e({isGenerating:!1,error:"PDF generation failed",progressMessage:""}),null):(e({isGenerating:!1,jobId:a.job_id}),dt.process(a.job_id).catch(()=>{}),o&&o(),m)}catch(a){return e({isGenerating:!1,error:a instanceof Error?a.message:"Error while generating PDF",progressMessage:""}),null}},pollJobStatus:async n=>{try{const r=await dt.status(n);if(e({progress:r.progress||0,progressMessage:r.progress_message||""}),r.status==="DONE"){const s=t().onCompleteCallback;e({isGenerating:!1,pdfUrl:r.pdf_url||null,showSuccess:!0}),s&&s()}else r.status==="ERROR"?e({isGenerating:!1,error:r.error_message||"PDF generation failed"}):setTimeout(()=>t().pollJobStatus(n),1e3)}catch(r){e({isGenerating:!1,error:r instanceof Error?r.message:"Error while tracking job"})}},setLastCompletedJob:n=>{e({lastCompletedJob:n,showSuccess:!!(n!=null&&n.pdf_url),pdfUrl:(n==null?void 0:n.pdf_url)||null})},dismissSuccess:()=>{e({showSuccess:!1,pdfUrl:null,lastCompletedJob:null})},dismissError:()=>{e({error:null})},reset:()=>{e({isGenerating:!1,jobId:null,progress:0,progressMessage:"",error:null,pdfUrl:null,showSuccess:!1,lastCompletedJob:null,onCompleteCallback:null})}}));function zg({isOpen:e,onClose:t,onComplete:n}){const{startGeneration:r,isGenerating:s}=pi(),[o,a]=p.useState("dates"),[i,u]=p.useState(""),[c,m]=p.useState(""),[f,h]=p.useState(!1),[v,y]=p.useState(null),[S,k]=p.useState([]),[g,d]=p.useState(0),[x,w]=p.useState("full"),[C,b]=p.useState(!0),[_,N]=p.useState(0),[O,A]=p.useState(!1),[B,P]=p.useState(!1),W=()=>{a("dates"),u(""),m(""),k([]),d(0),y(null),w("full"),b(!0),N(0),A(!1),P(!1)},J=()=>{W(),t()},me=async()=>{if(!i||!c){y("Please select a start and end date");return}if(c<i){y("End date cannot be earlier than start date");return}h(!0),y(null);try{const I=[];let E=null;do{const U=await pt.list({from:i,to:c,limit:"100",cursor:E||void 0,status_filter:"active"});I.push(...U.items),E=U.next_cursor}while(E);const M=new Map;for(const U of I){const G=U.date.substring(0,7),ve=ca(U.date);M.has(G)?M.get(G).count++:M.set(G,{label:ve,count:1})}const T=Array.from(M.entries()).sort((U,G)=>U[0].localeCompare(G[0])).map(([U,G])=>({key:U,label:G.label,count:G.count}));k(T),d(I.length),N(I.length),I.length===0?y("No articles found for this period"):a("preview")}catch(I){y(I instanceof Error?I.message:"Error while loading")}finally{h(!1)}},re=async()=>{const I=await r(i,c,{mosaic_layout:x,show_seasonal_fruits:C,max_mosaic_photos:_>0?_:void 0,auto_merge:O,clean_chunks:O?B:void 0});W(),t(),n(I)};return e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:J}),l.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[o==="dates"&&"Select date range",o==="preview"&&"Article preview",o==="options"&&"Generation options"]}),l.jsx("button",{onClick:J,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[v&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:v}),o==="dates"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start date"}),l.jsx("input",{type:"date",value:i,onChange:I=>{const E=I.target.value;u(E),c&&E&&c<E&&m(E),v&&y(null)},disabled:f,max:c||void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End date"}),l.jsx("input",{type:"date",value:c,onChange:I=>{const E=I.target.value;m(E),i&&E&&E<i&&u(E),v&&y(null)},disabled:f,min:i||void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"})]})]}),o==="preview"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-primary-50 rounded-lg p-4",children:l.jsxs("p",{className:"text-primary-800",children:[l.jsx("span",{className:"font-semibold text-primary-900",children:g})," article",g>1?"s":""," ","sur"," ",l.jsx("span",{className:"font-semibold text-primary-900",children:S.length})," mois"]})}),l.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Monthly breakdown"})}),l.jsx("ul",{className:"divide-y divide-gray-100 max-h-48 overflow-y-auto",children:S.map(I=>l.jsxs("li",{className:"px-3 py-2 flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:I.label}),l.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs font-medium",children:I.count})]},I.key))})]})]}),o==="options"&&l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover photos"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:1,max:g,value:_||g,onChange:I=>N(parseInt(I.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-12 text-right",children:_||g})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of photos in the cover mosaic"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month divider style"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>w("full"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${x==="full"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Full mosaic"}),l.jsx("button",{onClick:()=>w("centered"),className:`flex-1 py-2.5 px-3 rounded-lg border text-sm transition-colors ${x==="centered"?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:"Centered mosaic"})]})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:I=>b(I.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Seasonal fruits & vegetables"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Decorations around month dividers"})]})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:O,onChange:I=>A(I.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-merge via GitHub Action"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Triggers the merge workflow after chunks are generated"})]})]}),O&&l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:B,onChange:I=>P(I.target.checked),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delete chunks after merge"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Remove intermediate PDF parts once the merge succeeds"})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:[l.jsx("strong",{children:g})," articles from"," ",l.jsx("strong",{children:new Date(i).toLocaleDateString("fr-FR")})," to"," ",l.jsx("strong",{children:new Date(c).toLocaleDateString("fr-FR")})]})]})]}),l.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex gap-3",children:[o==="dates"&&l.jsxs(l.Fragment,{children:[l.jsx(te,{variant:"secondary",onClick:J,fullWidth:!0,children:"Cancel"}),l.jsx(te,{onClick:me,disabled:!i||!c||f,fullWidth:!0,children:f?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Searching..."]}):"Next"})]}),o==="preview"&&l.jsxs(l.Fragment,{children:[l.jsx(te,{variant:"secondary",onClick:()=>a("dates"),fullWidth:!0,children:"Back"}),l.jsx(te,{onClick:()=>a("options"),fullWidth:!0,children:"Next"})]}),o==="options"&&l.jsxs(l.Fragment,{children:[l.jsx(te,{variant:"secondary",onClick:()=>a("preview"),fullWidth:!0,children:"Back"}),l.jsxs(te,{onClick:re,disabled:s,fullWidth:!0,children:[l.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate PDF"]})]})]})]})]}):null}const Ag=Bt;function Fg(){const{user:e}=Ag(),{profile:t}=mi(),[n,r]=p.useState([]),[s,o]=p.useState(!0),[a,i]=p.useState(null),[u,c]=p.useState(""),[m,f]=p.useState("all"),[h,v]=p.useState("created_at"),[y,S]=p.useState("desc"),[k,g]=p.useState([]),[d,x]=p.useState(!1),[w,C]=p.useState(new Set),[b,_]=p.useState(null),[N,O]=p.useState(!1),[A,B]=p.useState(!1),[P,W]=p.useState(null),[J,me]=p.useState(null),[re,I]=p.useState(new Set),[E,M]=p.useState(new Set),[T,U]=p.useState(!1),G=p.useCallback(async()=>{o(!0),i(null);try{const j=await dt.list({include_in_progress:!0});r(j.items||[]),g(j.authors||[])}catch(j){i(j instanceof Error?j.message:"Failed to load PDF list")}finally{o(!1)}},[]);p.useEffect(()=>{G()},[G]);const[ve,ye]=p.useState(new Map),{setLastCompletedJob:Ce}=pi(),ie=n.filter(j=>j.status==="PENDING"||j.status==="RUNNING"),De=n.filter(j=>j.status==="DONE"||j.status==="ERROR"||j.status==="CANCELLED");p.useEffect(()=>{if(ie.length===0)return;const j=setInterval(async()=>{const R=await Promise.all(ie.map(async V=>{try{return{...await dt.status(V.job_id),job_id:V.job_id}}catch{return null}}));r(V=>V.map(we=>{const se=R.find(zn=>zn&&zn.job_id===we.job_id);return se?{...we,status:se.status,progress:se.progress,progress_message:se.progress_message,pdf_url:se.pdf_url,pdf_file_id:se.pdf_file_id,error_message:se.error_message}:we}))},2e3);return()=>clearInterval(j)},[ie.length]),p.useEffect(()=>{const j=new Map(n.map(R=>[R.job_id,R.status]));for(const[R,V]of ve){const we=j.get(R);if((V==="PENDING"||V==="RUNNING")&&we==="DONE"){const se=n.find(zn=>zn.job_id===R);se&&Ce(se)}}ye(j)},[n,ve,Ce]);const jt=j=>{if(!j)return 0;const R=new Date(j);return isNaN(R.getTime())?0:R.getTime()},et=De.filter(j=>!u||j.created_by===u).filter(j=>m==="merged"?!!j.pdf_url:m==="pending"?j.status==="DONE"&&!j.pdf_url:!0).sort((j,R)=>{let V=0;return h==="created_at"?V=jt(j.created_at)-jt(R.created_at):h==="date_from"?V=jt(j.date_from)-jt(R.date_from):h==="created_by"&&(V=(j.created_by||"").localeCompare(R.created_by||"")),y==="desc"?-V:V}),pn=j=>{try{return new Date(j).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return j}},Wt=(j,R)=>{try{const V=new Date(j),we=new Date(R),se={day:"2-digit",month:"short",year:"numeric"};return`${V.toLocaleDateString("fr-FR",se)}  ${we.toLocaleDateString("fr-FR",se)}`}catch{return`${j}  ${R}`}},St=j=>{const R=(j.progress_message||"").toLowerCase();return j.status!=="RUNNING"?!1:j.chunks_folder_id&&!j.pdf_url?!0:R.includes("merge")},pe=p.useCallback((j,R)=>{var we;return R||(j?e!=null&&e.email&&(t!=null&&t.pseudo)&&j===e.email?t.pseudo:((we=n.find(se=>se.created_by===j))==null?void 0:we.created_by_pseudo)||j.split("@")[0]:"Unknown")},[n,t==null?void 0:t.pseudo,e==null?void 0:e.email]),gn=j=>{const R=new Set(w);R.has(j)?R.delete(j):R.add(j),C(R)},gr=()=>{w.size===et.length?C(new Set):C(new Set(et.map(j=>j.job_id)))},Mn=async()=>{if(b){B(!0);try{await dt.delete(b),r(j=>j.filter(R=>R.job_id!==b)),_(null)}catch(j){i(j instanceof Error?j.message:"Failed to delete PDF")}finally{B(!1)}}},Pt=async()=>{if(w.size!==0){B(!0);try{for(const j of w)await dt.delete(j);r(j=>j.filter(R=>!w.has(R.job_id))),C(new Set),x(!1),O(!1)}catch(j){i(j instanceof Error?j.message:"Failed to delete PDFs")}finally{B(!1)}}},$=j=>{U(!1),j&&(r(R=>{const V=R.findIndex(se=>se.job_id===j.job_id);if(V===-1)return[j,...R];const we=[...R];return we[V]={...we[V],...j},we}),g(R=>j.created_by&&!R.includes(j.created_by)?[...R,j.created_by]:R))},H=async j=>{me(j);try{await dt.cancel(j),r(R=>R.filter(V=>V.job_id!==j))}catch(R){i(R instanceof Error?R.message:"Failed to cancel PDF generation")}finally{me(null)}},Y=j=>{if(!j)return"The PDF will be permanently deleted from Google Drive.";const R=n.find(V=>V.job_id===j);return R?R.chunks_folder_id?"The merged PDF, the chunks folder, and all temporary files will be permanently deleted from Google Drive.":"The merged PDF will be permanently deleted from Google Drive.":"The PDF will be permanently deleted from Google Drive."},ge=async j=>{me(j);try{await dt.cancelMerge(j),r(R=>R.map(V=>V.job_id!==j?V:{...V,status:"ERROR",progress:0,progress_message:"Merge failed",error_message:"Merge failed"}))}catch(R){i(R instanceof Error?R.message:"Failed to cancel merge")}finally{me(null)}},Ue=async j=>{I(R=>new Set(R).add(j));try{await dt.triggerMerge(j),r(R=>R.map(V=>V.job_id!==j?V:{...V,status:"RUNNING",progress:10,progress_message:"Merge queued",error_message:void 0}))}catch(R){i(R instanceof Error?R.message:"Failed to trigger merge")}finally{I(R=>{const V=new Set(R);return V.delete(j),V})}},Lt=async j=>{M(R=>new Set(R).add(j));try{await dt.cleanupMerge(j),r(R=>R.map(V=>V.job_id!==j?V:{...V,chunks_folder_id:void 0,chunks_folder_url:void 0,progress_message:"Chunks cleaned"}))}catch(R){i(R instanceof Error?R.message:"Failed to clean chunks")}finally{M(R=>{const V=new Set(R);return V.delete(j),V})}},it=async()=>{P&&(await Lt(P),W(null))};return l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-14 z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d?`${w.size} selected`:"Generated PDFs"}),!d&&l.jsx("span",{className:"text-xs font-semibold text-gray-600 bg-gray-100 border border-gray-200 rounded-full px-2.5 py-1",children:et.length}),l.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[d&&l.jsx("button",{onClick:gr,className:"text-primary-600 hover:text-primary-700 touch-manipulation text-sm font-medium",children:w.size===et.length?"Deselect all":"Select all"}),et.length>0&&l.jsx(Uf,{checked:d,onChange:j=>{x(j),j||C(new Set)},label:"Select"})]})]}),l.jsx("div",{className:"flex items-center gap-2 mt-3 h-11 overflow-x-auto",children:d?l.jsx("span",{className:"text-sm text-gray-500",children:"Select PDFs to delete"}):l.jsxs(l.Fragment,{children:[k.length>1&&l.jsxs("select",{value:u,onChange:j=>c(j.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[l.jsx("option",{value:"",children:"Author"}),k.map(j=>l.jsx("option",{value:j,children:pe(j)},j))]}),l.jsxs("select",{value:m,onChange:j=>f(j.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 max-w-32 truncate",children:[l.jsx("option",{value:"all",children:"All PDFs"}),l.jsx("option",{value:"merged",children:"Merged"}),l.jsx("option",{value:"pending",children:"Merge pending"})]}),l.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden text-xs",children:[l.jsxs("button",{onClick:()=>{h==="created_at"?S(y==="desc"?"asc":"desc"):(v("created_at"),S("desc"))},className:`px-3 py-2.5 font-medium transition-colors flex items-center gap-1 ${h==="created_at"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Created",h==="created_at"&&l.jsx("span",{className:"text-[10px]",children:y==="desc"?"":""})]}),l.jsxs("button",{onClick:()=>{h==="date_from"?S(y==="desc"?"asc":"desc"):(v("date_from"),S("desc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${h==="date_from"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Period",h==="date_from"&&l.jsx("span",{className:"text-[10px]",children:y==="desc"?"":""})]}),l.jsxs("button",{onClick:()=>{h==="created_by"?S(y==="desc"?"asc":"desc"):(v("created_by"),S("asc"))},className:`px-3 py-2.5 font-medium border-l border-gray-300 transition-colors flex items-center gap-1 ${h==="created_by"?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["Author",h==="created_by"&&l.jsx("span",{className:"text-[10px]",children:y==="desc"?"":""})]})]})]})})]}),a&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[a,l.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-500 hover:text-red-700",children:""})]}),l.jsx("div",{className:"flex-1 p-4 pb-24",children:s?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(ht,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading PDFs..."})]})}):ie.length===0&&et.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("p",{className:"text-gray-500 mb-2",children:"No PDFs generated"})]}):l.jsxs(l.Fragment,{children:[ie.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generating"}),l.jsx("div",{className:"space-y-3",children:ie.map(j=>l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:l.jsxs("svg",{className:"w-5 h-5 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-gray-900",children:Wt(j.date_from,j.date_to)}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("div",{className:"flex-1 h-1.5 bg-blue-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:`${j.progress||0}%`}})}),l.jsxs("span",{className:"text-xs text-blue-600 font-medium w-8",children:[j.progress||0,"%"]})]}),l.jsx("p",{className:"text-xs text-blue-500 mt-0.5",children:j.progress_message||"Pending..."}),l.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",pe(j.created_by,j.created_by_pseudo)]}),j.chunks_folder_url&&l.jsx("a",{href:j.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:R=>R.stopPropagation(),children:"PDF parts folder"})]}),l.jsx("button",{onClick:()=>St(j)?ge(j.job_id):H(j.job_id),disabled:J===j.job_id,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:St(j)?"Cancel merge":"Cancel",children:J===j.job_id?l.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})},j.job_id))})]}),et.length>0&&l.jsxs("div",{children:[ie.length>0&&l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Generated"}),l.jsx("div",{className:"space-y-3",children:et.map(j=>l.jsx("div",{onClick:()=>d&&gn(j.job_id),className:`bg-white rounded-lg shadow-sm border transition-colors ${d?w.has(j.job_id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300":"border-gray-200"} p-4 ${d?"cursor-pointer":""}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[d&&l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${w.has(j.job_id)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:w.has(j.job_id)&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-medium text-gray-900",children:Wt(j.date_from,j.date_to)}),j.pdf_url&&l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded",children:"Merged"}),!j.pdf_url&&j.status==="DONE"&&l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-50 text-yellow-700 rounded",children:"Merge pending"}),j.status==="ERROR"&&l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded",children:"Error"}),j.status==="CANCELLED"&&l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded",children:"Cancelled"})]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Created on ",pn(j.created_at)]}),j.status==="ERROR"&&l.jsx("p",{className:"text-xs text-red-500 mt-0.5 truncate",title:j.error_message||"Merge failed",children:j.error_message||"Merge failed"}),j.status==="DONE"&&!j.pdf_url&&j.progress_message&&l.jsx("p",{className:"text-xs text-amber-600 mt-0.5 truncate",title:j.progress_message,children:j.progress_message}),l.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["by ",pe(j.created_by,j.created_by_pseudo)]}),j.chunks_folder_url&&l.jsx("a",{href:j.chunks_folder_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 mt-0.5 inline-flex",onClick:R=>R.stopPropagation(),children:"PDF parts folder"})]}),!d&&l.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[j.pdf_url&&l.jsx("a",{href:j.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Voir le PDF",onClick:R=>R.stopPropagation(),children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),j.pdf_url&&j.chunks_folder_id&&l.jsx("button",{onClick:R=>{R.stopPropagation(),W(j.job_id)},className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors disabled:opacity-50",title:"Clean chunks",disabled:E.has(j.job_id),children:E.has(j.job_id)?l.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M3 6h18M8 6V4h8v2M6 6l1 14h10l1-14M10 10v6M14 10v6"})})}),!j.pdf_url&&(j.status==="DONE"||j.status==="ERROR")&&j.chunks_folder_id&&l.jsx("button",{onClick:R=>{R.stopPropagation(),Ue(j.job_id)},className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50",title:"Trigger merge",disabled:re.has(j.job_id),children:re.has(j.job_id)?l.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),l.jsx("button",{onClick:R=>{R.stopPropagation(),_(j.job_id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},j.job_id))})]})]})}),d&&w.size>0&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 z-50 shadow-lg",children:l.jsxs("div",{className:"max-w-content mx-auto flex items-center justify-between gap-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[w.size," PDF",w.size>1?"s":""," selected"]}),l.jsx("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Delete"})]})}),!d&&l.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-30",children:l.jsx("div",{className:"max-w-content mx-auto px-4 flex justify-end",children:l.jsx(Af,{onClick:()=>U(!0),className:"bg-primary-600 hover:bg-primary-700 active:bg-primary-800 transition-all hover:scale-105 active:scale-95",pwaOffsetClassName:"-translate-y-3",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 4v16m8-8H4"})})})})}),l.jsx(zg,{isOpen:T,onClose:()=>U(!1),onComplete:$}),l.jsx(Ke,{isOpen:!!b,title:"Delete PDF?",message:Y(b),confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:Mn,onCancel:()=>_(null),variant:"danger",isLoading:A}),l.jsx(Ke,{isOpen:N,title:`Delete ${w.size} PDF${w.size>1?"s":""}?`,message:"Selected PDFs will be permanently deleted from Google Drive.",confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:Pt,onCancel:()=>O(!1),variant:"danger",isLoading:A}),l.jsx(Ke,{isOpen:!!P,title:"Clean chunks?",message:"This will delete the chunks folder and move the merged PDF to Rememly/pdf.",confirmLabel:"Clean",cancelLabel:"Cancel",onConfirm:it,onCancel:()=>W(null),variant:"danger",isLoading:E.has(P||"")})]})}const Ju={get:e=>Z.get("config/get",{key:e}),set:(e,t)=>Z.post("config/set",{key:e,value:t})},mo={getPdfRange:()=>Z.get("logs/pdf/range"),clearPdfRange:(e,t)=>Z.post("logs/pdf/clear",{from:e,to:t}),cleanupPdfProperties:()=>Z.post("pdf/cleanup-properties")};function Og(){const{showToast:e,setUnsavedChanges:t}=gt(),[n,r]=p.useState(""),[s,o]=p.useState(""),[a,i]=p.useState(!0),[u,c]=p.useState(!1),[m,f]=p.useState(!0),[h,v]=p.useState(null),[y,S]=p.useState(null),[k,g]=p.useState(null),[d,x]=p.useState(null),[w,C]=p.useState(!1),[b,_]=p.useState(0),[N,O]=p.useState(!1),A=n.trim()!==s.trim();p.useEffect(()=>{B(),W()},[]);const B=async()=>{try{const E=(await Ju.get("family_name")).value||"";r(E),o(E)}catch{e("Error while loading","error")}finally{i(!1)}},P=async()=>{c(!0);try{const I=n.trim();await Ju.set("family_name",I),r(I),o(I),e("Configuration saved","success")}catch{e("Error while saving","error")}finally{c(!1)}},W=async()=>{f(!0);try{const I=await mo.getPdfRange(),E=I.min?new Date(I.min).getTime():null,M=I.max?new Date(I.max).getTime():null;v(E),S(M),g(E),x(M)}catch{e("Failed to load logs range","error")}finally{f(!1)}},J=async()=>{if(k===null||d===null)return;C(!0),_(0);const I=Date.now(),E=setInterval(()=>{const M=Date.now()-I,T=Math.min(90,Math.floor(M/3e3*90));_(T)},150);try{const M=new Date(k).toISOString(),T=new Date(d).toISOString(),U=await mo.clearPdfRange(M,T);_(100),e(`Logs deleted: ${U.deleted}`,"success"),await W()}catch{e("Failed to clear logs","error")}finally{clearInterval(E),setTimeout(()=>{C(!1),_(0)},300)}},me=async()=>{O(!0);try{const I=await mo.cleanupPdfProperties();e(`Properties cleaned: ${I.deleted}, queue removed: ${I.queueRemoved}`,"success")}catch{e("Failed to cleanup properties","error")}finally{O(!1)}},re=I=>I===null?"--":new Date(I).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return p.useEffect(()=>{t(A)},[A,t]),l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[l.jsx(Tn,{}),l.jsx("div",{className:"flex-1 p-4 space-y-6 pb-32 max-w-md mx-auto w-full",children:a?l.jsx("div",{className:"flex items-center justify-center py-16",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(ht,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF cover page"}),l.jsx(nr,{label:"Family name",value:n,onChange:I=>r(I.target.value),placeholder:"e.g., Dupont family"}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Appears on the PDF cover title."})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"PDF logs"}),m?l.jsx("div",{className:"flex items-center justify-center py-6",children:l.jsx(ht,{size:"md"})}):h===null||y===null?l.jsx("p",{className:"text-sm text-gray-500",children:"No logs available."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[re(k),"  ",re(d)]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500",children:"From"}),l.jsx("input",{type:"range",min:h,max:y,value:k??h,onChange:I=>{const E=Number(I.target.value);g(E),d!==null&&E>d&&x(E)},className:"w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500",children:"To"}),l.jsx("input",{type:"range",min:h,max:y,value:d??y,onChange:I=>{const E=Number(I.target.value);x(E),k!==null&&E<k&&g(E)},className:"w-full"})]})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(te,{variant:"secondary",onClick:J,disabled:w||k===null||d===null,className:"w-full sm:w-auto",children:"Clear logs"})})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Maintenance"}),l.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Remove orphan PDF properties when jobs were deleted manually."}),l.jsx("div",{className:"flex justify-center",children:l.jsx(te,{variant:"secondary",onClick:me,disabled:N,className:"w-full sm:w-auto",children:"Clean PDF properties"})})]})]})}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-16",children:l.jsx("div",{className:"max-w-md mx-auto w-full flex justify-center",children:l.jsx(te,{onClick:P,disabled:u||a||!A,className:"w-full sm:w-auto",children:u?"Saving...":"Save"})})}),u&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[l.jsx(ht,{size:"md"}),l.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Saving..."})]})}),w&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 w-72",children:[l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(ht,{size:"md"})}),l.jsx("p",{className:"mt-3 text-sm text-gray-700 text-center",children:"Clearing logs..."}),l.jsx("div",{className:"mt-3 h-2 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary-600 transition-all",style:{width:`${b}%`}})})]})}),N&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl px-6 py-5 flex flex-col items-center",children:[l.jsx(ht,{size:"md"}),l.jsx("p",{className:"mt-3 text-sm text-gray-700",children:"Cleaning properties..."})]})})]})}function Ug(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:a}=e;let i,u,c;const m=async(h=!0)=>{await u,await(c==null?void 0:c())};async function f(){if("serviceWorker"in navigator){if(i=await Ef(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{a==null||a(h)}),!i)return;c=async()=>{await(i==null?void 0:i.messageSkipWaiting())};{let h=!1;const v=()=>{h=!0,i==null||i.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()}),n==null||n()};i.addEventListener("installed",y=>{typeof y.isUpdate>"u"?typeof y.isExternal<"u"?y.isExternal?v():!h&&(r==null||r()):y.isExternal?window.location.reload():!h&&(r==null||r()):y.isUpdate||r==null||r()}),i.addEventListener("waiting",v),i.addEventListener("externalwaiting",v)}i.register({immediate:t}).then(h=>{o?o("/sw.js",h):s==null||s(h)}).catch(h=>{a==null||a(h)})}}return u=f(),m}function $g(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:a}=e,[i,u]=p.useState(!1),[c,m]=p.useState(!1),[f]=p.useState(()=>Ug({immediate:t,onOfflineReady(){m(!0),r==null||r()},onNeedRefresh(){u(!0),n==null||n()},onRegistered:s,onRegisteredSW:o,onRegisterError:a}));return{needRefresh:[i,u],offlineReady:[c,m],updateServiceWorker:f}}function Bg(){const{needRefresh:[e],updateServiceWorker:t}=$g({onRegistered(n){console.log("SW Registered:",n),n&&setInterval(()=>{n.update()},3e4)},onRegisterError(n){console.log("SW registration error",n)}});return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:l.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-5 shadow-2xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-base font-semibold text-gray-900",children:"New version available"}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"A newer version of Rememly is ready. Update now to get the latest fixes."})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{onClick:()=>t(!0),className:"rounded-md bg-primary-600 px-5 py-2 text-sm font-semibold text-white",children:"Update"})})]})}):null}function Wg(){const{error:e,pdfUrl:t,showSuccess:n,lastCompletedJob:r,dismissSuccess:s,dismissError:o}=pi();if(!n&&!e)return null;const a=(i,u)=>{try{const c=new Date(i),m=new Date(u),f={day:"2-digit",month:"short",year:"numeric"};return`${c.toLocaleDateString("fr-FR",f)} - ${m.toLocaleDateString("fr-FR",f)}`}catch{return`${i} - ${u}`}};return l.jsxs("div",{className:"fixed bottom-20 left-4 right-4 z-50 max-w-md mx-auto",children:[n&&t&&l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 animate-slide-up",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:l.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-green-800",children:"PDF generated successfully!"}),r&&l.jsx("p",{className:"text-xs text-green-600 mt-0.5",children:a(r.date_from,r.date_to)}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[l.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View"]}),l.jsx("button",{onClick:s,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-green-700 hover:bg-green-100 rounded-lg transition-colors",children:"Close"})]})]}),l.jsx("button",{onClick:s,className:"text-green-400 hover:text-green-600",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})}),e&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 animate-slide-up",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:l.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-red-800",children:"Generation error"}),l.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:e})]}),l.jsx("button",{onClick:o,className:"text-red-400 hover:text-red-600",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]})})]})}function Vg(){const e=qe(),t=gt(i=>i.hasUnsavedChanges),n=gt(i=>i.setUnsavedChanges),r=gt(i=>i.pendingNavigationPath),s=gt(i=>i.setPendingNavigationPath),[o,a]=p.useState(!1);return p.useEffect(()=>{r&&(t?a(!0):(e(r),s(null)))},[r,t,e,s]),p.useEffect(()=>{const i=u=>{t&&(u.preventDefault(),u.returnValue="")};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[t]),l.jsx(Ke,{isOpen:o,title:"Discard changes?",message:"You have unsaved changes. Are you sure you want to leave?",confirmLabel:"Discard",cancelLabel:"Stay",onConfirm:()=>{a(!1);const i=r;n(!1),s(null),i&&e(i)},onCancel:()=>{a(!1),s(null)},variant:"danger"})}function Hg(){if(typeof window>"u")return!1;const e=window.navigator;return window.matchMedia("(display-mode: standalone)").matches||e.standalone===!0}function Gg(){return typeof window>"u"?!1:window.matchMedia?window.matchMedia("(orientation: landscape)").matches:window.innerWidth>window.innerHeight}function Qg(){const[e,t]=p.useState(!1);return p.useEffect(()=>{const n=()=>{t(Hg()&&Gg())};n();const r=window.matchMedia("(orientation: landscape)");return r.addEventListener?r.addEventListener("change",n):r.addListener(n),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),p.useEffect(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[e]),e?l.jsx("div",{className:"fixed inset-0 z-[60] bg-primary-600/95 text-white flex items-center justify-center p-6 text-center",children:l.jsxs("div",{className:"max-w-xs",children:[l.jsx("div",{className:"text-2xl font-semibold mb-3",children:"Mode paysage non support"}),l.jsx("div",{className:"text-sm text-primary-100",children:"Tourne ton cran en mode portrait pour continuer."})]})}):null}const Yg=[{label:"Articles",path:"/",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M5 6h14M5 12h14M5 18h10"})})},{label:"Stats",path:"/stats",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{label:"Famileo",path:"/famileo",icon:l.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5.5",r:"2.7"}),l.jsx("rect",{x:"10.5",y:"8.5",width:"3",height:"7.5",rx:"1.5"}),l.jsx("rect",{x:"2.5",y:"10",width:"6",height:"9.5",rx:"2"}),l.jsx("rect",{x:"15.5",y:"4",width:"6",height:"15.5",rx:"2"}),l.jsx("circle",{cx:"5.5",cy:"14.5",r:"0.9"}),l.jsx("circle",{cx:"18.5",cy:"12",r:"0.9"}),l.jsx("path",{d:"M12 15.5v4.5m0 0l-2-2m2 2l2-2",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})},{label:"PDF",path:"/pdf-export",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{label:"Profile",path:"/profile",icon:l.jsx("svg",{className:"w-8 h-8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],Kg=["/auth","/editor","/photo-assembly"];function Xg(){const e=qe(),t=pr(),n=gt(a=>a.hasUnsavedChanges),r=gt(a=>a.setPendingNavigationPath),[s,o]=p.useState(!1);return p.useEffect(()=>{const a=window.matchMedia("(display-mode: standalone)"),i=()=>{const u=window.navigator;o(a.matches||u.standalone===!0)};return i(),a.addEventListener?(a.addEventListener("change",i),()=>a.removeEventListener("change",i)):(a.addListener(i),()=>a.removeListener(i))},[]),Kg.some(a=>t.pathname.startsWith(a))?null:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:s?"h-20":"h-16","aria-hidden":"true"}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40",children:l.jsx("div",{className:"max-w-content mx-auto w-full",children:l.jsx("div",{className:"bg-primary-600 shadow-[0_10px_30px_rgba(0,0,0,0.12)]",children:l.jsx("div",{className:`flex items-center justify-between px-2 ${s?"pt-0.5 pb-6":"py-1"}`,children:Yg.map(a=>{const i=t.pathname===a.path,u=()=>{if(t.pathname!==a.path){if(n){r(a.path);return}e(a.path)}};return l.jsx("button",{onClick:u,className:`flex flex-col items-center justify-center px-3 py-1 rounded-xl transition-all ${i?"text-white":"text-primary-100 hover:text-white"}`,"aria-label":a.label,children:l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all ${i?"bg-white shadow-sm":"bg-transparent"}`,children:l.jsx("span",{className:`${i?"text-primary-700":"text-primary-100"}`,children:a.icon})})},a.path)})})})})})]})}const Jg=p.lazy(()=>Ef(()=>import("./PhotoAssemblyScreen-3RlN8mUG.js"),[]).then(e=>({default:e.PhotoAssemblyScreen})));function Zg(){return p.useEffect(()=>{var u;if(typeof window>"u")return;const e=window.navigator,t=((u=window.matchMedia)==null?void 0:u.call(window,"(display-mode: standalone)").matches)||e.standalone===!0,n=/iPad|iPhone|iPod/.test(window.navigator.userAgent);if(!t||!n)return;const r=document.createElement("div");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="0",r.style.height="env(safe-area-inset-top)",r.style.pointerEvents="none",r.style.visibility="hidden",document.body.appendChild(r);const s="safe_area_top";let o=Number(localStorage.getItem(s)||0);o>0&&document.documentElement.style.setProperty("--safe-area-top",`${o}px`);const a=()=>{var h;let m=Math.round(r.getBoundingClientRect().height);const f=((h=window.matchMedia)==null?void 0:h.call(window,"(orientation: portrait)").matches)||window.innerHeight>=window.innerWidth;if((!m||m<=0)&&f){const v=Math.round(window.screen.height-window.innerHeight);v>0&&v<200&&(m=v)}m>0&&(o=m,localStorage.setItem(s,String(o))),o>0&&document.documentElement.style.setProperty("--safe-area-top",`${o}px`)},i=()=>{requestAnimationFrame(a),setTimeout(a,300),setTimeout(a,1e3)};return i(),window.addEventListener("orientationchange",i),window.addEventListener("resize",i),()=>{window.removeEventListener("orientationchange",i),window.removeEventListener("resize",i),r.remove()}},[]),l.jsx(g0,{children:l.jsxs(w0,{children:[l.jsx(Bg,{}),l.jsx(Wg,{}),l.jsx(Vg,{}),l.jsx(Qg,{}),l.jsx("div",{className:"min-h-screen max-w-content mx-auto bg-white",children:l.jsxs(c0,{children:[l.jsx(tt,{path:"/auth",element:l.jsx(j0,{})}),l.jsx(tt,{path:"/",element:l.jsx(Dt,{children:l.jsx(ag,{})})}),l.jsx(tt,{path:"/editor",element:l.jsx(Dt,{children:l.jsx(Xu,{})})}),l.jsx(tt,{path:"/editor/:id",element:l.jsx(Dt,{children:l.jsx(Xu,{})})}),l.jsx(tt,{path:"/stats",element:l.jsx(Dt,{children:l.jsx(_g,{})})}),l.jsx(tt,{path:"/photo-assembly",element:l.jsx(Dt,{children:l.jsx(p.Suspense,{fallback:l.jsx(ms,{message:"Loading photo assembly..."}),children:l.jsx(Jg,{})})})}),l.jsx(tt,{path:"/profile",element:l.jsx(Dt,{children:l.jsx(Lg,{})})}),l.jsx(tt,{path:"/famileo",element:l.jsx(Dt,{children:l.jsx(Rg,{})})}),l.jsx(tt,{path:"/pdf-export",element:l.jsx(Dt,{children:l.jsx(Fg,{})})}),l.jsx(tt,{path:"/settings",element:l.jsx(Dt,{children:l.jsx(Og,{})})}),l.jsx(tt,{path:"*",element:l.jsx(bf,{to:"/",replace:!0})})]})}),l.jsx(Xg,{})]})})}const gi=document.getElementById("root");if(!gi)throw new Error("Root element not found");const Zu=()=>{ho.createRoot(gi).render(l.jsx(wa.StrictMode,{children:l.jsx(m0,{children:l.jsx(Zg,{})})}))},qg=e=>{gi.innerHTML=`
    <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui, -apple-system, sans-serif;color:#111;">
      <div>${e}</div>
    </div>
  `},ex=()=>{const e=localStorage.getItem("user");if(!e)return null;try{const t=JSON.parse(e);return typeof t.email=="string"?t.email:null}catch{return null}},tx=async()=>{var o,a;if(window.location.pathname==="/auth"){Zu();return}const e=ex();if(!e){window.location.replace("/auth");return}qg("Checking authentication...");const t="https://script.google.com/macros/s/AKfycbyBK-9iXQ7bXvd26EN4qCz6DT2V_Z9pniGS2qrLaBP7pqXIQ29hGtmnQj2PP2LYCPHf/exec",n=`&auth=${encodeURIComponent("Email "+e)}`,s=await(await fetch(`${t}?path=auth/check${n}`,{method:"POST"})).json();if(!(s!=null&&s.ok)){localStorage.removeItem("user");const i=((o=s==null?void 0:s.error)==null?void 0:o.message)||"Your account is not authorized to access this application.";localStorage.setItem("auth_error",i),window.location.replace("/auth");return}localStorage.setItem("user",JSON.stringify((a=s.data)==null?void 0:a.user)),Zu()};tx().catch(()=>{localStorage.removeItem("user"),localStorage.setItem("auth_error","Authentication check failed."),window.location.replace("/auth")});export{Tn as A,ls as C,Of as M,Ke as a,qe as b,rx as c,pr as d,Bt as e,Ct as f,yt as g,l as j,p as r,gt as u};
